import{B as l}from"./glazeService-vFHoEM6o.js";import{c as G,e as b,f as w,i as U,a as A,b as E,d as F}from"./glazeService-vFHoEM6o.js";import{y as c}from"./index-Beyst0Xe.js";import{G as v,x,f as P,g as I,h as L}from"./index-Beyst0Xe.js";import{describeGlazySearch as C,filterByGlazyParams as D,isGlazySearchURL as R,parseGlazySearchURL as Y}from"./glazySearch-CBQEdmqG.js";import"./umf-Bpe2KrgL.js";import"./vendor-react-D380Hx73.js";import"./vendor-state-CUnBHQ16.js";import"./vendor-router-1trnvaIQ.js";async function p(r,e=3,i=15e3){let s=null;for(let o=0;o<e;o++){o>0&&await new Promise(a=>setTimeout(a,1e3*Math.pow(2,o-1)));const n=new AbortController,t=setTimeout(()=>n.abort(),i);try{const a=await fetch(r,{signal:n.signal});if(clearTimeout(t),!a.ok)throw new Error(`HTTP ${a.status}`);return a}catch(a){clearTimeout(t),s=a,console.warn(`Fetch attempt ${o+1}/${e} failed:`,a.message)}}throw s??new Error("Fetch failed after retries")}async function h(){try{let r;return r=await(await p("/glazy-processed.json")).json(),r.map(e=>{const i={};for(const[t,a]of Object.entries(e.umf))typeof a=="number"&&a>0&&(i[t]={value:a,precision:4,state:"inferred",source:"glazy_import"});const s=[];e.imageUrls&&e.imageUrls.length>0?s.push(...e.imageUrls):e.imageUrl&&s.push(e.imageUrl);const o=e.type_id??e.subtype_id??c(e.name),n=e.transparency==="opaque"||e.transparency==="translucent"||e.transparency==="transparent"?e.transparency:e.transparency?"unknown":void 0;return{id:e.id,name:e.name,source:"glazy",sourceUrl:`https://glazy.org/recipes/${e.id.replace("glazy_","")}`,ingredients:e.ingredients.map(t=>({material:t.name,glazyMaterialId:t.id,amount:t.percentage,unit:"weight",isAdditional:t.isAdditional??t.isAddition??!1})),umf:i,coneRange:e.cone!==null?[e.cone,e.cone]:["?","?"],atmosphere:e.atmosphere||"unknown",surfaceType:e.surface,transparency:n,baseType:e.base_type_id?l[e.base_type_id]??"glaze":"glaze",baseTypeId:e.base_type_id??460,glazeTypeId:o,subtypeId:e.subtype_id??null,country:e.country,description:e.description,status:e.status==="Production"?"production":e.status==="Testing"?"testing":e.status==="Discontinued"?"discontinued":e.status==="Draft"?"draft":void 0,specificGravity:e.specific_gravity,images:s.length>0?s:void 0,notes:!n&&e.transparency?e.transparency:void 0,umfConfidence:"inferred",verified:!1,_plotX:e.x,_plotY:e.y,_imageUrl:e.thumbnailUrl||e.imageUrl}})}catch(r){throw console.error("Failed to load Glazy dataset:",r),r}}export{v as GLAZE_TYPE_BY_ID,x as GLAZE_TYPE_CATALOG,G as calculateAllUMF,c as classifyGlazeByName,C as describeGlazySearch,b as exportGlazesToJSON,D as filterByGlazyParams,w as findSimilarGlazes,P as glazeTypeColor,I as glazeTypeName,L as glazeTypeRoot,U as importGlazesFromCSV,A as importGlazesFromFile,E as importGlazesFromJSON,F as importGlazesFromXML,R as isGlazySearchURL,h as loadGlazyDataset,Y as parseGlazySearchURL};
