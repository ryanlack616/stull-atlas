const T={1:"oxidation",2:"reduction",3:"neutral"},w={1:"gloss",2:"satin",3:"matte",4:"unknown",5:"crystalline",6:"crawl"},b={1:"transparent",2:"translucent",3:"opaque"};function C(o){try{let t;if(o.startsWith("http://")||o.startsWith("https://")?t=new URL(o):o.includes("glazy.org")?t=new URL("https://"+o):t=new URL("https://glazy.org/search?"+o),!t.hostname.includes("glazy.org"))return null;const e=t.searchParams,n={},s=e.get("base_type")||e.get("base_type_id");s&&(n.baseType=parseInt(s,10));const r=e.get("type")||e.get("type_id");r&&(n.type=parseInt(r,10));const c=e.get("subtype")||e.get("subtype_id");c&&(n.subtype=parseInt(c,10));const i=e.get("cone");i&&(n.cone=i);const u=e.get("cone_from")||e.get("from_orton_cone");u&&(n.coneFrom=u);const a=e.get("cone_to")||e.get("to_orton_cone");a&&(n.coneTo=a);const f=e.get("atmosphere");f&&(n.atmosphere=parseInt(f,10));const y=e.get("surface")||e.get("surface_type");y&&(n.surfaceType=parseInt(y,10));const p=e.get("transparency")||e.get("transparency_type");p&&(n.transparency=parseInt(p,10));const h=e.get("search_words")||e.get("keywords")||e.get("q");h&&(n.keywords=h);const d=e.get("photo");return(d==="true"||d==="1")&&(n.photo=!0),n}catch{return null}}function I(o){const t=o.toLowerCase().trim();return t.includes("glazy.org/search")||t.includes("glazy.org/?")}function _(o){const t=[];if(o.baseType){const e={110:"Clay Bodies",400:"Slips",440:"Overglazes",450:"Underglazes",460:"Glazes",1180:"Refractory"};t.push(e[o.baseType]||`Base type ${o.baseType}`)}if(o.type){const e={470:"Clear",480:"White",490:"Iron/White",500:"Celadon",510:"Blue-Green",520:"Chun/Jun",530:"Tenmoku",540:"Tenmoku",550:"Saturated Iron",560:"Kaki/Tomato Red",570:"Amber/Honey",580:"Tea Dust",590:"Shino",620:"Red/Copper",635:"Red",680:"Green",750:"Blue",820:"Purple",860:"Matte",880:"Black",900:"Yellow",920:"Yellow",980:"Crystalline",1030:"Single-Fire",1040:"Wood",1050:"Salt/Soda",1060:"Ash",1080:"Slip",1100:"Majolica",1130:"Specialty",1170:"Metallic"};t.push(e[o.type]||`Type ${o.type}`)}if(o.cone){const e=o.cone.split(",");e.length===1?t.push(`Cone ${e[0]}`):t.push(`Cone ${e[0]}–${e[e.length-1]}`)}if(o.atmosphere){const e=T[o.atmosphere];e&&t.push(e.charAt(0).toUpperCase()+e.slice(1))}if(o.surfaceType){const e=w[o.surfaceType];e&&e!=="unknown"&&t.push(e.charAt(0).toUpperCase()+e.slice(1))}if(o.transparency){const e=b[o.transparency];e&&t.push(e.charAt(0).toUpperCase()+e.slice(1))}return o.keywords&&t.push(`"${o.keywords}"`),t.length>0?t.join(" · "):"All glazes"}function l(o){const t=String(o).trim();if(/^0\d+$/.test(t))return-parseInt(t.slice(1),10);const e=parseFloat(t);return isNaN(e)?0:e}function g(o){const t=l(o.coneRange[0]),e=l(o.coneRange[1]);return[Math.min(t,e),Math.max(t,e)]}function k(o,t){return o.filter(e=>{if(t.baseType!=null&&(e.baseTypeId??460)!==t.baseType)return!1;if(t.type!=null){const n=e.glazeTypeId;if(n==null||n!==t.type){if(e.subtypeId!=null&&e.subtypeId!==t.type){if(e.glazeTypeId!==t.type)return!1}else if(e.subtypeId==null)return!1}}if(t.subtype!=null&&e.subtypeId!==t.subtype)return!1;if(t.cone!=null){const n=t.cone.split(",").map(l),s=Math.min(...n),r=Math.max(...n),[c,i]=g(e);if(i<s||c>r)return!1}if(t.coneFrom!=null||t.coneTo!=null){const n=t.coneFrom!=null?l(t.coneFrom):-1/0,s=t.coneTo!=null?l(t.coneTo):1/0,[r,c]=g(e);if(c<n||r>s)return!1}if(t.atmosphere!=null){const n=T[t.atmosphere];if(n&&e.atmosphere!==n&&e.atmosphere!=="unknown")return!1}if(t.surfaceType!=null){const n=w[t.surfaceType];if(n&&n!=="unknown"&&e.surfaceType!==n)return!1}if(t.transparency!=null){const n=b[t.transparency];if(n&&e.transparency&&e.transparency!==n&&e.transparency!=="unknown")return!1}if(t.keywords){const n=t.keywords.toLowerCase();if(![e.name,e.notes,e.description].filter(Boolean).join(" ").toLowerCase().includes(n))return!1}return!(t.photo&&(!e.images||e.images.length===0))})}export{_ as describeGlazySearch,k as filterByGlazyParams,I as isGlazySearchURL,C as parseGlazySearchURL};
