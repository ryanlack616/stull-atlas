import{r as M,j as l}from"./vendor-react-D380Hx73.js";const m=[{label:"R₂O",oxides:["Li2O","Na2O","K2O"],colors:{Li2O:"#f97316",Na2O:"#ef4444",K2O:"#f59e0b"}},{label:"RO",oxides:["CaO","MgO","ZnO","BaO","SrO","PbO"],colors:{CaO:"#a3e635",MgO:"#22c55e",ZnO:"#14b8a6",BaO:"#6366f1",SrO:"#8b5cf6",PbO:"#78716c"}},{label:"R₂O₃",oxides:["Al2O3","B2O3","Fe2O3"],colors:{Al2O3:"#06b6d4",B2O3:"#3b82f6",Fe2O3:"#a855f7"}},{label:"RO₂",oxides:["SiO2","TiO2","ZrO2","SnO2"],colors:{SiO2:"#60a5fa",TiO2:"#818cf8",ZrO2:"#c084fc",SnO2:"#a78bfa"}}],F=a=>a.replace(/(\d+)/g,(r,s)=>{const h="₀₁₂₃₄₅₆₇₈₉";return[...s].map(i=>h[parseInt(i)]||i).join("")});function I({umf:a,width:r=220,height:s=24,showLabels:h=!1,compact:i=!1}){const u=i?8:s,b=u+(h?14:0),f=M.useMemo(()=>{var x;const e=[];for(const n of m)for(const t of n.oxides){const o=((x=a[t])==null?void 0:x.value)??(typeof a[t]=="number"?a[t]:0);o>.001&&e.push({oxide:t,value:o,color:n.colors[t],group:n.label})}const c=e.reduce((n,t)=>n+t.value,0);if(c===0)return[];let O=0;return e.map(n=>{const t=n.value/c*r,o={...n,x:O,w:t};return O+=t,o})},[a,r]);return f.length===0?null:l.jsxs("svg",{width:r,height:b,viewBox:`0 0 ${r} ${b}`,style:{display:"block"},"aria-label":"UMF oxide fingerprint",children:[f.map((e,c)=>l.jsxs("g",{children:[l.jsx("rect",{x:e.x,y:0,width:Math.max(e.w,.5),height:u,fill:e.color,rx:c===0||c===f.length-1?3:0,children:l.jsxs("title",{children:[F(e.oxide),": ",e.value.toFixed(3)]})}),h&&e.w>18&&l.jsx("text",{x:e.x+e.w/2,y:u+11,textAnchor:"middle",fill:"var(--text-muted, #888)",fontSize:9,fontFamily:"system-ui, sans-serif",children:F(e.oxide)})]},e.oxide)),(()=>{let e=0;const c=[];for(const O of m){const x=f.filter(n=>n.group===O.label);x.length>0&&(e=Math.max(...x.map(n=>n.x+n.w)),c.push(e))}return c.pop(),c.map((O,x)=>l.jsx("line",{x1:O,y1:0,x2:O,y2:u,stroke:"var(--bg-primary, #1a1a2e)",strokeWidth:1.5},x))})()]})}const k=[{oxide:"K2O",color:"#f59e0b",label:"K₂O"},{oxide:"Na2O",color:"#ef4444",label:"Na₂O"},{oxide:"Li2O",color:"#f97316",label:"Li₂O"},{oxide:"CaO",color:"#a3e635",label:"CaO"},{oxide:"MgO",color:"#22c55e",label:"MgO"},{oxide:"ZnO",color:"#14b8a6",label:"ZnO"},{oxide:"BaO",color:"#6366f1",label:"BaO"},{oxide:"SrO",color:"#8b5cf6",label:"SrO"},{oxide:"PbO",color:"#78716c",label:"PbO"}];function v(a,r,s,h){const i=(h-90)*Math.PI/180;return{x:a+s*Math.cos(i),y:r+s*Math.sin(i)}}function L({umf:a,size:r=64,innerRadius:s=.55,showCenter:h=!0}){const i=r/2,u=r/2,p=r/2-2,b=p*s,f=M.useMemo(()=>{var x;const e=[];for(const n of k){const t=((x=a[n.oxide])==null?void 0:x.value)??(typeof a[n.oxide]=="number"?a[n.oxide]:0);t>.001&&e.push({oxide:n.oxide,value:t,color:n.color,label:n.label})}const c=e.reduce((n,t)=>n+t.value,0);if(c===0)return[];let O=0;return e.map(n=>{const t=n.value/c*360,o={...n,startAngle:O,endAngle:O+t,pct:n.value/c*100};return O+=t,o})},[a]);return f.length===0?null:l.jsxs("svg",{width:r,height:r,viewBox:`0 0 ${r} ${r}`,style:{display:"block"},"aria-label":"Flux unity donut chart",children:[f.map((e,c)=>{if(f.length===1)return l.jsxs("g",{children:[l.jsx("circle",{cx:i,cy:u,r:p,fill:e.color,opacity:.85,children:l.jsxs("title",{children:[e.label,": ",e.value.toFixed(3)," (",e.pct.toFixed(0),"%)"]})}),l.jsx("circle",{cx:i,cy:u,r:b,fill:"var(--bg-secondary, #1a1a2e)"})]},e.oxide);v(i,u,p,e.startAngle);const O=v(i,u,p,e.endAngle),x=v(i,u,b,e.endAngle),n=v(i,u,b,e.startAngle),t=e.endAngle-e.startAngle>180?1:0,o=[`M ${v(i,u,p,e.startAngle).x} ${v(i,u,p,e.startAngle).y}`,`A ${p} ${p} 0 ${t} 1 ${O.x} ${O.y}`,`L ${x.x} ${x.y}`,`A ${b} ${b} 0 ${t} 0 ${n.x} ${n.y}`,"Z"].join(" ");return l.jsx("path",{d:o,fill:e.color,opacity:.85,stroke:"var(--bg-secondary, #1a1a2e)",strokeWidth:1,children:l.jsxs("title",{children:[e.label,": ",e.value.toFixed(3)," (",e.pct.toFixed(0),"%)"]})},e.oxide)}),h&&l.jsx("text",{x:i,y:u+1,textAnchor:"middle",dominantBaseline:"central",fill:"var(--text-muted, #888)",fontSize:r>48?9:7,fontFamily:"system-ui, sans-serif",fontWeight:600,children:"Flux"})]})}const B=["SiO2","Al2O3","B2O3","CaO","MgO","K2O","Na2O","ZnO"],R={SiO2:[0,7],Al2O3:[0,1],B2O3:[0,1],CaO:[0,.8],MgO:[0,.4],K2O:[0,.5],Na2O:[0,.5],Li2O:[0,.3],ZnO:[0,.4],BaO:[0,.3],SrO:[0,.2],Fe2O3:[0,.3],TiO2:[0,.1]},$=a=>a.replace(/(\d+)/g,(r,s)=>{const h="₀₁₂₃₄₅₆₇₈₉";return[...s].map(i=>h[parseInt(i)]||i).join("")});function g(a,r){const s=a[r];return s==null?0:typeof s=="number"?s:s.value??0}function P({umf:a,compareUmf:r,size:s=140,oxides:h=B}){const i=s/2,u=s/2,p=s/2-24,b=4,f=M.useMemo(()=>h.filter(t=>{const o=g(a,t),d=r?g(r,t):0;return o>.001||d>.001}),[a,r,h]),e=f.length;if(e<3)return null;const c=360/e,O=(t,o)=>{const d=R[t]||[0,1];return Math.min(1,Math.max(0,(o-d[0])/(d[1]-d[0])))},x=(t,o)=>({x:i+o*Math.sin(t*Math.PI/180),y:u-o*Math.cos(t*Math.PI/180)}),n=t=>f.map((o,d)=>{const y=O(o,g(t,o)),j=x(d*c,y*p);return`${j.x},${j.y}`}).join(" ");return l.jsxs("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,style:{display:"block"},"aria-label":"Oxide radar chart",children:[Array.from({length:b},(t,o)=>{const d=(o+1)/b*p,y=f.map((j,S)=>{const A=x(S*c,d);return`${A.x},${A.y}`}).join(" ");return l.jsx("polygon",{points:y,fill:"none",stroke:"var(--border-primary, #333)",strokeWidth:.5,opacity:.5},o)}),f.map((t,o)=>{const d=x(o*c,p);return l.jsx("line",{x1:i,y1:u,x2:d.x,y2:d.y,stroke:"var(--border-primary, #333)",strokeWidth:.5,opacity:.4},o)}),r&&l.jsx("polygon",{points:n(r),fill:"rgba(239, 68, 68, 0.12)",stroke:"#ef4444",strokeWidth:1.5,strokeLinejoin:"round"}),l.jsx("polygon",{points:n(a),fill:"rgba(59, 130, 246, 0.15)",stroke:"#3b82f6",strokeWidth:1.5,strokeLinejoin:"round"}),f.map((t,o)=>{const d=O(t,g(a,t)),y=x(o*c,d*p);return l.jsx("circle",{cx:y.x,cy:y.y,r:2.5,fill:"#3b82f6",children:l.jsxs("title",{children:[$(t),": ",g(a,t).toFixed(3)]})},t)}),r&&f.map((t,o)=>{const d=O(t,g(r,t)),y=x(o*c,d*p);return l.jsx("circle",{cx:y.x,cy:y.y,r:2,fill:"#ef4444",children:l.jsxs("title",{children:[$(t),": ",g(r,t).toFixed(3)]})},`c-${t}`)}),f.map((t,o)=>{const d=x(o*c,p+12);return l.jsx("text",{x:d.x,y:d.y,textAnchor:"middle",dominantBaseline:"central",fill:"var(--text-label, #aaa)",fontSize:9,fontFamily:"system-ui, sans-serif",children:$(t)},`l-${t}`)})]})}export{L as F,P as O,I as U};
