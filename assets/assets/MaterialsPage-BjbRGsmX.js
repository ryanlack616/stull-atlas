import{r as p,j as e}from"./vendor-react-D380Hx73.js";import{m as y}from"./index-CShX2zP3.js";import{u as F}from"./usePageTitle-DBGH44HI.js";import{c as A}from"./calc-styles-u5C4IXOP.js";import{lookupMaterial as z,lookupOxide as R}from"./domain-digitalfire-DfgmtSpv.js";import"./vendor-state-CUnBHQ16.js";import"./vendor-router-1trnvaIQ.js";import"./data-digitalfire-CCT-bSzB.js";const N=["SiO2","Al2O3","B2O3","Na2O","K2O","CaO","MgO","ZnO","BaO","SrO","Li2O","Fe2O3","TiO2","MnO","MnO2","P2O5","SnO2","ZrO2","CoO","CuO","Cr2O3","NiO","PbO"],v={feldspar:"Feldspars",clay:"Clays",silica:"Silica",calcium:"Calcium Sources",magnesium:"Magnesium Sources",frit:"Frits",colorant:"Colorants",opacifier:"Opacifiers",flux:"Fluxes",ash:"Ash",other:"Other"};function $(){F("Materials");const[s,u]=p.useState(""),[i,d]=p.useState("all"),[h,n]=p.useState(null),[t,l]=p.useState("name"),[x,c]=p.useState(new Set),[m,b]=p.useState(!1),g=p.useMemo(()=>y.getAllMaterials(),[]),S=p.useMemo(()=>{const r={all:g.length};for(const a of g)r[a.category]=(r[a.category]||0)+1;return r},[g]),k=p.useMemo(()=>{let r=g;if(i!=="all"&&(r=r.filter(a=>a.category===i)),s.trim()){const a=s.toLowerCase();r=r.filter(o=>o.primaryName.toLowerCase().includes(a)||o.aliases.some(O=>O.toLowerCase().includes(a))||o.category.toLowerCase().includes(a))}return t==="name"?r=[...r].sort((a,o)=>a.primaryName.localeCompare(o.primaryName)):r=[...r].sort((a,o)=>a.category.localeCompare(o.category)||a.primaryName.localeCompare(o.primaryName)),r},[g,s,i,t]),M=r=>y.getAnalysis(r.id),w=r=>{c(a=>{const o=new Set(a);return o.has(r)?o.delete(r):o.add(r),o})};return e.jsxs("div",{className:"calc-page",children:[e.jsxs("div",{className:"calc-sidebar",children:[e.jsxs("div",{className:"calc-section",children:[e.jsx("h2",{children:"Materials"}),e.jsxs("p",{className:"subtitle",children:[g.length," materials from Digitalfire database"]})]}),e.jsx("div",{className:"calc-section",children:e.jsx("input",{type:"text",placeholder:"Search materials...",value:s,onChange:r=>u(r.target.value),style:{width:"100%",padding:"10px 12px",background:"var(--bg-input)",border:"1px solid var(--border-secondary)",borderRadius:6,color:"var(--text-bright)",fontSize:14,boxSizing:"border-box"}})}),e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Category"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs("button",{onClick:()=>d("all"),style:f(i==="all"),children:["All ",e.jsxs("span",{style:{color:"var(--text-muted)"},children:["(",S.all,")"]})]}),Object.keys(v).map(r=>e.jsxs("button",{onClick:()=>d(r),style:f(i===r),children:[v[r]," ",e.jsxs("span",{style:{color:"var(--text-muted)"},children:["(",S[r]||0,")"]})]},r))]})]}),e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Sort"}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>l("name"),style:f(t==="name"),children:"Name"}),e.jsx("button",{onClick:()=>l("category"),style:f(t==="category"),children:"Category"})]})]}),x.size>=2&&e.jsxs("div",{className:"calc-section",children:[e.jsxs("button",{onClick:()=>b(!0),style:{width:"100%",padding:"10px",background:"var(--accent)",border:"none",borderRadius:6,color:"#fff",fontWeight:600,cursor:"pointer",fontSize:13},children:["Compare ",x.size," Materials"]}),e.jsx("button",{onClick:()=>c(new Set),style:{width:"100%",padding:"6px",background:"transparent",border:"1px solid var(--border-secondary)",borderRadius:6,color:"var(--text-muted)",cursor:"pointer",fontSize:11,marginTop:4},children:"Clear Selection"})]})]}),e.jsxs("div",{className:"calc-main",children:[m&&x.size>=2?e.jsx(T,{materialIds:Array.from(x),onClose:()=>b(!1)}):h?e.jsx(B,{material:h,onClose:()=>n(null)}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"results-panel",children:[e.jsx("div",{className:"results-header",children:e.jsxs("h3",{children:[k.length," materials"]})}),e.jsx("div",{className:"results-scroll",style:{maxHeight:"calc(100vh - 220px)",overflowX:"auto"},children:e.jsxs("table",{className:"results-table",style:{minWidth:700},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Material"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"SiOâ‚‚"}),e.jsx("th",{children:"Alâ‚‚Oâ‚ƒ"}),e.jsx("th",{children:"CaO"}),e.jsx("th",{children:"Naâ‚‚O"}),e.jsx("th",{children:"Kâ‚‚O"}),e.jsx("th",{children:"MgO"}),e.jsx("th",{children:"LOI"})]})}),e.jsx("tbody",{children:k.map(r=>{const a=M(r),o=y.getLoi(r.id);return e.jsxs("tr",{onClick:()=>n(r),style:{cursor:"pointer",opacity:r.discontinued?.6:1},children:[e.jsx("td",{onClick:O=>O.stopPropagation(),style:{textAlign:"center"},children:e.jsx("input",{type:"checkbox",checked:x.has(r.id),onChange:()=>w(r.id),"aria-label":`Compare ${r.primaryName}`,style:{cursor:"pointer",accentColor:"var(--accent)"}})}),e.jsxs("td",{style:{color:"var(--text-bright)",fontFamily:"inherit",fontWeight:500},children:[r.primaryName,r.discontinued&&e.jsx("span",{style:{marginLeft:6,padding:"1px 5px",background:"var(--accent-bg)",borderRadius:3,fontSize:10,color:"var(--text-muted)"},children:"discontinued"})]}),e.jsx("td",{style:{color:"var(--text-secondary)",fontFamily:"inherit"},children:v[r.category]||r.category}),e.jsx("td",{children:j(a,"SiO2")}),e.jsx("td",{children:j(a,"Al2O3")}),e.jsx("td",{children:j(a,"CaO")}),e.jsx("td",{children:j(a,"Na2O")}),e.jsx("td",{children:j(a,"K2O")}),e.jsx("td",{children:j(a,"MgO")}),e.jsx("td",{style:{color:"var(--text-muted)"},children:o!==null?o.toFixed(1):"â€”"})]},r.id)})})]})})]})}),e.jsxs("div",{style:{marginTop:"auto",padding:"16px 20px",borderTop:"1px solid var(--border-secondary)",fontSize:12,color:"var(--text-muted)",lineHeight:1.6},children:["Material oxide analyses sourced from"," ",e.jsx("a",{href:"https://digitalfire.com",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text-link)",textDecoration:"none"},children:"Digitalfire"}),", created and maintained by Tony Hansen. Thank you, Tony, for decades of invaluable ceramic encyclopedic work that the entire pottery community depends on."]})]}),e.jsx("style",{children:A})]})}function T({materialIds:s,onClose:u}){const i=s.map(t=>y.getMaterial(t)).filter(t=>t!==null),d=i.map(t=>y.getAnalysis(t.id)),h=N.filter(t=>d.some(l=>l&&l[t]>.01)),n={};for(const t of h)n[t]=Math.max(...d.map(l=>l?l[t]??0:0));return e.jsxs("div",{children:[e.jsx("button",{onClick:u,style:{background:"var(--bg-input)",border:"1px solid var(--border-secondary)",borderRadius:6,color:"var(--text-label)",padding:"6px 14px",cursor:"pointer",marginBottom:16},children:"â† Back to list"}),e.jsxs("div",{className:"results-panel",children:[e.jsx("div",{className:"results-header",children:e.jsxs("h3",{children:["Comparing ",i.length," Materials"]})}),e.jsx("div",{className:"results-scroll",style:{maxHeight:"calc(100vh - 220px)"},children:e.jsxs("table",{className:"results-table",style:{fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{position:"sticky",left:0,background:"var(--bg-elevated)",zIndex:1},children:"Oxide"}),i.map(t=>e.jsxs("th",{style:{textAlign:"right",whiteSpace:"nowrap"},children:[t.primaryName,t.discontinued&&e.jsx("span",{style:{display:"block",fontSize:9,color:"var(--text-muted)"},children:"discontinued"})]},t.id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-secondary)"},children:[e.jsx("td",{style:{fontWeight:600,color:"var(--text-secondary)",position:"sticky",left:0,background:"var(--bg-elevated)"},children:"Category"}),i.map(t=>e.jsx("td",{style:{textAlign:"right",color:"var(--text-secondary)"},children:v[t.category]||t.category},t.id))]}),h.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{style:{fontWeight:500,position:"sticky",left:0,background:"var(--bg-elevated)"},children:[e.jsx("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:C(t),marginRight:6}}),t]}),d.map((l,x)=>{const c=l?l[t]??0:0,m=c>.01&&c===n[t]&&i.length>1;return e.jsx("td",{style:{textAlign:"right",fontFamily:"'SF Mono', 'Fira Code', monospace",fontWeight:m?700:400,color:m?"var(--text-bright)":c>.01?"var(--text-primary)":"var(--text-muted)"},children:c>.01?c.toFixed(2):"â€”"},i[x].id)})]},t)),e.jsxs("tr",{style:{borderTop:"2px solid var(--border-secondary)"},children:[e.jsx("td",{style:{fontWeight:500,color:"var(--text-muted)",position:"sticky",left:0,background:"var(--bg-elevated)"},children:"LOI"}),i.map(t=>{const l=y.getLoi(t.id);return e.jsx("td",{style:{textAlign:"right",fontFamily:"'SF Mono', 'Fira Code', monospace",color:"var(--text-muted)"},children:l!==null?l.toFixed(2):"â€”"},t.id)})]}),e.jsxs("tr",{style:{borderTop:"1px solid var(--border-secondary)"},children:[e.jsx("td",{style:{fontWeight:600,position:"sticky",left:0,background:"var(--bg-elevated)"},children:"Total"}),d.map((t,l)=>{const x=y.getLoi(i[l].id)??0,m=(t?Object.values(t).reduce((b,g)=>b+g,0):0)+x;return e.jsxs("td",{style:{textAlign:"right",fontFamily:"'SF Mono', 'Fira Code', monospace",fontWeight:600,color:Math.abs(m-100)<1?"var(--text-secondary)":"#e67e22"},children:[m.toFixed(1),"%"]},i[l].id)})]})]})]})})]}),e.jsxs("div",{className:"results-panel",style:{marginTop:16},children:[e.jsx("div",{className:"results-header",children:e.jsx("h3",{children:"Visual Comparison"})}),e.jsx("div",{style:{padding:16},children:h.filter(t=>n[t]>1).map(t=>e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-secondary)",marginBottom:4},children:t}),i.map((l,x)=>{const c=d[x]?d[x][t]??0:0;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:2},children:[e.jsx("span",{style:{fontSize:10,color:"var(--text-muted)",width:90,textAlign:"right",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.primaryName}),e.jsx("div",{style:{flex:1,height:10,background:"var(--bg-tertiary)",borderRadius:5,overflow:"hidden"},children:e.jsx("div",{style:{width:`${n[t]>0?c/n[t]*100:0}%`,height:"100%",background:C(t),borderRadius:5,transition:"width 0.3s ease"}})}),e.jsx("span",{style:{fontSize:10,fontFamily:"'SF Mono', 'Fira Code', monospace",color:"var(--text-label)",width:40},children:c>.01?c.toFixed(1):"â€”"})]},l.id)})]},t))})]})]})}function B({material:s,onClose:u}){const i=y.getAnalysis(s.id),d=y.getLoi(s.id),h=z(s.primaryName);return e.jsxs("div",{children:[e.jsx("button",{onClick:u,style:{background:"var(--bg-input)",border:"1px solid var(--border-secondary)",borderRadius:6,color:"var(--text-label)",padding:"6px 14px",cursor:"pointer",marginBottom:16},children:"â† Back to list"}),e.jsxs("div",{className:"results-panel",style:{marginBottom:16},children:[e.jsxs("div",{className:"results-header",children:[e.jsxs("h3",{children:[s.primaryName,s.discontinued&&e.jsx("span",{style:{marginLeft:8,padding:"2px 8px",background:"#7f1d1d",borderRadius:4,fontSize:11,color:"#fca5a5"},children:"Discontinued"})]}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:12},children:s.category})]}),e.jsxs("div",{style:{padding:16},children:[s.aliases.length>0&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)",textTransform:"uppercase",marginBottom:6},children:"Also known as"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:s.aliases.map(n=>e.jsx("span",{style:{padding:"3px 8px",background:"var(--bg-input)",borderRadius:4,fontSize:12,color:"var(--text-label)"},children:n},n))})]}),h&&e.jsxs("div",{style:{marginTop:8,padding:"10px 14px",background:"var(--bg-tertiary)",borderRadius:8,border:"1px solid var(--border-subtle)"},children:[e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text-link)",textDecoration:"none",fontWeight:600,fontSize:13},children:"ðŸ“– View on Digitalfire Reference Library â†—"}),h.excerpt&&e.jsxs("p",{style:{margin:"6px 0 0",fontSize:12,color:"var(--text-secondary)",lineHeight:1.4},children:[h.excerpt.slice(0,200),h.excerpt.length>200?"...":""]}),e.jsx("div",{style:{fontSize:10,color:"var(--text-dim)",marginTop:6},children:"Source: Tony Hansen, digitalfire.com"})]})]})]}),i&&e.jsxs("div",{className:"results-panel",children:[e.jsx("div",{className:"results-header",children:e.jsx("h3",{children:"Oxide Analysis (wt%)"})}),e.jsx("div",{style:{padding:"0 16px 16px"},children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Oxide"}),e.jsx("th",{children:"Weight %"}),e.jsx("th",{children:"Bar"})]})}),e.jsxs("tbody",{children:[N.map(n=>{const t=i[n];if(!t||t<.01)return null;const l=R(n);return e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"inherit"},children:l?e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text-link)",textDecoration:"none"},title:`Learn about ${n} on Digitalfire`,children:n}):n}),e.jsx("td",{children:t.toFixed(2)}),e.jsx("td",{style:{width:"50%"},children:e.jsx("div",{style:{width:`${Math.min(t,100)}%`,height:8,background:C(n),borderRadius:4,minWidth:2}})})]},n)}),d!==null&&d>0&&e.jsxs("tr",{style:{borderTop:"1px solid var(--border-secondary)"},children:[e.jsx("td",{style:{fontFamily:"inherit",color:"var(--text-muted)"},children:"LOI"}),e.jsx("td",{style:{color:"var(--text-muted)"},children:d.toFixed(2)}),e.jsx("td",{style:{width:"50%"},children:e.jsx("div",{style:{width:`${Math.min(d,100)}%`,height:8,background:"#555",borderRadius:4,minWidth:2}})})]})]})]})})]})]})}function j(s,u){if(!s)return"â€”";const i=s[u];return!i||i<.01?"â€”":i.toFixed(1)}function C(s){return{SiO2:"#3498db",Al2O3:"#2ecc71",B2O3:"#9b59b6",Na2O:"#e74c3c",K2O:"#e67e22",CaO:"#f1c40f",MgO:"#1abc9c",ZnO:"#95a5a6",BaO:"#e91e63",Fe2O3:"#795548",TiO2:"#607d8b",Li2O:"#ff9800",SrO:"#00bcd4",MnO:"#8bc34a",MnO2:"#689f38",P2O5:"#ff5722",SnO2:"#cddc39",ZrO2:"#009688",CoO:"#3f51b5",CuO:"#00897b",Cu2O:"#26a69a",Cr2O3:"#43a047",NiO:"#78909c",PbO:"#8d6e63"}[s]||"#666"}function f(s){return{padding:"6px 10px",background:s?"var(--accent-bg)":"transparent",border:s?"1px solid var(--accent)":"1px solid transparent",borderRadius:4,color:s?"var(--text-bright)":"var(--text-secondary)",fontSize:12,cursor:"pointer",textAlign:"left"}}export{$ as MaterialsPage,$ as default};
