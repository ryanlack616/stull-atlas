const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-ciw763aw.js","assets/glazeService-D-m3Bc_x.js","assets/umf-Bef8OHIG.js","assets/index-DFhyK2mv.js","assets/vendor-react-D0vdeqNS.js","assets/vendor-state-DTYbmM1J.js","assets/vendor-router-DjLFn5nj.js","assets/index-JM3wRy89.css","assets/glazySearch-CBQEdmqG.js","assets/export-BXZ-GFcd.js"])))=>i.map(i=>d[i]);
import{b as u,u as C,_ as f}from"./index-DFhyK2mv.js";import{r as h,j as e}from"./vendor-react-D0vdeqNS.js";import{u as w}from"./usePageTitle-Dfez-EUD.js";import{c as _}from"./calc-styles-u5C4IXOP.js";import"./vendor-state-DTYbmM1J.js";import"./vendor-router-DjLFn5nj.js";let v=null;function j(){return v||(v=f(()=>import("./index-ciw763aw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).catch(o=>{throw v=null,o})),v}function T(){const o=u(a=>a.loadGlazes),x=u(a=>a.getGlazesArray),i=u(a=>a.stats),d=C(a=>a.recipes),[y,t]=h.useState(null),n=h.useRef(null),g=h.useCallback(async a=>{const l=await a.text(),r=[];let s=[];try{const c=await j();if(s=c.importGlazesFromFile(l,a.name),s.length===0)r.push("No valid glazes found in file");else{const S=c.calculateAllUMF(s);o(S)}}catch(c){r.push(c.message||"Failed to parse file")}t({count:s.length,errors:r})},[o]),m=h.useCallback(async a=>{try{const l=await j(),r=l.importGlazesFromJSON(a);if(r.length>0){const s=l.calculateAllUMF(r);o(s),t({count:r.length,errors:[]})}else t({count:0,errors:["No valid glazes found"]})}catch(l){t({count:0,errors:[l.message]})}},[o]),p=h.useCallback(async()=>{const a=await j(),l=x(),r=a.exportGlazesToJSON(l);G(r,"stull-atlas-glazes.json","application/json")},[x]),b=h.useCallback(async()=>{const l=(await j()).exportGlazesToJSON(d);G(l,"stull-atlas-saved-recipes.json","application/json")},[d]);return{importResult:y,importFromFile:g,importFromJSON:m,exportAllGlazes:p,exportSavedRecipes:b,fileInputRef:n,stats:i,recipes:d}}function G(o,x,i){const d=new Blob([o],{type:i}),y=URL.createObjectURL(d),t=document.createElement("a");t.href=y,t.download=x,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(y)}function V(){w("Import / Export");const{importResult:o,importFromFile:x,importFromJSON:i,exportAllGlazes:d,exportSavedRecipes:y,fileInputRef:t,stats:n,recipes:g}=T(),{clearAll:m}=C(),[p,b]=h.useState("import"),a=h.useCallback(async r=>{var c;const s=(c=r.target.files)==null?void 0:c[0];s&&(await x(s),t.current&&(t.current.value=""))},[x,t]),l=h.useCallback(async r=>{await i(r)},[i]);return e.jsxs("div",{className:"calc-page",children:[e.jsxs("div",{className:"calc-sidebar",children:[e.jsxs("div",{className:"calc-section",children:[e.jsx("h2",{children:"Import / Export"}),e.jsx("p",{className:"subtitle",children:"Load your own glazes or save your work"})]}),e.jsx("div",{style:{display:"flex",gap:2,marginBottom:16},children:["import","glazy","export","saved"].map(r=>e.jsx("button",{onClick:()=>b(r),style:{flex:1,padding:"8px 12px",background:p===r?"var(--accent-bg)":"var(--bg-input)",border:`1px solid ${p===r?"var(--accent)":"var(--border-secondary)"}`,borderRadius:4,color:p===r?"var(--text-bright)":"var(--text-secondary)",fontSize:12,cursor:"pointer",textTransform:"capitalize"},children:r==="glazy"?"Glazy":r},r))}),p==="import"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Import from File"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 12px"},children:"Accepts JSON, CSV, or Insight XML files with glaze recipes. Glazy CSV format is auto-detected."}),e.jsx("input",{ref:t,type:"file",accept:".json,.csv,.xml",onChange:a,style:{display:"none"}}),e.jsx("button",{className:"calc-button",onClick:()=>{var r;return(r=t.current)==null?void 0:r.click()},children:"Choose File..."})]}),e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Paste JSON"}),e.jsx("textarea",{placeholder:'{"glazes": [{"name": "...", "ingredients": [...]}]}',style:{width:"100%",height:120,padding:10,background:"var(--bg-tertiary)",border:"1px solid var(--border-secondary)",borderRadius:6,color:"var(--text-label)",fontSize:12,fontFamily:"'SF Mono', monospace",resize:"vertical",boxSizing:"border-box"},onKeyDown:r=>{r.key==="Enter"&&(r.ctrlKey||r.metaKey)&&l(r.target.value)}}),e.jsx("p",{style:{fontSize:11,color:"var(--text-dim)",margin:"4px 0 0"},children:"Ctrl+Enter to import"})]}),o&&e.jsxs("div",{className:"calc-section",style:{padding:"12px 16px",background:o.errors.length>0?"#2a1515":"#152a15",border:`1px solid ${o.errors.length>0?"#551515":"#155515"}`,borderRadius:8},children:[o.count>0&&e.jsxs("p",{style:{color:"#4caf50",fontSize:13,margin:"0 0 4px"},children:["‚úì Imported ",o.count," glazes"]}),o.errors.map((r,s)=>e.jsxs("p",{style:{color:"#e74c3c",fontSize:13,margin:"2px 0"},children:["‚õî ",r]},s))]})]}),p==="glazy"&&e.jsx(E,{fileInputRef:t,handleFileImport:a,importResult:o}),p==="export"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Export All Glazes"}),e.jsxs("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 12px"},children:[n.total.toLocaleString()," glazes currently loaded"]}),e.jsx("button",{className:"calc-button",onClick:d,disabled:n.total===0,children:"Export as JSON"})]}),e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Glazy-Compatible Export"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 12px"},children:"Export in Glazy-compatible format for use in other tools"}),e.jsx("button",{className:"calc-button",disabled:n.total===0,onClick:async()=>{const{exportGlazyCSV:r}=await f(async()=>{const{exportGlazyCSV:c}=await import("./export-BXZ-GFcd.js");return{exportGlazyCSV:c}},__vite__mapDeps([9,3,4,5,6,7,2])),s=u.getState().getGlazesArray();r(s,"stull-atlas-glazes-glazy.csv")},children:"Export Glazy CSV"}),e.jsx("button",{className:"calc-button",style:{marginTop:4},disabled:n.total===0,onClick:async()=>{const{exportGlazyJSON:r}=await f(async()=>{const{exportGlazyJSON:c}=await import("./export-BXZ-GFcd.js");return{exportGlazyJSON:c}},__vite__mapDeps([9,3,4,5,6,7,2])),s=u.getState().getGlazesArray();r(s,"stull-atlas-glazes-glazy.json")},children:"Export Glazy JSON"})]})]}),p==="saved"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Saved Recipes"}),e.jsxs("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 12px"},children:[g.length," recipes saved locally"]}),e.jsx("button",{className:"calc-button",onClick:y,disabled:g.length===0,children:"Export Saved Recipes"}),g.length>0&&e.jsx("button",{className:"calc-button",onClick:()=>{confirm("Delete all saved recipes?")&&m()},style:{marginTop:4,background:"#2a1515",borderColor:"#551515"},children:"Clear All Saved"})]}),g.length>0&&e.jsx("div",{className:"calc-section",children:g.map(r=>e.jsxs("div",{style:{padding:"8px 10px",marginBottom:4,background:"var(--bg-tertiary)",border:"1px solid var(--border-primary)",borderRadius:4,fontSize:12},children:[e.jsx("div",{style:{color:"var(--text-bright)",fontWeight:600},children:r.name}),e.jsxs("div",{style:{color:"var(--text-muted)",marginTop:2},children:[r.ingredients.length," materials ¬∑ ",r.atmosphere]})]},r.id))})]})]}),e.jsx("div",{className:"calc-main",children:p==="glazy"?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"icon",children:"üè∫"}),e.jsx("p",{children:"Import from Glazy ‚Äî the open ceramic recipe database"}),e.jsxs("div",{style:{fontSize:12,color:"var(--text-dim)",marginTop:16,textAlign:"left",maxWidth:560},children:[e.jsx("h3",{style:{color:"var(--text-secondary)",fontSize:14,marginBottom:8},children:"Two ways to import Glazy data"}),e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:16,borderRadius:8,marginBottom:16},children:[e.jsx("h4",{style:{color:"var(--text-bright)",margin:"0 0 8px",fontSize:13},children:"Option 1: Paste a Glazy Search URL"}),e.jsxs("p",{style:{color:"var(--text-secondary)",margin:"0 0 8px",lineHeight:1.6},children:["Go to ",e.jsx("a",{href:"https://glazy.org/search?base_type=460",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--accent)"},children:"glazy.org/search"}),", filter by cone, atmosphere, surface, or glaze type ‚Äî then copy the URL from your browser's address bar and paste it here. We'll match those filters against our ",n.total.toLocaleString()," loaded glazes."]}),e.jsxs("p",{style:{color:"var(--text-muted)",margin:0,fontSize:11},children:["Example: ",e.jsx("code",{style:{color:"var(--accent)",fontSize:11},children:"https://glazy.org/search?base_type=460&type=500&cone=10&atmosphere=2"})]})]}),e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:16,borderRadius:8,marginBottom:16},children:[e.jsx("h4",{style:{color:"var(--text-bright)",margin:"0 0 8px",fontSize:13},children:"Option 2: Upload Glazy CSV"}),e.jsxs("ol",{style:{margin:0,paddingLeft:20,lineHeight:2,color:"var(--text-secondary)"},children:[e.jsxs("li",{children:["Sign in to ",e.jsx("a",{href:"https://glazy.org",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--accent)"},children:"glazy.org"})]}),e.jsx("li",{children:"Go to your collection or search results"}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Export ‚Üí CSV"})]}),e.jsx("li",{children:"Upload the downloaded CSV file"})]})]}),e.jsx("h3",{style:{color:"var(--text-secondary)",fontSize:14,marginBottom:8},children:"What gets imported"}),e.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8,color:"var(--text-secondary)"},children:[e.jsx("li",{children:"Recipe name, cone range, atmosphere, surface type"}),e.jsx("li",{children:"Full UMF (SiO‚ÇÇ, Al‚ÇÇO‚ÇÉ, and all flux oxides)"}),e.jsx("li",{children:"Glaze type classification (Celadon, Shino, Tenmoku, etc.)"}),e.jsx("li",{children:"Transparency, country, and status metadata"}),e.jsx("li",{children:"All recipes appear immediately on the Stull chart"})]}),e.jsx("div",{style:{background:"var(--bg-secondary)",padding:12,borderRadius:6,marginTop:16,borderLeft:"3px solid var(--accent)"},children:e.jsxs("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:12},children:[e.jsx("strong",{children:"Tip:"})," You can also use the Export tab to save your glazes in Glazy-compatible CSV or JSON format ‚Äî perfect for sharing or re-importing elsewhere."]})})]})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"icon",children:"üì¶"}),e.jsx("p",{children:"Import your glazes or export your work"}),e.jsxs("div",{style:{fontSize:12,color:"var(--text-dim)",marginTop:12,textAlign:"left",maxWidth:500},children:[e.jsx("p",{children:e.jsx("strong",{children:"JSON format:"})}),e.jsx("pre",{style:{background:"var(--bg-secondary)",padding:12,borderRadius:6,fontSize:11,color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:`{
  "glazes": [{
    "name": "Celadon",
    "coneRange": [10, 10],
    "atmosphere": "reduction",
    "ingredients": [
      { "material": "Custer Feldspar", "amount": 40 },
      { "material": "Silica", "amount": 30 },
      { "material": "Whiting", "amount": 15 },
      { "material": "EPK Kaolin", "amount": 15 }
    ]
  }]
}`}),e.jsx("p",{style:{marginTop:12},children:e.jsx("strong",{children:"CSV format:"})}),e.jsx("pre",{style:{background:"var(--bg-secondary)",padding:12,borderRadius:6,fontSize:11,color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:`name,cone,Custer Feldspar,Silica,Whiting,EPK Kaolin
Celadon,10,40,30,15,15`}),e.jsx("p",{style:{marginTop:12},children:e.jsx("strong",{children:"Glazy CSV:"})}),e.jsx("pre",{style:{background:"var(--bg-secondary)",padding:12,borderRadius:6,fontSize:11,color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:`Directly import glazy-data-glazes-*.csv files.
Auto-detected by column headers (SiO2_umf, etc).`}),e.jsx("p",{style:{marginTop:12},children:e.jsx("strong",{children:"Insight XML:"})}),e.jsx("pre",{style:{background:"var(--bg-secondary)",padding:12,borderRadius:6,fontSize:11,color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:`<recipe>
  <name>Celadon</name>
  <cone>10</cone>
  <ingredient>
    <name>Custer Feldspar</name>
    <amount>40</amount>
  </ingredient>
  ...
</recipe>`})]})]})}),e.jsx("style",{children:_})]})}function E({fileInputRef:o,handleFileImport:x,importResult:i}){const[d,y]=h.useState(""),[t,n]=h.useState(null),[g,m]=h.useState(!1),p=u(a=>a.loadGlazes),b=h.useCallback(async()=>{if(d.trim()){m(!0),n(null);try{const{parseGlazySearchURL:a,filterByGlazyParams:l,describeGlazySearch:r}=await f(async()=>{const{parseGlazySearchURL:N,filterByGlazyParams:k,describeGlazySearch:R}=await import("./glazySearch-CBQEdmqG.js");return{parseGlazySearchURL:N,filterByGlazyParams:k,describeGlazySearch:R}},[]),s=a(d);if(!s){n({count:0,description:"Not a valid Glazy search URL",loaded:!1}),m(!1);return}const c=r(s),S=u.getState().getGlazesArray(),z=l(S,s);n({count:z.length,description:c,loaded:!1}),z.length>0&&(p(z),n({count:z.length,description:c,loaded:!0}))}catch{n({count:0,description:"Failed to parse URL",loaded:!1})}m(!1)}},[d,p]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Import from Glazy"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 12px"},children:"Import a Glazy Stull chart view or your own collection."})]}),e.jsxs("div",{className:"calc-section",children:[e.jsx("h3",{children:"Option 1: Paste Search URL"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 8px"},children:"Copy a Glazy search URL to filter matching glazes:"}),e.jsx("input",{type:"text",value:d,onChange:a=>y(a.target.value),placeholder:"https://glazy.org/search?base_type=460&cone=6",style:{width:"100%",padding:"8px 10px",background:"var(--bg-input)",border:"1px solid var(--border-secondary)",borderRadius:6,color:"var(--text-bright)",fontSize:13,boxSizing:"border-box"},onKeyDown:a=>{a.key==="Enter"&&b()}}),e.jsx("button",{className:"calc-button",style:{marginTop:8},disabled:!d.trim()||g,onClick:b,children:g?"Searching...":"Filter Glazes"}),e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",marginTop:6},children:"Supported params: base_type, type, cone, atmosphere, surface, transparency"})]}),t&&e.jsxs("div",{className:"calc-section",style:{padding:"12px 16px",background:t.count===0?"#2a1515":t.loaded?"#152a15":"var(--bg-tertiary)",border:`1px solid ${t.count===0?"#551515":t.loaded?"#155515":"var(--border-secondary)"}`,borderRadius:8},children:[e.jsx("p",{style:{color:"var(--text-bright)",fontSize:13,margin:"0 0 4px",fontWeight:600},children:t.description}),e.jsx("p",{style:{color:t.count===0?"#e74c3c":"#4caf50",fontSize:13,margin:0},children:t.count===0?"No matching glazes found. Try broadening your search.":t.loaded?`‚úì Loaded ${t.count.toLocaleString()} matching glazes on the Stull chart`:`Found ${t.count.toLocaleString()} matches`})]}),e.jsxs("div",{className:"calc-section",style:{borderTop:"1px solid var(--border-secondary)",paddingTop:16,marginTop:16},children:[e.jsx("h3",{children:"Option 2: Upload Glazy CSV"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-secondary)",margin:"0 0 8px"},children:"Upload a CSV exported from Glazy (auto-detected):"}),e.jsx("input",{ref:o,type:"file",accept:".csv,.json",onChange:x,style:{display:"none"}}),e.jsx("button",{className:"calc-button",onClick:()=>{var a;return(a=o.current)==null?void 0:a.click()},children:"Upload Glazy CSV / JSON"})]}),i&&e.jsxs("div",{className:"calc-section",style:{padding:"12px 16px",background:i.errors.length>0?"#2a1515":"#152a15",border:`1px solid ${i.errors.length>0?"#551515":"#155515"}`,borderRadius:8},children:[i.count>0&&e.jsxs("p",{style:{color:"#4caf50",fontSize:13,margin:"0 0 4px"},children:["‚úì Imported ",i.count," glazes from Glazy"]}),i.errors.map((a,l)=>e.jsxs("p",{style:{color:"#e74c3c",fontSize:13,margin:"2px 0"},children:["‚õî ",a]},l))]}),e.jsxs("div",{className:"calc-section",style:{borderTop:"1px solid var(--border-secondary)",paddingTop:16,marginTop:16},children:[e.jsx("h3",{children:"Example URLs to try"}),e.jsx("div",{style:{fontSize:12,lineHeight:2},children:[{label:"Cone 6 Oxidation Glazes",url:"https://glazy.org/search?base_type=460&cone=6&atmosphere=1"},{label:"Cone 10 Reduction Celadons",url:"https://glazy.org/search?base_type=460&type=500&cone=10&atmosphere=2"},{label:"All Shino Glazes",url:"https://glazy.org/search?base_type=460&type=590"},{label:"Cone 6 Matte Glazes",url:"https://glazy.org/search?base_type=460&cone=6&surface=3"},{label:"All Tenmoku",url:"https://glazy.org/search?base_type=460&type=540"}].map(a=>e.jsx("div",{children:e.jsx("button",{onClick:()=>{y(a.url),n(null)},style:{background:"none",border:"none",color:"var(--accent)",cursor:"pointer",padding:0,fontSize:12,textAlign:"left"},children:a.label})},a.url))})]})]})}export{V as ImportExportPage,V as default};
