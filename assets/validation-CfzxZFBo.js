import{g as c}from"./umf-Bjrc84p_.js";import{r as O}from"./index-CShX2zP3.js";const g=[{cone:"06",SiO2:{min:1.5,max:3},Al2O3:{min:.05,max:.25},B2O3:{min:.3,max:.8},KNaO:{min:.3,max:.7},CaO:{min:.1,max:.5},MgO:{min:0,max:.2},ZnO:{min:0,max:.25},BaO:{min:0,max:.15}},{cone:"04",SiO2:{min:1.8,max:3.5},Al2O3:{min:.1,max:.3},B2O3:{min:.2,max:.6},KNaO:{min:.25,max:.6},CaO:{min:.1,max:.5},MgO:{min:0,max:.25},ZnO:{min:0,max:.25},BaO:{min:0,max:.2}},{cone:"6",SiO2:{min:2.5,max:4.5},Al2O3:{min:.2,max:.5},B2O3:{min:.1,max:.4},KNaO:{min:.2,max:.5},CaO:{min:.2,max:.6},MgO:{min:0,max:.3},ZnO:{min:0,max:.3},BaO:{min:0,max:.2}},{cone:"9",SiO2:{min:3,max:5},Al2O3:{min:.3,max:.6},B2O3:{min:0,max:.3},KNaO:{min:.2,max:.45},CaO:{min:.25,max:.65},MgO:{min:0,max:.35},ZnO:{min:0,max:.3},BaO:{min:0,max:.25}},{cone:"10",SiO2:{min:3,max:5.5},Al2O3:{min:.3,max:.7},B2O3:{min:0,max:.2},KNaO:{min:.2,max:.4},CaO:{min:.3,max:.7},MgO:{min:0,max:.35},ZnO:{min:0,max:.3},BaO:{min:0,max:.3}},{cone:"11",SiO2:{min:3,max:6},Al2O3:{min:.3,max:.8},B2O3:{min:0,max:.15},KNaO:{min:.2,max:.4},CaO:{min:.3,max:.7},MgO:{min:0,max:.4},ZnO:{min:0,max:.3},BaO:{min:0,max:.3}}];function p(a){const i=String(a);return g.find(e=>e.cone===i)||null}function C(a){const i=g.map(m=>({...m,numericCone:y(m.cone)})).sort((m,s)=>m.numericCone-s.numericCone),e=a;let n=i[0],r=i[i.length-1];for(let m=0;m<i.length-1;m++)if(i[m].numericCone<=e&&i[m+1].numericCone>=e){n=i[m],r=i[m+1];break}if(n.numericCone===r.numericCone)return n;const t=(e-n.numericCone)/(r.numericCone-n.numericCone);return{cone:String(a),SiO2:u(n.SiO2,r.SiO2,t),Al2O3:u(n.Al2O3,r.Al2O3,t),B2O3:u(n.B2O3,r.B2O3,t),KNaO:u(n.KNaO,r.KNaO,t),CaO:u(n.CaO,r.CaO,t),MgO:u(n.MgO,r.MgO,t),ZnO:u(n.ZnO,r.ZnO,t),BaO:u(n.BaO,r.BaO,t)}}function u(a,i,e){return{min:O(a.min*(1-e)+i.min*e,2),max:O(a.max*(1-e)+i.max*e,2)}}function y(a){return a.startsWith("0")?-parseInt(a,10):parseInt(a,10)}function S(a,i){const e=p(i)||C(typeof i=="string"?y(i):i);if(!e)return[{oxide:"cone",value:typeof i=="number"?i:0,limit:{min:0,max:0},severity:"warning",message:`No limit data available for cone ${i}`}];const n=[],r=[{oxide:"SiO2",umfKey:"SiO2",limitKey:"SiO2"},{oxide:"Al2O3",umfKey:"Al2O3",limitKey:"Al2O3"},{oxide:"B2O3",umfKey:"B2O3",limitKey:"B2O3"},{oxide:"K2O+Na2O",umfKey:["K2O","Na2O"],limitKey:"KNaO"},{oxide:"CaO",umfKey:"CaO",limitKey:"CaO"},{oxide:"MgO",umfKey:"MgO",limitKey:"MgO"},{oxide:"ZnO",umfKey:"ZnO",limitKey:"ZnO"},{oxide:"BaO",umfKey:"BaO",limitKey:"BaO"}];for(const t of r){let m;Array.isArray(t.umfKey)?m=t.umfKey.reduce((x,d)=>x+c(a,d),0):m=c(a,t.umfKey);const s=e[t.limitKey];m<s.min&&m>.001&&n.push({oxide:t.oxide,value:m,limit:s,severity:m<s.min*.5?"error":"warning",message:`${t.oxide} (${O(m,2)}) below typical minimum (${s.min}) for cone ${i}`}),m>s.max&&n.push({oxide:t.oxide,value:m,limit:s,severity:m>s.max*1.5?"error":"warning",message:`${t.oxide} (${O(m,2)}) above typical maximum (${s.max}) for cone ${i}`})}return n}function v(a){const i=[],e=[],n=[],r=[];if(!a.ingredients||a.ingredients.length===0)return i.push("Recipe has no ingredients"),{valid:!1,errors:i,warnings:e,suggestions:n,issues:r};for(const o of a.ingredients)o.amount<=0&&i.push(`Invalid amount for ${o.material}: ${o.amount}`),o.amount>1e3&&e.push(`Large amount for ${o.material}: ${o.amount} - verify this is correct`);const t=a.ingredients.reduce((o,l)=>o+l.amount,0);t<50&&e.push(`Total batch size (${O(t,1)}) is small - amounts may be percentages`),t>1e4&&e.push(`Total batch size (${O(t,1)}) is very large`);const m=["feldspar","frit","whiting","dolomite","talc","zinc","calcium","wollastonite","bone ash","lithium","soda ash","pearl ash","borax","colemanite","ulexite","gerstley","strontium","barium","nepheline","cornwall","petalite","spodumene"];a.ingredients.some(o=>m.some(l=>o.material.toLowerCase().includes(l)))||e.push("No obvious flux material detected - glaze may not melt");const x=["silica","flint","quartz"];a.ingredients.some(o=>x.some(l=>o.material.toLowerCase().includes(l)))||n.push("Consider adding silica for glaze stability");const h=["kaolin","clay","alumina","epk","grolleg","tile 6","ball clay","goldart","hawthorne","redart","fire clay","bentonite","xx sagger","calcined"];a.ingredients.some(o=>h.some(l=>o.material.toLowerCase().includes(l)))||e.push("No clay/alumina source - glaze may run excessively");const K=["lead","barium","cadmium"],f=a.ingredients.filter(o=>K.some(l=>o.material.toLowerCase().includes(l)));return f.length>0&&e.push(`Recipe contains potentially hazardous materials: ${f.map(o=>o.material).join(", ")}`),{valid:i.length===0,errors:i,warnings:e,suggestions:n,issues:r}}function N(a){const i=c(a,"SiO2"),e=c(a,"Al2O3");if(e<.1||i<1)return"unknown";const n=i/e;return i<2&&e<.3?"crazed":n>12?"underfired":n<5?"matte":n<8?"satin":"gloss"}export{g as C,v as a,N as p,S as v};
