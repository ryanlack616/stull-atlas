import{E as Fn,r as xe,z as Er,B as On,l as jt,W as Mr,F as Bn,a as Tr,e as De,b as Pn,c as Ar,d as Ce,i as kn,h as Sr,j as Nn,T as Ue,k as zn,n as Dn,o as Un,t as Vn,a7 as Hn,L as Gn,H as Wn,a5 as Xn,Q as Yn,a8 as Zn,a9 as Kn,aa as Qn,M as _r,ab as fn,ac as hn,a3 as Jn,ad as jn,ae as $n,af as ln,ag as qn,a1 as ti,V as un,Z as vn,_ as cn,X as ei,Y as ri,a6 as ni}from"./find_empties-DRiZhjAu.js";import{g as Rr}from"./vendor-react-D0vdeqNS.js";var dn={exports:{}};(function(){var V={1964:function(L,F,a){L.exports={alpha_shape:a(3502),convex_hull:a(7352),delaunay_triangulate:a(7642),gl_cone3d:a(6405),gl_error3d:a(9165),gl_heatmap2d:a(2510),gl_line3d:a(5714),gl_mesh3d:a(7201),gl_plot2d:a(1850),gl_plot3d:a(4100),gl_pointcloud2d:a(4696),gl_scatter3d:a(8418),gl_select_box:a(3161),gl_spikes2d:a(4098),gl_streamtube3d:a(7815),gl_surface3d:a(9499),ndarray:a(9618),ndarray_linear_interpolate:a(4317)}},4793:function(L,F,a){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function c(J,k){if(!(J instanceof k))throw new TypeError("Cannot call a class as a function")}function m(J,k){for(var z=0;z<k.length;z++){var et=k[z];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(J,g(et.key),et)}}function l(J,k,z){return k&&m(J.prototype,k),Object.defineProperty(J,"prototype",{writable:!1}),J}function g(J){var k=d(J,"string");return u(k)=="symbol"?k:k+""}function d(J,k){if(u(J)!="object"||!J)return J;var z=J[Symbol.toPrimitive];if(z!==void 0){var et=z.call(J,k);if(u(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}function E(J,k,z){return k=w(k),M(J,x()?Reflect.construct(k,[],w(J).constructor):k.apply(J,z))}function M(J,k){if(k&&(u(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(J)}function p(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function x(){try{var J=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x=function(){return!!J})()}function w(J){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},w(J)}function o(J,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(k&&k.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Object.defineProperty(J,"prototype",{writable:!1}),k&&v(J,k)}function v(J,k){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,et){return z.__proto__=et,z},v(J,k)}function u(J){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},u(J)}var f=a(7507),h=a(3778),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;F.hp=i,F.IS=50;var s=2147483647;i.TYPED_ARRAY_SUPPORT=n(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{var J=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(J,k),J.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function t(J){if(J>s)throw new RangeError('The value "'+J+'" is invalid for option "size"');var k=new Uint8Array(J);return Object.setPrototypeOf(k,i.prototype),k}function i(J,k,z){if(typeof J=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(J)}return e(J,k,z)}i.poolSize=8192;function e(J,k,z){if(typeof J=="string")return _(J,k);if(ArrayBuffer.isView(J))return S(J);if(J==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(J));if(St(J,ArrayBuffer)||J&&St(J.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(St(J,SharedArrayBuffer)||J&&St(J.buffer,SharedArrayBuffer)))return y(J,k,z);if(typeof J=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var et=J.valueOf&&J.valueOf();if(et!=null&&et!==J)return i.from(et,k,z);var st=R(J);if(st)return st;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof J[Symbol.toPrimitive]=="function")return i.from(J[Symbol.toPrimitive]("string"),k,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(J))}i.from=function(J,k,z){return e(J,k,z)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function T(J){if(typeof J!="number")throw new TypeError('"size" argument must be of type number');if(J<0)throw new RangeError('The value "'+J+'" is invalid for option "size"')}function b(J,k,z){return T(J),J<=0?t(J):k!==void 0?typeof z=="string"?t(J).fill(k,z):t(J).fill(k):t(J)}i.alloc=function(J,k,z){return b(J,k,z)};function A(J){return T(J),t(J<0?0:O(J)|0)}i.allocUnsafe=function(J){return A(J)},i.allocUnsafeSlow=function(J){return A(J)};function _(J,k){if((typeof k!="string"||k==="")&&(k="utf8"),!i.isEncoding(k))throw new TypeError("Unknown encoding: "+k);var z=P(J,k)|0,et=t(z),st=et.write(J,k);return st!==z&&(et=et.slice(0,st)),et}function C(J){for(var k=J.length<0?0:O(J.length)|0,z=t(k),et=0;et<k;et+=1)z[et]=J[et]&255;return z}function S(J){if(St(J,Uint8Array)){var k=new Uint8Array(J);return y(k.buffer,k.byteOffset,k.byteLength)}return C(J)}function y(J,k,z){if(k<0||J.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<k+(z||0))throw new RangeError('"length" is outside of buffer bounds');var et;return k===void 0&&z===void 0?et=new Uint8Array(J):z===void 0?et=new Uint8Array(J,k):et=new Uint8Array(J,k,z),Object.setPrototypeOf(et,i.prototype),et}function R(J){if(i.isBuffer(J)){var k=O(J.length)|0,z=t(k);return z.length===0||J.copy(z,0,0,k),z}if(J.length!==void 0)return typeof J.length!="number"||Ft(J.length)?t(0):C(J);if(J.type==="Buffer"&&Array.isArray(J.data))return C(J.data)}function O(J){if(J>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return J|0}i.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==i.prototype},i.compare=function(k,z){if(St(k,Uint8Array)&&(k=i.from(k,k.offset,k.byteLength)),St(z,Uint8Array)&&(z=i.from(z,z.offset,z.byteLength)),!i.isBuffer(k)||!i.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===z)return 0;for(var et=k.length,st=z.length,yt=0,bt=Math.min(et,st);yt<bt;++yt)if(k[yt]!==z[yt]){et=k[yt],st=z[yt];break}return et<st?-1:st<et?1:0},i.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(k,z){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return i.alloc(0);var et;if(z===void 0)for(z=0,et=0;et<k.length;++et)z+=k[et].length;var st=i.allocUnsafe(z),yt=0;for(et=0;et<k.length;++et){var bt=k[et];if(St(bt,Uint8Array))yt+bt.length>st.length?(i.isBuffer(bt)||(bt=i.from(bt)),bt.copy(st,yt)):Uint8Array.prototype.set.call(st,bt,yt);else if(i.isBuffer(bt))bt.copy(st,yt);else throw new TypeError('"list" argument must be an Array of Buffers');yt+=bt.length}return st};function P(J,k){if(i.isBuffer(J))return J.length;if(ArrayBuffer.isView(J)||St(J,ArrayBuffer))return J.byteLength;if(typeof J!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(J));var z=J.length,et=arguments.length>2&&arguments[2]===!0;if(!et&&z===0)return 0;for(var st=!1;;)switch(k){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return gt(J).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Bt(J).length;default:if(st)return et?-1:gt(J).length;k=(""+k).toLowerCase(),st=!0}}i.byteLength=P;function D(J,k,z){var et=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,k>>>=0,z<=k))return"";for(J||(J="utf8");;)switch(J){case"hex":return it(this,k,z);case"utf8":case"utf-8":return Y(this,k,z);case"ascii":return Q(this,k,z);case"latin1":case"binary":return q(this,k,z);case"base64":return W(this,k,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,k,z);default:if(et)throw new TypeError("Unknown encoding: "+J);J=(J+"").toLowerCase(),et=!0}}i.prototype._isBuffer=!0;function H(J,k,z){var et=J[k];J[k]=J[z],J[z]=et}i.prototype.swap16=function(){var k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<k;z+=2)H(this,z,z+1);return this},i.prototype.swap32=function(){var k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<k;z+=4)H(this,z,z+3),H(this,z+1,z+2);return this},i.prototype.swap64=function(){var k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<k;z+=8)H(this,z,z+7),H(this,z+1,z+6),H(this,z+2,z+5),H(this,z+3,z+4);return this},i.prototype.toString=function(){var k=this.length;return k===0?"":arguments.length===0?Y(this,0,k):D.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(k){if(!i.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:i.compare(this,k)===0},i.prototype.inspect=function(){var k="",z=F.IS;return k=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(k+=" ... "),"<Buffer "+k+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(k,z,et,st,yt){if(St(k,Uint8Array)&&(k=i.from(k,k.offset,k.byteLength)),!i.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(k));if(z===void 0&&(z=0),et===void 0&&(et=k?k.length:0),st===void 0&&(st=0),yt===void 0&&(yt=this.length),z<0||et>k.length||st<0||yt>this.length)throw new RangeError("out of range index");if(st>=yt&&z>=et)return 0;if(st>=yt)return-1;if(z>=et)return 1;if(z>>>=0,et>>>=0,st>>>=0,yt>>>=0,this===k)return 0;for(var bt=yt-st,Rt=et-z,Nt=Math.min(bt,Rt),Ct=this.slice(st,yt),Pt=k.slice(z,et),zt=0;zt<Nt;++zt)if(Ct[zt]!==Pt[zt]){bt=Ct[zt],Rt=Pt[zt];break}return bt<Rt?-1:Rt<bt?1:0};function G(J,k,z,et,st){if(J.length===0)return-1;if(typeof z=="string"?(et=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,Ft(z)&&(z=st?0:J.length-1),z<0&&(z=J.length+z),z>=J.length){if(st)return-1;z=J.length-1}else if(z<0)if(st)z=0;else return-1;if(typeof k=="string"&&(k=i.from(k,et)),i.isBuffer(k))return k.length===0?-1:B(J,k,z,et,st);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?st?Uint8Array.prototype.indexOf.call(J,k,z):Uint8Array.prototype.lastIndexOf.call(J,k,z):B(J,[k],z,et,st);throw new TypeError("val must be string, number or Buffer")}function B(J,k,z,et,st){var yt=1,bt=J.length,Rt=k.length;if(et!==void 0&&(et=String(et).toLowerCase(),et==="ucs2"||et==="ucs-2"||et==="utf16le"||et==="utf-16le")){if(J.length<2||k.length<2)return-1;yt=2,bt/=2,Rt/=2,z/=2}function Nt(Dt,Jt){return yt===1?Dt[Jt]:Dt.readUInt16BE(Jt*yt)}var Ct;if(st){var Pt=-1;for(Ct=z;Ct<bt;Ct++)if(Nt(J,Ct)===Nt(k,Pt===-1?0:Ct-Pt)){if(Pt===-1&&(Pt=Ct),Ct-Pt+1===Rt)return Pt*yt}else Pt!==-1&&(Ct-=Ct-Pt),Pt=-1}else for(z+Rt>bt&&(z=bt-Rt),Ct=z;Ct>=0;Ct--){for(var zt=!0,kt=0;kt<Rt;kt++)if(Nt(J,Ct+kt)!==Nt(k,kt)){zt=!1;break}if(zt)return Ct}return-1}i.prototype.includes=function(k,z,et){return this.indexOf(k,z,et)!==-1},i.prototype.indexOf=function(k,z,et){return G(this,k,z,et,!0)},i.prototype.lastIndexOf=function(k,z,et){return G(this,k,z,et,!1)};function I(J,k,z,et){z=Number(z)||0;var st=J.length-z;et?(et=Number(et),et>st&&(et=st)):et=st;var yt=k.length;et>yt/2&&(et=yt/2);var bt;for(bt=0;bt<et;++bt){var Rt=parseInt(k.substr(bt*2,2),16);if(Ft(Rt))return bt;J[z+bt]=Rt}return bt}function N(J,k,z,et){return Lt(gt(k,J.length-z),J,z,et)}function $(J,k,z,et){return Lt(Tt(k),J,z,et)}function U(J,k,z,et){return Lt(Bt(k),J,z,et)}function K(J,k,z,et){return Lt(_t(k,J.length-z),J,z,et)}i.prototype.write=function(k,z,et,st){if(z===void 0)st="utf8",et=this.length,z=0;else if(et===void 0&&typeof z=="string")st=z,et=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(et)?(et=et>>>0,st===void 0&&(st="utf8")):(st=et,et=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var yt=this.length-z;if((et===void 0||et>yt)&&(et=yt),k.length>0&&(et<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");st||(st="utf8");for(var bt=!1;;)switch(st){case"hex":return I(this,k,z,et);case"utf8":case"utf-8":return N(this,k,z,et);case"ascii":case"latin1":case"binary":return $(this,k,z,et);case"base64":return U(this,k,z,et);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,k,z,et);default:if(bt)throw new TypeError("Unknown encoding: "+st);st=(""+st).toLowerCase(),bt=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(J,k,z){return k===0&&z===J.length?f.fromByteArray(J):f.fromByteArray(J.slice(k,z))}function Y(J,k,z){z=Math.min(J.length,z);for(var et=[],st=k;st<z;){var yt=J[st],bt=null,Rt=yt>239?4:yt>223?3:yt>191?2:1;if(st+Rt<=z){var Nt=void 0,Ct=void 0,Pt=void 0,zt=void 0;switch(Rt){case 1:yt<128&&(bt=yt);break;case 2:Nt=J[st+1],(Nt&192)===128&&(zt=(yt&31)<<6|Nt&63,zt>127&&(bt=zt));break;case 3:Nt=J[st+1],Ct=J[st+2],(Nt&192)===128&&(Ct&192)===128&&(zt=(yt&15)<<12|(Nt&63)<<6|Ct&63,zt>2047&&(zt<55296||zt>57343)&&(bt=zt));break;case 4:Nt=J[st+1],Ct=J[st+2],Pt=J[st+3],(Nt&192)===128&&(Ct&192)===128&&(Pt&192)===128&&(zt=(yt&15)<<18|(Nt&63)<<12|(Ct&63)<<6|Pt&63,zt>65535&&zt<1114112&&(bt=zt))}}bt===null?(bt=65533,Rt=1):bt>65535&&(bt-=65536,et.push(bt>>>10&1023|55296),bt=56320|bt&1023),et.push(bt),st+=Rt}return X(et)}var j=4096;function X(J){var k=J.length;if(k<=j)return String.fromCharCode.apply(String,J);for(var z="",et=0;et<k;)z+=String.fromCharCode.apply(String,J.slice(et,et+=j));return z}function Q(J,k,z){var et="";z=Math.min(J.length,z);for(var st=k;st<z;++st)et+=String.fromCharCode(J[st]&127);return et}function q(J,k,z){var et="";z=Math.min(J.length,z);for(var st=k;st<z;++st)et+=String.fromCharCode(J[st]);return et}function it(J,k,z){var et=J.length;(!k||k<0)&&(k=0),(!z||z<0||z>et)&&(z=et);for(var st="",yt=k;yt<z;++yt)st+=Ot[J[yt]];return st}function ft(J,k,z){for(var et=J.slice(k,z),st="",yt=0;yt<et.length-1;yt+=2)st+=String.fromCharCode(et[yt]+et[yt+1]*256);return st}i.prototype.slice=function(k,z){var et=this.length;k=~~k,z=z===void 0?et:~~z,k<0?(k+=et,k<0&&(k=0)):k>et&&(k=et),z<0?(z+=et,z<0&&(z=0)):z>et&&(z=et),z<k&&(z=k);var st=this.subarray(k,z);return Object.setPrototypeOf(st,i.prototype),st};function at(J,k,z){if(J%1!==0||J<0)throw new RangeError("offset is not uint");if(J+k>z)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(k,z,et){k=k>>>0,z=z>>>0,et||at(k,z,this.length);for(var st=this[k],yt=1,bt=0;++bt<z&&(yt*=256);)st+=this[k+bt]*yt;return st},i.prototype.readUintBE=i.prototype.readUIntBE=function(k,z,et){k=k>>>0,z=z>>>0,et||at(k,z,this.length);for(var st=this[k+--z],yt=1;z>0&&(yt*=256);)st+=this[k+--z]*yt;return st},i.prototype.readUint8=i.prototype.readUInt8=function(k,z){return k=k>>>0,z||at(k,1,this.length),this[k]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(k,z){return k=k>>>0,z||at(k,2,this.length),this[k]|this[k+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(k,z){return k=k>>>0,z||at(k,2,this.length),this[k]<<8|this[k+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(k,z){return k=k>>>0,z||at(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(k,z){return k=k>>>0,z||at(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},i.prototype.readBigUInt64LE=It(function(k){k=k>>>0,Mt(k,"offset");var z=this[k],et=this[k+7];(z===void 0||et===void 0)&&At(k,this.length-8);var st=z+this[++k]*Math.pow(2,8)+this[++k]*Math.pow(2,16)+this[++k]*Math.pow(2,24),yt=this[++k]+this[++k]*Math.pow(2,8)+this[++k]*Math.pow(2,16)+et*Math.pow(2,24);return BigInt(st)+(BigInt(yt)<<BigInt(32))}),i.prototype.readBigUInt64BE=It(function(k){k=k>>>0,Mt(k,"offset");var z=this[k],et=this[k+7];(z===void 0||et===void 0)&&At(k,this.length-8);var st=z*Math.pow(2,24)+this[++k]*Math.pow(2,16)+this[++k]*Math.pow(2,8)+this[++k],yt=this[++k]*Math.pow(2,24)+this[++k]*Math.pow(2,16)+this[++k]*Math.pow(2,8)+et;return(BigInt(st)<<BigInt(32))+BigInt(yt)}),i.prototype.readIntLE=function(k,z,et){k=k>>>0,z=z>>>0,et||at(k,z,this.length);for(var st=this[k],yt=1,bt=0;++bt<z&&(yt*=256);)st+=this[k+bt]*yt;return yt*=128,st>=yt&&(st-=Math.pow(2,8*z)),st},i.prototype.readIntBE=function(k,z,et){k=k>>>0,z=z>>>0,et||at(k,z,this.length);for(var st=z,yt=1,bt=this[k+--st];st>0&&(yt*=256);)bt+=this[k+--st]*yt;return yt*=128,bt>=yt&&(bt-=Math.pow(2,8*z)),bt},i.prototype.readInt8=function(k,z){return k=k>>>0,z||at(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},i.prototype.readInt16LE=function(k,z){k=k>>>0,z||at(k,2,this.length);var et=this[k]|this[k+1]<<8;return et&32768?et|4294901760:et},i.prototype.readInt16BE=function(k,z){k=k>>>0,z||at(k,2,this.length);var et=this[k+1]|this[k]<<8;return et&32768?et|4294901760:et},i.prototype.readInt32LE=function(k,z){return k=k>>>0,z||at(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},i.prototype.readInt32BE=function(k,z){return k=k>>>0,z||at(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},i.prototype.readBigInt64LE=It(function(k){k=k>>>0,Mt(k,"offset");var z=this[k],et=this[k+7];(z===void 0||et===void 0)&&At(k,this.length-8);var st=this[k+4]+this[k+5]*Math.pow(2,8)+this[k+6]*Math.pow(2,16)+(et<<24);return(BigInt(st)<<BigInt(32))+BigInt(z+this[++k]*Math.pow(2,8)+this[++k]*Math.pow(2,16)+this[++k]*Math.pow(2,24))}),i.prototype.readBigInt64BE=It(function(k){k=k>>>0,Mt(k,"offset");var z=this[k],et=this[k+7];(z===void 0||et===void 0)&&At(k,this.length-8);var st=(z<<24)+this[++k]*Math.pow(2,16)+this[++k]*Math.pow(2,8)+this[++k];return(BigInt(st)<<BigInt(32))+BigInt(this[++k]*Math.pow(2,24)+this[++k]*Math.pow(2,16)+this[++k]*Math.pow(2,8)+et)}),i.prototype.readFloatLE=function(k,z){return k=k>>>0,z||at(k,4,this.length),h.read(this,k,!0,23,4)},i.prototype.readFloatBE=function(k,z){return k=k>>>0,z||at(k,4,this.length),h.read(this,k,!1,23,4)},i.prototype.readDoubleLE=function(k,z){return k=k>>>0,z||at(k,8,this.length),h.read(this,k,!0,52,8)},i.prototype.readDoubleBE=function(k,z){return k=k>>>0,z||at(k,8,this.length),h.read(this,k,!1,52,8)};function rt(J,k,z,et,st,yt){if(!i.isBuffer(J))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>st||k<yt)throw new RangeError('"value" argument is out of bounds');if(z+et>J.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(k,z,et,st){if(k=+k,z=z>>>0,et=et>>>0,!st){var yt=Math.pow(2,8*et)-1;rt(this,k,z,et,yt,0)}var bt=1,Rt=0;for(this[z]=k&255;++Rt<et&&(bt*=256);)this[z+Rt]=k/bt&255;return z+et},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(k,z,et,st){if(k=+k,z=z>>>0,et=et>>>0,!st){var yt=Math.pow(2,8*et)-1;rt(this,k,z,et,yt,0)}var bt=et-1,Rt=1;for(this[z+bt]=k&255;--bt>=0&&(Rt*=256);)this[z+bt]=k/Rt&255;return z+et},i.prototype.writeUint8=i.prototype.writeUInt8=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,1,255,0),this[z]=k&255,z+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,2,65535,0),this[z]=k&255,this[z+1]=k>>>8,z+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,2,65535,0),this[z]=k>>>8,this[z+1]=k&255,z+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,4,4294967295,0),this[z+3]=k>>>24,this[z+2]=k>>>16,this[z+1]=k>>>8,this[z]=k&255,z+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,4,4294967295,0),this[z]=k>>>24,this[z+1]=k>>>16,this[z+2]=k>>>8,this[z+3]=k&255,z+4};function ht(J,k,z,et,st){pt(k,et,st,J,z,7);var yt=Number(k&BigInt(4294967295));J[z++]=yt,yt=yt>>8,J[z++]=yt,yt=yt>>8,J[z++]=yt,yt=yt>>8,J[z++]=yt;var bt=Number(k>>BigInt(32)&BigInt(4294967295));return J[z++]=bt,bt=bt>>8,J[z++]=bt,bt=bt>>8,J[z++]=bt,bt=bt>>8,J[z++]=bt,z}function ot(J,k,z,et,st){pt(k,et,st,J,z,7);var yt=Number(k&BigInt(4294967295));J[z+7]=yt,yt=yt>>8,J[z+6]=yt,yt=yt>>8,J[z+5]=yt,yt=yt>>8,J[z+4]=yt;var bt=Number(k>>BigInt(32)&BigInt(4294967295));return J[z+3]=bt,bt=bt>>8,J[z+2]=bt,bt=bt>>8,J[z+1]=bt,bt=bt>>8,J[z]=bt,z+8}i.prototype.writeBigUInt64LE=It(function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(this,k,z,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=It(function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ot(this,k,z,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(k,z,et,st){if(k=+k,z=z>>>0,!st){var yt=Math.pow(2,8*et-1);rt(this,k,z,et,yt-1,-yt)}var bt=0,Rt=1,Nt=0;for(this[z]=k&255;++bt<et&&(Rt*=256);)k<0&&Nt===0&&this[z+bt-1]!==0&&(Nt=1),this[z+bt]=(k/Rt>>0)-Nt&255;return z+et},i.prototype.writeIntBE=function(k,z,et,st){if(k=+k,z=z>>>0,!st){var yt=Math.pow(2,8*et-1);rt(this,k,z,et,yt-1,-yt)}var bt=et-1,Rt=1,Nt=0;for(this[z+bt]=k&255;--bt>=0&&(Rt*=256);)k<0&&Nt===0&&this[z+bt+1]!==0&&(Nt=1),this[z+bt]=(k/Rt>>0)-Nt&255;return z+et},i.prototype.writeInt8=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,1,127,-128),k<0&&(k=255+k+1),this[z]=k&255,z+1},i.prototype.writeInt16LE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,2,32767,-32768),this[z]=k&255,this[z+1]=k>>>8,z+2},i.prototype.writeInt16BE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,2,32767,-32768),this[z]=k>>>8,this[z+1]=k&255,z+2},i.prototype.writeInt32LE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,4,2147483647,-2147483648),this[z]=k&255,this[z+1]=k>>>8,this[z+2]=k>>>16,this[z+3]=k>>>24,z+4},i.prototype.writeInt32BE=function(k,z,et){return k=+k,z=z>>>0,et||rt(this,k,z,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[z]=k>>>24,this[z+1]=k>>>16,this[z+2]=k>>>8,this[z+3]=k&255,z+4},i.prototype.writeBigInt64LE=It(function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(this,k,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=It(function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ot(this,k,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function vt(J,k,z,et,st,yt){if(z+et>J.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function lt(J,k,z,et,st){return k=+k,z=z>>>0,st||vt(J,k,z,4),h.write(J,k,z,et,23,4),z+4}i.prototype.writeFloatLE=function(k,z,et){return lt(this,k,z,!0,et)},i.prototype.writeFloatBE=function(k,z,et){return lt(this,k,z,!1,et)};function ut(J,k,z,et,st){return k=+k,z=z>>>0,st||vt(J,k,z,8),h.write(J,k,z,et,52,8),z+8}i.prototype.writeDoubleLE=function(k,z,et){return ut(this,k,z,!0,et)},i.prototype.writeDoubleBE=function(k,z,et){return ut(this,k,z,!1,et)},i.prototype.copy=function(k,z,et,st){if(!i.isBuffer(k))throw new TypeError("argument should be a Buffer");if(et||(et=0),!st&&st!==0&&(st=this.length),z>=k.length&&(z=k.length),z||(z=0),st>0&&st<et&&(st=et),st===et||k.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(et<0||et>=this.length)throw new RangeError("Index out of range");if(st<0)throw new RangeError("sourceEnd out of bounds");st>this.length&&(st=this.length),k.length-z<st-et&&(st=k.length-z+et);var yt=st-et;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,et,st):Uint8Array.prototype.set.call(k,this.subarray(et,st),z),yt},i.prototype.fill=function(k,z,et,st){if(typeof k=="string"){if(typeof z=="string"?(st=z,z=0,et=this.length):typeof et=="string"&&(st=et,et=this.length),st!==void 0&&typeof st!="string")throw new TypeError("encoding must be a string");if(typeof st=="string"&&!i.isEncoding(st))throw new TypeError("Unknown encoding: "+st);if(k.length===1){var yt=k.charCodeAt(0);(st==="utf8"&&yt<128||st==="latin1")&&(k=yt)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(z<0||this.length<z||this.length<et)throw new RangeError("Out of range index");if(et<=z)return this;z=z>>>0,et=et===void 0?this.length:et>>>0,k||(k=0);var bt;if(typeof k=="number")for(bt=z;bt<et;++bt)this[bt]=k;else{var Rt=i.isBuffer(k)?k:i.from(k,st),Nt=Rt.length;if(Nt===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(bt=0;bt<et-z;++bt)this[bt+z]=Rt[bt%Nt]}return this};var mt={};function Et(J,k,z){mt[J]=function(et){function st(){var yt;return c(this,st),yt=E(this,st),Object.defineProperty(yt,"message",{value:k.apply(yt,arguments),writable:!0,configurable:!0}),yt.name="".concat(yt.name," [").concat(J,"]"),yt.stack,delete yt.name,yt}return o(st,et),l(st,[{key:"code",get:function(){return J},set:function(bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:bt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(J,"]: ").concat(this.message)}}])}(z)}Et("ERR_BUFFER_OUT_OF_BOUNDS",function(J){return J?"".concat(J," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Et("ERR_INVALID_ARG_TYPE",function(J,k){return'The "'.concat(J,'" argument must be of type number. Received type ').concat(u(k))},TypeError),Et("ERR_OUT_OF_RANGE",function(J,k,z){var et='The value of "'.concat(J,'" is out of range.'),st=z;return Number.isInteger(z)&&Math.abs(z)>Math.pow(2,32)?st=ct(String(z)):typeof z=="bigint"&&(st=String(z),(z>Math.pow(BigInt(2),BigInt(32))||z<-Math.pow(BigInt(2),BigInt(32)))&&(st=ct(st)),st+="n"),et+=" It must be ".concat(k,". Received ").concat(st),et},RangeError);function ct(J){for(var k="",z=J.length,et=J[0]==="-"?1:0;z>=et+4;z-=3)k="_".concat(J.slice(z-3,z)).concat(k);return"".concat(J.slice(0,z)).concat(k)}function xt(J,k,z){Mt(k,"offset"),(J[k]===void 0||J[k+z]===void 0)&&At(k,J.length-(z+1))}function pt(J,k,z,et,st,yt){if(J>z||J<k){var bt=typeof k=="bigint"?"n":"",Rt;throw k===0||k===BigInt(0)?Rt=">= 0".concat(bt," and < 2").concat(bt," ** ").concat((yt+1)*8).concat(bt):Rt=">= -(2".concat(bt," ** ").concat((yt+1)*8-1).concat(bt,") and < 2 ** ")+"".concat((yt+1)*8-1).concat(bt),new mt.ERR_OUT_OF_RANGE("value",Rt,J)}xt(et,st,yt)}function Mt(J,k){if(typeof J!="number")throw new mt.ERR_INVALID_ARG_TYPE(k,"number",J)}function At(J,k,z){throw Math.floor(J)!==J?(Mt(J,z),new mt.ERR_OUT_OF_RANGE("offset","an integer",J)):k<0?new mt.ERR_BUFFER_OUT_OF_BOUNDS:new mt.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(k),J)}var wt=/[^+/0-9A-Za-z-_]/g;function dt(J){if(J=J.split("=")[0],J=J.trim().replace(wt,""),J.length<2)return"";for(;J.length%4!==0;)J=J+"=";return J}function gt(J,k){k=k||1/0;for(var z,et=J.length,st=null,yt=[],bt=0;bt<et;++bt){if(z=J.charCodeAt(bt),z>55295&&z<57344){if(!st){if(z>56319){(k-=3)>-1&&yt.push(239,191,189);continue}else if(bt+1===et){(k-=3)>-1&&yt.push(239,191,189);continue}st=z;continue}if(z<56320){(k-=3)>-1&&yt.push(239,191,189),st=z;continue}z=(st-55296<<10|z-56320)+65536}else st&&(k-=3)>-1&&yt.push(239,191,189);if(st=null,z<128){if((k-=1)<0)break;yt.push(z)}else if(z<2048){if((k-=2)<0)break;yt.push(z>>6|192,z&63|128)}else if(z<65536){if((k-=3)<0)break;yt.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((k-=4)<0)break;yt.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return yt}function Tt(J){for(var k=[],z=0;z<J.length;++z)k.push(J.charCodeAt(z)&255);return k}function _t(J,k){for(var z,et,st,yt=[],bt=0;bt<J.length&&!((k-=2)<0);++bt)z=J.charCodeAt(bt),et=z>>8,st=z%256,yt.push(st),yt.push(et);return yt}function Bt(J){return f.toByteArray(dt(J))}function Lt(J,k,z,et){var st;for(st=0;st<et&&!(st+z>=k.length||st>=J.length);++st)k[st+z]=J[st];return st}function St(J,k){return J instanceof k||J!=null&&J.constructor!=null&&J.constructor.name!=null&&J.constructor.name===k.name}function Ft(J){return J!==J}var Ot=function(){for(var J="0123456789abcdef",k=new Array(256),z=0;z<16;++z)for(var et=z*16,st=0;st<16;++st)k[et+st]=J[z]+J[st];return k}();function It(J){return typeof BigInt>"u"?Yt:J}function Yt(){throw new Error("BigInt not supported")}},9216:function(L){L.exports=m,L.exports.isMobile=m,L.exports.default=m;var F=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/CrOS/,c=/android|ipad|playbook|silk/i;function m(l){l||(l={});var g=l.ua;if(!g&&typeof navigator<"u"&&(g=navigator.userAgent),g&&g.headers&&typeof g.headers["user-agent"]=="string"&&(g=g.headers["user-agent"]),typeof g!="string")return!1;var d=F.test(g)&&!a.test(g)||!!l.tablet&&c.test(g);return!d&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&g.indexOf("Macintosh")!==-1&&g.indexOf("Safari")!==-1&&(d=!0),d}},6296:function(L,F,a){L.exports=E;var c=a(7261),m=a(9977),l=a(4192);function g(M,p){this._controllerNames=Object.keys(M),this._controllerList=this._controllerNames.map(function(x){return M[x]}),this._mode=p,this._active=M[p],this._active||(this._mode="turntable",this._active=M.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var d=g.prototype;d.flush=function(M){for(var p=this._controllerList,x=0;x<p.length;++x)p[x].flush(M)},d.idle=function(M){for(var p=this._controllerList,x=0;x<p.length;++x)p[x].idle(M)},d.lookAt=function(M,p,x,w){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].lookAt(M,p,x,w)},d.rotate=function(M,p,x,w){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].rotate(M,p,x,w)},d.pan=function(M,p,x,w){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].pan(M,p,x,w)},d.translate=function(M,p,x,w){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].translate(M,p,x,w)},d.setMatrix=function(M,p){for(var x=this._controllerList,w=0;w<x.length;++w)x[w].setMatrix(M,p)},d.setDistanceLimits=function(M,p){for(var x=this._controllerList,w=0;w<x.length;++w)x[w].setDistanceLimits(M,p)},d.setDistance=function(M,p){for(var x=this._controllerList,w=0;w<x.length;++w)x[w].setDistance(M,p)},d.recalcMatrix=function(M){this._active.recalcMatrix(M)},d.getDistance=function(M){return this._active.getDistance(M)},d.getDistanceLimits=function(M){return this._active.getDistanceLimits(M)},d.lastT=function(){return this._active.lastT()},d.setMode=function(M){if(M!==this._mode){var p=this._controllerNames.indexOf(M);if(!(p<0)){var x=this._active,w=this._controllerList[p],o=Math.max(x.lastT(),w.lastT());x.recalcMatrix(o),w.setMatrix(o,x.computedMatrix),this._active=w,this._mode=M,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},d.getMode=function(){return this._mode};function E(M){M=M||{};var p=M.eye||[0,0,1],x=M.center||[0,0,0],w=M.up||[0,1,0],o=M.distanceLimits||[0,1/0],v=M.mode||"turntable",u=c(),f=m(),h=l();return u.setDistanceLimits(o[0],o[1]),u.lookAt(0,p,x,w),f.setDistanceLimits(o[0],o[1]),f.lookAt(0,p,x,w),h.setDistanceLimits(o[0],o[1]),h.lookAt(0,p,x,w),new g({turntable:u,orbit:f,matrix:h},v)}},7169:function(L,F,a){var c=typeof WeakMap>"u"?a(1538):WeakMap,m=a(2762),l=a(8116),g=new c;function d(E){var M=g.get(E),p=M&&(M._triangleBuffer.handle||M._triangleBuffer.buffer);if(!p||!E.isBuffer(p)){var x=m(E,new Float32Array([-1,-1,-1,4,4,-1]));M=l(E,[{buffer:x,type:E.FLOAT,size:2}]),M._triangleBuffer=x,g.set(E,M)}M.bind(),E.drawArrays(E.TRIANGLES,0,3),M.unbind()}L.exports=d},1085:function(L,F,a){var c=a(1371);L.exports=m;function m(l,g,d){g=typeof g=="number"?g:1,d=d||": ";var E=l.split(/\r?\n/),M=String(E.length+g-1).length;return E.map(function(p,x){var w=x+g,o=String(w).length,v=c(w,M-o);return v+d+p}).join(`
`)}},3952:function(L,F,a){L.exports=l;var c=a(3250);function m(g,d){for(var E=new Array(d+1),M=0;M<g.length;++M)E[M]=g[M];for(var M=0;M<=g.length;++M){for(var p=g.length;p<=d;++p){for(var x=new Array(d),w=0;w<d;++w)x[w]=Math.pow(p+1-M,w);E[p]=x}var o=c.apply(void 0,E);if(o)return!0}return!1}function l(g){var d=g.length;if(d===0)return[];if(d===1)return[0];for(var E=g[0].length,M=[g[0]],p=[0],x=1;x<d;++x){if(M.push(g[x]),!m(M,E)){M.pop();continue}if(p.push(x),p.length===E+1)return p}return p}},5995:function(L,F,a){L.exports=l;var c=a(7642),m=a(6037);function l(g,d){return c(d).filter(function(E){for(var M=new Array(E.length),p=0;p<E.length;++p)M[p]=d[E[p]];return m(M)*g<1})}},3502:function(L,F,a){L.exports=l;var c=a(5995),m=a(9127);function l(g,d){return m(c(g,d))}},6468:function(L){L.exports=function(a){return atob(a)}},2642:function(L,F,a){L.exports=l;var c=a(727);function m(g){for(var d=0,E=0;E<g.length;++E)d+=g[E];return d}function l(g,d){for(var E=d.length,M=new Array(E+1),p=0;p<E;++p){for(var x=new Array(E+1),w=0;w<=E;++w)x[w]=g[w][p];M[p]=x}M[E]=new Array(E+1);for(var p=0;p<=E;++p)M[E][p]=1;for(var o=new Array(E+1),p=0;p<E;++p)o[p]=d[p];o[E]=1;var v=c(M,o),u=m(v[E+1]);u===0&&(u=1);for(var f=new Array(E+1),p=0;p<=E;++p)f[p]=m(v[p])/u;return f}},7507:function(L,F){F.byteLength=M,F.toByteArray=x,F.fromByteArray=v;for(var a=[],c=[],m=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,d=l.length;g<d;++g)a[g]=l[g],c[l.charCodeAt(g)]=g;c[45]=62,c[95]=63;function E(u){var f=u.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=u.indexOf("=");h===-1&&(h=f);var r=h===f?0:4-h%4;return[h,r]}function M(u){var f=E(u),h=f[0],r=f[1];return(h+r)*3/4-r}function p(u,f,h){return(f+h)*3/4-h}function x(u){var f,h=E(u),r=h[0],s=h[1],n=new m(p(u,r,s)),t=0,i=s>0?r-4:r,e;for(e=0;e<i;e+=4)f=c[u.charCodeAt(e)]<<18|c[u.charCodeAt(e+1)]<<12|c[u.charCodeAt(e+2)]<<6|c[u.charCodeAt(e+3)],n[t++]=f>>16&255,n[t++]=f>>8&255,n[t++]=f&255;return s===2&&(f=c[u.charCodeAt(e)]<<2|c[u.charCodeAt(e+1)]>>4,n[t++]=f&255),s===1&&(f=c[u.charCodeAt(e)]<<10|c[u.charCodeAt(e+1)]<<4|c[u.charCodeAt(e+2)]>>2,n[t++]=f>>8&255,n[t++]=f&255),n}function w(u){return a[u>>18&63]+a[u>>12&63]+a[u>>6&63]+a[u&63]}function o(u,f,h){for(var r,s=[],n=f;n<h;n+=3)r=(u[n]<<16&16711680)+(u[n+1]<<8&65280)+(u[n+2]&255),s.push(w(r));return s.join("")}function v(u){for(var f,h=u.length,r=h%3,s=[],n=16383,t=0,i=h-r;t<i;t+=n)s.push(o(u,t,t+n>i?i:t+n));return r===1?(f=u[h-1],s.push(a[f>>2]+a[f<<4&63]+"==")):r===2&&(f=(u[h-2]<<8)+u[h-1],s.push(a[f>>10]+a[f>>4&63]+a[f<<2&63]+"=")),s.join("")}},3865:function(L,F,a){var c=a(869);L.exports=m;function m(l,g){return c(l[0].mul(g[1]).add(g[0].mul(l[1])),l[1].mul(g[1]))}},1318:function(L){L.exports=F;function F(a,c){return a[0].mul(c[1]).cmp(c[0].mul(a[1]))}},8697:function(L,F,a){var c=a(869);L.exports=m;function m(l,g){return c(l[0].mul(g[1]),l[1].mul(g[0]))}},7842:function(L,F,a){var c=a(6330),m=a(1533),l=a(2651),g=a(4387),d=a(869),E=a(8697);L.exports=M;function M(p,x){if(c(p))return x?E(p,M(x)):[p[0].clone(),p[1].clone()];var w=0,o,v;if(m(p))o=p.clone();else if(typeof p=="string")o=g(p);else{if(p===0)return[l(0),l(1)];if(p===Math.floor(p))o=l(p);else{for(;p!==Math.floor(p);)p=p*Math.pow(2,256),w-=256;o=l(p)}}if(c(x))o.mul(x[1]),v=x[0].clone();else if(m(x))v=x.clone();else if(typeof x=="string")v=g(x);else if(!x)v=l(1);else if(x===Math.floor(x))v=l(x);else{for(;x!==Math.floor(x);)x=x*Math.pow(2,256),w+=256;v=l(x)}return w>0?o=o.ushln(w):w<0&&(v=v.ushln(-w)),d(o,v)}},6330:function(L,F,a){var c=a(1533);L.exports=m;function m(l){return Array.isArray(l)&&l.length===2&&c(l[0])&&c(l[1])}},5716:function(L,F,a){var c=a(6859);L.exports=m;function m(l){return l.cmp(new c(0))}},1369:function(L,F,a){var c=a(5716);L.exports=m;function m(l){var g=l.length,d=l.words,E=0;if(g===1)E=d[0];else if(g===2)E=d[0]+d[1]*67108864;else for(var M=0;M<g;M++){var p=d[M];E+=p*Math.pow(67108864,M)}return c(l)*E}},4025:function(L,F,a){var c=a(2361),m=a(8828).countTrailingZeros;L.exports=l;function l(g){var d=m(c.lo(g));if(d<32)return d;var E=m(c.hi(g));return E>20?52:E+32}},1533:function(L,F,a){a(6859),L.exports=c;function c(m){return m&&typeof m=="object"&&!!m.words}},2651:function(L,F,a){var c=a(6859),m=a(2361);L.exports=l;function l(g){var d=m.exponent(g);return d<52?new c(g):new c(g*Math.pow(2,52-d)).ushln(d-52)}},869:function(L,F,a){var c=a(2651),m=a(5716);L.exports=l;function l(g,d){var E=m(g),M=m(d);if(E===0)return[c(0),c(1)];if(M===0)return[c(0),c(0)];M<0&&(g=g.neg(),d=d.neg());var p=g.gcd(d);return p.cmpn(1)?[g.div(p),d.div(p)]:[g,d]}},4387:function(L,F,a){var c=a(6859);L.exports=m;function m(l){return new c(l)}},6504:function(L,F,a){var c=a(869);L.exports=m;function m(l,g){return c(l[0].mul(g[0]),l[1].mul(g[1]))}},7721:function(L,F,a){var c=a(5716);L.exports=m;function m(l){return c(l[0])*c(l[1])}},5572:function(L,F,a){var c=a(869);L.exports=m;function m(l,g){return c(l[0].mul(g[1]).sub(l[1].mul(g[0])),l[1].mul(g[1]))}},946:function(L,F,a){var c=a(1369),m=a(4025);L.exports=l;function l(g){var d=g[0],E=g[1];if(d.cmpn(0)===0)return 0;var M=d.abs().divmod(E.abs()),p=M.div,x=c(p),w=M.mod,o=d.negative!==E.negative?-1:1;if(w.cmpn(0)===0)return o*x;if(x){var v=m(x)+4,u=c(w.ushln(v).divRound(E));return o*(x+u*Math.pow(2,-v))}else{var f=E.bitLength()-w.bitLength()+53,u=c(w.ushln(f).divRound(E));return f<1023?o*u*Math.pow(2,-f):(u*=Math.pow(2,-1023),o*u*Math.pow(2,1023-f))}}},2478:function(L){function F(d,E,M,p,x){for(var w=x+1;p<=x;){var o=p+x>>>1,v=d[o],u=M!==void 0?M(v,E):v-E;u>=0?(w=o,x=o-1):p=o+1}return w}function a(d,E,M,p,x){for(var w=x+1;p<=x;){var o=p+x>>>1,v=d[o],u=M!==void 0?M(v,E):v-E;u>0?(w=o,x=o-1):p=o+1}return w}function c(d,E,M,p,x){for(var w=p-1;p<=x;){var o=p+x>>>1,v=d[o],u=M!==void 0?M(v,E):v-E;u<0?(w=o,p=o+1):x=o-1}return w}function m(d,E,M,p,x){for(var w=p-1;p<=x;){var o=p+x>>>1,v=d[o],u=M!==void 0?M(v,E):v-E;u<=0?(w=o,p=o+1):x=o-1}return w}function l(d,E,M,p,x){for(;p<=x;){var w=p+x>>>1,o=d[w],v=M!==void 0?M(o,E):o-E;if(v===0)return w;v<=0?p=w+1:x=w-1}return-1}function g(d,E,M,p,x,w){return typeof M=="function"?w(d,E,M,p===void 0?0:p|0,x===void 0?d.length-1:x|0):w(d,E,void 0,M===void 0?0:M|0,p===void 0?d.length-1:p|0)}L.exports={ge:function(d,E,M,p,x){return g(d,E,M,p,x,F)},gt:function(d,E,M,p,x){return g(d,E,M,p,x,a)},lt:function(d,E,M,p,x){return g(d,E,M,p,x,c)},le:function(d,E,M,p,x){return g(d,E,M,p,x,m)},eq:function(d,E,M,p,x){return g(d,E,M,p,x,l)}}},8828:function(L,F){"use restrict";var a=32;F.INT_BITS=a,F.INT_MAX=2147483647,F.INT_MIN=-1<<a-1,F.sign=function(l){return(l>0)-(l<0)},F.abs=function(l){var g=l>>a-1;return(l^g)-g},F.min=function(l,g){return g^(l^g)&-(l<g)},F.max=function(l,g){return l^(l^g)&-(l<g)},F.isPow2=function(l){return!(l&l-1)&&!!l},F.log2=function(l){var g,d;return g=(l>65535)<<4,l>>>=g,d=(l>255)<<3,l>>>=d,g|=d,d=(l>15)<<2,l>>>=d,g|=d,d=(l>3)<<1,l>>>=d,g|=d,g|l>>1},F.log10=function(l){return l>=1e9?9:l>=1e8?8:l>=1e7?7:l>=1e6?6:l>=1e5?5:l>=1e4?4:l>=1e3?3:l>=100?2:l>=10?1:0},F.popCount=function(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),(l+(l>>>4)&252645135)*16843009>>>24};function c(l){var g=32;return l&=-l,l&&g--,l&65535&&(g-=16),l&16711935&&(g-=8),l&252645135&&(g-=4),l&858993459&&(g-=2),l&1431655765&&(g-=1),g}F.countTrailingZeros=c,F.nextPow2=function(l){return l+=l===0,--l,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l+1},F.prevPow2=function(l){return l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l-(l>>>1)},F.parity=function(l){return l^=l>>>16,l^=l>>>8,l^=l>>>4,l&=15,27030>>>l&1};var m=new Array(256);(function(l){for(var g=0;g<256;++g){var d=g,E=g,M=7;for(d>>>=1;d;d>>>=1)E<<=1,E|=d&1,--M;l[g]=E<<M&255}})(m),F.reverse=function(l){return m[l&255]<<24|m[l>>>8&255]<<16|m[l>>>16&255]<<8|m[l>>>24&255]},F.interleave2=function(l,g){return l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,g&=65535,g=(g|g<<8)&16711935,g=(g|g<<4)&252645135,g=(g|g<<2)&858993459,g=(g|g<<1)&1431655765,l|g<<1},F.deinterleave2=function(l,g){return l=l>>>g&1431655765,l=(l|l>>>1)&858993459,l=(l|l>>>2)&252645135,l=(l|l>>>4)&16711935,l=(l|l>>>16)&65535,l<<16>>16},F.interleave3=function(l,g,d){return l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,g&=1023,g=(g|g<<16)&4278190335,g=(g|g<<8)&251719695,g=(g|g<<4)&3272356035,g=(g|g<<2)&1227133513,l|=g<<1,d&=1023,d=(d|d<<16)&4278190335,d=(d|d<<8)&251719695,d=(d|d<<4)&3272356035,d=(d|d<<2)&1227133513,l|d<<2},F.deinterleave3=function(l,g){return l=l>>>g&1227133513,l=(l|l>>>2)&3272356035,l=(l|l>>>4)&251719695,l=(l|l>>>8)&4278190335,l=(l|l>>>16)&1023,l<<22>>22},F.nextCombination=function(l){var g=l|l-1;return g+1|(~g&-~g)-1>>>c(l)+1}},6859:function(L,F,a){L=a.nmd(L),function(c,m){function l(S,y){if(!S)throw new Error(y||"Assertion failed")}function g(S,y){S.super_=y;var R=function(){};R.prototype=y.prototype,S.prototype=new R,S.prototype.constructor=S}function d(S,y,R){if(d.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((y==="le"||y==="be")&&(R=y,y=10),this._init(S||0,y||10,R||"be"))}typeof c=="object"?c.exports=d:m.BN=d,d.BN=d,d.wordSize=26;var E;try{typeof window<"u"&&typeof window.Buffer<"u"?E=window.Buffer:E=a(7790).Buffer}catch{}d.isBN=function(y){return y instanceof d?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===d.wordSize&&Array.isArray(y.words)},d.max=function(y,R){return y.cmp(R)>0?y:R},d.min=function(y,R){return y.cmp(R)<0?y:R},d.prototype._init=function(y,R,O){if(typeof y=="number")return this._initNumber(y,R,O);if(typeof y=="object")return this._initArray(y,R,O);R==="hex"&&(R=16),l(R===(R|0)&&R>=2&&R<=36),y=y.toString().replace(/\s+/g,"");var P=0;y[0]==="-"&&(P++,this.negative=1),P<y.length&&(R===16?this._parseHex(y,P,O):(this._parseBase(y,R,P),O==="le"&&this._initArray(this.toArray(),R,O)))},d.prototype._initNumber=function(y,R,O){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(l(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},d.prototype._initArray=function(y,R,O){if(l(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var D,H,G=0;if(O==="be")for(P=y.length-1,D=0;P>=0;P-=3)H=y[P]|y[P-1]<<8|y[P-2]<<16,this.words[D]|=H<<G&67108863,this.words[D+1]=H>>>26-G&67108863,G+=24,G>=26&&(G-=26,D++);else if(O==="le")for(P=0,D=0;P<y.length;P+=3)H=y[P]|y[P+1]<<8|y[P+2]<<16,this.words[D]|=H<<G&67108863,this.words[D+1]=H>>>26-G&67108863,G+=24,G>=26&&(G-=26,D++);return this.strip()};function M(S,y){var R=S.charCodeAt(y);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function p(S,y,R){var O=M(S,R);return R-1>=y&&(O|=M(S,R-1)<<4),O}d.prototype._parseHex=function(y,R,O){this.length=Math.ceil((y.length-R)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var D=0,H=0,G;if(O==="be")for(P=y.length-1;P>=R;P-=2)G=p(y,R,P)<<D,this.words[H]|=G&67108863,D>=18?(D-=18,H+=1,this.words[H]|=G>>>26):D+=8;else{var B=y.length-R;for(P=B%2===0?R+1:R;P<y.length;P+=2)G=p(y,R,P)<<D,this.words[H]|=G&67108863,D>=18?(D-=18,H+=1,this.words[H]|=G>>>26):D+=8}this.strip()};function x(S,y,R,O){for(var P=0,D=Math.min(S.length,R),H=y;H<D;H++){var G=S.charCodeAt(H)-48;P*=O,G>=49?P+=G-49+10:G>=17?P+=G-17+10:P+=G}return P}d.prototype._parseBase=function(y,R,O){this.words=[0],this.length=1;for(var P=0,D=1;D<=67108863;D*=R)P++;P--,D=D/R|0;for(var H=y.length-O,G=H%P,B=Math.min(H,H-G)+O,I=0,N=O;N<B;N+=P)I=x(y,N,N+P,R),this.imuln(D),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(G!==0){var $=1;for(I=x(y,N,y.length,R),N=0;N<G;N++)$*=R;this.imuln($),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},d.prototype.copy=function(y){y.words=new Array(this.length);for(var R=0;R<this.length;R++)y.words[R]=this.words[R];y.length=this.length,y.negative=this.negative,y.red=this.red},d.prototype.clone=function(){var y=new d(null);return this.copy(y),y},d.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(y,R){y=y||10,R=R|0||1;var O;if(y===16||y==="hex"){O="";for(var P=0,D=0,H=0;H<this.length;H++){var G=this.words[H],B=((G<<P|D)&16777215).toString(16);D=G>>>24-P&16777215,D!==0||H!==this.length-1?O=w[6-B.length]+B+O:O=B+O,P+=2,P>=26&&(P-=26,H--)}for(D!==0&&(O=D.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(y===(y|0)&&y>=2&&y<=36){var I=o[y],N=v[y];O="";var $=this.clone();for($.negative=0;!$.isZero();){var U=$.modn(N).toString(y);$=$.idivn(N),$.isZero()?O=U+O:O=w[I-U.length]+U+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}l(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(y,R){return l(typeof E<"u"),this.toArrayLike(E,y,R)},d.prototype.toArray=function(y,R){return this.toArrayLike(Array,y,R)},d.prototype.toArrayLike=function(y,R,O){var P=this.byteLength(),D=O||Math.max(1,P);l(P<=D,"byte array longer than desired length"),l(D>0,"Requested array length <= 0"),this.strip();var H=R==="le",G=new y(D),B,I,N=this.clone();if(H){for(I=0;!N.isZero();I++)B=N.andln(255),N.iushrn(8),G[I]=B;for(;I<D;I++)G[I]=0}else{for(I=0;I<D-P;I++)G[I]=0;for(I=0;!N.isZero();I++)B=N.andln(255),N.iushrn(8),G[D-I-1]=B}return G},Math.clz32?d.prototype._countBits=function(y){return 32-Math.clz32(y)}:d.prototype._countBits=function(y){var R=y,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},d.prototype._zeroBits=function(y){if(y===0)return 26;var R=y,O=0;return R&8191||(O+=13,R>>>=13),R&127||(O+=7,R>>>=7),R&15||(O+=4,R>>>=4),R&3||(O+=2,R>>>=2),R&1||O++,O},d.prototype.bitLength=function(){var y=this.words[this.length-1],R=this._countBits(y);return(this.length-1)*26+R};function u(S){for(var y=new Array(S.bitLength()),R=0;R<y.length;R++){var O=R/26|0,P=R%26;y[R]=(S.words[O]&1<<P)>>>P}return y}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(y+=O,O!==26)break}return y},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},d.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var R=0;R<y.length;R++)this.words[R]=this.words[R]|y.words[R];return this.strip()},d.prototype.ior=function(y){return l((this.negative|y.negative)===0),this.iuor(y)},d.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},d.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},d.prototype.iuand=function(y){var R;this.length>y.length?R=y:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&y.words[O];return this.length=R.length,this.strip()},d.prototype.iand=function(y){return l((this.negative|y.negative)===0),this.iuand(y)},d.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},d.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},d.prototype.iuxor=function(y){var R,O;this.length>y.length?(R=this,O=y):(R=y,O=this);for(var P=0;P<O.length;P++)this.words[P]=R.words[P]^O.words[P];if(this!==R)for(;P<R.length;P++)this.words[P]=R.words[P];return this.length=R.length,this.strip()},d.prototype.ixor=function(y){return l((this.negative|y.negative)===0),this.iuxor(y)},d.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},d.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},d.prototype.inotn=function(y){l(typeof y=="number"&&y>=0);var R=Math.ceil(y/26)|0,O=y%26;this._expand(R),O>0&&R--;for(var P=0;P<R;P++)this.words[P]=~this.words[P]&67108863;return O>0&&(this.words[P]=~this.words[P]&67108863>>26-O),this.strip()},d.prototype.notn=function(y){return this.clone().inotn(y)},d.prototype.setn=function(y,R){l(typeof y=="number"&&y>=0);var O=y/26|0,P=y%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<P:this.words[O]=this.words[O]&~(1<<P),this.strip()},d.prototype.iadd=function(y){var R;if(this.negative!==0&&y.negative===0)return this.negative=0,R=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,R=this.isub(y),y.negative=1,R._normSign();var O,P;this.length>y.length?(O=this,P=y):(O=y,P=this);for(var D=0,H=0;H<P.length;H++)R=(O.words[H]|0)+(P.words[H]|0)+D,this.words[H]=R&67108863,D=R>>>26;for(;D!==0&&H<O.length;H++)R=(O.words[H]|0)+D,this.words[H]=R&67108863,D=R>>>26;if(this.length=O.length,D!==0)this.words[this.length]=D,this.length++;else if(O!==this)for(;H<O.length;H++)this.words[H]=O.words[H];return this},d.prototype.add=function(y){var R;return y.negative!==0&&this.negative===0?(y.negative=0,R=this.sub(y),y.negative^=1,R):y.negative===0&&this.negative!==0?(this.negative=0,R=y.sub(this),this.negative=1,R):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},d.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var R=this.iadd(y);return y.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var O=this.cmp(y);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,D;O>0?(P=this,D=y):(P=y,D=this);for(var H=0,G=0;G<D.length;G++)R=(P.words[G]|0)-(D.words[G]|0)+H,H=R>>26,this.words[G]=R&67108863;for(;H!==0&&G<P.length;G++)R=(P.words[G]|0)+H,H=R>>26,this.words[G]=R&67108863;if(H===0&&G<P.length&&P!==this)for(;G<P.length;G++)this.words[G]=P.words[G];return this.length=Math.max(this.length,G),P!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(y){return this.clone().isub(y)};function f(S,y,R){R.negative=y.negative^S.negative;var O=S.length+y.length|0;R.length=O,O=O-1|0;var P=S.words[0]|0,D=y.words[0]|0,H=P*D,G=H&67108863,B=H/67108864|0;R.words[0]=G;for(var I=1;I<O;I++){for(var N=B>>>26,$=B&67108863,U=Math.min(I,y.length-1),K=Math.max(0,I-S.length+1);K<=U;K++){var W=I-K|0;P=S.words[W]|0,D=y.words[K]|0,H=P*D+$,N+=H/67108864|0,$=H&67108863}R.words[I]=$|0,B=N|0}return B!==0?R.words[I]=B|0:R.length--,R.strip()}var h=function(y,R,O){var P=y.words,D=R.words,H=O.words,G=0,B,I,N,$=P[0]|0,U=$&8191,K=$>>>13,W=P[1]|0,Y=W&8191,j=W>>>13,X=P[2]|0,Q=X&8191,q=X>>>13,it=P[3]|0,ft=it&8191,at=it>>>13,rt=P[4]|0,ht=rt&8191,ot=rt>>>13,vt=P[5]|0,lt=vt&8191,ut=vt>>>13,mt=P[6]|0,Et=mt&8191,ct=mt>>>13,xt=P[7]|0,pt=xt&8191,Mt=xt>>>13,At=P[8]|0,wt=At&8191,dt=At>>>13,gt=P[9]|0,Tt=gt&8191,_t=gt>>>13,Bt=D[0]|0,Lt=Bt&8191,St=Bt>>>13,Ft=D[1]|0,Ot=Ft&8191,It=Ft>>>13,Yt=D[2]|0,J=Yt&8191,k=Yt>>>13,z=D[3]|0,et=z&8191,st=z>>>13,yt=D[4]|0,bt=yt&8191,Rt=yt>>>13,Nt=D[5]|0,Ct=Nt&8191,Pt=Nt>>>13,zt=D[6]|0,kt=zt&8191,Dt=zt>>>13,Jt=D[7]|0,Ut=Jt&8191,Ht=Jt>>>13,Ie=D[8]|0,Vt=Ie&8191,Gt=Ie>>>13,we=D[9]|0,Wt=we&8191,Xt=we>>>13;O.negative=y.negative^R.negative,O.length=19,B=Math.imul(U,Lt),I=Math.imul(U,St),I=I+Math.imul(K,Lt)|0,N=Math.imul(K,St);var le=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(le>>>26)|0,le&=67108863,B=Math.imul(Y,Lt),I=Math.imul(Y,St),I=I+Math.imul(j,Lt)|0,N=Math.imul(j,St),B=B+Math.imul(U,Ot)|0,I=I+Math.imul(U,It)|0,I=I+Math.imul(K,Ot)|0,N=N+Math.imul(K,It)|0;var ue=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(ue>>>26)|0,ue&=67108863,B=Math.imul(Q,Lt),I=Math.imul(Q,St),I=I+Math.imul(q,Lt)|0,N=Math.imul(q,St),B=B+Math.imul(Y,Ot)|0,I=I+Math.imul(Y,It)|0,I=I+Math.imul(j,Ot)|0,N=N+Math.imul(j,It)|0,B=B+Math.imul(U,J)|0,I=I+Math.imul(U,k)|0,I=I+Math.imul(K,J)|0,N=N+Math.imul(K,k)|0;var ve=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(ve>>>26)|0,ve&=67108863,B=Math.imul(ft,Lt),I=Math.imul(ft,St),I=I+Math.imul(at,Lt)|0,N=Math.imul(at,St),B=B+Math.imul(Q,Ot)|0,I=I+Math.imul(Q,It)|0,I=I+Math.imul(q,Ot)|0,N=N+Math.imul(q,It)|0,B=B+Math.imul(Y,J)|0,I=I+Math.imul(Y,k)|0,I=I+Math.imul(j,J)|0,N=N+Math.imul(j,k)|0,B=B+Math.imul(U,et)|0,I=I+Math.imul(U,st)|0,I=I+Math.imul(K,et)|0,N=N+Math.imul(K,st)|0;var re=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(re>>>26)|0,re&=67108863,B=Math.imul(ht,Lt),I=Math.imul(ht,St),I=I+Math.imul(ot,Lt)|0,N=Math.imul(ot,St),B=B+Math.imul(ft,Ot)|0,I=I+Math.imul(ft,It)|0,I=I+Math.imul(at,Ot)|0,N=N+Math.imul(at,It)|0,B=B+Math.imul(Q,J)|0,I=I+Math.imul(Q,k)|0,I=I+Math.imul(q,J)|0,N=N+Math.imul(q,k)|0,B=B+Math.imul(Y,et)|0,I=I+Math.imul(Y,st)|0,I=I+Math.imul(j,et)|0,N=N+Math.imul(j,st)|0,B=B+Math.imul(U,bt)|0,I=I+Math.imul(U,Rt)|0,I=I+Math.imul(K,bt)|0,N=N+Math.imul(K,Rt)|0;var me=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(me>>>26)|0,me&=67108863,B=Math.imul(lt,Lt),I=Math.imul(lt,St),I=I+Math.imul(ut,Lt)|0,N=Math.imul(ut,St),B=B+Math.imul(ht,Ot)|0,I=I+Math.imul(ht,It)|0,I=I+Math.imul(ot,Ot)|0,N=N+Math.imul(ot,It)|0,B=B+Math.imul(ft,J)|0,I=I+Math.imul(ft,k)|0,I=I+Math.imul(at,J)|0,N=N+Math.imul(at,k)|0,B=B+Math.imul(Q,et)|0,I=I+Math.imul(Q,st)|0,I=I+Math.imul(q,et)|0,N=N+Math.imul(q,st)|0,B=B+Math.imul(Y,bt)|0,I=I+Math.imul(Y,Rt)|0,I=I+Math.imul(j,bt)|0,N=N+Math.imul(j,Rt)|0,B=B+Math.imul(U,Ct)|0,I=I+Math.imul(U,Pt)|0,I=I+Math.imul(K,Ct)|0,N=N+Math.imul(K,Pt)|0;var Ee=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,B=Math.imul(Et,Lt),I=Math.imul(Et,St),I=I+Math.imul(ct,Lt)|0,N=Math.imul(ct,St),B=B+Math.imul(lt,Ot)|0,I=I+Math.imul(lt,It)|0,I=I+Math.imul(ut,Ot)|0,N=N+Math.imul(ut,It)|0,B=B+Math.imul(ht,J)|0,I=I+Math.imul(ht,k)|0,I=I+Math.imul(ot,J)|0,N=N+Math.imul(ot,k)|0,B=B+Math.imul(ft,et)|0,I=I+Math.imul(ft,st)|0,I=I+Math.imul(at,et)|0,N=N+Math.imul(at,st)|0,B=B+Math.imul(Q,bt)|0,I=I+Math.imul(Q,Rt)|0,I=I+Math.imul(q,bt)|0,N=N+Math.imul(q,Rt)|0,B=B+Math.imul(Y,Ct)|0,I=I+Math.imul(Y,Pt)|0,I=I+Math.imul(j,Ct)|0,N=N+Math.imul(j,Pt)|0,B=B+Math.imul(U,kt)|0,I=I+Math.imul(U,Dt)|0,I=I+Math.imul(K,kt)|0,N=N+Math.imul(K,Dt)|0;var Me=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Me>>>26)|0,Me&=67108863,B=Math.imul(pt,Lt),I=Math.imul(pt,St),I=I+Math.imul(Mt,Lt)|0,N=Math.imul(Mt,St),B=B+Math.imul(Et,Ot)|0,I=I+Math.imul(Et,It)|0,I=I+Math.imul(ct,Ot)|0,N=N+Math.imul(ct,It)|0,B=B+Math.imul(lt,J)|0,I=I+Math.imul(lt,k)|0,I=I+Math.imul(ut,J)|0,N=N+Math.imul(ut,k)|0,B=B+Math.imul(ht,et)|0,I=I+Math.imul(ht,st)|0,I=I+Math.imul(ot,et)|0,N=N+Math.imul(ot,st)|0,B=B+Math.imul(ft,bt)|0,I=I+Math.imul(ft,Rt)|0,I=I+Math.imul(at,bt)|0,N=N+Math.imul(at,Rt)|0,B=B+Math.imul(Q,Ct)|0,I=I+Math.imul(Q,Pt)|0,I=I+Math.imul(q,Ct)|0,N=N+Math.imul(q,Pt)|0,B=B+Math.imul(Y,kt)|0,I=I+Math.imul(Y,Dt)|0,I=I+Math.imul(j,kt)|0,N=N+Math.imul(j,Dt)|0,B=B+Math.imul(U,Ut)|0,I=I+Math.imul(U,Ht)|0,I=I+Math.imul(K,Ut)|0,N=N+Math.imul(K,Ht)|0;var Te=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Te>>>26)|0,Te&=67108863,B=Math.imul(wt,Lt),I=Math.imul(wt,St),I=I+Math.imul(dt,Lt)|0,N=Math.imul(dt,St),B=B+Math.imul(pt,Ot)|0,I=I+Math.imul(pt,It)|0,I=I+Math.imul(Mt,Ot)|0,N=N+Math.imul(Mt,It)|0,B=B+Math.imul(Et,J)|0,I=I+Math.imul(Et,k)|0,I=I+Math.imul(ct,J)|0,N=N+Math.imul(ct,k)|0,B=B+Math.imul(lt,et)|0,I=I+Math.imul(lt,st)|0,I=I+Math.imul(ut,et)|0,N=N+Math.imul(ut,st)|0,B=B+Math.imul(ht,bt)|0,I=I+Math.imul(ht,Rt)|0,I=I+Math.imul(ot,bt)|0,N=N+Math.imul(ot,Rt)|0,B=B+Math.imul(ft,Ct)|0,I=I+Math.imul(ft,Pt)|0,I=I+Math.imul(at,Ct)|0,N=N+Math.imul(at,Pt)|0,B=B+Math.imul(Q,kt)|0,I=I+Math.imul(Q,Dt)|0,I=I+Math.imul(q,kt)|0,N=N+Math.imul(q,Dt)|0,B=B+Math.imul(Y,Ut)|0,I=I+Math.imul(Y,Ht)|0,I=I+Math.imul(j,Ut)|0,N=N+Math.imul(j,Ht)|0,B=B+Math.imul(U,Vt)|0,I=I+Math.imul(U,Gt)|0,I=I+Math.imul(K,Vt)|0,N=N+Math.imul(K,Gt)|0;var ce=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(ce>>>26)|0,ce&=67108863,B=Math.imul(Tt,Lt),I=Math.imul(Tt,St),I=I+Math.imul(_t,Lt)|0,N=Math.imul(_t,St),B=B+Math.imul(wt,Ot)|0,I=I+Math.imul(wt,It)|0,I=I+Math.imul(dt,Ot)|0,N=N+Math.imul(dt,It)|0,B=B+Math.imul(pt,J)|0,I=I+Math.imul(pt,k)|0,I=I+Math.imul(Mt,J)|0,N=N+Math.imul(Mt,k)|0,B=B+Math.imul(Et,et)|0,I=I+Math.imul(Et,st)|0,I=I+Math.imul(ct,et)|0,N=N+Math.imul(ct,st)|0,B=B+Math.imul(lt,bt)|0,I=I+Math.imul(lt,Rt)|0,I=I+Math.imul(ut,bt)|0,N=N+Math.imul(ut,Rt)|0,B=B+Math.imul(ht,Ct)|0,I=I+Math.imul(ht,Pt)|0,I=I+Math.imul(ot,Ct)|0,N=N+Math.imul(ot,Pt)|0,B=B+Math.imul(ft,kt)|0,I=I+Math.imul(ft,Dt)|0,I=I+Math.imul(at,kt)|0,N=N+Math.imul(at,Dt)|0,B=B+Math.imul(Q,Ut)|0,I=I+Math.imul(Q,Ht)|0,I=I+Math.imul(q,Ut)|0,N=N+Math.imul(q,Ht)|0,B=B+Math.imul(Y,Vt)|0,I=I+Math.imul(Y,Gt)|0,I=I+Math.imul(j,Vt)|0,N=N+Math.imul(j,Gt)|0,B=B+Math.imul(U,Wt)|0,I=I+Math.imul(U,Xt)|0,I=I+Math.imul(K,Wt)|0,N=N+Math.imul(K,Xt)|0;var se=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(se>>>26)|0,se&=67108863,B=Math.imul(Tt,Ot),I=Math.imul(Tt,It),I=I+Math.imul(_t,Ot)|0,N=Math.imul(_t,It),B=B+Math.imul(wt,J)|0,I=I+Math.imul(wt,k)|0,I=I+Math.imul(dt,J)|0,N=N+Math.imul(dt,k)|0,B=B+Math.imul(pt,et)|0,I=I+Math.imul(pt,st)|0,I=I+Math.imul(Mt,et)|0,N=N+Math.imul(Mt,st)|0,B=B+Math.imul(Et,bt)|0,I=I+Math.imul(Et,Rt)|0,I=I+Math.imul(ct,bt)|0,N=N+Math.imul(ct,Rt)|0,B=B+Math.imul(lt,Ct)|0,I=I+Math.imul(lt,Pt)|0,I=I+Math.imul(ut,Ct)|0,N=N+Math.imul(ut,Pt)|0,B=B+Math.imul(ht,kt)|0,I=I+Math.imul(ht,Dt)|0,I=I+Math.imul(ot,kt)|0,N=N+Math.imul(ot,Dt)|0,B=B+Math.imul(ft,Ut)|0,I=I+Math.imul(ft,Ht)|0,I=I+Math.imul(at,Ut)|0,N=N+Math.imul(at,Ht)|0,B=B+Math.imul(Q,Vt)|0,I=I+Math.imul(Q,Gt)|0,I=I+Math.imul(q,Vt)|0,N=N+Math.imul(q,Gt)|0,B=B+Math.imul(Y,Wt)|0,I=I+Math.imul(Y,Xt)|0,I=I+Math.imul(j,Wt)|0,N=N+Math.imul(j,Xt)|0;var fe=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(fe>>>26)|0,fe&=67108863,B=Math.imul(Tt,J),I=Math.imul(Tt,k),I=I+Math.imul(_t,J)|0,N=Math.imul(_t,k),B=B+Math.imul(wt,et)|0,I=I+Math.imul(wt,st)|0,I=I+Math.imul(dt,et)|0,N=N+Math.imul(dt,st)|0,B=B+Math.imul(pt,bt)|0,I=I+Math.imul(pt,Rt)|0,I=I+Math.imul(Mt,bt)|0,N=N+Math.imul(Mt,Rt)|0,B=B+Math.imul(Et,Ct)|0,I=I+Math.imul(Et,Pt)|0,I=I+Math.imul(ct,Ct)|0,N=N+Math.imul(ct,Pt)|0,B=B+Math.imul(lt,kt)|0,I=I+Math.imul(lt,Dt)|0,I=I+Math.imul(ut,kt)|0,N=N+Math.imul(ut,Dt)|0,B=B+Math.imul(ht,Ut)|0,I=I+Math.imul(ht,Ht)|0,I=I+Math.imul(ot,Ut)|0,N=N+Math.imul(ot,Ht)|0,B=B+Math.imul(ft,Vt)|0,I=I+Math.imul(ft,Gt)|0,I=I+Math.imul(at,Vt)|0,N=N+Math.imul(at,Gt)|0,B=B+Math.imul(Q,Wt)|0,I=I+Math.imul(Q,Xt)|0,I=I+Math.imul(q,Wt)|0,N=N+Math.imul(q,Xt)|0;var Ae=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,B=Math.imul(Tt,et),I=Math.imul(Tt,st),I=I+Math.imul(_t,et)|0,N=Math.imul(_t,st),B=B+Math.imul(wt,bt)|0,I=I+Math.imul(wt,Rt)|0,I=I+Math.imul(dt,bt)|0,N=N+Math.imul(dt,Rt)|0,B=B+Math.imul(pt,Ct)|0,I=I+Math.imul(pt,Pt)|0,I=I+Math.imul(Mt,Ct)|0,N=N+Math.imul(Mt,Pt)|0,B=B+Math.imul(Et,kt)|0,I=I+Math.imul(Et,Dt)|0,I=I+Math.imul(ct,kt)|0,N=N+Math.imul(ct,Dt)|0,B=B+Math.imul(lt,Ut)|0,I=I+Math.imul(lt,Ht)|0,I=I+Math.imul(ut,Ut)|0,N=N+Math.imul(ut,Ht)|0,B=B+Math.imul(ht,Vt)|0,I=I+Math.imul(ht,Gt)|0,I=I+Math.imul(ot,Vt)|0,N=N+Math.imul(ot,Gt)|0,B=B+Math.imul(ft,Wt)|0,I=I+Math.imul(ft,Xt)|0,I=I+Math.imul(at,Wt)|0,N=N+Math.imul(at,Xt)|0;var Ve=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,B=Math.imul(Tt,bt),I=Math.imul(Tt,Rt),I=I+Math.imul(_t,bt)|0,N=Math.imul(_t,Rt),B=B+Math.imul(wt,Ct)|0,I=I+Math.imul(wt,Pt)|0,I=I+Math.imul(dt,Ct)|0,N=N+Math.imul(dt,Pt)|0,B=B+Math.imul(pt,kt)|0,I=I+Math.imul(pt,Dt)|0,I=I+Math.imul(Mt,kt)|0,N=N+Math.imul(Mt,Dt)|0,B=B+Math.imul(Et,Ut)|0,I=I+Math.imul(Et,Ht)|0,I=I+Math.imul(ct,Ut)|0,N=N+Math.imul(ct,Ht)|0,B=B+Math.imul(lt,Vt)|0,I=I+Math.imul(lt,Gt)|0,I=I+Math.imul(ut,Vt)|0,N=N+Math.imul(ut,Gt)|0,B=B+Math.imul(ht,Wt)|0,I=I+Math.imul(ht,Xt)|0,I=I+Math.imul(ot,Wt)|0,N=N+Math.imul(ot,Xt)|0;var He=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(He>>>26)|0,He&=67108863,B=Math.imul(Tt,Ct),I=Math.imul(Tt,Pt),I=I+Math.imul(_t,Ct)|0,N=Math.imul(_t,Pt),B=B+Math.imul(wt,kt)|0,I=I+Math.imul(wt,Dt)|0,I=I+Math.imul(dt,kt)|0,N=N+Math.imul(dt,Dt)|0,B=B+Math.imul(pt,Ut)|0,I=I+Math.imul(pt,Ht)|0,I=I+Math.imul(Mt,Ut)|0,N=N+Math.imul(Mt,Ht)|0,B=B+Math.imul(Et,Vt)|0,I=I+Math.imul(Et,Gt)|0,I=I+Math.imul(ct,Vt)|0,N=N+Math.imul(ct,Gt)|0,B=B+Math.imul(lt,Wt)|0,I=I+Math.imul(lt,Xt)|0,I=I+Math.imul(ut,Wt)|0,N=N+Math.imul(ut,Xt)|0;var Ge=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,B=Math.imul(Tt,kt),I=Math.imul(Tt,Dt),I=I+Math.imul(_t,kt)|0,N=Math.imul(_t,Dt),B=B+Math.imul(wt,Ut)|0,I=I+Math.imul(wt,Ht)|0,I=I+Math.imul(dt,Ut)|0,N=N+Math.imul(dt,Ht)|0,B=B+Math.imul(pt,Vt)|0,I=I+Math.imul(pt,Gt)|0,I=I+Math.imul(Mt,Vt)|0,N=N+Math.imul(Mt,Gt)|0,B=B+Math.imul(Et,Wt)|0,I=I+Math.imul(Et,Xt)|0,I=I+Math.imul(ct,Wt)|0,N=N+Math.imul(ct,Xt)|0;var We=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(We>>>26)|0,We&=67108863,B=Math.imul(Tt,Ut),I=Math.imul(Tt,Ht),I=I+Math.imul(_t,Ut)|0,N=Math.imul(_t,Ht),B=B+Math.imul(wt,Vt)|0,I=I+Math.imul(wt,Gt)|0,I=I+Math.imul(dt,Vt)|0,N=N+Math.imul(dt,Gt)|0,B=B+Math.imul(pt,Wt)|0,I=I+Math.imul(pt,Xt)|0,I=I+Math.imul(Mt,Wt)|0,N=N+Math.imul(Mt,Xt)|0;var Xe=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,B=Math.imul(Tt,Vt),I=Math.imul(Tt,Gt),I=I+Math.imul(_t,Vt)|0,N=Math.imul(_t,Gt),B=B+Math.imul(wt,Wt)|0,I=I+Math.imul(wt,Xt)|0,I=I+Math.imul(dt,Wt)|0,N=N+Math.imul(dt,Xt)|0;var Ye=(G+B|0)+((I&8191)<<13)|0;G=(N+(I>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,B=Math.imul(Tt,Wt),I=Math.imul(Tt,Xt),I=I+Math.imul(_t,Wt)|0,N=Math.imul(_t,Xt);var Ze=(G+B|0)+((I&8191)<<13)|0;return G=(N+(I>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,H[0]=le,H[1]=ue,H[2]=ve,H[3]=re,H[4]=me,H[5]=Ee,H[6]=Me,H[7]=Te,H[8]=ce,H[9]=se,H[10]=fe,H[11]=Ae,H[12]=Ve,H[13]=He,H[14]=Ge,H[15]=We,H[16]=Xe,H[17]=Ye,H[18]=Ze,G!==0&&(H[19]=G,O.length++),O};Math.imul||(h=f);function r(S,y,R){R.negative=y.negative^S.negative,R.length=S.length+y.length;for(var O=0,P=0,D=0;D<R.length-1;D++){var H=P;P=0;for(var G=O&67108863,B=Math.min(D,y.length-1),I=Math.max(0,D-S.length+1);I<=B;I++){var N=D-I,$=S.words[N]|0,U=y.words[I]|0,K=$*U,W=K&67108863;H=H+(K/67108864|0)|0,W=W+G|0,G=W&67108863,H=H+(W>>>26)|0,P+=H>>>26,H&=67108863}R.words[D]=G,O=H,H=P}return O!==0?R.words[D]=O:R.length--,R.strip()}function s(S,y,R){var O=new n;return O.mulp(S,y,R)}d.prototype.mulTo=function(y,R){var O,P=this.length+y.length;return this.length===10&&y.length===10?O=h(this,y,R):P<63?O=f(this,y,R):P<1024?O=r(this,y,R):O=s(this,y,R),O};function n(S,y){this.x=S,this.y=y}n.prototype.makeRBT=function(y){for(var R=new Array(y),O=d.prototype._countBits(y)-1,P=0;P<y;P++)R[P]=this.revBin(P,O,y);return R},n.prototype.revBin=function(y,R,O){if(y===0||y===O-1)return y;for(var P=0,D=0;D<R;D++)P|=(y&1)<<R-D-1,y>>=1;return P},n.prototype.permute=function(y,R,O,P,D,H){for(var G=0;G<H;G++)P[G]=R[y[G]],D[G]=O[y[G]]},n.prototype.transform=function(y,R,O,P,D,H){this.permute(H,y,R,O,P,D);for(var G=1;G<D;G<<=1)for(var B=G<<1,I=Math.cos(2*Math.PI/B),N=Math.sin(2*Math.PI/B),$=0;$<D;$+=B)for(var U=I,K=N,W=0;W<G;W++){var Y=O[$+W],j=P[$+W],X=O[$+W+G],Q=P[$+W+G],q=U*X-K*Q;Q=U*Q+K*X,X=q,O[$+W]=Y+X,P[$+W]=j+Q,O[$+W+G]=Y-X,P[$+W+G]=j-Q,W!==B&&(q=I*U-N*K,K=I*K+N*U,U=q)}},n.prototype.guessLen13b=function(y,R){var O=Math.max(R,y)|1,P=O&1,D=0;for(O=O/2|0;O;O=O>>>1)D++;return 1<<D+1+P},n.prototype.conjugate=function(y,R,O){if(!(O<=1))for(var P=0;P<O/2;P++){var D=y[P];y[P]=y[O-P-1],y[O-P-1]=D,D=R[P],R[P]=-R[O-P-1],R[O-P-1]=-D}},n.prototype.normalize13b=function(y,R){for(var O=0,P=0;P<R/2;P++){var D=Math.round(y[2*P+1]/R)*8192+Math.round(y[2*P]/R)+O;y[P]=D&67108863,D<67108864?O=0:O=D/67108864|0}return y},n.prototype.convert13b=function(y,R,O,P){for(var D=0,H=0;H<R;H++)D=D+(y[H]|0),O[2*H]=D&8191,D=D>>>13,O[2*H+1]=D&8191,D=D>>>13;for(H=2*R;H<P;++H)O[H]=0;l(D===0),l((D&-8192)===0)},n.prototype.stub=function(y){for(var R=new Array(y),O=0;O<y;O++)R[O]=0;return R},n.prototype.mulp=function(y,R,O){var P=2*this.guessLen13b(y.length,R.length),D=this.makeRBT(P),H=this.stub(P),G=new Array(P),B=new Array(P),I=new Array(P),N=new Array(P),$=new Array(P),U=new Array(P),K=O.words;K.length=P,this.convert13b(y.words,y.length,G,P),this.convert13b(R.words,R.length,N,P),this.transform(G,H,B,I,P,D),this.transform(N,H,$,U,P,D);for(var W=0;W<P;W++){var Y=B[W]*$[W]-I[W]*U[W];I[W]=B[W]*U[W]+I[W]*$[W],B[W]=Y}return this.conjugate(B,I,P),this.transform(B,I,K,H,P,D),this.conjugate(K,H,P),this.normalize13b(K,P),O.negative=y.negative^R.negative,O.length=y.length+R.length,O.strip()},d.prototype.mul=function(y){var R=new d(null);return R.words=new Array(this.length+y.length),this.mulTo(y,R)},d.prototype.mulf=function(y){var R=new d(null);return R.words=new Array(this.length+y.length),s(this,y,R)},d.prototype.imul=function(y){return this.clone().mulTo(y,this)},d.prototype.imuln=function(y){l(typeof y=="number"),l(y<67108864);for(var R=0,O=0;O<this.length;O++){var P=(this.words[O]|0)*y,D=(P&67108863)+(R&67108863);R>>=26,R+=P/67108864|0,R+=D>>>26,this.words[O]=D&67108863}return R!==0&&(this.words[O]=R,this.length++),this},d.prototype.muln=function(y){return this.clone().imuln(y)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(y){var R=u(y);if(R.length===0)return new d(1);for(var O=this,P=0;P<R.length&&R[P]===0;P++,O=O.sqr());if(++P<R.length)for(var D=O.sqr();P<R.length;P++,D=D.sqr())R[P]!==0&&(O=O.mul(D));return O},d.prototype.iushln=function(y){l(typeof y=="number"&&y>=0);var R=y%26,O=(y-R)/26,P=67108863>>>26-R<<26-R,D;if(R!==0){var H=0;for(D=0;D<this.length;D++){var G=this.words[D]&P,B=(this.words[D]|0)-G<<R;this.words[D]=B|H,H=G>>>26-R}H&&(this.words[D]=H,this.length++)}if(O!==0){for(D=this.length-1;D>=0;D--)this.words[D+O]=this.words[D];for(D=0;D<O;D++)this.words[D]=0;this.length+=O}return this.strip()},d.prototype.ishln=function(y){return l(this.negative===0),this.iushln(y)},d.prototype.iushrn=function(y,R,O){l(typeof y=="number"&&y>=0);var P;R?P=(R-R%26)/26:P=0;var D=y%26,H=Math.min((y-D)/26,this.length),G=67108863^67108863>>>D<<D,B=O;if(P-=H,P=Math.max(0,P),B){for(var I=0;I<H;I++)B.words[I]=this.words[I];B.length=H}if(H!==0)if(this.length>H)for(this.length-=H,I=0;I<this.length;I++)this.words[I]=this.words[I+H];else this.words[0]=0,this.length=1;var N=0;for(I=this.length-1;I>=0&&(N!==0||I>=P);I--){var $=this.words[I]|0;this.words[I]=N<<26-D|$>>>D,N=$&G}return B&&N!==0&&(B.words[B.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(y,R,O){return l(this.negative===0),this.iushrn(y,R,O)},d.prototype.shln=function(y){return this.clone().ishln(y)},d.prototype.ushln=function(y){return this.clone().iushln(y)},d.prototype.shrn=function(y){return this.clone().ishrn(y)},d.prototype.ushrn=function(y){return this.clone().iushrn(y)},d.prototype.testn=function(y){l(typeof y=="number"&&y>=0);var R=y%26,O=(y-R)/26,P=1<<R;if(this.length<=O)return!1;var D=this.words[O];return!!(D&P)},d.prototype.imaskn=function(y){l(typeof y=="number"&&y>=0);var R=y%26,O=(y-R)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var P=67108863^67108863>>>R<<R;this.words[this.length-1]&=P}return this.strip()},d.prototype.maskn=function(y){return this.clone().imaskn(y)},d.prototype.iaddn=function(y){return l(typeof y=="number"),l(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},d.prototype._iaddn=function(y){this.words[0]+=y;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},d.prototype.isubn=function(y){if(l(typeof y=="number"),l(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},d.prototype.addn=function(y){return this.clone().iaddn(y)},d.prototype.subn=function(y){return this.clone().isubn(y)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(y,R,O){var P=y.length+O,D;this._expand(P);var H,G=0;for(D=0;D<y.length;D++){H=(this.words[D+O]|0)+G;var B=(y.words[D]|0)*R;H-=B&67108863,G=(H>>26)-(B/67108864|0),this.words[D+O]=H&67108863}for(;D<this.length-O;D++)H=(this.words[D+O]|0)+G,G=H>>26,this.words[D+O]=H&67108863;if(G===0)return this.strip();for(l(G===-1),G=0,D=0;D<this.length;D++)H=-(this.words[D]|0)+G,G=H>>26,this.words[D]=H&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(y,R){var O=this.length-y.length,P=this.clone(),D=y,H=D.words[D.length-1]|0,G=this._countBits(H);O=26-G,O!==0&&(D=D.ushln(O),P.iushln(O),H=D.words[D.length-1]|0);var B=P.length-D.length,I;if(R!=="mod"){I=new d(null),I.length=B+1,I.words=new Array(I.length);for(var N=0;N<I.length;N++)I.words[N]=0}var $=P.clone()._ishlnsubmul(D,1,B);$.negative===0&&(P=$,I&&(I.words[B]=1));for(var U=B-1;U>=0;U--){var K=(P.words[D.length+U]|0)*67108864+(P.words[D.length+U-1]|0);for(K=Math.min(K/H|0,67108863),P._ishlnsubmul(D,K,U);P.negative!==0;)K--,P.negative=0,P._ishlnsubmul(D,1,U),P.isZero()||(P.negative^=1);I&&(I.words[U]=K)}return I&&I.strip(),P.strip(),R!=="div"&&O!==0&&P.iushrn(O),{div:I||null,mod:P}},d.prototype.divmod=function(y,R,O){if(l(!y.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var P,D,H;return this.negative!==0&&y.negative===0?(H=this.neg().divmod(y,R),R!=="mod"&&(P=H.div.neg()),R!=="div"&&(D=H.mod.neg(),O&&D.negative!==0&&D.iadd(y)),{div:P,mod:D}):this.negative===0&&y.negative!==0?(H=this.divmod(y.neg(),R),R!=="mod"&&(P=H.div.neg()),{div:P,mod:H.mod}):this.negative&y.negative?(H=this.neg().divmod(y.neg(),R),R!=="div"&&(D=H.mod.neg(),O&&D.negative!==0&&D.isub(y)),{div:H.div,mod:D}):y.length>this.length||this.cmp(y)<0?{div:new d(0),mod:this}:y.length===1?R==="div"?{div:this.divn(y.words[0]),mod:null}:R==="mod"?{div:null,mod:new d(this.modn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new d(this.modn(y.words[0]))}:this._wordDiv(y,R)},d.prototype.div=function(y){return this.divmod(y,"div",!1).div},d.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},d.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},d.prototype.divRound=function(y){var R=this.divmod(y);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(y):R.mod,P=y.ushrn(1),D=y.andln(1),H=O.cmp(P);return H<0||D===1&&H===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},d.prototype.modn=function(y){l(y<=67108863);for(var R=(1<<26)%y,O=0,P=this.length-1;P>=0;P--)O=(R*O+(this.words[P]|0))%y;return O},d.prototype.idivn=function(y){l(y<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var P=(this.words[O]|0)+R*67108864;this.words[O]=P/y|0,R=P%y}return this.strip()},d.prototype.divn=function(y){return this.clone().idivn(y)},d.prototype.egcd=function(y){l(y.negative===0),l(!y.isZero());var R=this,O=y.clone();R.negative!==0?R=R.umod(y):R=R.clone();for(var P=new d(1),D=new d(0),H=new d(0),G=new d(1),B=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++B;for(var I=O.clone(),N=R.clone();!R.isZero();){for(var $=0,U=1;!(R.words[0]&U)&&$<26;++$,U<<=1);if($>0)for(R.iushrn($);$-- >0;)(P.isOdd()||D.isOdd())&&(P.iadd(I),D.isub(N)),P.iushrn(1),D.iushrn(1);for(var K=0,W=1;!(O.words[0]&W)&&K<26;++K,W<<=1);if(K>0)for(O.iushrn(K);K-- >0;)(H.isOdd()||G.isOdd())&&(H.iadd(I),G.isub(N)),H.iushrn(1),G.iushrn(1);R.cmp(O)>=0?(R.isub(O),P.isub(H),D.isub(G)):(O.isub(R),H.isub(P),G.isub(D))}return{a:H,b:G,gcd:O.iushln(B)}},d.prototype._invmp=function(y){l(y.negative===0),l(!y.isZero());var R=this,O=y.clone();R.negative!==0?R=R.umod(y):R=R.clone();for(var P=new d(1),D=new d(0),H=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var G=0,B=1;!(R.words[0]&B)&&G<26;++G,B<<=1);if(G>0)for(R.iushrn(G);G-- >0;)P.isOdd()&&P.iadd(H),P.iushrn(1);for(var I=0,N=1;!(O.words[0]&N)&&I<26;++I,N<<=1);if(I>0)for(O.iushrn(I);I-- >0;)D.isOdd()&&D.iadd(H),D.iushrn(1);R.cmp(O)>=0?(R.isub(O),P.isub(D)):(O.isub(R),D.isub(P))}var $;return R.cmpn(1)===0?$=P:$=D,$.cmpn(0)<0&&$.iadd(y),$},d.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var R=this.clone(),O=y.clone();R.negative=0,O.negative=0;for(var P=0;R.isEven()&&O.isEven();P++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var D=R.cmp(O);if(D<0){var H=R;R=O,O=H}else if(D===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(P)},d.prototype.invm=function(y){return this.egcd(y).a.umod(y)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(y){return this.words[0]&y},d.prototype.bincn=function(y){l(typeof y=="number");var R=y%26,O=(y-R)/26,P=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=P,this;for(var D=P,H=O;D!==0&&H<this.length;H++){var G=this.words[H]|0;G+=D,D=G>>>26,G&=67108863,this.words[H]=G}return D!==0&&(this.words[H]=D,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(y){var R=y<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(y=-y),l(y<=67108863,"Number is too big");var P=this.words[0]|0;O=P===y?0:P<y?-1:1}return this.negative!==0?-O|0:O},d.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var R=this.ucmp(y);return this.negative!==0?-R|0:R},d.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var P=this.words[O]|0,D=y.words[O]|0;if(P!==D){P<D?R=-1:P>D&&(R=1);break}}return R},d.prototype.gtn=function(y){return this.cmpn(y)===1},d.prototype.gt=function(y){return this.cmp(y)===1},d.prototype.gten=function(y){return this.cmpn(y)>=0},d.prototype.gte=function(y){return this.cmp(y)>=0},d.prototype.ltn=function(y){return this.cmpn(y)===-1},d.prototype.lt=function(y){return this.cmp(y)===-1},d.prototype.lten=function(y){return this.cmpn(y)<=0},d.prototype.lte=function(y){return this.cmp(y)<=0},d.prototype.eqn=function(y){return this.cmpn(y)===0},d.prototype.eq=function(y){return this.cmp(y)===0},d.red=function(y){return new _(y)},d.prototype.toRed=function(y){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},d.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(y){return this.red=y,this},d.prototype.forceRed=function(y){return l(!this.red,"Already a number in reduction context"),this._forceRed(y)},d.prototype.redAdd=function(y){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},d.prototype.redIAdd=function(y){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},d.prototype.redSub=function(y){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},d.prototype.redISub=function(y){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},d.prototype.redShl=function(y){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},d.prototype.redMul=function(y){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},d.prototype.redIMul=function(y){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},d.prototype.redSqr=function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(y){return l(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var t={k256:null,p224:null,p192:null,p25519:null};function i(S,y){this.name=S,this.p=new d(y,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}i.prototype._tmp=function(){var y=new d(null);return y.words=new Array(Math.ceil(this.n/13)),y},i.prototype.ireduce=function(y){var R=y,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var P=O<this.n?-1:R.ucmp(this.p);return P===0?(R.words[0]=0,R.length=1):P>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},i.prototype.split=function(y,R){y.iushrn(this.n,0,R)},i.prototype.imulK=function(y){return y.imul(this.k)};function e(){i.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(e,i),e.prototype.split=function(y,R){for(var O=4194303,P=Math.min(y.length,9),D=0;D<P;D++)R.words[D]=y.words[D];if(R.length=P,y.length<=9){y.words[0]=0,y.length=1;return}var H=y.words[9];for(R.words[R.length++]=H&O,D=10;D<y.length;D++){var G=y.words[D]|0;y.words[D-10]=(G&O)<<4|H>>>22,H=G}H>>>=22,y.words[D-10]=H,H===0&&y.length>10?y.length-=10:y.length-=9},e.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var R=0,O=0;O<y.length;O++){var P=y.words[O]|0;R+=P*977,y.words[O]=R&67108863,R=P*64+(R/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function T(){i.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(T,i);function b(){i.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(b,i);function A(){i.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(A,i),A.prototype.imulK=function(y){for(var R=0,O=0;O<y.length;O++){var P=(y.words[O]|0)*19+R,D=P&67108863;P>>>=26,y.words[O]=D,R=P}return R!==0&&(y.words[y.length++]=R),y},d._prime=function(y){if(t[y])return t[y];var R;if(y==="k256")R=new e;else if(y==="p224")R=new T;else if(y==="p192")R=new b;else if(y==="p25519")R=new A;else throw new Error("Unknown prime "+y);return t[y]=R,R};function _(S){if(typeof S=="string"){var y=d._prime(S);this.m=y.p,this.prime=y}else l(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}_.prototype._verify1=function(y){l(y.negative===0,"red works only with positives"),l(y.red,"red works only with red numbers")},_.prototype._verify2=function(y,R){l((y.negative|R.negative)===0,"red works only with positives"),l(y.red&&y.red===R.red,"red works only with red numbers")},_.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):y.umod(this.m)._forceRed(this)},_.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},_.prototype.add=function(y,R){this._verify2(y,R);var O=y.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},_.prototype.iadd=function(y,R){this._verify2(y,R);var O=y.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},_.prototype.sub=function(y,R){this._verify2(y,R);var O=y.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},_.prototype.isub=function(y,R){this._verify2(y,R);var O=y.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},_.prototype.shl=function(y,R){return this._verify1(y),this.imod(y.ushln(R))},_.prototype.imul=function(y,R){return this._verify2(y,R),this.imod(y.imul(R))},_.prototype.mul=function(y,R){return this._verify2(y,R),this.imod(y.mul(R))},_.prototype.isqr=function(y){return this.imul(y,y.clone())},_.prototype.sqr=function(y){return this.mul(y,y)},_.prototype.sqrt=function(y){if(y.isZero())return y.clone();var R=this.m.andln(3);if(l(R%2===1),R===3){var O=this.m.add(new d(1)).iushrn(2);return this.pow(y,O)}for(var P=this.m.subn(1),D=0;!P.isZero()&&P.andln(1)===0;)D++,P.iushrn(1);l(!P.isZero());var H=new d(1).toRed(this),G=H.redNeg(),B=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new d(2*I*I).toRed(this);this.pow(I,B).cmp(G)!==0;)I.redIAdd(G);for(var N=this.pow(I,P),$=this.pow(y,P.addn(1).iushrn(1)),U=this.pow(y,P),K=D;U.cmp(H)!==0;){for(var W=U,Y=0;W.cmp(H)!==0;Y++)W=W.redSqr();l(Y<K);var j=this.pow(N,new d(1).iushln(K-Y-1));$=$.redMul(j),N=j.redSqr(),U=U.redMul(N),K=Y}return $},_.prototype.invm=function(y){var R=y._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},_.prototype.pow=function(y,R){if(R.isZero())return new d(1).toRed(this);if(R.cmpn(1)===0)return y.clone();var O=4,P=new Array(1<<O);P[0]=new d(1).toRed(this),P[1]=y;for(var D=2;D<P.length;D++)P[D]=this.mul(P[D-1],y);var H=P[0],G=0,B=0,I=R.bitLength()%26;for(I===0&&(I=26),D=R.length-1;D>=0;D--){for(var N=R.words[D],$=I-1;$>=0;$--){var U=N>>$&1;if(H!==P[0]&&(H=this.sqr(H)),U===0&&G===0){B=0;continue}G<<=1,G|=U,B++,!(B!==O&&(D!==0||$!==0))&&(H=this.mul(H,P[G]),B=0,G=0)}I=26}return H},_.prototype.convertTo=function(y){var R=y.umod(this.m);return R===y?R.clone():R},_.prototype.convertFrom=function(y){var R=y.clone();return R.red=null,R},d.mont=function(y){return new C(y)};function C(S){_.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(C,_),C.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},C.prototype.convertFrom=function(y){var R=this.imod(y.mul(this.rinv));return R.red=null,R},C.prototype.imul=function(y,R){if(y.isZero()||R.isZero())return y.words[0]=0,y.length=1,y;var O=y.imul(R),P=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),D=O.isub(P).iushrn(this.shift),H=D;return D.cmp(this.m)>=0?H=D.isub(this.m):D.cmpn(0)<0&&(H=D.iadd(this.m)),H._forceRed(this)},C.prototype.mul=function(y,R){if(y.isZero()||R.isZero())return new d(0)._forceRed(this);var O=y.mul(R),P=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),D=O.isub(P).iushrn(this.shift),H=D;return D.cmp(this.m)>=0?H=D.isub(this.m):D.cmpn(0)<0&&(H=D.iadd(this.m)),H._forceRed(this)},C.prototype.invm=function(y){var R=this.imod(y._invmp(this.m).mul(this.r2));return R._forceRed(this)}}(L,this)},6204:function(L){L.exports=F;function F(a){var c,m,l,g=a.length,d=0;for(c=0;c<g;++c)d+=a[c].length;var E=new Array(d),M=0;for(c=0;c<g;++c){var p=a[c],x=p.length;for(m=0;m<x;++m){var w=E[M++]=new Array(x-1),o=0;for(l=0;l<x;++l)l!==m&&(w[o++]=p[l]);if(m&1){var v=w[1];w[1]=w[0],w[0]=v}}}return E}},6867:function(L,F,a){L.exports=o;var c=a(1888),m=a(855),l=a(7150);function g(v,u){for(var f=0;f<v;++f)if(!(u[f]<=u[f+v]))return!0;return!1}function d(v,u,f,h){for(var r=0,s=0,n=0,t=v.length;n<t;++n){var i=v[n];if(!g(u,i)){for(var e=0;e<2*u;++e)f[r++]=i[e];h[s++]=n}}return s}function E(v,u,f,h){var r=v.length,s=u.length;if(!(r<=0||s<=0)){var n=v[0].length>>>1;if(!(n<=0)){var t,i=c.mallocDouble(2*n*r),e=c.mallocInt32(r);if(r=d(v,n,i,e),r>0){if(n===1&&h)m.init(r),t=m.sweepComplete(n,f,0,r,i,e,0,r,i,e);else{var T=c.mallocDouble(2*n*s),b=c.mallocInt32(s);s=d(u,n,T,b),s>0&&(m.init(r+s),n===1?t=m.sweepBipartite(n,f,0,r,i,e,0,s,T,b):t=l(n,f,h,r,i,e,s,T,b),c.free(T),c.free(b))}c.free(i),c.free(e)}return t}}}var M;function p(v,u){M.push([v,u])}function x(v){return M=[],E(v,v,p,!0),M}function w(v,u){return M=[],E(v,u,p,!1),M}function o(v,u,f){switch(arguments.length){case 1:return x(v);case 2:return typeof u=="function"?E(v,v,u,!0):w(v,u);case 3:return E(v,u,f,!1);default:throw new Error("box-intersect: Invalid arguments")}}},2455:function(L,F){function a(){function l(E,M,p,x,w,o,v,u,f,h,r){for(var s=2*E,n=x,t=s*x;n<w;++n,t+=s){var i=o[M+t],e=o[M+t+E],T=v[n];t:for(var b=u,A=s*u;b<f;++b,A+=s){var _=h[M+A],C=h[M+A+E],S=r[b];if(!(C<i||e<_)){for(var y=M+1;y<E;++y){var R=o[y+t],O=o[y+E+t],P=h[y+A],D=h[y+E+A];if(O<P||D<R)continue t}var H=p(T,S);if(H!==void 0)return H}}}}function g(E,M,p,x,w,o,v,u,f,h,r){for(var s=2*E,n=u,t=s*u;n<f;++n,t+=s){var i=h[M+t],e=h[M+t+E],T=r[n];t:for(var b=x,A=s*x;b<w;++b,A+=s){var _=o[M+A],C=o[M+A+E],S=v[b];if(!(e<_||C<i)){for(var y=M+1;y<E;++y){var R=o[y+A],O=o[y+E+A],P=h[y+t],D=h[y+E+t];if(O<P||D<R)continue t}var H=p(S,T);if(H!==void 0)return H}}}}function d(E,M,p,x,w,o,v,u,f,h,r){return w-x>f-u?l(E,M,p,x,w,o,v,u,f,h,r):g(E,M,p,x,w,o,v,u,f,h,r)}return d}function c(){function l(p,x,w,o,v,u,f,h,r,s,n){for(var t=2*p,i=o,e=t*o;i<v;++i,e+=t){var T=u[x+e],b=u[x+e+p],A=f[i];t:for(var _=h,C=t*h;_<r;++_,C+=t){var S=s[x+C],y=n[_];if(!(S<=T||b<S)){for(var R=x+1;R<p;++R){var O=u[R+e],P=u[R+p+e],D=s[R+C],H=s[R+p+C];if(P<D||H<O)continue t}var G=w(y,A);if(G!==void 0)return G}}}}function g(p,x,w,o,v,u,f,h,r,s,n){for(var t=2*p,i=o,e=t*o;i<v;++i,e+=t){var T=u[x+e],b=u[x+e+p],A=f[i];t:for(var _=h,C=t*h;_<r;++_,C+=t){var S=s[x+C],y=n[_];if(!(S<T||b<S)){for(var R=x+1;R<p;++R){var O=u[R+e],P=u[R+p+e],D=s[R+C],H=s[R+p+C];if(P<D||H<O)continue t}var G=w(A,y);if(G!==void 0)return G}}}}function d(p,x,w,o,v,u,f,h,r,s,n){for(var t=2*p,i=h,e=t*h;i<r;++i,e+=t){var T=s[x+e],b=n[i];t:for(var A=o,_=t*o;A<v;++A,_+=t){var C=u[x+_],S=u[x+_+p],y=f[A];if(!(T<=C||S<T)){for(var R=x+1;R<p;++R){var O=u[R+_],P=u[R+p+_],D=s[R+e],H=s[R+p+e];if(P<D||H<O)continue t}var G=w(b,y);if(G!==void 0)return G}}}}function E(p,x,w,o,v,u,f,h,r,s,n){for(var t=2*p,i=h,e=t*h;i<r;++i,e+=t){var T=s[x+e],b=n[i];t:for(var A=o,_=t*o;A<v;++A,_+=t){var C=u[x+_],S=u[x+_+p],y=f[A];if(!(T<C||S<T)){for(var R=x+1;R<p;++R){var O=u[R+_],P=u[R+p+_],D=s[R+e],H=s[R+p+e];if(P<D||H<O)continue t}var G=w(y,b);if(G!==void 0)return G}}}}function M(p,x,w,o,v,u,f,h,r,s,n,t){return u-v>s-r?o?l(p,x,w,v,u,f,h,r,s,n,t):g(p,x,w,v,u,f,h,r,s,n,t):o?d(p,x,w,v,u,f,h,r,s,n,t):E(p,x,w,v,u,f,h,r,s,n,t)}return M}function m(l){return l?a():c()}F.partial=m(!1),F.full=m(!0)},7150:function(L,F,a){L.exports=S;var c=a(1888),m=a(8828),l=a(2455),g=l.partial,d=l.full,E=a(855),M=a(3545),p=a(8105),x=128,w=1<<22,o=1<<22,v=p("!(lo>=p0)&&!(p1>=hi)"),u=p("lo===p0"),f=p("lo<p0"),h=p("hi<=p0"),r=p("lo<=p0&&p0<=hi"),s=p("lo<p0&&p0<=hi"),n=6,t=2,i=1024,e=c.mallocInt32(i),T=c.mallocDouble(i);function b(y,R){var O=8*m.log2(R+1)*(y+1)|0,P=m.nextPow2(n*O);e.length<P&&(c.free(e),e=c.mallocInt32(P));var D=m.nextPow2(t*O);T.length<D&&(c.free(T),T=c.mallocDouble(D))}function A(y,R,O,P,D,H,G,B,I){var N=n*y;e[N]=R,e[N+1]=O,e[N+2]=P,e[N+3]=D,e[N+4]=H,e[N+5]=G;var $=t*y;T[$]=B,T[$+1]=I}function _(y,R,O,P,D,H,G,B,I,N,$){var U=2*y,K=I*U,W=N[K+R];t:for(var Y=D,j=D*U;Y<H;++Y,j+=U){var X=G[j+R],Q=G[j+R+y];if(!(W<X||Q<W)&&!(P&&W===X)){for(var q=B[Y],it=R+1;it<y;++it){var X=G[j+it],Q=G[j+it+y],ft=N[K+it],at=N[K+it+y];if(Q<ft||at<X)continue t}var rt;if(P?rt=O($,q):rt=O(q,$),rt!==void 0)return rt}}}function C(y,R,O,P,D,H,G,B,I,N){var $=2*y,U=B*$,K=I[U+R];t:for(var W=P,Y=P*$;W<D;++W,Y+=$){var j=G[W];if(j!==N){var X=H[Y+R],Q=H[Y+R+y];if(!(K<X||Q<K)){for(var q=R+1;q<y;++q){var X=H[Y+q],Q=H[Y+q+y],it=I[U+q],ft=I[U+q+y];if(Q<it||ft<X)continue t}var at=O(j,N);if(at!==void 0)return at}}}}function S(y,R,O,P,D,H,G,B,I){b(y,P+G);var N=0,$=2*y,U;for(A(N++,0,0,P,0,G,O?16:0,-1/0,1/0),O||A(N++,0,0,G,0,P,1,-1/0,1/0);N>0;){N-=1;var K=N*n,W=e[K],Y=e[K+1],j=e[K+2],X=e[K+3],Q=e[K+4],q=e[K+5],it=N*t,ft=T[it],at=T[it+1],rt=q&1,ht=!!(q&16),ot=D,vt=H,lt=B,ut=I;if(rt&&(ot=B,vt=I,lt=D,ut=H),!(q&2&&(j=f(y,W,Y,j,ot,vt,at),Y>=j))&&!(q&4&&(Y=h(y,W,Y,j,ot,vt,ft),Y>=j))){var mt=j-Y,Et=Q-X;if(ht){if(y*mt*(mt+Et)<o){if(U=E.scanComplete(y,W,R,Y,j,ot,vt,X,Q,lt,ut),U!==void 0)return U;continue}}else if(y*Math.min(mt,Et)<x){if(U=g(y,W,R,rt,Y,j,ot,vt,X,Q,lt,ut),U!==void 0)return U;continue}else if(y*mt*Et<w){if(U=E.scanBipartite(y,W,R,rt,Y,j,ot,vt,X,Q,lt,ut),U!==void 0)return U;continue}var ct=v(y,W,Y,j,ot,vt,ft,at);if(Y<ct)if(y*(ct-Y)<x){if(U=d(y,W+1,R,Y,ct,ot,vt,X,Q,lt,ut),U!==void 0)return U}else if(W===y-2){if(rt?U=E.sweepBipartite(y,R,X,Q,lt,ut,Y,ct,ot,vt):U=E.sweepBipartite(y,R,Y,ct,ot,vt,X,Q,lt,ut),U!==void 0)return U}else A(N++,W+1,Y,ct,X,Q,rt,-1/0,1/0),A(N++,W+1,X,Q,Y,ct,rt^1,-1/0,1/0);if(ct<j){var xt=M(y,W,X,Q,lt,ut),pt=lt[$*xt+W],Mt=u(y,W,xt,Q,lt,ut,pt);if(Mt<Q&&A(N++,W,ct,j,Mt,Q,(rt|4)+(ht?16:0),pt,at),X<xt&&A(N++,W,ct,j,X,xt,(rt|2)+(ht?16:0),ft,pt),xt+1===Mt){if(ht?U=C(y,W,R,ct,j,ot,vt,xt,lt,ut[xt]):U=_(y,W,R,rt,ct,j,ot,vt,xt,lt,ut[xt]),U!==void 0)return U}else if(xt<Mt){var At;if(ht){if(At=r(y,W,ct,j,ot,vt,pt),ct<At){var wt=u(y,W,ct,At,ot,vt,pt);if(W===y-2){if(ct<wt&&(U=E.sweepComplete(y,R,ct,wt,ot,vt,xt,Mt,lt,ut),U!==void 0)||wt<At&&(U=E.sweepBipartite(y,R,wt,At,ot,vt,xt,Mt,lt,ut),U!==void 0))return U}else ct<wt&&A(N++,W+1,ct,wt,xt,Mt,16,-1/0,1/0),wt<At&&(A(N++,W+1,wt,At,xt,Mt,0,-1/0,1/0),A(N++,W+1,xt,Mt,wt,At,1,-1/0,1/0))}}else rt?At=s(y,W,ct,j,ot,vt,pt):At=r(y,W,ct,j,ot,vt,pt),ct<At&&(W===y-2?rt?U=E.sweepBipartite(y,R,xt,Mt,lt,ut,ct,At,ot,vt):U=E.sweepBipartite(y,R,ct,At,ot,vt,xt,Mt,lt,ut):(A(N++,W+1,ct,At,xt,Mt,rt,-1/0,1/0),A(N++,W+1,xt,Mt,ct,At,rt^1,-1/0,1/0)))}}}}}},3545:function(L,F,a){L.exports=d;var c=a(8105),m=c("lo<p0"),l=8;function g(E,M,p,x,w,o){for(var v=2*E,u=v*(p+1)+M,f=p+1;f<x;++f,u+=v)for(var h=w[u],r=f,s=v*(f-1);r>p&&w[s+M]>h;--r,s-=v){for(var n=s,t=s+v,i=0;i<v;++i,++n,++t){var e=w[n];w[n]=w[t],w[t]=e}var T=o[r];o[r]=o[r-1],o[r-1]=T}}function d(E,M,p,x,w,o){if(x<=p+1)return p;for(var v=p,u=x,f=x+p>>>1,h=2*E,r=f,s=w[h*f+M];v<u;){if(u-v<l){g(E,M,v,u,w,o),s=w[h*f+M];break}var n=u-v,t=Math.random()*n+v|0,i=w[h*t+M],e=Math.random()*n+v|0,T=w[h*e+M],b=Math.random()*n+v|0,A=w[h*b+M];i<=T?A>=T?(r=e,s=T):i>=A?(r=t,s=i):(r=b,s=A):T>=A?(r=e,s=T):A>=i?(r=t,s=i):(r=b,s=A);for(var S=h*(u-1),y=h*r,_=0;_<h;++_,++S,++y){var C=w[S];w[S]=w[y],w[y]=C}var R=o[u-1];o[u-1]=o[r],o[r]=R,r=m(E,M,v,u-1,w,o,s);for(var S=h*(u-1),y=h*r,_=0;_<h;++_,++S,++y){var C=w[S];w[S]=w[y],w[y]=C}var R=o[u-1];if(o[u-1]=o[r],o[r]=R,f<r){for(u=r-1;v<u&&w[h*(u-1)+M]===s;)u-=1;u+=1}else if(r<f)for(v=r+1;v<u&&w[h*v+M]===s;)v+=1;else break}return m(E,M,p,f,w,o,w[h*f+M])}},8105:function(L){L.exports=a;var F={"lo===p0":c,"lo<p0":m,"lo<=p0":l,"hi<=p0":g,"lo<p0&&p0<=hi":E,"lo<=p0&&p0<=hi":d,"!(lo>=p0)&&!(p1>=hi)":M};function a(p){return F[p]}function c(p,x,w,o,v,u,f){for(var h=2*p,r=h*w,s=r,n=w,t=x,i=p+x,e=w;o>e;++e,r+=h){var T=v[r+t];if(T===f)if(n===e)n+=1,s+=h;else{for(var b=0;h>b;++b){var A=v[r+b];v[r+b]=v[s],v[s++]=A}var _=u[e];u[e]=u[n],u[n++]=_}}return n}function m(p,x,w,o,v,u,f){for(var h=2*p,r=h*w,s=r,n=w,t=x,i=p+x,e=w;o>e;++e,r+=h){var T=v[r+t];if(T<f)if(n===e)n+=1,s+=h;else{for(var b=0;h>b;++b){var A=v[r+b];v[r+b]=v[s],v[s++]=A}var _=u[e];u[e]=u[n],u[n++]=_}}return n}function l(p,x,w,o,v,u,f){for(var h=2*p,r=h*w,s=r,n=w,t=x,i=p+x,e=w;o>e;++e,r+=h){var T=v[r+i];if(T<=f)if(n===e)n+=1,s+=h;else{for(var b=0;h>b;++b){var A=v[r+b];v[r+b]=v[s],v[s++]=A}var _=u[e];u[e]=u[n],u[n++]=_}}return n}function g(p,x,w,o,v,u,f){for(var h=2*p,r=h*w,s=r,n=w,t=x,i=p+x,e=w;o>e;++e,r+=h){var T=v[r+i];if(T<=f)if(n===e)n+=1,s+=h;else{for(var b=0;h>b;++b){var A=v[r+b];v[r+b]=v[s],v[s++]=A}var _=u[e];u[e]=u[n],u[n++]=_}}return n}function d(p,x,w,o,v,u,f){for(var h=2*p,r=h*w,s=r,n=w,t=x,i=p+x,e=w;o>e;++e,r+=h){var T=v[r+t],b=v[r+i];if(T<=f&&f<=b)if(n===e)n+=1,s+=h;else{for(var A=0;h>A;++A){var _=v[r+A];v[r+A]=v[s],v[s++]=_}var C=u[e];u[e]=u[n],u[n++]=C}}return n}function E(p,x,w,o,v,u,f){for(var h=2*p,r=h*w,s=r,n=w,t=x,i=p+x,e=w;o>e;++e,r+=h){var T=v[r+t],b=v[r+i];if(T<f&&f<=b)if(n===e)n+=1,s+=h;else{for(var A=0;h>A;++A){var _=v[r+A];v[r+A]=v[s],v[s++]=_}var C=u[e];u[e]=u[n],u[n++]=C}}return n}function M(p,x,w,o,v,u,f,h){for(var r=2*p,s=r*w,n=s,t=w,i=x,e=p+x,T=w;o>T;++T,s+=r){var b=v[s+i],A=v[s+e];if(!(b>=f)&&!(h>=A))if(t===T)t+=1,n+=r;else{for(var _=0;r>_;++_){var C=v[s+_];v[s+_]=v[n],v[n++]=C}var S=u[T];u[T]=u[t],u[t++]=S}}return t}},1811:function(L){L.exports=a;var F=32;function a(x,w){w<=4*F?c(0,w-1,x):p(0,w-1,x)}function c(x,w,o){for(var v=2*(x+1),u=x+1;u<=w;++u){for(var f=o[v++],h=o[v++],r=u,s=v-2;r-- >x;){var n=o[s-2],t=o[s-1];if(n<f)break;if(n===f&&t<h)break;o[s]=n,o[s+1]=t,s-=2}o[s]=f,o[s+1]=h}}function m(x,w,o){x*=2,w*=2;var v=o[x],u=o[x+1];o[x]=o[w],o[x+1]=o[w+1],o[w]=v,o[w+1]=u}function l(x,w,o){x*=2,w*=2,o[x]=o[w],o[x+1]=o[w+1]}function g(x,w,o,v){x*=2,w*=2,o*=2;var u=v[x],f=v[x+1];v[x]=v[w],v[x+1]=v[w+1],v[w]=v[o],v[w+1]=v[o+1],v[o]=u,v[o+1]=f}function d(x,w,o,v,u){x*=2,w*=2,u[x]=u[w],u[w]=o,u[x+1]=u[w+1],u[w+1]=v}function E(x,w,o){x*=2,w*=2;var v=o[x],u=o[w];return v<u?!1:v===u?o[x+1]>o[w+1]:!0}function M(x,w,o,v){x*=2;var u=v[x];return u<w?!0:u===w?v[x+1]<o:!1}function p(x,w,o){var v=(w-x+1)/6|0,u=x+v,f=w-v,h=x+w>>1,r=h-v,s=h+v,n=u,t=r,i=h,e=s,T=f,b=x+1,A=w-1,_=0;E(n,t,o)&&(_=n,n=t,t=_),E(e,T,o)&&(_=e,e=T,T=_),E(n,i,o)&&(_=n,n=i,i=_),E(t,i,o)&&(_=t,t=i,i=_),E(n,e,o)&&(_=n,n=e,e=_),E(i,e,o)&&(_=i,i=e,e=_),E(t,T,o)&&(_=t,t=T,T=_),E(t,i,o)&&(_=t,t=i,i=_),E(e,T,o)&&(_=e,e=T,T=_);for(var C=o[2*t],S=o[2*t+1],y=o[2*e],R=o[2*e+1],O=2*n,P=2*i,D=2*T,H=2*u,G=2*h,B=2*f,I=0;I<2;++I){var N=o[O+I],$=o[P+I],U=o[D+I];o[H+I]=N,o[G+I]=$,o[B+I]=U}l(r,x,o),l(s,w,o);for(var K=b;K<=A;++K)if(M(K,C,S,o))K!==b&&m(K,b,o),++b;else if(!M(K,y,R,o))for(;;)if(M(A,y,R,o)){M(A,C,S,o)?(g(K,b,A,o),++b,--A):(m(K,A,o),--A);break}else{if(--A<K)break;continue}d(x,b-1,C,S,o),d(w,A+1,y,R,o),b-2-x<=F?c(x,b-2,o):p(x,b-2,o),w-(A+2)<=F?c(A+2,w,o):p(A+2,w,o),A-b<=F?c(b,A,o):p(b,A,o)}},855:function(L,F,a){L.exports={init:u,sweepBipartite:r,sweepComplete:s,scanBipartite:n,scanComplete:t};var c=a(1888),m=a(8828),l=a(1811),g=1<<28,d=1024,E=c.mallocInt32(d),M=c.mallocInt32(d),p=c.mallocInt32(d),x=c.mallocInt32(d),w=c.mallocInt32(d),o=c.mallocInt32(d),v=c.mallocDouble(d*8);function u(i){var e=m.nextPow2(i);E.length<e&&(c.free(E),E=c.mallocInt32(e)),M.length<e&&(c.free(M),M=c.mallocInt32(e)),p.length<e&&(c.free(p),p=c.mallocInt32(e)),x.length<e&&(c.free(x),x=c.mallocInt32(e)),w.length<e&&(c.free(w),w=c.mallocInt32(e)),o.length<e&&(c.free(o),o=c.mallocInt32(e));var T=8*e;v.length<T&&(c.free(v),v=c.mallocDouble(T))}function f(i,e,T,b){var A=e[b],_=i[T-1];i[A]=_,e[_]=A}function h(i,e,T,b){i[T]=b,e[b]=T}function r(i,e,T,b,A,_,C,S,y,R){for(var O=0,P=2*i,D=i-1,H=P-1,G=T;G<b;++G){var B=_[G],I=P*G;v[O++]=A[I+D],v[O++]=-(B+1),v[O++]=A[I+H],v[O++]=B}for(var G=C;G<S;++G){var B=R[G]+g,N=P*G;v[O++]=y[N+D],v[O++]=-B,v[O++]=y[N+H],v[O++]=B}var $=O>>>1;l(v,$);for(var U=0,K=0,G=0;G<$;++G){var W=v[2*G+1]|0;if(W>=g)W=W-g|0,f(p,x,K--,W);else if(W>=0)f(E,M,U--,W);else if(W<=-g){W=-W-g|0;for(var Y=0;Y<U;++Y){var j=e(E[Y],W);if(j!==void 0)return j}h(p,x,K++,W)}else{W=-W-1|0;for(var Y=0;Y<K;++Y){var j=e(W,p[Y]);if(j!==void 0)return j}h(E,M,U++,W)}}}function s(i,e,T,b,A,_,C,S,y,R){for(var O=0,P=2*i,D=i-1,H=P-1,G=T;G<b;++G){var B=_[G]+1<<1,I=P*G;v[O++]=A[I+D],v[O++]=-B,v[O++]=A[I+H],v[O++]=B}for(var G=C;G<S;++G){var B=R[G]+1<<1,N=P*G;v[O++]=y[N+D],v[O++]=-B|1,v[O++]=y[N+H],v[O++]=B|1}var $=O>>>1;l(v,$);for(var U=0,K=0,W=0,G=0;G<$;++G){var Y=v[2*G+1]|0,j=Y&1;if(G<$-1&&Y>>1===v[2*G+3]>>1&&(j=2,G+=1),Y<0){for(var X=-(Y>>1)-1,Q=0;Q<W;++Q){var q=e(w[Q],X);if(q!==void 0)return q}if(j!==0)for(var Q=0;Q<U;++Q){var q=e(E[Q],X);if(q!==void 0)return q}if(j!==1)for(var Q=0;Q<K;++Q){var q=e(p[Q],X);if(q!==void 0)return q}j===0?h(E,M,U++,X):j===1?h(p,x,K++,X):j===2&&h(w,o,W++,X)}else{var X=(Y>>1)-1;j===0?f(E,M,U--,X):j===1?f(p,x,K--,X):j===2&&f(w,o,W--,X)}}}function n(i,e,T,b,A,_,C,S,y,R,O,P){var D=0,H=2*i,G=e,B=e+i,I=1,N=1;b?N=g:I=g;for(var $=A;$<_;++$){var U=$+I,K=H*$;v[D++]=C[K+G],v[D++]=-U,v[D++]=C[K+B],v[D++]=U}for(var $=y;$<R;++$){var U=$+N,W=H*$;v[D++]=O[W+G],v[D++]=-U}var Y=D>>>1;l(v,Y);for(var j=0,$=0;$<Y;++$){var X=v[2*$+1]|0;if(X<0){var U=-X,Q=!1;if(U>=g?(Q=!b,U-=g):(Q=!!b,U-=1),Q)h(E,M,j++,U);else{var q=P[U],it=H*U,ft=O[it+e+1],at=O[it+e+1+i];t:for(var rt=0;rt<j;++rt){var ht=E[rt],ot=H*ht;if(!(at<C[ot+e+1]||C[ot+e+1+i]<ft)){for(var vt=e+2;vt<i;++vt)if(O[it+vt+i]<C[ot+vt]||C[ot+vt+i]<O[it+vt])continue t;var lt=S[ht],ut;if(b?ut=T(q,lt):ut=T(lt,q),ut!==void 0)return ut}}}}else f(E,M,j--,X-I)}}function t(i,e,T,b,A,_,C,S,y,R,O){for(var P=0,D=2*i,H=e,G=e+i,B=b;B<A;++B){var I=B+g,N=D*B;v[P++]=_[N+H],v[P++]=-I,v[P++]=_[N+G],v[P++]=I}for(var B=S;B<y;++B){var I=B+1,$=D*B;v[P++]=R[$+H],v[P++]=-I}var U=P>>>1;l(v,U);for(var K=0,B=0;B<U;++B){var W=v[2*B+1]|0;if(W<0){var I=-W;if(I>=g)E[K++]=I-g;else{I-=1;var Y=O[I],j=D*I,X=R[j+e+1],Q=R[j+e+1+i];t:for(var q=0;q<K;++q){var it=E[q],ft=C[it];if(ft===Y)break;var at=D*it;if(!(Q<_[at+e+1]||_[at+e+1+i]<X)){for(var rt=e+2;rt<i;++rt)if(R[j+rt+i]<_[at+rt]||_[at+rt+i]<R[j+rt])continue t;var ht=T(ft,Y);if(ht!==void 0)return ht}}}}else{for(var I=W-g,q=K-1;q>=0;--q)if(E[q]===I){for(var rt=q+1;rt<K;++rt)E[rt-1]=E[rt];break}--K}}}},2538:function(L,F,a){var c=a(8902),m=a(5542),l=a(2272),g=a(5023);L.exports=x;function d(w){return[Math.min(w[0],w[1]),Math.max(w[0],w[1])]}function E(w,o){return w[0]-o[0]||w[1]-o[1]}function M(w){return w.map(d).sort(E)}function p(w,o,v){return o in w?w[o]:v}function x(w,o,v){Array.isArray(o)?(v=v||{},o=o||[]):(v=o||{},o=[]);var u=!!p(v,"delaunay",!0),f=!!p(v,"interior",!0),h=!!p(v,"exterior",!0),r=!!p(v,"infinity",!1);if(!f&&!h||w.length===0)return[];var s=c(w,o);if(u||f!==h||r){for(var n=m(w.length,M(o)),t=0;t<s.length;++t){var i=s[t];n.addTriangle(i[0],i[1],i[2])}return u&&l(w,n),h?f?r?g(n,0,r):n.cells():g(n,1,r):g(n,-1)}else return s}},2272:function(L,F,a){var c=a(2646)[4];a(2478),L.exports=l;function m(g,d,E,M,p,x){var w=d.opposite(M,p);if(!(w<0)){if(p<M){var o=M;M=p,p=o,o=x,x=w,w=o}d.isConstraint(M,p)||c(g[M],g[p],g[x],g[w])<0&&E.push(M,p)}}function l(g,d){for(var E=[],M=g.length,p=d.stars,x=0;x<M;++x)for(var w=p[x],o=1;o<w.length;o+=2){var v=w[o];if(!(v<x)&&!d.isConstraint(x,v)){for(var u=w[o-1],f=-1,h=1;h<w.length;h+=2)if(w[h-1]===v){f=w[h];break}f<0||c(g[x],g[v],g[u],g[f])<0&&E.push(x,v)}}for(;E.length>0;){for(var v=E.pop(),x=E.pop(),u=-1,f=-1,w=p[x],r=1;r<w.length;r+=2){var s=w[r-1],n=w[r];s===v?f=n:n===v&&(u=s)}u<0||f<0||c(g[x],g[v],g[u],g[f])>=0||(d.flip(x,v),m(g,d,E,u,x,f),m(g,d,E,x,f,u),m(g,d,E,f,v,u),m(g,d,E,v,u,f))}}},5023:function(L,F,a){var c=a(2478);L.exports=M;function m(p,x,w,o,v,u,f){this.cells=p,this.neighbor=x,this.flags=o,this.constraint=w,this.active=v,this.next=u,this.boundary=f}var l=m.prototype;function g(p,x){return p[0]-x[0]||p[1]-x[1]||p[2]-x[2]}l.locate=function(){var p=[0,0,0];return function(x,w,o){var v=x,u=w,f=o;return w<o?w<x&&(v=w,u=o,f=x):o<x&&(v=o,u=x,f=w),v<0?-1:(p[0]=v,p[1]=u,p[2]=f,c.eq(this.cells,p,g))}}();function d(p,x){for(var w=p.cells(),o=w.length,v=0;v<o;++v){var u=w[v],f=u[0],h=u[1],r=u[2];h<r?h<f&&(u[0]=h,u[1]=r,u[2]=f):r<f&&(u[0]=r,u[1]=f,u[2]=h)}w.sort(g);for(var s=new Array(o),v=0;v<s.length;++v)s[v]=0;var n=[],t=[],i=new Array(3*o),e=new Array(3*o),T=null;x&&(T=[]);for(var b=new m(w,i,e,s,n,t,T),v=0;v<o;++v)for(var u=w[v],A=0;A<3;++A){var f=u[A],h=u[(A+1)%3],_=i[3*v+A]=b.locate(h,f,p.opposite(h,f)),C=e[3*v+A]=p.isConstraint(f,h);_<0&&(C?t.push(v):(n.push(v),s[v]=1),x&&T.push([h,f,-1]))}return b}function E(p,x,w){for(var o=0,v=0;v<p.length;++v)x[v]===w&&(p[o++]=p[v]);return p.length=o,p}function M(p,x,w){var o=d(p,w);if(x===0)return w?o.cells.concat(o.boundary):o.cells;for(var v=1,u=o.active,f=o.next,h=o.flags,r=o.cells,s=o.constraint,n=o.neighbor;u.length>0||f.length>0;){for(;u.length>0;){var t=u.pop();if(h[t]!==-v){h[t]=v,r[t];for(var i=0;i<3;++i){var e=n[3*t+i];e>=0&&h[e]===0&&(s[3*t+i]?f.push(e):(u.push(e),h[e]=v))}}}var T=f;f=u,u=T,f.length=0,v=-v}var b=E(r,h,x);return w?b.concat(o.boundary):b}},8902:function(L,F,a){var c=a(2478),m=a(3250)[3],l=0,g=1,d=2;L.exports=f;function E(h,r,s,n,t){this.a=h,this.b=r,this.idx=s,this.lowerIds=n,this.upperIds=t}function M(h,r,s,n){this.a=h,this.b=r,this.type=s,this.idx=n}function p(h,r){var s=h.a[0]-r.a[0]||h.a[1]-r.a[1]||h.type-r.type;return s||h.type!==l&&(s=m(h.a,h.b,r.b),s)?s:h.idx-r.idx}function x(h,r){return m(h.a,h.b,r)}function w(h,r,s,n,t){for(var i=c.lt(r,n,x),e=c.gt(r,n,x),T=i;T<e;++T){for(var b=r[T],A=b.lowerIds,C=A.length;C>1&&m(s[A[C-2]],s[A[C-1]],n)>0;)h.push([A[C-1],A[C-2],t]),C-=1;A.length=C,A.push(t);for(var _=b.upperIds,C=_.length;C>1&&m(s[_[C-2]],s[_[C-1]],n)<0;)h.push([_[C-2],_[C-1],t]),C-=1;_.length=C,_.push(t)}}function o(h,r){var s;return h.a[0]<r.a[0]?s=m(h.a,h.b,r.a):s=m(r.b,r.a,h.a),s||(r.b[0]<h.b[0]?s=m(h.a,h.b,r.b):s=m(r.b,r.a,h.b),s||h.idx-r.idx)}function v(h,r,s){var n=c.le(h,s,o),t=h[n],i=t.upperIds,e=i[i.length-1];t.upperIds=[e],h.splice(n+1,0,new E(s.a,s.b,s.idx,[e],i))}function u(h,r,s){var n=s.a;s.a=s.b,s.b=n;var t=c.eq(h,s,o),i=h[t],e=h[t-1];e.upperIds=i.upperIds,h.splice(t,1)}function f(h,r){for(var s=h.length,n=r.length,t=[],i=0;i<s;++i)t.push(new M(h[i],null,l,i));for(var i=0;i<n;++i){var e=r[i],T=h[e[0]],b=h[e[1]];T[0]<b[0]?t.push(new M(T,b,d,i),new M(b,T,g,i)):T[0]>b[0]&&t.push(new M(b,T,d,i),new M(T,b,g,i))}t.sort(p);for(var A=t[0].a[0]-(1+Math.abs(t[0].a[0]))*Math.pow(2,-52),_=[new E([A,1],[A,0],-1,[],[])],C=[],i=0,S=t.length;i<S;++i){var y=t[i],R=y.type;R===l?w(C,_,h,y.a,y.idx):R===d?v(_,h,y):u(_,h,y)}return C}},5542:function(L,F,a){var c=a(2478);L.exports=d;function m(E,M){this.stars=E,this.edges=M}var l=m.prototype;function g(E,M,p){for(var x=1,w=E.length;x<w;x+=2)if(E[x-1]===M&&E[x]===p){E[x-1]=E[w-2],E[x]=E[w-1],E.length=w-2;return}}l.isConstraint=function(){var E=[0,0];function M(p,x){return p[0]-x[0]||p[1]-x[1]}return function(p,x){return E[0]=Math.min(p,x),E[1]=Math.max(p,x),c.eq(this.edges,E,M)>=0}}(),l.removeTriangle=function(E,M,p){var x=this.stars;g(x[E],M,p),g(x[M],p,E),g(x[p],E,M)},l.addTriangle=function(E,M,p){var x=this.stars;x[E].push(M,p),x[M].push(p,E),x[p].push(E,M)},l.opposite=function(E,M){for(var p=this.stars[M],x=1,w=p.length;x<w;x+=2)if(p[x]===E)return p[x-1];return-1},l.flip=function(E,M){var p=this.opposite(E,M),x=this.opposite(M,E);this.removeTriangle(E,M,p),this.removeTriangle(M,E,x),this.addTriangle(E,x,p),this.addTriangle(M,p,x)},l.edges=function(){for(var E=this.stars,M=[],p=0,x=E.length;p<x;++p)for(var w=E[p],o=0,v=w.length;o<v;o+=2)M.push([w[o],w[o+1]]);return M},l.cells=function(){for(var E=this.stars,M=[],p=0,x=E.length;p<x;++p)for(var w=E[p],o=0,v=w.length;o<v;o+=2){var u=w[o],f=w[o+1];p<Math.min(u,f)&&M.push([p,u,f])}return M};function d(E,M){for(var p=new Array(E),x=0;x<E;++x)p[x]=[];return new m(p,M)}},2419:function(L){L.exports=F;function F(a){for(var c=1,m=1;m<a.length;++m)for(var l=0;l<m;++l)if(a[m]<a[l])c=-c;else if(a[l]===a[m])return 0;return c}},3628:function(L,F,a){var c=a(1338),m=a(727);function l(E,M){for(var p=0,x=E.length,w=0;w<x;++w)p+=E[w]*M[w];return p}function g(E){var M=E.length;if(M===0)return[];E[0].length;var p=c([E.length+1,E.length+1],1),x=c([E.length+1],1);p[M][M]=0;for(var w=0;w<M;++w){for(var o=0;o<=w;++o)p[o][w]=p[w][o]=2*l(E[w],E[o]);x[w]=l(E[w],E[w])}for(var v=m(p,x),u=0,f=v[M+1],w=0;w<f.length;++w)u+=f[w];for(var h=new Array(M),w=0;w<M;++w){for(var f=v[w],r=0,o=0;o<f.length;++o)r+=f[o];h[w]=r/u}return h}function d(E){if(E.length===0)return[];for(var M=E[0].length,p=c([M]),x=g(E),w=0;w<E.length;++w)for(var o=0;o<M;++o)p[o]+=E[w][o]*x[w];return p}d.barycenetric=g,L.exports=d},6037:function(L,F,a){L.exports=m;var c=a(3628);function m(l){for(var g=c(l),d=0,E=0;E<l.length;++E)for(var M=l[E],p=0;p<g.length;++p)d+=Math.pow(M[p]-g[p],2);return Math.sqrt(d/l.length)}},332:function(L,F,a){L.exports=T;var c=a(1755),m=a(6867),l=a(1125),g=a(7842),d=a(1318),E=a(946),M=a(5838),p=a(1278),x=a(3637);function w(b){var A=E(b);return[p(A,-1/0),p(A,1/0)]}function o(b,A){for(var _=new Array(A.length),C=0;C<A.length;++C){var S=A[C],y=b[S[0]],R=b[S[1]];_[C]=[p(Math.min(y[0],R[0]),-1/0),p(Math.min(y[1],R[1]),-1/0),p(Math.max(y[0],R[0]),1/0),p(Math.max(y[1],R[1]),1/0)]}return _}function v(b){for(var A=new Array(b.length),_=0;_<b.length;++_){var C=b[_];A[_]=[p(C[0],-1/0),p(C[1],-1/0),p(C[0],1/0),p(C[1],1/0)]}return A}function u(b,A,_){var C=[];return m(_,function(S,y){var R=A[S],O=A[y];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var P=b[R[0]],D=b[R[1]],H=b[O[0]],G=b[O[1]];l(P,D,H,G)&&C.push([S,y])}}),C}function f(b,A,_,C){var S=[];return m(_,C,function(y,R){var O=A[y];if(!(O[0]===R||O[1]===R)){var P=b[R],D=b[O[0]],H=b[O[1]];l(D,H,P,P)&&S.push([y,R])}}),S}function h(b,A,_,C,S){var y,R,O=b.map(function(it){return[g(it[0]),g(it[1])]});for(y=0;y<_.length;++y){var P=_[y];R=P[0];var D=P[1],H=A[R],G=A[D],B=x(M(b[H[0]]),M(b[H[1]]),M(b[G[0]]),M(b[G[1]]));if(B){var I=b.length;b.push([E(B[0]),E(B[1])]),O.push(B),C.push([R,I],[D,I])}}for(C.sort(function(it,ft){if(it[0]!==ft[0])return it[0]-ft[0];var at=O[it[1]],rt=O[ft[1]];return d(at[0],rt[0])||d(at[1],rt[1])}),y=C.length-1;y>=0;--y){var N=C[y];R=N[0];var $=A[R],U=$[0],K=$[1],W=b[U],Y=b[K];if((W[0]-Y[0]||W[1]-Y[1])<0){var j=U;U=K,K=j}$[0]=U;var X=$[1]=N[1],Q;for(S&&(Q=$[2]);y>0&&C[y-1][0]===R;){var N=C[--y],q=N[1];S?A.push([X,q,Q]):A.push([X,q]),X=q}S?A.push([X,K,Q]):A.push([X,K])}return O}function r(b,A,_){for(var C=A.length,S=new c(C),y=[],R=0;R<A.length;++R){var O=A[R],P=w(O[0]),D=w(O[1]);y.push([p(P[0],-1/0),p(D[0],-1/0),p(P[1],1/0),p(D[1],1/0)])}m(y,function(N,$){S.link(N,$)});for(var H=!0,G=new Array(C),R=0;R<C;++R){var B=S.find(R);B!==R&&(H=!1,b[B]=[Math.min(b[R][0],b[B][0]),Math.min(b[R][1],b[B][1])])}if(H)return null;for(var I=0,R=0;R<C;++R){var B=S.find(R);B===R?(G[R]=I,b[I++]=b[R]):G[R]=-1}b.length=I;for(var R=0;R<C;++R)G[R]<0&&(G[R]=G[S.find(R)]);return G}function s(b,A){return b[0]-A[0]||b[1]-A[1]}function n(b,A){var _=b[0]-A[0]||b[1]-A[1];return _||(b[2]<A[2]?-1:b[2]>A[2]?1:0)}function t(b,A,_){if(b.length!==0){if(A)for(var C=0;C<b.length;++C){var S=b[C],y=A[S[0]],R=A[S[1]];S[0]=Math.min(y,R),S[1]=Math.max(y,R)}else for(var C=0;C<b.length;++C){var S=b[C],y=S[0],R=S[1];S[0]=Math.min(y,R),S[1]=Math.max(y,R)}_?b.sort(n):b.sort(s);for(var O=1,C=1;C<b.length;++C){var P=b[C-1],D=b[C];D[0]===P[0]&&D[1]===P[1]&&(!_||D[2]===P[2])||(b[O++]=D)}b.length=O}}function i(b,A,_){var C=r(b,[],v(b));return t(A,C,_),!!C}function e(b,A,_){var C=o(b,A),S=u(b,A,C),y=v(b),R=f(b,A,C,y),O=h(b,A,S,R,_),P=r(b,O);return t(A,P,_),P?!0:S.length>0||R.length>0}function T(b,A,_){var C;if(_){C=A;for(var S=new Array(A.length),y=0;y<A.length;++y){var R=A[y];S[y]=[R[0],R[1],_[y]]}A=S}for(var O=i(b,A,!!_);e(b,A,!!_);)O=!0;if(_&&O){C.length=0,_.length=0;for(var y=0;y<A.length;++y){var R=A[y];C.push([R[0],R[1]]),_.push(R[2])}}return O}},3637:function(L,F,a){L.exports=x;var c=a(6504),m=a(8697),l=a(5572),g=a(7721),d=a(544),E=a(2653),M=a(8987);function p(w,o){return l(c(w[0],o[1]),c(w[1],o[0]))}function x(w,o,v,u){var f=d(o,w),h=d(u,v),r=p(f,h);if(g(r)===0)return null;var s=d(w,v),n=p(h,s),t=m(n,r),i=M(f,t),e=E(w,i);return e}},3642:function(L){L.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(L,F,a){var c=a(3642),m=a(395);L.exports=l;function l(M){var p,x,w,o,v,u,f,h,t,r,s;if(M||(M={}),h=(M.nshades||72)-1,f=M.format||"hex",u=M.colormap,u||(u="jet"),typeof u=="string"){if(u=u.toLowerCase(),!c[u])throw Error(u+" not a supported colorscale");v=c[u]}else if(Array.isArray(u))v=u.slice();else throw Error("unsupported colormap option",u);if(v.length>h+1)throw new Error(u+" map requires nshades to be at least size "+v.length);Array.isArray(M.alpha)?M.alpha.length!==2?r=[1,1]:r=M.alpha.slice():typeof M.alpha=="number"?r=[M.alpha,M.alpha]:r=[1,1],p=v.map(function(T){return Math.round(T.index*h)}),r[0]=Math.min(Math.max(r[0],0),1),r[1]=Math.min(Math.max(r[1],0),1);var n=v.map(function(T,b){var A=v[b].index,_=v[b].rgb.slice();return _.length===4&&_[3]>=0&&_[3]<=1||(_[3]=r[0]+(r[1]-r[0])*A),_}),t=[];for(s=0;s<p.length-1;++s){o=p[s+1]-p[s],x=n[s],w=n[s+1];for(var i=0;i<o;i++){var e=i/o;t.push([Math.round(m(x[0],w[0],e)),Math.round(m(x[1],w[1],e)),Math.round(m(x[2],w[2],e)),m(x[3],w[3],e)])}}return t.push(v[v.length-1].rgb.concat(r[1])),f==="hex"?t=t.map(d):f==="rgbaString"?t=t.map(E):f==="float"&&(t=t.map(g)),t}function g(M){return[M[0]/255,M[1]/255,M[2]/255,M[3]]}function d(M){for(var p,x="#",w=0;w<3;++w)p=M[w],p=p.toString(16),x+=("00"+p).substr(p.length);return x}function E(M){return"rgba("+M.join(",")+")"}},3140:function(L,F,a){L.exports=M;var c=a(3250),m=a(8572),l=a(9362),g=a(5382),d=a(8210);function E(p,x,w){var o=l(p[0],-x[0]),v=l(p[1],-x[1]),u=l(w[0],-x[0]),f=l(w[1],-x[1]),h=d(g(o,u),g(v,f));return h[h.length-1]>=0}function M(p,x,w,o){var v=c(x,w,o);if(v===0){var u=m(c(p,x,w)),f=m(c(p,x,o));if(u===f){if(u===0){var h=E(p,x,w),r=E(p,x,o);return h===r?0:h?1:-1}return 0}else{if(f===0)return u>0||E(p,x,o)?-1:1;if(u===0)return f>0||E(p,x,w)?1:-1}return m(f-u)}var s=c(p,x,w);if(s>0)return v>0&&c(p,x,o)>0?1:-1;if(s<0)return v>0||c(p,x,o)>0?1:-1;var n=c(p,x,o);return n>0||E(p,x,w)?1:-1}},8572:function(L){L.exports=function(a){return a<0?-1:a>0?1:0}},8507:function(L){L.exports=c;var F=Math.min;function a(m,l){return m-l}function c(m,l){var g=m.length,d=m.length-l.length;if(d)return d;switch(g){case 0:return 0;case 1:return m[0]-l[0];case 2:return m[0]+m[1]-l[0]-l[1]||F(m[0],m[1])-F(l[0],l[1]);case 3:var E=m[0]+m[1],M=l[0]+l[1];if(d=E+m[2]-(M+l[2]),d)return d;var p=F(m[0],m[1]),x=F(l[0],l[1]);return F(p,m[2])-F(x,l[2])||F(p+m[2],E)-F(x+l[2],M);case 4:var w=m[0],o=m[1],v=m[2],u=m[3],f=l[0],h=l[1],r=l[2],s=l[3];return w+o+v+u-(f+h+r+s)||F(w,o,v,u)-F(f,h,r,s,f)||F(w+o,w+v,w+u,o+v,o+u,v+u)-F(f+h,f+r,f+s,h+r,h+s,r+s)||F(w+o+v,w+o+u,w+v+u,o+v+u)-F(f+h+r,f+h+s,f+r+s,h+r+s);default:for(var n=m.slice().sort(a),t=l.slice().sort(a),i=0;i<g;++i)if(d=n[i]-t[i],d)return d;return 0}}},3788:function(L,F,a){var c=a(8507),m=a(2419);L.exports=l;function l(g,d){return c(g,d)||m(g)-m(d)}},7352:function(L,F,a){var c=a(5721),m=a(4750),l=a(2690);L.exports=g;function g(d){var E=d.length;if(E===0)return[];if(E===1)return[[0]];var M=d[0].length;return M===0?[]:M===1?c(d):M===2?m(d):l(d,M)}},5721:function(L){L.exports=F;function F(a){for(var c=0,m=0,l=1;l<a.length;++l)a[l][0]<a[c][0]&&(c=l),a[l][0]>a[m][0]&&(m=l);return c<m?[[c],[m]]:c>m?[[m],[c]]:[[c]]}},4750:function(L,F,a){L.exports=m;var c=a(3090);function m(l){var g=c(l),d=g.length;if(d<=2)return[];for(var E=new Array(d),M=g[d-1],p=0;p<d;++p){var x=g[p];E[p]=[M,x],M=x}return E}},2690:function(L,F,a){L.exports=d;var c=a(8954),m=a(3952);function l(E,M){for(var p=E.length,x=new Array(p),w=0;w<M.length;++w)x[w]=E[M[w]];for(var o=M.length,w=0;w<p;++w)M.indexOf(w)<0&&(x[o++]=E[w]);return x}function g(E,M){for(var p=E.length,x=M.length,w=0;w<p;++w)for(var o=E[w],v=0;v<o.length;++v){var u=o[v];if(u<x)o[v]=M[u];else{u=u-x;for(var f=0;f<x;++f)u>=M[f]&&(u+=1);o[v]=u}}return E}function d(E,M){try{return c(E,!0)}catch{var p=m(E);if(p.length<=M)return[];var x=l(E,p),w=c(x,!0);return g(w,p)}}},4769:function(L){function F(c,m,l,g,d,E){var M=6*d*d-6*d,p=3*d*d-4*d+1,x=-6*d*d+6*d,w=3*d*d-2*d;if(c.length){E||(E=new Array(c.length));for(var o=c.length-1;o>=0;--o)E[o]=M*c[o]+p*m[o]+x*l[o]+w*g[o];return E}return M*c+p*m+x*l[o]+w*g}function a(c,m,l,g,d,E){var M=d-1,p=d*d,x=M*M,w=(1+2*d)*x,o=d*x,v=p*(3-2*d),u=p*M;if(c.length){E||(E=new Array(c.length));for(var f=c.length-1;f>=0;--f)E[f]=w*c[f]+o*m[f]+v*l[f]+u*g[f];return E}return w*c+o*m+v*l+u*g}L.exports=a,L.exports.derivative=F},7642:function(L,F,a){var c=a(8954),m=a(1682);L.exports=E;function l(M,p){this.point=M,this.index=p}function g(M,p){for(var x=M.point,w=p.point,o=x.length,v=0;v<o;++v){var u=w[v]-x[v];if(u)return u}return 0}function d(M,p,x){if(M===1)return x?[[-1,0]]:[];var w=p.map(function(h,r){return[h[0],r]});w.sort(function(h,r){return h[0]-r[0]});for(var o=new Array(M-1),v=1;v<M;++v){var u=w[v-1],f=w[v];o[v-1]=[u[1],f[1]]}return x&&o.push([-1,o[0][1]],[o[M-1][1],-1]),o}function E(M,p){var x=M.length;if(x===0)return[];var w=M[0].length;if(w<1)return[];if(w===1)return d(x,M,p);for(var o=new Array(x),v=1,u=0;u<x;++u){for(var f=M[u],h=new Array(w+1),r=0,s=0;s<w;++s){var n=f[s];h[s]=n,r+=n*n}h[w]=r,o[u]=new l(h,u),v=Math.max(r,v)}m(o,g),x=o.length;for(var t=new Array(x+w+1),i=new Array(x+w+1),e=(w+1)*(w+1)*v,T=new Array(w+1),u=0;u<=w;++u)T[u]=0;T[w]=e,t[0]=T.slice(),i[0]=-1;for(var u=0;u<=w;++u){var h=T.slice();h[u]=1,t[u+1]=h,i[u+1]=-1}for(var u=0;u<x;++u){var b=o[u];t[u+w+1]=b.point,i[u+w+1]=b.index}var A=c(t,!1);if(p?A=A.filter(function(_){for(var C=0,S=0;S<=w;++S){var y=i[_[S]];if(y<0&&++C>=2)return!1;_[S]=y}return!0}):A=A.filter(function(_){for(var C=0;C<=w;++C){var S=i[_[C]];if(S<0)return!1;_[C]=S}return!0}),w&1)for(var u=0;u<A.length;++u){var b=A[u],h=b[0];b[0]=b[1],b[1]=h}return A}},2361:function(L){var F=!1;if(typeof Float64Array<"u"){var a=new Float64Array(1),c=new Uint32Array(a.buffer);if(a[0]=1,F=!0,c[1]===1072693248){let l=function(E,M){return c[0]=E,c[1]=M,a[0]},g=function(E){return a[0]=E,c[0]},d=function(E){return a[0]=E,c[1]};L.exports=function(M){return a[0]=M,[c[0],c[1]]},L.exports.pack=l,L.exports.lo=g,L.exports.hi=d}else if(c[0]===1072693248){let l=function(E,M){return c[1]=E,c[0]=M,a[0]},g=function(E){return a[0]=E,c[1]},d=function(E){return a[0]=E,c[0]};L.exports=function(M){return a[0]=M,[c[1],c[0]]},L.exports.pack=l,L.exports.lo=g,L.exports.hi=d}else F=!1}if(!F){let l=function(E,M){return m.writeUInt32LE(E,0,!0),m.writeUInt32LE(M,4,!0),m.readDoubleLE(0,!0)},g=function(E){return m.writeDoubleLE(E,0,!0),m.readUInt32LE(0,!0)},d=function(E){return m.writeDoubleLE(E,0,!0),m.readUInt32LE(4,!0)};var m=new Buffer(8);L.exports=function(M){return m.writeDoubleLE(M,0,!0),[m.readUInt32LE(0,!0),m.readUInt32LE(4,!0)]},L.exports.pack=l,L.exports.lo=g,L.exports.hi=d}L.exports.sign=function(l){return L.exports.hi(l)>>>31},L.exports.exponent=function(l){var g=L.exports.hi(l);return(g<<1>>>21)-1023},L.exports.fraction=function(l){var g=L.exports.lo(l),d=L.exports.hi(l),E=d&(1<<20)-1;return d&2146435072&&(E+=1048576),[g,E]},L.exports.denormalized=function(l){var g=L.exports.hi(l);return!(g&2146435072)}},1338:function(L){function F(m,l,g){var d=m[g]|0;if(d<=0)return[];var E=new Array(d),M;if(g===m.length-1)for(M=0;M<d;++M)E[M]=l;else for(M=0;M<d;++M)E[M]=F(m,l,g+1);return E}function a(m,l){var g,d;for(g=new Array(m),d=0;d<m;++d)g[d]=l;return g}function c(m,l){switch(typeof l>"u"&&(l=0),typeof m){case"number":if(m>0)return a(m|0,l);break;case"object":if(typeof m.length=="number")return F(m,l,0);break}return[]}L.exports=c},3134:function(L,F,a){L.exports=m;var c=a(1682);function m(l,g){var d=l.length;if(typeof g!="number"){g=0;for(var E=0;E<d;++E){var M=l[E];g=Math.max(g,M[0],M[1])}g=(g|0)+1}g=g|0;for(var p=new Array(g),E=0;E<g;++E)p[E]=[];for(var E=0;E<d;++E){var M=l[E];p[M[0]].push(M[1]),p[M[1]].push(M[0])}for(var x=0;x<g;++x)c(p[x],function(w,o){return w-o});return p}},5033:function(L){L.exports=F;function F(a,c,m){var l=c||0,g=m||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[l*a[12]+a[8],l*a[13]+a[9],l*a[14]+a[10],l*a[15]+a[11]],[g*a[12]-a[8],g*a[13]-a[9],g*a[14]-a[10],g*a[15]-a[11]]]}},9215:function(L,F,a){L.exports=M;var c=a(4769),m=a(2478);function l(p,x,w){return Math.min(x,Math.max(p,w))}function g(p,x,w){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var o=0;o<this.dimension;++o)this.bounds[0][o]=-1/0,this.bounds[1][o]=1/0;this._state=p.slice().reverse(),this._velocity=x.slice().reverse(),this._time=[w],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var d=g.prototype;d.flush=function(p){var x=m.gt(this._time,p)-1;x<=0||(this._time.splice(0,x),this._state.splice(0,x*this.dimension),this._velocity.splice(0,x*this.dimension))},d.curve=function(p){var x=this._time,w=x.length,o=m.le(x,p),v=this._scratch[0],u=this._state,f=this._velocity,h=this.dimension,r=this.bounds;if(o<0)for(var s=h-1,n=0;n<h;++n,--s)v[n]=u[s];else if(o>=w-1)for(var s=u.length-1,t=p-x[w-1],n=0;n<h;++n,--s)v[n]=u[s]+t*f[s];else{for(var s=h*(o+1)-1,i=x[o],e=x[o+1],T=e-i||1,b=this._scratch[1],A=this._scratch[2],_=this._scratch[3],C=this._scratch[4],S=!0,n=0;n<h;++n,--s)b[n]=u[s],_[n]=f[s]*T,A[n]=u[s+h],C[n]=f[s+h]*T,S=S&&b[n]===A[n]&&_[n]===C[n]&&_[n]===0;if(S)for(var n=0;n<h;++n)v[n]=b[n];else c(b,_,A,C,(p-i)/T,v)}for(var y=r[0],R=r[1],n=0;n<h;++n)v[n]=l(y[n],R[n],v[n]);return v},d.dcurve=function(p){var x=this._time,w=x.length,o=m.le(x,p),v=this._scratch[0],u=this._state,f=this._velocity,h=this.dimension;if(o>=w-1){var r=u.length-1;p-x[w-1];for(var s=0;s<h;++s,--r)v[s]=f[r]}else{for(var r=h*(o+1)-1,n=x[o],t=x[o+1],i=t-n||1,e=this._scratch[1],T=this._scratch[2],b=this._scratch[3],A=this._scratch[4],_=!0,s=0;s<h;++s,--r)e[s]=u[r],b[s]=f[r]*i,T[s]=u[r+h],A[s]=f[r+h]*i,_=_&&e[s]===T[s]&&b[s]===A[s]&&b[s]===0;if(_)for(var s=0;s<h;++s)v[s]=0;else{c.derivative(e,b,T,A,(p-n)/i,v);for(var s=0;s<h;++s)v[s]/=i}}return v},d.lastT=function(){var p=this._time;return p[p.length-1]},d.stable=function(){for(var p=this._velocity,x=p.length,w=this.dimension-1;w>=0;--w)if(p[--x])return!1;return!0},d.jump=function(p){var x=this.lastT(),w=this.dimension;if(!(p<x||arguments.length!==w+1)){var o=this._state,v=this._velocity,u=o.length-this.dimension,f=this.bounds,h=f[0],r=f[1];this._time.push(x,p);for(var s=0;s<2;++s)for(var n=0;n<w;++n)o.push(o[u++]),v.push(0);this._time.push(p);for(var n=w;n>0;--n)o.push(l(h[n-1],r[n-1],arguments[n])),v.push(0)}},d.push=function(p){var x=this.lastT(),w=this.dimension;if(!(p<x||arguments.length!==w+1)){var o=this._state,v=this._velocity,u=o.length-this.dimension,f=p-x,h=this.bounds,r=h[0],s=h[1],n=f>1e-6?1/f:0;this._time.push(p);for(var t=w;t>0;--t){var i=l(r[t-1],s[t-1],arguments[t]);o.push(i),v.push((i-o[u++])*n)}}},d.set=function(p){var x=this.dimension;if(!(p<this.lastT()||arguments.length!==x+1)){var w=this._state,o=this._velocity,v=this.bounds,u=v[0],f=v[1];this._time.push(p);for(var h=x;h>0;--h)w.push(l(u[h-1],f[h-1],arguments[h])),o.push(0)}},d.move=function(p){var x=this.lastT(),w=this.dimension;if(!(p<=x||arguments.length!==w+1)){var o=this._state,v=this._velocity,u=o.length-this.dimension,f=this.bounds,h=f[0],r=f[1],s=p-x,n=s>1e-6?1/s:0;this._time.push(p);for(var t=w;t>0;--t){var i=arguments[t];o.push(l(h[t-1],r[t-1],o[u++]+i)),v.push(i*n)}}},d.idle=function(p){var x=this.lastT();if(!(p<x)){var w=this.dimension,o=this._state,v=this._velocity,u=o.length-w,f=this.bounds,h=f[0],r=f[1],s=p-x;this._time.push(p);for(var n=w-1;n>=0;--n)o.push(l(h[n],r[n],o[u]+s*v[u])),v.push(0),u+=1}};function E(p){for(var x=new Array(p),w=0;w<p;++w)x[w]=0;return x}function M(p,x,w){switch(arguments.length){case 0:return new g([0],[0],0);case 1:if(typeof p=="number"){var o=E(p);return new g(o,o,0)}else return new g(p,E(p.length),0);case 2:if(typeof x=="number"){var o=E(p.length);return new g(p,o,+x)}else w=0;case 3:if(p.length!==x.length)throw new Error("state and velocity lengths must match");return new g(p,x,w)}}},3840:function(L){L.exports=h;var F=0,a=1;function c(r,s,n,t,i,e){this._color=r,this.key=s,this.value=n,this.left=t,this.right=i,this._count=e}function m(r){return new c(r._color,r.key,r.value,r.left,r.right,r._count)}function l(r,s){return new c(r,s.key,s.value,s.left,s.right,s._count)}function g(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function d(r,s){this._compare=r,this.root=s}var E=d.prototype;Object.defineProperty(E,"keys",{get:function(){var r=[];return this.forEach(function(s,n){r.push(s)}),r}}),Object.defineProperty(E,"values",{get:function(){var r=[];return this.forEach(function(s,n){r.push(n)}),r}}),Object.defineProperty(E,"length",{get:function(){return this.root?this.root._count:0}}),E.insert=function(r,s){for(var n=this._compare,t=this.root,i=[],e=[];t;){var T=n(r,t.key);i.push(t),e.push(T),T<=0?t=t.left:t=t.right}i.push(new c(F,r,s,null,null,1));for(var b=i.length-2;b>=0;--b){var t=i[b];e[b]<=0?i[b]=new c(t._color,t.key,t.value,i[b+1],t.right,t._count+1):i[b]=new c(t._color,t.key,t.value,t.left,i[b+1],t._count+1)}for(var b=i.length-1;b>1;--b){var A=i[b-1],t=i[b];if(A._color===a||t._color===a)break;var _=i[b-2];if(_.left===A)if(A.left===t){var C=_.right;if(C&&C._color===F)A._color=a,_.right=l(a,C),_._color=F,b-=1;else{if(_._color=F,_.left=A.right,A._color=a,A.right=_,i[b-2]=A,i[b-1]=t,g(_),g(A),b>=3){var S=i[b-3];S.left===_?S.left=A:S.right=A}break}}else{var C=_.right;if(C&&C._color===F)A._color=a,_.right=l(a,C),_._color=F,b-=1;else{if(A.right=t.left,_._color=F,_.left=t.right,t._color=a,t.left=A,t.right=_,i[b-2]=t,i[b-1]=A,g(_),g(A),g(t),b>=3){var S=i[b-3];S.left===_?S.left=t:S.right=t}break}}else if(A.right===t){var C=_.left;if(C&&C._color===F)A._color=a,_.left=l(a,C),_._color=F,b-=1;else{if(_._color=F,_.right=A.left,A._color=a,A.left=_,i[b-2]=A,i[b-1]=t,g(_),g(A),b>=3){var S=i[b-3];S.right===_?S.right=A:S.left=A}break}}else{var C=_.left;if(C&&C._color===F)A._color=a,_.left=l(a,C),_._color=F,b-=1;else{if(A.left=t.right,_._color=F,_.right=t.left,t._color=a,t.right=A,t.left=_,i[b-2]=t,i[b-1]=A,g(_),g(A),g(t),b>=3){var S=i[b-3];S.right===_?S.right=t:S.left=t}break}}}return i[0]._color=a,new d(n,i[0])};function M(r,s){if(s.left){var n=M(r,s.left);if(n)return n}var n=r(s.key,s.value);if(n)return n;if(s.right)return M(r,s.right)}function p(r,s,n,t){var i=s(r,t.key);if(i<=0){if(t.left){var e=p(r,s,n,t.left);if(e)return e}var e=n(t.key,t.value);if(e)return e}if(t.right)return p(r,s,n,t.right)}function x(r,s,n,t,i){var e=n(r,i.key),T=n(s,i.key),b;if(e<=0&&(i.left&&(b=x(r,s,n,t,i.left),b)||T>0&&(b=t(i.key,i.value),b)))return b;if(T>0&&i.right)return x(r,s,n,t,i.right)}E.forEach=function(s,n,t){if(this.root)switch(arguments.length){case 1:return M(s,this.root);case 2:return p(n,this._compare,s,this.root);case 3:return this._compare(n,t)>=0?void 0:x(n,t,this._compare,s,this.root)}},Object.defineProperty(E,"begin",{get:function(){for(var r=[],s=this.root;s;)r.push(s),s=s.left;return new w(this,r)}}),Object.defineProperty(E,"end",{get:function(){for(var r=[],s=this.root;s;)r.push(s),s=s.right;return new w(this,r)}}),E.at=function(r){if(r<0)return new w(this,[]);for(var s=this.root,n=[];;){if(n.push(s),s.left){if(r<s.left._count){s=s.left;continue}r-=s.left._count}if(!r)return new w(this,n);if(r-=1,s.right){if(r>=s.right._count)break;s=s.right}else break}return new w(this,[])},E.ge=function(r){for(var s=this._compare,n=this.root,t=[],i=0;n;){var e=s(r,n.key);t.push(n),e<=0&&(i=t.length),e<=0?n=n.left:n=n.right}return t.length=i,new w(this,t)},E.gt=function(r){for(var s=this._compare,n=this.root,t=[],i=0;n;){var e=s(r,n.key);t.push(n),e<0&&(i=t.length),e<0?n=n.left:n=n.right}return t.length=i,new w(this,t)},E.lt=function(r){for(var s=this._compare,n=this.root,t=[],i=0;n;){var e=s(r,n.key);t.push(n),e>0&&(i=t.length),e<=0?n=n.left:n=n.right}return t.length=i,new w(this,t)},E.le=function(r){for(var s=this._compare,n=this.root,t=[],i=0;n;){var e=s(r,n.key);t.push(n),e>=0&&(i=t.length),e<0?n=n.left:n=n.right}return t.length=i,new w(this,t)},E.find=function(r){for(var s=this._compare,n=this.root,t=[];n;){var i=s(r,n.key);if(t.push(n),i===0)return new w(this,t);i<=0?n=n.left:n=n.right}return new w(this,[])},E.remove=function(r){var s=this.find(r);return s?s.remove():this},E.get=function(r){for(var s=this._compare,n=this.root;n;){var t=s(r,n.key);if(t===0)return n.value;t<=0?n=n.left:n=n.right}};function w(r,s){this.tree=r,this._stack=s}var o=w.prototype;Object.defineProperty(o,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(o,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),o.clone=function(){return new w(this.tree,this._stack.slice())};function v(r,s){r.key=s.key,r.value=s.value,r.left=s.left,r.right=s.right,r._color=s._color,r._count=s._count}function u(r){for(var s,n,t,i,e=r.length-1;e>=0;--e){if(s=r[e],e===0){s._color=a;return}if(n=r[e-1],n.left===s){if(t=n.right,t.right&&t.right._color===F){if(t=n.right=m(t),i=t.right=m(t.right),n.right=t.left,t.left=n,t.right=i,t._color=n._color,s._color=a,n._color=a,i._color=a,g(n),g(t),e>1){var T=r[e-2];T.left===n?T.left=t:T.right=t}r[e-1]=t;return}else if(t.left&&t.left._color===F){if(t=n.right=m(t),i=t.left=m(t.left),n.right=i.left,t.left=i.right,i.left=n,i.right=t,i._color=n._color,n._color=a,t._color=a,s._color=a,g(n),g(t),g(i),e>1){var T=r[e-2];T.left===n?T.left=i:T.right=i}r[e-1]=i;return}if(t._color===a)if(n._color===F){n._color=a,n.right=l(F,t);return}else{n.right=l(F,t);continue}else{if(t=m(t),n.right=t.left,t.left=n,t._color=n._color,n._color=F,g(n),g(t),e>1){var T=r[e-2];T.left===n?T.left=t:T.right=t}r[e-1]=t,r[e]=n,e+1<r.length?r[e+1]=s:r.push(s),e=e+2}}else{if(t=n.left,t.left&&t.left._color===F){if(t=n.left=m(t),i=t.left=m(t.left),n.left=t.right,t.right=n,t.left=i,t._color=n._color,s._color=a,n._color=a,i._color=a,g(n),g(t),e>1){var T=r[e-2];T.right===n?T.right=t:T.left=t}r[e-1]=t;return}else if(t.right&&t.right._color===F){if(t=n.left=m(t),i=t.right=m(t.right),n.left=i.right,t.right=i.left,i.right=n,i.left=t,i._color=n._color,n._color=a,t._color=a,s._color=a,g(n),g(t),g(i),e>1){var T=r[e-2];T.right===n?T.right=i:T.left=i}r[e-1]=i;return}if(t._color===a)if(n._color===F){n._color=a,n.left=l(F,t);return}else{n.left=l(F,t);continue}else{if(t=m(t),n.left=t.right,t.right=n,t._color=n._color,n._color=F,g(n),g(t),e>1){var T=r[e-2];T.right===n?T.right=t:T.left=t}r[e-1]=t,r[e]=n,e+1<r.length?r[e+1]=s:r.push(s),e=e+2}}}}o.remove=function(){var r=this._stack;if(r.length===0)return this.tree;var s=new Array(r.length),n=r[r.length-1];s[s.length-1]=new c(n._color,n.key,n.value,n.left,n.right,n._count);for(var t=r.length-2;t>=0;--t){var n=r[t];n.left===r[t+1]?s[t]=new c(n._color,n.key,n.value,s[t+1],n.right,n._count):s[t]=new c(n._color,n.key,n.value,n.left,s[t+1],n._count)}if(n=s[s.length-1],n.left&&n.right){var i=s.length;for(n=n.left;n.right;)s.push(n),n=n.right;var e=s[i-1];s.push(new c(n._color,e.key,e.value,n.left,n.right,n._count)),s[i-1].key=n.key,s[i-1].value=n.value;for(var t=s.length-2;t>=i;--t)n=s[t],s[t]=new c(n._color,n.key,n.value,n.left,s[t+1],n._count);s[i-1].left=s[i]}if(n=s[s.length-1],n._color===F){var T=s[s.length-2];T.left===n?T.left=null:T.right===n&&(T.right=null),s.pop();for(var t=0;t<s.length;++t)s[t]._count--;return new d(this.tree._compare,s[0])}else if(n.left||n.right){n.left?v(n,n.left):n.right&&v(n,n.right),n._color=a;for(var t=0;t<s.length-1;++t)s[t]._count--;return new d(this.tree._compare,s[0])}else{if(s.length===1)return new d(this.tree._compare,null);for(var t=0;t<s.length;++t)s[t]._count--;var b=s[s.length-2];u(s),b.left===n?b.left=null:b.right=null}return new d(this.tree._compare,s[0])},Object.defineProperty(o,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(o,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(o,"index",{get:function(){var r=0,s=this._stack;if(s.length===0){var n=this.tree.root;return n?n._count:0}else s[s.length-1].left&&(r=s[s.length-1].left._count);for(var t=s.length-2;t>=0;--t)s[t+1]===s[t].right&&(++r,s[t].left&&(r+=s[t].left._count));return r},enumerable:!0}),o.next=function(){var r=this._stack;if(r.length!==0){var s=r[r.length-1];if(s.right)for(s=s.right;s;)r.push(s),s=s.left;else for(r.pop();r.length>0&&r[r.length-1].right===s;)s=r[r.length-1],r.pop()}},Object.defineProperty(o,"hasNext",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].right)return!0;for(var s=r.length-1;s>0;--s)if(r[s-1].left===r[s])return!0;return!1}}),o.update=function(r){var s=this._stack;if(s.length===0)throw new Error("Can't update empty node!");var n=new Array(s.length),t=s[s.length-1];n[n.length-1]=new c(t._color,t.key,r,t.left,t.right,t._count);for(var i=s.length-2;i>=0;--i)t=s[i],t.left===s[i+1]?n[i]=new c(t._color,t.key,t.value,n[i+1],t.right,t._count):n[i]=new c(t._color,t.key,t.value,t.left,n[i+1],t._count);return new d(this.tree._compare,n[0])},o.prev=function(){var r=this._stack;if(r.length!==0){var s=r[r.length-1];if(s.left)for(s=s.left;s;)r.push(s),s=s.right;else for(r.pop();r.length>0&&r[r.length-1].left===s;)s=r[r.length-1],r.pop()}},Object.defineProperty(o,"hasPrev",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].left)return!0;for(var s=r.length-1;s>0;--s)if(r[s-1].right===r[s])return!0;return!1}});function f(r,s){return r<s?-1:r>s?1:0}function h(r){return new d(r||f,null)}},3837:function(L,F,a){L.exports=b;var c=a(4935),m=a(501),l=a(5304),g=a(6429),d=a(6444),E=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),M=ArrayBuffer,p=DataView;function x(A){return M.isView(A)&&!(A instanceof p)}function w(A){return Array.isArray(A)||x(A)}function o(A,_){return A[0]=_[0],A[1]=_[1],A[2]=_[2],A}function v(A){this.gl=A,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=l(A)}var u=v.prototype;u.update=function(A){A=A||{};function _(U,K,W){if(W in A){var Y=A[W],j=this[W],X;(U?w(Y)&&w(Y[0]):w(Y))?this[W]=X=[K(Y[0]),K(Y[1]),K(Y[2])]:this[W]=X=[K(Y),K(Y),K(Y)];for(var Q=0;Q<3;++Q)if(X[Q]!==j[Q])return!0}return!1}var C=_.bind(this,!1,Number),S=_.bind(this,!1,Boolean),y=_.bind(this,!1,String),R=_.bind(this,!0,function(U){if(w(U)){if(U.length===3)return[+U[0],+U[1],+U[2],1];if(U.length===4)return[+U[0],+U[1],+U[2],+U[3]]}return[0,0,0,1]}),O,P=!1,D=!1;if("bounds"in A)for(var H=A.bounds,G=0;G<2;++G)for(var B=0;B<3;++B)H[G][B]!==this.bounds[G][B]&&(D=!0),this.bounds[G][B]=H[G][B];if("ticks"in A){O=A.ticks,P=!0,this.autoTicks=!1;for(var G=0;G<3;++G)this.tickSpacing[G]=0}else C("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in A||"tickSpacing"in A||(this.autoTicks=!0),D=!0,P=!0,this._firstInit=!1),D&&this.autoTicks&&(O=d.create(this.bounds,this.tickSpacing),P=!0),P){for(var G=0;G<3;++G)O[G].sort(function(K,W){return K.x-W.x});d.equal(O,this.ticks)?P=!1:this.ticks=O}S("tickEnable"),y("tickFont")&&(P=!0),y("tickFontStyle")&&(P=!0),y("tickFontWeight")&&(P=!0),y("tickFontVariant")&&(P=!0),C("tickSize"),C("tickAngle"),C("tickPad"),R("tickColor");var I=y("labels");y("labelFont")&&(I=!0),y("labelFontStyle")&&(I=!0),y("labelFontWeight")&&(I=!0),y("labelFontVariant")&&(I=!0),S("labelEnable"),C("labelSize"),C("labelPad"),R("labelColor"),S("lineEnable"),S("lineMirror"),C("lineWidth"),R("lineColor"),S("lineTickEnable"),S("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),R("lineTickColor"),S("gridEnable"),C("gridWidth"),R("gridColor"),S("zeroEnable"),R("zeroLineColor"),C("zeroLineWidth"),S("backgroundEnable"),R("backgroundColor");var N=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],$=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(I||P)&&this._text.update(this.bounds,this.labels,N,this.ticks,$):this._text=c(this.gl,this.bounds,this.labels,N,this.ticks,$),this._lines&&P&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=m(this.gl,this.bounds,this.ticks))};function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var h=[new f,new f,new f];function r(A,_,C,S,y){for(var R=A.primalOffset,O=A.primalMinor,P=A.mirrorOffset,D=A.mirrorMinor,H=S[_],G=0;G<3;++G)if(_!==G){var B=R,I=P,N=O,$=D;H&1<<G&&(B=P,I=R,N=D,$=O),B[G]=C[0][G],I[G]=C[1][G],y[G]>0?(N[G]=-1,$[G]=0):(N[G]=0,$[G]=1)}}var s=[0,0,0],n={model:E,view:E,projection:E,_ortho:!1};u.isOpaque=function(){return!0},u.isTransparent=function(){return!1},u.drawTransparent=function(A){};var t=0,i=[0,0,0],e=[0,0,0],T=[0,0,0];u.draw=function(A){A=A||n;for(var W=this.gl,_=A.model||E,C=A.view||E,S=A.projection||E,y=this.bounds,R=A._ortho||!1,O=g(_,C,S,y,R),P=O.cubeEdges,D=O.axis,H=C[12],G=C[13],B=C[14],I=C[15],N=R?2:1,$=N*this.pixelRatio*(S[3]*H+S[7]*G+S[11]*B+S[15]*I)/W.drawingBufferHeight,U=0;U<3;++U)this.lastCubeProps.cubeEdges[U]=P[U],this.lastCubeProps.axis[U]=D[U];for(var K=h,U=0;U<3;++U)r(h[U],U,this.bounds,P,D);for(var W=this.gl,Y=s,U=0;U<3;++U)this.backgroundEnable[U]?Y[U]=D[U]:Y[U]=0;this._background.draw(_,C,S,y,Y,this.backgroundColor),this._lines.bind(_,C,S,this);for(var U=0;U<3;++U){var j=[0,0,0];D[U]>0?j[U]=y[1][U]:j[U]=y[0][U];for(var X=0;X<2;++X){var Q=(U+1+X)%3,q=(U+1+(X^1))%3;this.gridEnable[Q]&&this._lines.drawGrid(Q,q,this.bounds,j,this.gridColor[Q],this.gridWidth[Q]*this.pixelRatio)}for(var X=0;X<2;++X){var Q=(U+1+X)%3,q=(U+1+(X^1))%3;this.zeroEnable[q]&&Math.min(y[0][q],y[1][q])<=0&&Math.max(y[0][q],y[1][q])>=0&&this._lines.drawZero(Q,q,this.bounds,j,this.zeroLineColor[q],this.zeroLineWidth[q]*this.pixelRatio)}}for(var U=0;U<3;++U){this.lineEnable[U]&&this._lines.drawAxisLine(U,this.bounds,K[U].primalOffset,this.lineColor[U],this.lineWidth[U]*this.pixelRatio),this.lineMirror[U]&&this._lines.drawAxisLine(U,this.bounds,K[U].mirrorOffset,this.lineColor[U],this.lineWidth[U]*this.pixelRatio);for(var it=o(i,K[U].primalMinor),ft=o(e,K[U].mirrorMinor),at=this.lineTickLength,X=0;X<3;++X){var rt=$/_[5*X];it[X]*=at[X]*rt,ft[X]*=at[X]*rt}this.lineTickEnable[U]&&this._lines.drawAxisTicks(U,K[U].primalOffset,it,this.lineTickColor[U],this.lineTickWidth[U]*this.pixelRatio),this.lineTickMirror[U]&&this._lines.drawAxisTicks(U,K[U].mirrorOffset,ft,this.lineTickColor[U],this.lineTickWidth[U]*this.pixelRatio)}this._lines.unbind(),this._text.bind(_,C,S,this.pixelRatio);var ht,ot=.5,vt,lt;function ut(Mt){lt=[0,0,0],lt[Mt]=1}function mt(Mt,At,wt){var dt=(Mt+1)%3,gt=(Mt+2)%3,Tt=At[dt],_t=At[gt],Bt=wt[dt],Lt=wt[gt];if(Tt>0&&Lt>0){ut(dt);return}else if(Tt>0&&Lt<0){ut(dt);return}else if(Tt<0&&Lt>0){ut(dt);return}else if(Tt<0&&Lt<0){ut(dt);return}else if(_t>0&&Bt>0){ut(gt);return}else if(_t>0&&Bt<0){ut(gt);return}else if(_t<0&&Bt>0){ut(gt);return}else if(_t<0&&Bt<0){ut(gt);return}}for(var U=0;U<3;++U){for(var Et=K[U].primalMinor,ct=K[U].mirrorMinor,xt=o(T,K[U].primalOffset),X=0;X<3;++X)this.lineTickEnable[U]&&(xt[X]+=$*Et[X]*Math.max(this.lineTickLength[X],0)/_[5*X]);var pt=[0,0,0];if(pt[U]=1,this.tickEnable[U]){this.tickAngle[U]===-3600?(this.tickAngle[U]=0,this.tickAlign[U]="auto"):this.tickAlign[U]=-1,vt=1,ht=[this.tickAlign[U],ot,vt],ht[0]==="auto"?ht[0]=t:ht[0]=parseInt(""+ht[0]),lt=[0,0,0],mt(U,Et,ct);for(var X=0;X<3;++X)xt[X]+=$*Et[X]*this.tickPad[X]/_[5*X];this._text.drawTicks(U,this.tickSize[U],this.tickAngle[U],xt,this.tickColor[U],pt,lt,ht)}if(this.labelEnable[U]){vt=0,lt=[0,0,0],this.labels[U].length>4&&(ut(U),vt=1),ht=[this.labelAlign[U],ot,vt],ht[0]==="auto"?ht[0]=t:ht[0]=parseInt(""+ht[0]);for(var X=0;X<3;++X)xt[X]+=$*Et[X]*this.labelPad[X]/_[5*X];xt[U]+=.5*(y[0][U]+y[1][U]),this._text.drawLabel(U,this.labelSize[U],this.labelAngle[U],xt,this.labelColor[U],[0,0,0],lt,ht)}}this._text.unbind()},u.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function b(A,_){var C=new v(A);return C.update(_),C}},5304:function(L,F,a){L.exports=E;var c=a(2762),m=a(8116),l=a(1879).bg;function g(M,p,x,w){this.gl=M,this.buffer=p,this.vao=x,this.shader=w}var d=g.prototype;d.draw=function(M,p,x,w,o,v){for(var u=!1,f=0;f<3;++f)u=u||o[f];if(u){var h=this.gl;h.enable(h.POLYGON_OFFSET_FILL),h.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:M,view:p,projection:x,bounds:w,enable:o,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),h.disable(h.POLYGON_OFFSET_FILL)}},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function E(M){for(var p=[],x=[],w=0,o=0;o<3;++o)for(var v=(o+1)%3,u=(o+2)%3,f=[0,0,0],h=[0,0,0],r=-1;r<=1;r+=2){x.push(w,w+2,w+1,w+1,w+2,w+3),f[o]=r,h[o]=r;for(var s=-1;s<=1;s+=2){f[v]=s;for(var n=-1;n<=1;n+=2)f[u]=n,p.push(f[0],f[1],f[2],h[0],h[1],h[2]),w+=1}var t=v;v=u,u=t}var i=c(M,new Float32Array(p)),e=c(M,new Uint16Array(x),M.ELEMENT_ARRAY_BUFFER),T=m(M,[{buffer:i,type:M.FLOAT,size:3,offset:0,stride:24},{buffer:i,type:M.FLOAT,size:3,offset:12,stride:24}],e),b=l(M);return b.attributes.position.location=0,b.attributes.normal.location=1,new g(M,i,T,b)}},6429:function(L,F,a){L.exports=r;var c=a(8828),m=a(6760),l=a(5202),g=a(3250),d=new Array(16),E=new Array(8),M=new Array(8),p=new Array(3),x=[0,0,0];(function(){for(var s=0;s<8;++s)E[s]=[1,1,1,1],M[s]=[1,1,1]})();function w(s,n,t){for(var i=0;i<4;++i){s[i]=t[12+i];for(var e=0;e<3;++e)s[i]+=n[e]*t[4*e+i]}}var o=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(s){for(var n=0;n<o.length;++n)if(s=l.positive(s,o[n]),s.length<3)return 0;for(var t=s[0],i=t[0]/t[3],e=t[1]/t[3],T=0,n=1;n+1<s.length;++n){var b=s[n],A=s[n+1],_=b[0]/b[3],C=b[1]/b[3],S=A[0]/A[3],y=A[1]/A[3],R=_-i,O=C-e,P=S-i,D=y-e;T+=Math.abs(R*D-O*P)}return T}var u=[1,1,1],f=[0,0,0],h={cubeEdges:u,axis:f};function r(s,n,t,i,e){m(d,n,s),m(d,t,d);for(var T=0,b=0;b<2;++b){p[2]=i[b][2];for(var A=0;A<2;++A){p[1]=i[A][1];for(var _=0;_<2;++_)p[0]=i[_][0],w(E[T],p,d),T+=1}}for(var C=-1,b=0;b<8;++b){for(var S=E[b][3],y=0;y<3;++y)M[b][y]=E[b][y]/S;e&&(M[b][2]*=-1),S<0&&(C<0||M[b][2]<M[C][2])&&(C=b)}if(C<0){C=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,P=(R+1)%3,D=-1,H=-1,G=0;G<2;++G){var B=G<<R,I=B+(G<<O)+(1-G<<P),N=B+(1-G<<O)+(G<<P);g(M[B],M[I],M[N],x)<0||(G?D=1:H=1)}if(D<0||H<0){H>D&&(C|=1<<R);continue}for(var G=0;G<2;++G){var B=G<<R,I=B+(G<<O)+(1-G<<P),N=B+(1-G<<O)+(G<<P),$=v([E[B],E[I],E[N],E[B+(1<<O)+(1<<P)]]);G?D=$:H=$}if(H>D){C|=1<<R;continue}}}for(var U=7^C,K=-1,b=0;b<8;++b)b===C||b===U||(K<0||M[K][1]>M[b][1])&&(K=b);for(var W=-1,b=0;b<3;++b){var Y=K^1<<b;if(!(Y===C||Y===U)){W<0&&(W=Y);var P=M[Y];P[0]<M[W][0]&&(W=Y)}}for(var j=-1,b=0;b<3;++b){var Y=K^1<<b;if(!(Y===C||Y===U||Y===W)){j<0&&(j=Y);var P=M[Y];P[0]>M[j][0]&&(j=Y)}}var X=u;X[0]=X[1]=X[2]=0,X[c.log2(W^K)]=K&W,X[c.log2(K^j)]=K&j;var Q=j^7;Q===C||Q===U?(Q=W^7,X[c.log2(j^Q)]=Q&j):X[c.log2(W^Q)]=Q&W;for(var q=f,it=C,R=0;R<3;++R)it&1<<R?q[R]=-1:q[R]=1;return h}},501:function(L,F,a){L.exports=u;var c=a(2762),m=a(8116),l=a(1879).n,g=[0,0,0],d=[0,0,0],E=[0,0,0],M=[0,0,0],p=[1,1];function x(f){return f[0]=f[1]=f[2]=0,f}function w(f,h){return f[0]=h[0],f[1]=h[1],f[2]=h[2],f}function o(f,h,r,s,n,t,i,e){this.gl=f,this.vertBuffer=h,this.vao=r,this.shader=s,this.tickCount=n,this.tickOffset=t,this.gridCount=i,this.gridOffset=e}var v=o.prototype;v.bind=function(f,h,r){this.shader.bind(),this.shader.uniforms.model=f,this.shader.uniforms.view=h,this.shader.uniforms.projection=r,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=p,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(f,h,r,s,n){var t=x(d);this.shader.uniforms.majorAxis=d,t[f]=h[1][f]-h[0][f],this.shader.uniforms.minorAxis=t;var i=w(M,r);i[f]+=h[0][f],this.shader.uniforms.offset=i,this.shader.uniforms.lineWidth=n,this.shader.uniforms.color=s;var e=x(E);e[(f+2)%3]=1,this.shader.uniforms.screenAxis=e,this.vao.draw(this.gl.TRIANGLES,6);var e=x(E);e[(f+1)%3]=1,this.shader.uniforms.screenAxis=e,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(f,h,r,s,n){if(this.tickCount[f]){var t=x(g);t[f]=1,this.shader.uniforms.majorAxis=t,this.shader.uniforms.offset=h,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=s,this.shader.uniforms.lineWidth=n;var i=x(E);i[f]=1,this.shader.uniforms.screenAxis=i,this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f])}},v.drawGrid=function(f,h,r,s,n,t){if(this.gridCount[f]){var i=x(d);i[h]=r[1][h]-r[0][h],this.shader.uniforms.minorAxis=i;var e=w(M,s);e[h]+=r[0][h],this.shader.uniforms.offset=e;var T=x(g);T[f]=1,this.shader.uniforms.majorAxis=T;var b=x(E);b[f]=1,this.shader.uniforms.screenAxis=b,this.shader.uniforms.lineWidth=t,this.shader.uniforms.color=n,this.vao.draw(this.gl.TRIANGLES,this.gridCount[f],this.gridOffset[f])}},v.drawZero=function(f,h,r,s,n,t){var i=x(d);this.shader.uniforms.majorAxis=i,i[f]=r[1][f]-r[0][f],this.shader.uniforms.minorAxis=i;var e=w(M,s);e[f]+=r[0][f],this.shader.uniforms.offset=e;var T=x(E);T[h]=1,this.shader.uniforms.screenAxis=T,this.shader.uniforms.lineWidth=t,this.shader.uniforms.color=n,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function u(f,h,r){var s=[],n=[0,0,0],t=[0,0,0],i=[0,0,0],e=[0,0,0];s.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var T=0;T<3;++T){for(var _=s.length/3|0,b=0;b<r[T].length;++b){var A=+r[T][b].x;s.push(A,0,1,A,1,1,A,0,-1,A,0,-1,A,1,1,A,1,-1)}var S=s.length/3|0;n[T]=_,t[T]=S-_;for(var _=s.length/3|0,C=0;C<r[T].length;++C){var A=+r[T][C].x;s.push(A,0,1,A,1,1,A,0,-1,A,0,-1,A,1,1,A,1,-1)}var S=s.length/3|0;i[T]=_,e[T]=S-_}var y=c(f,new Float32Array(s)),R=m(f,[{buffer:y,type:f.FLOAT,size:3,stride:0,offset:0}]),O=l(f);return O.attributes.position.location=0,new o(f,y,R,O,t,n,e,i)}},1879:function(L,F,a){var c=a(3236),m=a(9405),l=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),g=c([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);F.n=function(x){return m(x,l,g,null,[{name:"position",type:"vec3"}])};var d=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),E=c([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);F.Q=function(x){return m(x,d,E,null,[{name:"position",type:"vec3"}])};var M=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),p=c([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);F.bg=function(x){return m(x,M,p,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(L,F,a){L.exports=v;var c=a(2762),m=a(8116),l=a(4359),g=a(1879).Q,d=window||process.global||{},E=d.__TEXT_CACHE||{};d.__TEXT_CACHE={};var M=3;function p(u,f,h,r){this.gl=u,this.shader=f,this.buffer=h,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var x=p.prototype,w=[0,0];x.bind=function(u,f,h,r){this.vao.bind(),this.shader.bind();var s=this.shader.uniforms;s.model=u,s.view=f,s.projection=h,s.pixelScale=r,w[0]=this.gl.drawingBufferWidth,w[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=w},x.unbind=function(){this.vao.unbind()},x.update=function(u,f,h,r,s){var n=[];function t(R,O,P,D,H,G){var B=[P.style,P.weight,P.variant,P.family].join("_"),I=E[B];I||(I=E[B]={});var N=I[O];N||(N=I[O]=o(O,{triangles:!0,font:P.family,fontStyle:P.style,fontWeight:P.weight,fontVariant:P.variant,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:G}));for(var $=(D||12)/12,U=N.positions,K=N.cells,W=0,Y=K.length;W<Y;++W)for(var j=K[W],X=2;X>=0;--X){var Q=U[j[X]];n.push($*Q[0],-$*Q[1],R)}}for(var i=[0,0,0],e=[0,0,0],T=[0,0,0],b=[0,0,0],A=1.25,_={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},C=0;C<3;++C){T[C]=n.length/M|0,t(.5*(u[0][C]+u[1][C]),f[C],h[C],12,A,_),b[C]=(n.length/M|0)-T[C],i[C]=n.length/M|0;for(var S=0;S<r[C].length;++S)if(r[C][S].text){var y={family:r[C][S].font||s[C].family,style:s[C].fontStyle||s[C].style,weight:s[C].fontWeight||s[C].weight,variant:s[C].fontVariant||s[C].variant};t(r[C][S].x,r[C][S].text,y,r[C][S].fontSize||12,A,_)}e[C]=(n.length/M|0)-i[C]}this.buffer.update(n),this.tickOffset=i,this.tickCount=e,this.labelOffset=T,this.labelCount=b},x.drawTicks=function(u,f,h,r,s,n,t,i){this.tickCount[u]&&(this.shader.uniforms.axis=n,this.shader.uniforms.color=s,this.shader.uniforms.angle=h,this.shader.uniforms.scale=f,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=t,this.shader.uniforms.alignOpt=i,this.vao.draw(this.gl.TRIANGLES,this.tickCount[u],this.tickOffset[u]))},x.drawLabel=function(u,f,h,r,s,n,t,i){this.labelCount[u]&&(this.shader.uniforms.axis=n,this.shader.uniforms.color=s,this.shader.uniforms.angle=h,this.shader.uniforms.scale=f,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=t,this.shader.uniforms.alignOpt=i,this.vao.draw(this.gl.TRIANGLES,this.labelCount[u],this.labelOffset[u]))},x.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function o(u,f){try{return l(u,f)}catch(h){return console.warn('error vectorizing text:"'+u+'" error:',h),{cells:[],positions:[]}}}function v(u,f,h,r,s,n){var t=c(u),i=m(u,[{buffer:t,size:3}]),e=g(u);e.attributes.position.location=0;var T=new p(u,e,t,i);return T.update(f,h,r,s,n),T}},6444:function(L,F){F.create=c,F.equal=m;function a(l,g){var d=l+"",E=d.indexOf("."),M=0;E>=0&&(M=d.length-E-1);var p=Math.pow(10,M),x=Math.round(l*g*p),w=x+"";if(w.indexOf("e")>=0)return w;var o=x/p,v=x%p;x<0?(o=-Math.ceil(o)|0,v=-v|0):(o=Math.floor(o)|0,v=v|0);var u=""+o;if(x<0&&(u="-"+u),M){for(var f=""+v;f.length<M;)f="0"+f;return u+"."+f}else return u}function c(l,g){for(var d=[],E=0;E<3;++E){var M=[];.5*(l[0][E]+l[1][E]);for(var p=0;p*g[E]<=l[1][E];++p)M.push({x:p*g[E],text:a(g[E],p)});for(var p=-1;p*g[E]>=l[0][E];--p)M.push({x:p*g[E],text:a(g[E],p)});d.push(M)}return d}function m(l,g){for(var d=0;d<3;++d){if(l[d].length!==g[d].length)return!1;for(var E=0;E<l[d].length;++E){var M=l[d][E],p=g[d][E];if(M.x!==p.x||M.text!==p.text||M.font!==p.font||M.fontColor!==p.fontColor||M.fontSize!==p.fontSize||M.dx!==p.dx||M.dy!==p.dy)return!1}}return!0}},5445:function(L,F,a){L.exports=h;var c=a(5033),m=a(5202),l=a(6429),g=a(6760),d=a(5665),E=a(5352),M=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16);function x(r,s,n){this.lo=r,this.hi=s,this.pixelsPerDataUnit=n}var w=[0,0,0,1],o=[0,0,0,1];function v(r,s,n,t,i){for(var e=0;e<3;++e){for(var T=w,b=o,A=0;A<3;++A)b[A]=T[A]=n[A];b[3]=T[3]=1,b[e]+=1,E(b,b,s),b[3]<0&&(r[e]=1/0),T[e]-=1,E(T,T,s),T[3]<0&&(r[e]=1/0);var _=(T[0]/T[3]-b[0]/b[3])*t,C=(T[1]/T[3]-b[1]/b[3])*i;r[e]=.25*Math.sqrt(_*_+C*C)}return r}var u=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],f=[0,0,0];function h(r,s,n,t,C){var e=s.model||M,T=s.view||M,b=s.projection||M,A=s._ortho||!1,_=r.bounds,C=C||l(e,T,b,_,A),S=C.axis;g(p,T,e),g(p,b,p);for(var y=u,R=0;R<3;++R)y[R].lo=1/0,y[R].hi=-1/0,y[R].pixelsPerDataUnit=1/0;var O=c(d(p,p));d(p,p);for(var P=0;P<3;++P){var D=(P+1)%3,H=(P+2)%3,G=f;t:for(var R=0;R<2;++R){var B=[];if(S[P]<0!=!!R){G[P]=_[R][P];for(var I=0;I<2;++I){G[D]=_[I^R][D];for(var N=0;N<2;++N)G[H]=_[N^I^R][H],B.push(G.slice())}for(var $=A?5:4,I=$;I===$;++I){if(B.length===0)continue t;B=m.positive(B,O[I])}for(var I=0;I<B.length;++I)for(var H=B[I],U=v(f,p,H,n,t),N=0;N<3;++N)y[N].lo=Math.min(y[N].lo,H[N]),y[N].hi=Math.max(y[N].hi,H[N]),N!==P&&(y[N].pixelsPerDataUnit=Math.min(y[N].pixelsPerDataUnit,Math.abs(U[N])))}}}return y}},2762:function(L,F,a){var c=a(1888),m=a(5298),l=a(9618),g=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function d(o,v,u,f,h){this.gl=o,this.type=v,this.handle=u,this.length=f,this.usage=h}var E=d.prototype;E.bind=function(){this.gl.bindBuffer(this.type,this.handle)},E.unbind=function(){this.gl.bindBuffer(this.type,null)},E.dispose=function(){this.gl.deleteBuffer(this.handle)};function M(o,v,u,f,h,r){var s=h.length*h.BYTES_PER_ELEMENT;if(r<0)return o.bufferData(v,h,f),s;if(s+r>u)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return o.bufferSubData(v,r,h),u}function p(o,v){for(var u=c.malloc(o.length,v),f=o.length,h=0;h<f;++h)u[h]=o[h];return u}function x(o,v){for(var u=1,f=v.length-1;f>=0;--f){if(v[f]!==u)return!1;u*=o[f]}return!0}E.update=function(o,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof o=="object"&&typeof o.shape<"u"){var u=o.dtype;if(g.indexOf(u)<0&&(u="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var f=gl.getExtension("OES_element_index_uint");f&&u!=="uint16"?u="uint32":u="uint16"}if(u===o.dtype&&x(o.shape,o.stride))o.offset===0&&o.data.length===o.shape[0]?this.length=M(this.gl,this.type,this.length,this.usage,o.data,v):this.length=M(this.gl,this.type,this.length,this.usage,o.data.subarray(o.offset,o.shape[0]),v);else{var h=c.malloc(o.size,u),r=l(h,o.shape);m.assign(r,o),v<0?this.length=M(this.gl,this.type,this.length,this.usage,h,v):this.length=M(this.gl,this.type,this.length,this.usage,h.subarray(0,o.size),v),c.free(h)}}else if(Array.isArray(o)){var s;this.type===this.gl.ELEMENT_ARRAY_BUFFER?s=p(o,"uint16"):s=p(o,"float32"),v<0?this.length=M(this.gl,this.type,this.length,this.usage,s,v):this.length=M(this.gl,this.type,this.length,this.usage,s.subarray(0,o.length),v),c.free(s)}else if(typeof o=="object"&&typeof o.length=="number")this.length=M(this.gl,this.type,this.length,this.usage,o,v);else if(typeof o=="number"||o===void 0){if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");o=o|0,o<=0&&(o=1),this.gl.bufferData(this.type,o|0,this.usage),this.length=o}else throw new Error("gl-buffer: Invalid data type")};function w(o,v,u,f){if(u=u||o.ARRAY_BUFFER,f=f||o.DYNAMIC_DRAW,u!==o.ARRAY_BUFFER&&u!==o.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(f!==o.DYNAMIC_DRAW&&f!==o.STATIC_DRAW&&f!==o.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var h=o.createBuffer(),r=new d(o,u,h,0,f);return r.update(v),r}L.exports=w},6405:function(L,F,a){var c=a(2931);L.exports=function(l,g){var d=l.positions,E=l.vectors,M={positions:[],vertexIntensity:[],vertexIntensityBounds:l.vertexIntensityBounds,vectors:[],cells:[],coneOffset:l.coneOffset,colormap:l.colormap};if(l.positions.length===0)return g&&(g[0]=[0,0,0],g[1]=[0,0,0]),M;for(var p=0,x=1/0,w=-1/0,o=1/0,v=-1/0,u=1/0,f=-1/0,h=null,r=null,s=[],n=1/0,t=!1,i=l.coneSizemode==="raw",e=0;e<d.length;e++){var T=d[e];x=Math.min(T[0],x),w=Math.max(T[0],w),o=Math.min(T[1],o),v=Math.max(T[1],v),u=Math.min(T[2],u),f=Math.max(T[2],f);var b=E[e];if(c.length(b)>p&&(p=c.length(b)),e&&!i){var A=2*c.distance(h,T)/(c.length(r)+c.length(b));A?(n=Math.min(n,A),t=!1):t=!0}t||(h=T,r=b),s.push(b)}var _=[x,o,u],C=[w,v,f];g&&(g[0]=_,g[1]=C),p===0&&(p=1);var S=1/p;isFinite(n)||(n=1),M.vectorScale=n;var y=l.coneSize||(i?1:.5);l.absoluteConeSize&&(y=l.absoluteConeSize*S),M.coneScale=y;for(var e=0,R=0;e<d.length;e++)for(var T=d[e],O=T[0],P=T[1],D=T[2],H=s[e],G=c.length(H)*S,B=0,I=8;B<I;B++){M.positions.push([O,P,D,R++]),M.positions.push([O,P,D,R++]),M.positions.push([O,P,D,R++]),M.positions.push([O,P,D,R++]),M.positions.push([O,P,D,R++]),M.positions.push([O,P,D,R++]),M.vectors.push(H),M.vectors.push(H),M.vectors.push(H),M.vectors.push(H),M.vectors.push(H),M.vectors.push(H),M.vertexIntensity.push(G,G,G),M.vertexIntensity.push(G,G,G);var N=M.positions.length;M.cells.push([N-6,N-5,N-4],[N-3,N-2,N-1])}return M};var m=a(614);L.exports.createMesh=a(9060),L.exports.createConeMesh=function(l,g){return L.exports.createMesh(l,g,{shaders:m,traceType:"cone"})}},9060:function(L,F,a){var c=a(9405),m=a(2762),l=a(8116),g=a(7766),d=a(6760),E=a(7608),M=a(9618),p=a(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function w(s,n,t,i,e,T,b,A,_,C,S){this.gl=s,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=n,this.dirty=!0,this.triShader=t,this.pickShader=i,this.trianglePositions=e,this.triangleVectors=T,this.triangleColors=A,this.triangleUVs=_,this.triangleIds=b,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=S,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var o=w.prototype;o.isOpaque=function(){return this.opacity>=1},o.isTransparent=function(){return this.opacity<1},o.pickSlots=1,o.setPickBase=function(s){this.pickId=s};function v(s){for(var n=p({colormap:s,nshades:256,format:"rgba"}),t=new Uint8Array(256*4),i=0;i<256;++i){for(var e=n[i],T=0;T<3;++T)t[4*i+T]=e[T];t[4*i+3]=e[3]*255}return M(t,[256,256,4],[4,0,1])}function u(s){for(var n=s.length,t=new Array(n),i=0;i<n;++i)t[i]=s[i][2];return t}o.update=function(s){s=s||{};var n=this.gl;this.dirty=!0,"lightPosition"in s&&(this.lightPosition=s.lightPosition),"opacity"in s&&(this.opacity=s.opacity),"ambient"in s&&(this.ambientLight=s.ambient),"diffuse"in s&&(this.diffuseLight=s.diffuse),"specular"in s&&(this.specularLight=s.specular),"roughness"in s&&(this.roughness=s.roughness),"fresnel"in s&&(this.fresnel=s.fresnel),s.tubeScale!==void 0&&(this.tubeScale=s.tubeScale),s.vectorScale!==void 0&&(this.vectorScale=s.vectorScale),s.coneScale!==void 0&&(this.coneScale=s.coneScale),s.coneOffset!==void 0&&(this.coneOffset=s.coneOffset),s.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=n.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=n.LINEAR,this.texture.setPixels(v(s.colormap)),this.texture.generateMipmap());var t=s.cells,i=s.positions,e=s.vectors;if(!(!i||!t||!e)){var T=[],b=[],A=[],_=[],C=[];this.cells=t,this.positions=i,this.vectors=e;var S=s.meshColor||[1,1,1,1],y=s.vertexIntensity,R=1/0,O=-1/0;if(y)if(s.vertexIntensityBounds)R=+s.vertexIntensityBounds[0],O=+s.vertexIntensityBounds[1];else for(var P=0;P<y.length;++P){var D=y[P];R=Math.min(R,D),O=Math.max(O,D)}else for(var P=0;P<i.length;++P){var D=i[P][2];R=Math.min(R,D),O=Math.max(O,D)}y?this.intensity=y:this.intensity=u(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var P=0;P<i.length;++P)for(var H=i[P],G=0;G<3;++G)isNaN(H[G])||!isFinite(H[G])||(this.bounds[0][G]=Math.min(this.bounds[0][G],H[G]),this.bounds[1][G]=Math.max(this.bounds[1][G],H[G]));var B=0;t:for(var P=0;P<t.length;++P){var I=t[P];switch(I.length){case 3:for(var G=0;G<3;++G)for(var N=I[G],H=i[N],$=0;$<3;++$)if(isNaN(H[$])||!isFinite(H[$]))continue t;for(var G=0;G<3;++G){var N=I[2-G],H=i[N];T.push(H[0],H[1],H[2],H[3]);var U=e[N];b.push(U[0],U[1],U[2],U[3]||0);var K=S;K.length===3?A.push(K[0],K[1],K[2],1):A.push(K[0],K[1],K[2],K[3]);var W;y?W=[(y[N]-R)/(O-R),0]:W=[(H[2]-R)/(O-R),0],_.push(W[0],W[1]),C.push(P)}B+=1;break}}this.triangleCount=B,this.trianglePositions.update(T),this.triangleVectors.update(b),this.triangleColors.update(A),this.triangleUVs.update(_),this.triangleIds.update(new Uint32Array(C))}},o.drawTransparent=o.draw=function(s){s=s||{};for(var n=this.gl,t=s.model||x,i=s.view||x,e=s.projection||x,T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],b=0;b<3;++b)T[0][b]=Math.max(T[0][b],this.clipBounds[0][b]),T[1][b]=Math.min(T[1][b],this.clipBounds[1][b]);var A={model:t,view:i,projection:e,inverseModel:x.slice(),clipBounds:T,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};A.inverseModel=E(A.inverseModel,A.model),n.disable(n.CULL_FACE),this.texture.bind(0);var _=new Array(16);d(_,A.view,A.model),d(_,A.projection,_),E(_,_);for(var b=0;b<3;++b)A.eyePosition[b]=_[12+b]/_[15];for(var C=_[15],b=0;b<3;++b)C+=this.lightPosition[b]*_[4*b+3];for(var b=0;b<3;++b){for(var S=_[12+b],y=0;y<3;++y)S+=_[4*y+b]*this.lightPosition[y];A.lightPosition[b]=S/C}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=A,this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},o.drawPick=function(s){s=s||{};for(var n=this.gl,t=s.model||x,i=s.view||x,e=s.projection||x,T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],b=0;b<3;++b)T[0][b]=Math.max(T[0][b],this.clipBounds[0][b]),T[1][b]=Math.min(T[1][b],this.clipBounds[1][b]);this._model=[].slice.call(t),this._view=[].slice.call(i),this._projection=[].slice.call(e),this._resolution=[n.drawingBufferWidth,n.drawingBufferHeight];var A={model:t,view:i,projection:e,clipBounds:T,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},_=this.pickShader;_.bind(),_.uniforms=A,this.triangleCount>0&&(this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},o.pick=function(s){if(!s||s.id!==this.pickId)return null;var n=s.value[0]+256*s.value[1]+65536*s.value[2],t=this.cells[n],i=this.positions[t[1]].slice(0,3),e={position:i,dataCoordinate:i,index:Math.floor(t[1]/48)};return this.traceType==="cone"?e.index=Math.floor(t[1]/48):this.traceType==="streamtube"&&(e.intensity=this.intensity[t[1]],e.velocity=this.vectors[t[1]].slice(0,3),e.divergence=this.vectors[t[1]][3],e.index=n),e},o.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function f(s,n){var t=c(s,n.meshShader.vertex,n.meshShader.fragment,null,n.meshShader.attributes);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.vector.location=4,t}function h(s,n){var t=c(s,n.pickShader.vertex,n.pickShader.fragment,null,n.pickShader.attributes);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.vector.location=4,t}function r(s,n,t){var i=t.shaders;arguments.length===1&&(n=s,s=n.gl);var e=f(s,i),T=h(s,i),b=g(s,M(new Uint8Array([255,255,255,255]),[1,1,4]));b.generateMipmap(),b.minFilter=s.LINEAR_MIPMAP_LINEAR,b.magFilter=s.LINEAR;var A=m(s),_=m(s),C=m(s),S=m(s),y=m(s),R=l(s,[{buffer:A,type:s.FLOAT,size:4},{buffer:y,type:s.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:s.FLOAT,size:4},{buffer:S,type:s.FLOAT,size:2},{buffer:_,type:s.FLOAT,size:4}]),O=new w(s,b,e,T,A,_,y,C,S,R,t.traceType||"cone");return O.update(n),O}L.exports=r},614:function(L,F,a){var c=a(3236),m=c([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),l=c([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),g=c([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),d=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);F.meshShader={vertex:m,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},F.pickShader={vertex:g,fragment:d,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(L){L.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(L,F,a){var c=a(737);L.exports=function(l){return c[l]}},9165:function(L,F,a){L.exports=w;var c=a(2762),m=a(8116),l=a(3436),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(o,v,u,f){this.gl=o,this.shader=f,this.buffer=v,this.vao=u,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var E=d.prototype;E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.drawTransparent=E.draw=function(o){var v=this.gl,u=this.shader.uniforms;this.shader.bind();var f=u.view=o.view||g,h=u.projection=o.projection||g;u.model=o.model||g,u.clipBounds=this.clipBounds,u.opacity=this.opacity;var r=f[12],s=f[13],n=f[14],t=f[15],i=o._ortho||!1,e=i?2:1,T=e*this.pixelRatio*(h[3]*r+h[7]*s+h[11]*n+h[15]*t)/v.drawingBufferHeight;this.vao.bind();for(var b=0;b<3;++b)v.lineWidth(this.lineWidth[b]*this.pixelRatio),u.capSize=this.capSize[b]*T,this.lineCount[b]&&v.drawArrays(v.LINES,this.lineOffset[b],this.lineCount[b]);this.vao.unbind()};function M(o,v){for(var u=0;u<3;++u)o[0][u]=Math.min(o[0][u],v[u]),o[1][u]=Math.max(o[1][u],v[u])}var p=function(){for(var o=new Array(3),v=0;v<3;++v){for(var u=[],f=1;f<=2;++f)for(var h=-1;h<=1;h+=2){var r=(f+v)%3,s=[0,0,0];s[r]=h,u.push(s)}o[v]=u}return o}();function x(o,v,u,f){for(var h=p[f],r=0;r<h.length;++r){var s=h[r];o.push(v[0],v[1],v[2],u[0],u[1],u[2],u[3],s[0],s[1],s[2])}return h.length}E.update=function(o){o=o||{},"lineWidth"in o&&(this.lineWidth=o.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in o&&(this.capSize=o.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in o&&(this.opacity=+o.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=o.color||[[0,0,0],[0,0,0],[0,0,0]],u=o.position,f=o.error;if(Array.isArray(v[0])||(v=[v,v,v]),u&&f){var h=[],r=u.length,s=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var n=0;n<3;++n){this.lineOffset[n]=s;t:for(var t=0;t<r;++t){for(var i=u[t],e=0;e<3;++e)if(isNaN(i[e])||!isFinite(i[e]))continue t;var T=f[t],b=v[n];if(Array.isArray(b[0])&&(b=v[t]),b.length===3?b=[b[0],b[1],b[2],1]:b.length===4&&(b=[b[0],b[1],b[2],b[3]],!this.hasAlpha&&b[3]<1&&(this.hasAlpha=!0)),!(isNaN(T[0][n])||isNaN(T[1][n]))){if(T[0][n]<0){var A=i.slice();A[n]+=T[0][n],h.push(i[0],i[1],i[2],b[0],b[1],b[2],b[3],0,0,0,A[0],A[1],A[2],b[0],b[1],b[2],b[3],0,0,0),M(this.bounds,A),s+=2+x(h,A,b,n)}if(T[1][n]>0){var A=i.slice();A[n]+=T[1][n],h.push(i[0],i[1],i[2],b[0],b[1],b[2],b[3],0,0,0,A[0],A[1],A[2],b[0],b[1],b[2],b[3],0,0,0),M(this.bounds,A),s+=2+x(h,A,b,n)}}}this.lineCount[n]=s-this.lineOffset[n]}this.buffer.update(h)}},E.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function w(o){var v=o.gl,u=c(v),f=m(v,[{buffer:u,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:u,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:u,type:v.FLOAT,size:3,offset:28,stride:40}]),h=l(v);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.offset.location=2;var r=new d(v,u,f,h);return r.update(o),r}},3436:function(L,F,a){var c=a(3236),m=a(9405),l=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),g=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);L.exports=function(d){return m(d,l,g,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(L,F,a){var c=a(7766);L.exports=s;var m=null,l,g,d,E;function M(n){var t=n.getParameter(n.FRAMEBUFFER_BINDING),i=n.getParameter(n.RENDERBUFFER_BINDING),e=n.getParameter(n.TEXTURE_BINDING_2D);return[t,i,e]}function p(n,t){n.bindFramebuffer(n.FRAMEBUFFER,t[0]),n.bindRenderbuffer(n.RENDERBUFFER,t[1]),n.bindTexture(n.TEXTURE_2D,t[2])}function x(n,t){var i=n.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);m=new Array(i+1);for(var e=0;e<=i;++e){for(var T=new Array(i),b=0;b<e;++b)T[b]=n.COLOR_ATTACHMENT0+b;for(var b=e;b<i;++b)T[b]=n.NONE;m[e]=T}}function w(n){switch(n){case l:throw new Error("gl-fbo: Framebuffer unsupported");case g:throw new Error("gl-fbo: Framebuffer incomplete attachment");case d:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case E:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function o(n,t,i,e,T,b){if(!e)return null;var A=c(n,t,i,T,e);return A.magFilter=n.NEAREST,A.minFilter=n.NEAREST,A.mipSamples=1,A.bind(),n.framebufferTexture2D(n.FRAMEBUFFER,b,n.TEXTURE_2D,A.handle,0),A}function v(n,t,i,e,T){var b=n.createRenderbuffer();return n.bindRenderbuffer(n.RENDERBUFFER,b),n.renderbufferStorage(n.RENDERBUFFER,e,t,i),n.framebufferRenderbuffer(n.FRAMEBUFFER,T,n.RENDERBUFFER,b),b}function u(n){var t=M(n.gl),i=n.gl,e=n.handle=i.createFramebuffer(),T=n._shape[0],b=n._shape[1],A=n.color.length,_=n._ext,C=n._useStencil,S=n._useDepth,y=n._colorType;i.bindFramebuffer(i.FRAMEBUFFER,e);for(var R=0;R<A;++R)n.color[R]=o(i,T,b,y,i.RGBA,i.COLOR_ATTACHMENT0+R);A===0?(n._color_rb=v(i,T,b,i.RGBA4,i.COLOR_ATTACHMENT0),_&&_.drawBuffersWEBGL(m[0])):A>1&&_.drawBuffersWEBGL(m[A]);var O=i.getExtension("WEBGL_depth_texture");O?C?n.depth=o(i,T,b,O.UNSIGNED_INT_24_8_WEBGL,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):S&&(n.depth=o(i,T,b,i.UNSIGNED_SHORT,i.DEPTH_COMPONENT,i.DEPTH_ATTACHMENT)):S&&C?n._depth_rb=v(i,T,b,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):S?n._depth_rb=v(i,T,b,i.DEPTH_COMPONENT16,i.DEPTH_ATTACHMENT):C&&(n._depth_rb=v(i,T,b,i.STENCIL_INDEX,i.STENCIL_ATTACHMENT));var P=i.checkFramebufferStatus(i.FRAMEBUFFER);if(P!==i.FRAMEBUFFER_COMPLETE){n._destroyed=!0,i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(n.handle),n.handle=null,n.depth&&(n.depth.dispose(),n.depth=null),n._depth_rb&&(i.deleteRenderbuffer(n._depth_rb),n._depth_rb=null);for(var R=0;R<n.color.length;++R)n.color[R].dispose(),n.color[R]=null;n._color_rb&&(i.deleteRenderbuffer(n._color_rb),n._color_rb=null),p(i,t),w(P)}p(i,t)}function f(n,t,i,e,T,b,A,_){this.gl=n,this._shape=[t|0,i|0],this._destroyed=!1,this._ext=_,this.color=new Array(T);for(var C=0;C<T;++C)this.color[C]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=e,this._useDepth=b,this._useStencil=A;var S=this,y=[t|0,i|0];Object.defineProperties(y,{0:{get:function(){return S._shape[0]},set:function(R){return S.width=R}},1:{get:function(){return S._shape[1]},set:function(R){return S.height=R}}}),this._shapeVector=y,u(this)}var h=f.prototype;function r(n,t,i){if(n._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(n._shape[0]===t&&n._shape[1]===i)){var e=n.gl,T=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>T||i<0||i>T)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");n._shape[0]=t,n._shape[1]=i;for(var b=M(e),A=0;A<n.color.length;++A)n.color[A].shape=n._shape;n._color_rb&&(e.bindRenderbuffer(e.RENDERBUFFER,n._color_rb),e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n._shape[0],n._shape[1])),n.depth&&(n.depth.shape=n._shape),n._depth_rb&&(e.bindRenderbuffer(e.RENDERBUFFER,n._depth_rb),n._useDepth&&n._useStencil?e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n._shape[0],n._shape[1]):n._useDepth?e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n._shape[0],n._shape[1]):n._useStencil&&e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX,n._shape[0],n._shape[1])),e.bindFramebuffer(e.FRAMEBUFFER,n.handle);var _=e.checkFramebufferStatus(e.FRAMEBUFFER);_!==e.FRAMEBUFFER_COMPLETE&&(n.dispose(),p(e,b),w(_)),p(e,b)}}Object.defineProperties(h,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(n){if(Array.isArray(n)||(n=[n|0,n|0]),n.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var t=n[0]|0,i=n[1]|0;return r(this,t,i),[t,i]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(n){return n=n|0,r(this,n,this._shape[1]),n},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(n){return n=n|0,r(this,this._shape[0],n),n},enumerable:!1}}),h.bind=function(){if(!this._destroyed){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,this.handle),n.viewport(0,0,this._shape[0],this._shape[1])}},h.dispose=function(){if(!this._destroyed){this._destroyed=!0;var n=this.gl;n.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(n.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(n.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function s(n,t,i,e){l||(l=n.FRAMEBUFFER_UNSUPPORTED,g=n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,d=n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,E=n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var T=n.getExtension("WEBGL_draw_buffers");if(!m&&T&&x(n,T),Array.isArray(t)&&(e=i,i=t[1]|0,t=t[0]|0),typeof t!="number")throw new Error("gl-fbo: Missing shape parameter");var b=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(t<0||t>b||i<0||i>b)throw new Error("gl-fbo: Parameters are too large for FBO");e=e||{};var A=1;if("color"in e){if(A=Math.max(e.color|0,0),A<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(A>1)if(T){if(A>n.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+A+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var _=n.UNSIGNED_BYTE,C=n.getExtension("OES_texture_float");if(e.float&&A>0){if(!C)throw new Error("gl-fbo: Context does not support floating point textures");_=n.FLOAT}else e.preferFloat&&A>0&&C&&(_=n.FLOAT);var S=!0;"depth"in e&&(S=!!e.depth);var y=!1;return"stencil"in e&&(y=!!e.stencil),new f(n,t,i,_,A,S,y,T)}},2992:function(L,F,a){var c=a(3387).sprintf,m=a(5171),l=a(1848),g=a(1085);L.exports=d;function d(E,M,p){var x=l(M)||"of unknown name (see npm glsl-shader-name)",w="unknown type";p!==void 0&&(w=p===m.FRAGMENT_SHADER?"fragment":"vertex");for(var o=c(`Error compiling %s shader %s:
`,w,x),v=c("%s%s",o,E),u=E.split(`
`),f={},h=0;h<u.length;h++){var r=u[h];if(!(r===""||r==="\0")){var s=parseInt(r.split(":")[2]);if(isNaN(s))throw new Error(c("Could not parse error: %s",r));f[s]=r}}for(var n=g(M).split(`
`),h=0;h<n.length;h++)if(!(!f[h+3]&&!f[h+2]&&!f[h+1])){var t=n[h];if(o+=t+`
`,f[h+1]){var i=f[h+1];i=i.substr(i.split(":",3).join(":").length+1).trim(),o+=c(`^^^ %s

`,i)}}return{long:o.trim(),short:v.trim()}}},2510:function(L,F,a){L.exports=w;var c=a(2478),m=a(7762),l=a(1888),g=a(9405),d=a(2762),E=a(6768);function M(o,v,u,f,h,r,s){this.plot=o,this.shader=v,this.pickShader=u,this.positionBuffer=f,this.weightBuffer=h,this.colorBuffer=r,this.idBuffer=s,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var p=M.prototype,x=[0,0,1,0,0,1,1,0,1,1,0,1];p.draw=function(){var o=[1,0,0,0,1,0,0,0,1];return function(){var v=this.plot,u=this.shader,f=this.bounds,h=this.numVertices;if(!(h<=0)){var r=v.gl,s=v.dataBox,n=f[2]-f[0],t=f[3]-f[1],i=s[2]-s[0],e=s[3]-s[1];o[0]=2*n/i,o[4]=2*t/e,o[6]=2*(f[0]-s[0])/i-1,o[7]=2*(f[1]-s[1])/e-1,u.bind();var T=u.uniforms;T.viewTransform=o,T.shape=this.shape;var b=u.attributes;this.positionBuffer.bind(),b.position.pointer(),this.weightBuffer.bind(),b.weight.pointer(r.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),b.color.pointer(r.UNSIGNED_BYTE,!0),r.drawArrays(r.TRIANGLES,0,h)}}}(),p.drawPick=function(){var o=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(u){var f=this.plot,h=this.pickShader,r=this.bounds,s=this.numVertices;if(!(s<=0)){var n=f.gl,t=f.dataBox,i=r[2]-r[0],e=r[3]-r[1],T=t[2]-t[0],b=t[3]-t[1];o[0]=2*i/T,o[4]=2*e/b,o[6]=2*(r[0]-t[0])/T-1,o[7]=2*(r[1]-t[1])/b-1;for(var A=0;A<4;++A)v[A]=u>>A*8&255;this.pickOffset=u,h.bind();var _=h.uniforms;_.viewTransform=o,_.pickOffset=v,_.shape=this.shape;var C=h.attributes;return this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(n.UNSIGNED_BYTE,!1),this.idBuffer.bind(),C.pickId.pointer(n.UNSIGNED_BYTE,!1),n.drawArrays(n.TRIANGLES,0,s),u+this.shape[0]*this.shape[1]}}}(),p.pick=function(o,v,u){var f=this.pickOffset,h=this.shape[0]*this.shape[1];if(u<f||u>=f+h)return null;var r=u-f,s=this.xData,n=this.yData;return{object:this,pointId:r,dataCoord:[s[r%this.shape[0]],n[r/this.shape[0]|0]]}},p.update=function(o){o=o||{};var v=o.shape||[0,0],u=o.x||m(v[0]),f=o.y||m(v[1]),h=o.z||new Float32Array(v[0]*v[1]),r=o.zsmooth!==!1;this.xData=u,this.yData=f;var s=o.colorLevels||[0],n=o.colorValues||[0,0,0,1],t=s.length,i=this.bounds,e,T,b,A;r?(e=i[0]=u[0],T=i[1]=f[0],b=i[2]=u[u.length-1],A=i[3]=f[f.length-1]):(e=i[0]=u[0]+(u[1]-u[0])/2,T=i[1]=f[0]+(f[1]-f[0])/2,b=i[2]=u[u.length-1]+(u[u.length-1]-u[u.length-2])/2,A=i[3]=f[f.length-1]+(f[f.length-1]-f[f.length-2])/2);var _=1/(b-e),C=1/(A-T),S=v[0],y=v[1];this.shape=[S,y];var R=(r?(S-1)*(y-1):S*y)*(x.length>>>1);this.numVertices=R;for(var O=l.mallocUint8(R*4),P=l.mallocFloat32(R*2),D=l.mallocUint8(R*2),H=l.mallocUint32(R),G=0,B=r?S-1:S,I=r?y-1:y,N=0;N<I;++N){var $,U;r?($=C*(f[N]-T),U=C*(f[N+1]-T)):($=N<y-1?C*(f[N]-(f[N+1]-f[N])/2-T):C*(f[N]-(f[N]-f[N-1])/2-T),U=N<y-1?C*(f[N]+(f[N+1]-f[N])/2-T):C*(f[N]+(f[N]-f[N-1])/2-T));for(var K=0;K<B;++K){var W,Y;r?(W=_*(u[K]-e),Y=_*(u[K+1]-e)):(W=K<S-1?_*(u[K]-(u[K+1]-u[K])/2-e):_*(u[K]-(u[K]-u[K-1])/2-e),Y=K<S-1?_*(u[K]+(u[K+1]-u[K])/2-e):_*(u[K]+(u[K]-u[K-1])/2-e));for(var j=0;j<x.length;j+=2){var X=x[j],Q=x[j+1],q=r?(N+Q)*S+(K+X):N*S+K,it=h[q],ft=c.le(s,it),at,rt,ht,ot;if(ft<0)at=n[0],rt=n[1],ht=n[2],ot=n[3];else if(ft===t-1)at=n[4*t-4],rt=n[4*t-3],ht=n[4*t-2],ot=n[4*t-1];else{var vt=(it-s[ft])/(s[ft+1]-s[ft]),lt=1-vt,ut=4*ft,mt=4*(ft+1);at=lt*n[ut]+vt*n[mt],rt=lt*n[ut+1]+vt*n[mt+1],ht=lt*n[ut+2]+vt*n[mt+2],ot=lt*n[ut+3]+vt*n[mt+3]}O[4*G]=255*at,O[4*G+1]=255*rt,O[4*G+2]=255*ht,O[4*G+3]=255*ot,P[2*G]=W*.5+Y*.5,P[2*G+1]=$*.5+U*.5,D[2*G]=X,D[2*G+1]=Q,H[G]=N*S+K,G+=1}}}this.positionBuffer.update(P),this.weightBuffer.update(D),this.colorBuffer.update(O),this.idBuffer.update(H),l.free(P),l.free(O),l.free(D),l.free(H)},p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function w(o,v){var u=o.gl,f=g(u,E.vertex,E.fragment),h=g(u,E.pickVertex,E.pickFragment),r=d(u),s=d(u),n=d(u),t=d(u),i=new M(o,f,h,r,s,n,t);return i.update(v),o.addObject(i),i}},6768:function(L,F,a){var c=a(3236);L.exports={fragment:c([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:c([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(L,F,a){var c=a(3236),m=a(9405),l=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),g=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),d=c([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),E=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];F.createShader=function(M){return m(M,l,g,null,E)},F.createPickShader=function(M){return m(M,l,d,null,E)}},5714:function(L,F,a){L.exports=n;var c=a(2762),m=a(8116),l=a(7766),g=new Uint8Array(4),d=new Float32Array(g.buffer);function E(t,i,e,T){return g[0]=T,g[1]=e,g[2]=i,g[3]=t,d[0]}var M=a(2478),p=a(9618),x=a(7319),w=x.createShader,o=x.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(t,i){for(var e=0,T=0;T<3;++T){var b=t[T]-i[T];e+=b*b}return Math.sqrt(e)}function f(t){for(var i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],e=0;e<3;++e)i[0][e]=Math.max(t[0][e],i[0][e]),i[1][e]=Math.min(t[1][e],i[1][e]);return i}function h(t,i,e,T){this.arcLength=t,this.position=i,this.index=e,this.dataCoordinate=T}function r(t,i,e,T,b,A){this.gl=t,this.shader=i,this.pickShader=e,this.buffer=T,this.vao=b,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=A,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var s=r.prototype;s.isTransparent=function(){return this.hasAlpha},s.isOpaque=function(){return!this.hasAlpha},s.pickSlots=1,s.setPickBase=function(t){this.pickId=t},s.drawTransparent=s.draw=function(t){if(this.vertexCount){var i=this.gl,e=this.shader,T=this.vao;e.bind(),e.uniforms={model:t.model||v,view:t.view||v,projection:t.projection||v,clipBounds:f(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[i.drawingBufferWidth,i.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(i.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},s.drawPick=function(t){if(this.vertexCount){var i=this.gl,e=this.pickShader,T=this.vao;e.bind(),e.uniforms={model:t.model||v,view:t.view||v,projection:t.projection||v,pickId:this.pickId,clipBounds:f(this.clipBounds),screenShape:[i.drawingBufferWidth,i.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(i.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},s.update=function(t){var i,e;this.dirty=!0;var T=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var b=[],A=[],_=[],C=0,S=0,y=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=t.position||t.positions;if(R){var O=t.color||t.colors||[0,0,0,1],P=t.lineWidth||1,D=!1;t:for(i=1;i<R.length;++i){var H=R[i-1],G=R[i];for(A.push(C),_.push(H.slice()),e=0;e<3;++e){if(isNaN(H[e])||isNaN(G[e])||!isFinite(H[e])||!isFinite(G[e])){if(!T&&b.length>0){for(var B=0;B<24;++B)b.push(b[b.length-12]);S+=2,D=!0}continue t}y[0][e]=Math.min(y[0][e],H[e],G[e]),y[1][e]=Math.max(y[1][e],H[e],G[e])}var I,N;Array.isArray(O[0])?(I=O.length>i-1?O[i-1]:O.length>0?O[O.length-1]:[0,0,0,1],N=O.length>i?O[i]:O.length>0?O[O.length-1]:[0,0,0,1]):I=N=O,I.length===3&&(I=[I[0],I[1],I[2],1]),N.length===3&&(N=[N[0],N[1],N[2],1]),!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0);var $;Array.isArray(P)?$=P.length>i-1?P[i-1]:P.length>0?P[P.length-1]:[0,0,0,1]:$=P;var U=C;if(C+=u(H,G),D){for(e=0;e<2;++e)b.push(H[0],H[1],H[2],G[0],G[1],G[2],U,$,I[0],I[1],I[2],I[3]);S+=2,D=!1}b.push(H[0],H[1],H[2],G[0],G[1],G[2],U,$,I[0],I[1],I[2],I[3],H[0],H[1],H[2],G[0],G[1],G[2],U,-$,I[0],I[1],I[2],I[3],G[0],G[1],G[2],H[0],H[1],H[2],C,-$,N[0],N[1],N[2],N[3],G[0],G[1],G[2],H[0],H[1],H[2],C,$,N[0],N[1],N[2],N[3]),S+=4}}if(this.buffer.update(b),A.push(C),_.push(R[R.length-1].slice()),this.bounds=y,this.vertexCount=S,this.points=_,this.arcLength=A,"dashes"in t){var K=t.dashes,W=K.slice();for(W.unshift(0),i=1;i<W.length;++i)W[i]=W[i-1]+W[i];var Y=p(new Array(256*4),[256,1,4]);for(i=0;i<256;++i){for(e=0;e<4;++e)Y.set(i,0,e,0);M.le(W,W[W.length-1]*i/255)&1?Y.set(i,0,0,0):Y.set(i,0,0,255)}this.texture.setPixels(Y)}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(t){if(!t||t.id!==this.pickId)return null;var i=E(t.value[0],t.value[1],t.value[2],0),e=M.le(this.arcLength,i);if(e<0)return null;if(e===this.arcLength.length-1)return new h(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),e);for(var T=this.points[e],b=this.points[Math.min(e+1,this.points.length-1)],A=(i-this.arcLength[e])/(this.arcLength[e+1]-this.arcLength[e]),_=1-A,C=[0,0,0],S=0;S<3;++S)C[S]=_*T[S]+A*b[S];var y=Math.min(A<.5?e:e+1,this.points.length-1);return new h(i,C,y,this.points[y])};function n(t){var i=t.gl||t.scene&&t.scene.gl,e=w(i);e.attributes.position.location=0,e.attributes.nextPosition.location=1,e.attributes.arcLength.location=2,e.attributes.lineWidth.location=3,e.attributes.color.location=4;var T=o(i);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;for(var b=c(i),A=m(i,[{buffer:b,size:3,offset:0,stride:48},{buffer:b,size:3,offset:12,stride:48},{buffer:b,size:1,offset:24,stride:48},{buffer:b,size:1,offset:28,stride:48},{buffer:b,size:4,offset:32,stride:48}]),_=p(new Array(256*4),[256,1,4]),C=0;C<1024;++C)_.data[C]=255;var S=l(i,_);S.wrap=i.REPEAT;var y=new r(i,e,T,b,A,S);return y.update(t),y}},1903:function(L){L.exports=F;function F(a){var c=new Float32Array(16);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c}},6864:function(L){L.exports=F;function F(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},9921:function(L){L.exports=F;function F(a){var c=a[0],m=a[1],l=a[2],g=a[3],d=a[4],E=a[5],M=a[6],p=a[7],x=a[8],w=a[9],o=a[10],v=a[11],u=a[12],f=a[13],h=a[14],r=a[15],s=c*E-m*d,n=c*M-l*d,t=c*p-g*d,i=m*M-l*E,e=m*p-g*E,T=l*p-g*M,b=x*f-w*u,A=x*h-o*u,_=x*r-v*u,C=w*h-o*f,S=w*r-v*f,y=o*r-v*h;return s*y-n*S+t*C+i*_-e*A+T*b}},7399:function(L){L.exports=F;function F(a,c){var m=c[0],l=c[1],g=c[2],d=c[3],E=m+m,M=l+l,p=g+g,x=m*E,w=l*E,o=l*M,v=g*E,u=g*M,f=g*p,h=d*E,r=d*M,s=d*p;return a[0]=1-o-f,a[1]=w+s,a[2]=v-r,a[3]=0,a[4]=w-s,a[5]=1-x-f,a[6]=u+h,a[7]=0,a[8]=v+r,a[9]=u-h,a[10]=1-x-o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},6743:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=c[3],M=l+l,p=g+g,x=d+d,w=l*M,o=l*p,v=l*x,u=g*p,f=g*x,h=d*x,r=E*M,s=E*p,n=E*x;return a[0]=1-(u+h),a[1]=o+n,a[2]=v-s,a[3]=0,a[4]=o-n,a[5]=1-(w+h),a[6]=f+r,a[7]=0,a[8]=v+s,a[9]=f-r,a[10]=1-(w+u),a[11]=0,a[12]=m[0],a[13]=m[1],a[14]=m[2],a[15]=1,a}},7894:function(L){L.exports=F;function F(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},7608:function(L){L.exports=F;function F(a,c){var m=c[0],l=c[1],g=c[2],d=c[3],E=c[4],M=c[5],p=c[6],x=c[7],w=c[8],o=c[9],v=c[10],u=c[11],f=c[12],h=c[13],r=c[14],s=c[15],n=m*M-l*E,t=m*p-g*E,i=m*x-d*E,e=l*p-g*M,T=l*x-d*M,b=g*x-d*p,A=w*h-o*f,_=w*r-v*f,C=w*s-u*f,S=o*r-v*h,y=o*s-u*h,R=v*s-u*r,O=n*R-t*y+i*S+e*C-T*_+b*A;return O?(O=1/O,a[0]=(M*R-p*y+x*S)*O,a[1]=(g*y-l*R-d*S)*O,a[2]=(h*b-r*T+s*e)*O,a[3]=(v*T-o*b-u*e)*O,a[4]=(p*C-E*R-x*_)*O,a[5]=(m*R-g*C+d*_)*O,a[6]=(r*i-f*b-s*t)*O,a[7]=(w*b-v*i+u*t)*O,a[8]=(E*y-M*C+x*A)*O,a[9]=(l*C-m*y-d*A)*O,a[10]=(f*T-h*i+s*n)*O,a[11]=(o*i-w*T-u*n)*O,a[12]=(M*_-E*S-p*A)*O,a[13]=(m*S-l*_+g*A)*O,a[14]=(h*t-f*e-r*n)*O,a[15]=(w*e-o*t+v*n)*O,a):null}},6582:function(L,F,a){var c=a(7894);L.exports=m;function m(l,g,d,E){var M,p,x,w,o,v,u,f,h,r,s=g[0],n=g[1],t=g[2],i=E[0],e=E[1],T=E[2],b=d[0],A=d[1],_=d[2];return Math.abs(s-b)<1e-6&&Math.abs(n-A)<1e-6&&Math.abs(t-_)<1e-6?c(l):(u=s-b,f=n-A,h=t-_,r=1/Math.sqrt(u*u+f*f+h*h),u*=r,f*=r,h*=r,M=e*h-T*f,p=T*u-i*h,x=i*f-e*u,r=Math.sqrt(M*M+p*p+x*x),r?(r=1/r,M*=r,p*=r,x*=r):(M=0,p=0,x=0),w=f*x-h*p,o=h*M-u*x,v=u*p-f*M,r=Math.sqrt(w*w+o*o+v*v),r?(r=1/r,w*=r,o*=r,v*=r):(w=0,o=0,v=0),l[0]=M,l[1]=w,l[2]=u,l[3]=0,l[4]=p,l[5]=o,l[6]=f,l[7]=0,l[8]=x,l[9]=v,l[10]=h,l[11]=0,l[12]=-(M*s+p*n+x*t),l[13]=-(w*s+o*n+v*t),l[14]=-(u*s+f*n+h*t),l[15]=1,l)}},6760:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=c[3],M=c[4],p=c[5],x=c[6],w=c[7],o=c[8],v=c[9],u=c[10],f=c[11],h=c[12],r=c[13],s=c[14],n=c[15],t=m[0],i=m[1],e=m[2],T=m[3];return a[0]=t*l+i*M+e*o+T*h,a[1]=t*g+i*p+e*v+T*r,a[2]=t*d+i*x+e*u+T*s,a[3]=t*E+i*w+e*f+T*n,t=m[4],i=m[5],e=m[6],T=m[7],a[4]=t*l+i*M+e*o+T*h,a[5]=t*g+i*p+e*v+T*r,a[6]=t*d+i*x+e*u+T*s,a[7]=t*E+i*w+e*f+T*n,t=m[8],i=m[9],e=m[10],T=m[11],a[8]=t*l+i*M+e*o+T*h,a[9]=t*g+i*p+e*v+T*r,a[10]=t*d+i*x+e*u+T*s,a[11]=t*E+i*w+e*f+T*n,t=m[12],i=m[13],e=m[14],T=m[15],a[12]=t*l+i*M+e*o+T*h,a[13]=t*g+i*p+e*v+T*r,a[14]=t*d+i*x+e*u+T*s,a[15]=t*E+i*w+e*f+T*n,a}},4040:function(L){L.exports=F;function F(a,c,m,l,g,d,E){var M=1/(c-m),p=1/(l-g),x=1/(d-E);return a[0]=-2*M,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*p,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*x,a[11]=0,a[12]=(c+m)*M,a[13]=(g+l)*p,a[14]=(E+d)*x,a[15]=1,a}},4772:function(L){L.exports=F;function F(a,c,m,l,g){var d=1/Math.tan(c/2),E=1/(l-g);return a[0]=d/m,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(g+l)*E,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*g*l*E,a[15]=0,a}},6079:function(L){L.exports=F;function F(a,c,m,l){var g=l[0],d=l[1],E=l[2],M=Math.sqrt(g*g+d*d+E*E),p,x,w,o,v,u,f,h,r,s,n,t,i,e,T,b,A,_,C,S,y,R,O,P;return Math.abs(M)<1e-6?null:(M=1/M,g*=M,d*=M,E*=M,p=Math.sin(m),x=Math.cos(m),w=1-x,o=c[0],v=c[1],u=c[2],f=c[3],h=c[4],r=c[5],s=c[6],n=c[7],t=c[8],i=c[9],e=c[10],T=c[11],b=g*g*w+x,A=d*g*w+E*p,_=E*g*w-d*p,C=g*d*w-E*p,S=d*d*w+x,y=E*d*w+g*p,R=g*E*w+d*p,O=d*E*w-g*p,P=E*E*w+x,a[0]=o*b+h*A+t*_,a[1]=v*b+r*A+i*_,a[2]=u*b+s*A+e*_,a[3]=f*b+n*A+T*_,a[4]=o*C+h*S+t*y,a[5]=v*C+r*S+i*y,a[6]=u*C+s*S+e*y,a[7]=f*C+n*S+T*y,a[8]=o*R+h*O+t*P,a[9]=v*R+r*O+i*P,a[10]=u*R+s*O+e*P,a[11]=f*R+n*O+T*P,c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]),a)}},5567:function(L){L.exports=F;function F(a,c,m){var l=Math.sin(m),g=Math.cos(m),d=c[4],E=c[5],M=c[6],p=c[7],x=c[8],w=c[9],o=c[10],v=c[11];return c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]),a[4]=d*g+x*l,a[5]=E*g+w*l,a[6]=M*g+o*l,a[7]=p*g+v*l,a[8]=x*g-d*l,a[9]=w*g-E*l,a[10]=o*g-M*l,a[11]=v*g-p*l,a}},2408:function(L){L.exports=F;function F(a,c,m){var l=Math.sin(m),g=Math.cos(m),d=c[0],E=c[1],M=c[2],p=c[3],x=c[8],w=c[9],o=c[10],v=c[11];return c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]),a[0]=d*g-x*l,a[1]=E*g-w*l,a[2]=M*g-o*l,a[3]=p*g-v*l,a[8]=d*l+x*g,a[9]=E*l+w*g,a[10]=M*l+o*g,a[11]=p*l+v*g,a}},7089:function(L){L.exports=F;function F(a,c,m){var l=Math.sin(m),g=Math.cos(m),d=c[0],E=c[1],M=c[2],p=c[3],x=c[4],w=c[5],o=c[6],v=c[7];return c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]),a[0]=d*g+x*l,a[1]=E*g+w*l,a[2]=M*g+o*l,a[3]=p*g+v*l,a[4]=x*g-d*l,a[5]=w*g-E*l,a[6]=o*g-M*l,a[7]=v*g-p*l,a}},2504:function(L){L.exports=F;function F(a,c,m){var l=m[0],g=m[1],d=m[2];return a[0]=c[0]*l,a[1]=c[1]*l,a[2]=c[2]*l,a[3]=c[3]*l,a[4]=c[4]*g,a[5]=c[5]*g,a[6]=c[6]*g,a[7]=c[7]*g,a[8]=c[8]*d,a[9]=c[9]*d,a[10]=c[10]*d,a[11]=c[11]*d,a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a}},7656:function(L){L.exports=F;function F(a,c,m){var l=m[0],g=m[1],d=m[2],E,M,p,x,w,o,v,u,f,h,r,s;return c===a?(a[12]=c[0]*l+c[4]*g+c[8]*d+c[12],a[13]=c[1]*l+c[5]*g+c[9]*d+c[13],a[14]=c[2]*l+c[6]*g+c[10]*d+c[14],a[15]=c[3]*l+c[7]*g+c[11]*d+c[15]):(E=c[0],M=c[1],p=c[2],x=c[3],w=c[4],o=c[5],v=c[6],u=c[7],f=c[8],h=c[9],r=c[10],s=c[11],a[0]=E,a[1]=M,a[2]=p,a[3]=x,a[4]=w,a[5]=o,a[6]=v,a[7]=u,a[8]=f,a[9]=h,a[10]=r,a[11]=s,a[12]=E*l+w*g+f*d+c[12],a[13]=M*l+o*g+h*d+c[13],a[14]=p*l+v*g+r*d+c[14],a[15]=x*l+u*g+s*d+c[15]),a}},5665:function(L){L.exports=F;function F(a,c){if(a===c){var m=c[1],l=c[2],g=c[3],d=c[6],E=c[7],M=c[11];a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=m,a[6]=c[9],a[7]=c[13],a[8]=l,a[9]=d,a[11]=c[14],a[12]=g,a[13]=E,a[14]=M}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}},7626:function(L,F,a){var c=a(2642),m=a(9346);L.exports=M;function l(p,x){for(var w=[0,0,0,0],o=0;o<4;++o)for(var v=0;v<4;++v)w[v]+=p[4*o+v]*x[o];return w}function g(p,x,w,o,v){for(var u=l(o,l(w,l(x,[p[0],p[1],p[2],1]))),f=0;f<3;++f)u[f]/=u[3];return[.5*v[0]*(1+u[0]),.5*v[1]*(1-u[1])]}function d(p,x){if(p.length===2){for(var w=0,o=0,v=0;v<2;++v)w+=Math.pow(x[v]-p[0][v],2),o+=Math.pow(x[v]-p[1][v],2);return w=Math.sqrt(w),o=Math.sqrt(o),w+o<1e-6?[1,0]:[o/(w+o),w/(o+w)]}else if(p.length===3){var u=[0,0];return m(p[0],p[1],p[2],x,u),c(p,u)}return[]}function E(p,x){for(var w=[0,0,0],o=0;o<p.length;++o)for(var v=p[o],u=x[o],f=0;f<3;++f)w[f]+=u*v[f];return w}function M(p,x,w,o,v,u){if(p.length===1)return[0,p[0].slice()];for(var f=new Array(p.length),h=0;h<p.length;++h)f[h]=g(p[h],w,o,v,u);for(var r=0,s=1/0,h=0;h<f.length;++h){for(var n=0,t=0;t<2;++t)n+=Math.pow(f[h][t]-x[t],2);n<s&&(s=n,r=h)}for(var i=d(f,x),e=0,h=0;h<3;++h){if(i[h]<-.001||i[h]>1.0001)return null;e+=i[h]}return Math.abs(e-1)>.001?null:[r,E(p,i),i]}},840:function(L,F,a){var c=a(3236),m=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),l=c([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),g=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),d=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),E=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),M=c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),p=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),x=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),w=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),o=c([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),v=c([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);F.meshShader={vertex:m,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},F.wireShader={vertex:g,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},F.pointShader={vertex:E,fragment:M,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},F.pickShader={vertex:p,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},F.pointPickShader={vertex:w,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},F.contourShader={vertex:o,fragment:v,attributes:[{name:"position",type:"vec3"}]}},7201:function(L,F,a){var c=1e-6,m=1e-6,l=a(9405),g=a(2762),d=a(8116),E=a(7766),M=a(8406),p=a(6760),x=a(7608),w=a(9618),o=a(6729),v=a(7765),u=a(1888),f=a(840),h=a(7626),r=f.meshShader,s=f.wireShader,n=f.pointShader,t=f.pickShader,i=f.pointPickShader,e=f.contourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(B,I,N,$,U,K,W,Y,j,X,Q,q,it,ft,at,rt,ht,ot,vt,lt,ut,mt,Et,ct,xt,pt,Mt){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=I,this.dirty=!0,this.triShader=N,this.lineShader=$,this.pointShader=U,this.pickShader=K,this.pointPickShader=W,this.contourShader=Y,this.trianglePositions=j,this.triangleColors=Q,this.triangleNormals=it,this.triangleUVs=q,this.triangleIds=X,this.triangleVAO=ft,this.triangleCount=0,this.lineWidth=1,this.edgePositions=at,this.edgeColors=ht,this.edgeUVs=ot,this.edgeIds=rt,this.edgeVAO=vt,this.edgeCount=0,this.pointPositions=lt,this.pointColors=mt,this.pointUVs=Et,this.pointSizes=ct,this.pointIds=ut,this.pointVAO=xt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=pt,this.contourVAO=Mt,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var A=b.prototype;A.isOpaque=function(){return!this.hasAlpha},A.isTransparent=function(){return this.hasAlpha},A.pickSlots=1,A.setPickBase=function(B){this.pickId=B};function _(B,I){if(!I||!I.length)return 1;for(var N=0;N<I.length;++N){if(I.length<2)return 1;if(I[N][0]===B)return I[N][1];if(I[N][0]>B&&N>0){var $=(I[N][0]-B)/(I[N][0]-I[N-1][0]);return I[N][1]*(1-$)+$*I[N-1][1]}}return 1}function C(B,I){for(var N=o({colormap:B,nshades:256,format:"rgba"}),$=new Uint8Array(256*4),U=0;U<256;++U){for(var K=N[U],W=0;W<3;++W)$[4*U+W]=K[W];I?$[4*U+3]=255*_(U/255,I):$[4*U+3]=255*K[3]}return w($,[256,256,4],[4,0,1])}function S(B){for(var I=B.length,N=new Array(I),$=0;$<I;++$)N[$]=B[$][2];return N}A.highlight=function(B){if(!B||!this.contourEnable){this.contourCount=0;return}for(var I=v(this.cells,this.intensity,B.intensity),N=I.cells,$=I.vertexIds,U=I.vertexWeights,K=N.length,W=u.mallocFloat32(2*3*K),Y=0,j=0;j<K;++j)for(var X=N[j],Q=0;Q<2;++Q){var q=X[0];X.length===2&&(q=X[Q]);for(var it=$[q][0],ft=$[q][1],at=U[q],rt=1-at,ht=this.positions[it],ot=this.positions[ft],vt=0;vt<3;++vt)W[Y++]=at*ht[vt]+rt*ot[vt]}this.contourCount=Y/3|0,this.contourPositions.update(W.subarray(0,Y)),u.free(W)},A.update=function(B){B=B||{};var I=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=E(I,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=I.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=I.LINEAR,this.texture.setPixels(C(B.colormap,this.opacityscale)),this.texture.generateMipmap());var N=B.cells,$=B.positions;if(!(!$||!N)){var U=[],K=[],W=[],Y=[],j=[],X=[],Q=[],q=[],it=[],ft=[],at=[],rt=[],ht=[],ot=[];this.cells=N,this.positions=$;var vt=B.vertexNormals,lt=B.cellNormals,ut=B.vertexNormalsEpsilon===void 0?c:B.vertexNormalsEpsilon,mt=B.faceNormalsEpsilon===void 0?m:B.faceNormalsEpsilon;B.useFacetNormals&&!lt&&(lt=M.faceNormals(N,$,mt)),!lt&&!vt&&(vt=M.vertexNormals(N,$,ut));var Et=B.vertexColors,ct=B.cellColors,xt=B.meshColor||[1,1,1,1],pt=B.vertexUVs,Mt=B.vertexIntensity,At=B.cellUVs,wt=B.cellIntensity,dt=1/0,gt=-1/0;if(!pt&&!At)if(Mt)if(B.vertexIntensityBounds)dt=+B.vertexIntensityBounds[0],gt=+B.vertexIntensityBounds[1];else for(var Tt=0;Tt<Mt.length;++Tt){var _t=Mt[Tt];dt=Math.min(dt,_t),gt=Math.max(gt,_t)}else if(wt)if(B.cellIntensityBounds)dt=+B.cellIntensityBounds[0],gt=+B.cellIntensityBounds[1];else for(var Tt=0;Tt<wt.length;++Tt){var _t=wt[Tt];dt=Math.min(dt,_t),gt=Math.max(gt,_t)}else for(var Tt=0;Tt<$.length;++Tt){var _t=$[Tt][2];dt=Math.min(dt,_t),gt=Math.max(gt,_t)}Mt?this.intensity=Mt:wt?this.intensity=wt:this.intensity=S($),this.pickVertex=!(wt||ct);var Bt=B.pointSizes,Lt=B.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Tt=0;Tt<$.length;++Tt)for(var St=$[Tt],Ft=0;Ft<3;++Ft)isNaN(St[Ft])||!isFinite(St[Ft])||(this.bounds[0][Ft]=Math.min(this.bounds[0][Ft],St[Ft]),this.bounds[1][Ft]=Math.max(this.bounds[1][Ft],St[Ft]));var Ot=0,It=0,Yt=0;t:for(var Tt=0;Tt<N.length;++Tt){var J=N[Tt];switch(J.length){case 1:for(var k=J[0],St=$[k],Ft=0;Ft<3;++Ft)if(isNaN(St[Ft])||!isFinite(St[Ft]))continue t;ft.push(St[0],St[1],St[2]);var z;Et?z=Et[k]:ct?z=ct[Tt]:z=xt,this.opacityscale&&Mt?K.push(z[0],z[1],z[2],this.opacity*_((Mt[k]-dt)/(gt-dt),this.opacityscale)):z.length===3?at.push(z[0],z[1],z[2],this.opacity):(at.push(z[0],z[1],z[2],z[3]*this.opacity),z[3]<1&&(this.hasAlpha=!0));var et;pt?et=pt[k]:Mt?et=[(Mt[k]-dt)/(gt-dt),0]:At?et=At[Tt]:wt?et=[(wt[Tt]-dt)/(gt-dt),0]:et=[(St[2]-dt)/(gt-dt),0],rt.push(et[0],et[1]),Bt?ht.push(Bt[k]):ht.push(Lt),ot.push(Tt),Yt+=1;break;case 2:for(var Ft=0;Ft<2;++Ft)for(var k=J[Ft],St=$[k],st=0;st<3;++st)if(isNaN(St[st])||!isFinite(St[st]))continue t;for(var Ft=0;Ft<2;++Ft){var k=J[Ft],St=$[k];X.push(St[0],St[1],St[2]);var z;Et?z=Et[k]:ct?z=ct[Tt]:z=xt,this.opacityscale&&Mt?K.push(z[0],z[1],z[2],this.opacity*_((Mt[k]-dt)/(gt-dt),this.opacityscale)):z.length===3?Q.push(z[0],z[1],z[2],this.opacity):(Q.push(z[0],z[1],z[2],z[3]*this.opacity),z[3]<1&&(this.hasAlpha=!0));var et;pt?et=pt[k]:Mt?et=[(Mt[k]-dt)/(gt-dt),0]:At?et=At[Tt]:wt?et=[(wt[Tt]-dt)/(gt-dt),0]:et=[(St[2]-dt)/(gt-dt),0],q.push(et[0],et[1]),it.push(Tt)}It+=1;break;case 3:for(var Ft=0;Ft<3;++Ft)for(var k=J[Ft],St=$[k],st=0;st<3;++st)if(isNaN(St[st])||!isFinite(St[st]))continue t;for(var Ft=0;Ft<3;++Ft){var k=J[2-Ft],St=$[k];U.push(St[0],St[1],St[2]);var z;Et?z=Et[k]:ct?z=ct[Tt]:z=xt,z?this.opacityscale&&Mt?K.push(z[0],z[1],z[2],this.opacity*_((Mt[k]-dt)/(gt-dt),this.opacityscale)):z.length===3?K.push(z[0],z[1],z[2],this.opacity):(K.push(z[0],z[1],z[2],z[3]*this.opacity),z[3]<1&&(this.hasAlpha=!0)):K.push(.5,.5,.5,1);var et;pt?et=pt[k]:Mt?et=[(Mt[k]-dt)/(gt-dt),0]:At?et=At[Tt]:wt?et=[(wt[Tt]-dt)/(gt-dt),0]:et=[(St[2]-dt)/(gt-dt),0],Y.push(et[0],et[1]);var yt;vt?yt=vt[k]:yt=lt[Tt],W.push(yt[0],yt[1],yt[2]),j.push(Tt)}Ot+=1;break}}this.pointCount=Yt,this.edgeCount=It,this.triangleCount=Ot,this.pointPositions.update(ft),this.pointColors.update(at),this.pointUVs.update(rt),this.pointSizes.update(ht),this.pointIds.update(new Uint32Array(ot)),this.edgePositions.update(X),this.edgeColors.update(Q),this.edgeUVs.update(q),this.edgeIds.update(new Uint32Array(it)),this.trianglePositions.update(U),this.triangleColors.update(K),this.triangleUVs.update(Y),this.triangleNormals.update(W),this.triangleIds.update(new Uint32Array(j))}},A.drawTransparent=A.draw=function(B){B=B||{};for(var I=this.gl,N=B.model||T,$=B.view||T,U=B.projection||T,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],W=0;W<3;++W)K[0][W]=Math.max(K[0][W],this.clipBounds[0][W]),K[1][W]=Math.min(K[1][W],this.clipBounds[1][W]);var Y={model:N,view:$,projection:U,inverseModel:T.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=x(Y.inverseModel,Y.model),I.disable(I.CULL_FACE),this.texture.bind(0);var j=new Array(16);p(j,Y.view,Y.model),p(j,Y.projection,j),x(j,j);for(var W=0;W<3;++W)Y.eyePosition[W]=j[12+W]/j[15];for(var X=j[15],W=0;W<3;++W)X+=this.lightPosition[W]*j[4*W+3];for(var W=0;W<3;++W){for(var Q=j[12+W],q=0;q<3;++q)Q+=j[4*q+W]*this.lightPosition[q];Y.lightPosition[W]=Q/X}if(this.triangleCount>0){var it=this.triShader;it.bind(),it.uniforms=Y,this.triangleVAO.bind(),I.drawArrays(I.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var it=this.lineShader;it.bind(),it.uniforms=Y,this.edgeVAO.bind(),I.lineWidth(this.lineWidth*this.pixelRatio),I.drawArrays(I.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var it=this.pointShader;it.bind(),it.uniforms=Y,this.pointVAO.bind(),I.drawArrays(I.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var it=this.contourShader;it.bind(),it.uniforms=Y,this.contourVAO.bind(),I.drawArrays(I.LINES,0,this.contourCount),this.contourVAO.unbind()}},A.drawPick=function(B){B=B||{};for(var I=this.gl,N=B.model||T,$=B.view||T,U=B.projection||T,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],W=0;W<3;++W)K[0][W]=Math.max(K[0][W],this.clipBounds[0][W]),K[1][W]=Math.min(K[1][W],this.clipBounds[1][W]);this._model=[].slice.call(N),this._view=[].slice.call($),this._projection=[].slice.call(U),this._resolution=[I.drawingBufferWidth,I.drawingBufferHeight];var Y={model:N,view:$,projection:U,clipBounds:K,pickId:this.pickId/255},j=this.pickShader;if(j.bind(),j.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),I.drawArrays(I.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),I.lineWidth(this.lineWidth*this.pixelRatio),I.drawArrays(I.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var j=this.pointPickShader;j.bind(),j.uniforms=Y,this.pointVAO.bind(),I.drawArrays(I.POINTS,0,this.pointCount),this.pointVAO.unbind()}},A.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var I=B.value[0]+256*B.value[1]+65536*B.value[2],N=this.cells[I],$=this.positions,U=new Array(N.length),K=0;K<N.length;++K)U[K]=$[N[K]];var W=B.coord[0],Y=B.coord[1];if(!this.pickVertex){var j=this.positions[N[0]],X=this.positions[N[1]],Q=this.positions[N[2]],q=[(j[0]+X[0]+Q[0])/3,(j[1]+X[1]+Q[1])/3,(j[2]+X[2]+Q[2])/3];return{_cellCenter:!0,position:[W,Y],index:I,cell:N,cellId:I,intensity:this.intensity[I],dataCoordinate:q}}var it=h(U,[W*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!it)return null;for(var ft=it[2],at=0,K=0;K<N.length;++K)at+=ft[K]*this.intensity[N[K]];return{position:it[1],index:N[it[0]],cell:N,cellId:I,intensity:at,dataCoordinate:this.positions[N[it[0]]]}},A.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function y(B){var I=l(B,r.vertex,r.fragment);return I.attributes.position.location=0,I.attributes.color.location=2,I.attributes.uv.location=3,I.attributes.normal.location=4,I}function R(B){var I=l(B,s.vertex,s.fragment);return I.attributes.position.location=0,I.attributes.color.location=2,I.attributes.uv.location=3,I}function O(B){var I=l(B,n.vertex,n.fragment);return I.attributes.position.location=0,I.attributes.color.location=2,I.attributes.uv.location=3,I.attributes.pointSize.location=4,I}function P(B){var I=l(B,t.vertex,t.fragment);return I.attributes.position.location=0,I.attributes.id.location=1,I}function D(B){var I=l(B,i.vertex,i.fragment);return I.attributes.position.location=0,I.attributes.id.location=1,I.attributes.pointSize.location=4,I}function H(B){var I=l(B,e.vertex,e.fragment);return I.attributes.position.location=0,I}function G(B,I){arguments.length===1&&(I=B,B=I.gl);var N=B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives");if(!N)throw new Error("derivatives not supported");var $=y(B),U=R(B),K=O(B),W=P(B),Y=D(B),j=H(B),X=E(B,w(new Uint8Array([255,255,255,255]),[1,1,4]));X.generateMipmap(),X.minFilter=B.LINEAR_MIPMAP_LINEAR,X.magFilter=B.LINEAR;var Q=g(B),q=g(B),it=g(B),ft=g(B),at=g(B),rt=d(B,[{buffer:Q,type:B.FLOAT,size:3},{buffer:at,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:q,type:B.FLOAT,size:4},{buffer:it,type:B.FLOAT,size:2},{buffer:ft,type:B.FLOAT,size:3}]),ht=g(B),ot=g(B),vt=g(B),lt=g(B),ut=d(B,[{buffer:ht,type:B.FLOAT,size:3},{buffer:lt,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ot,type:B.FLOAT,size:4},{buffer:vt,type:B.FLOAT,size:2}]),mt=g(B),Et=g(B),ct=g(B),xt=g(B),pt=g(B),Mt=d(B,[{buffer:mt,type:B.FLOAT,size:3},{buffer:pt,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Et,type:B.FLOAT,size:4},{buffer:ct,type:B.FLOAT,size:2},{buffer:xt,type:B.FLOAT,size:1}]),At=g(B),wt=d(B,[{buffer:At,type:B.FLOAT,size:3}]),dt=new b(B,X,$,U,K,W,Y,j,Q,at,q,it,ft,rt,ht,lt,ot,vt,ut,mt,pt,Et,ct,xt,Mt,At,wt);return dt.update(I),dt}L.exports=G},8120:function(L,F,a){L.exports=E;var c=a(2762),m=a(9405),l=a(3603);function g(M,p,x){this.plot=M,this.vbo=p,this.shader=x}var d=g.prototype;d.bind=function(){var M=this.shader;this.vbo.bind(),this.shader.bind(),M.attributes.coord.pointer(),M.uniforms.screenBox=this.plot.screenBox},d.drawBox=function(){var M=[0,0],p=[0,0];return function(x,w,o,v,u){var f=this.plot,h=this.shader,r=f.gl;M[0]=x,M[1]=w,p[0]=o,p[1]=v,h.uniforms.lo=M,h.uniforms.hi=p,h.uniforms.color=u,r.drawArrays(r.TRIANGLE_STRIP,0,4)}}(),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function E(M){var p=M.gl,x=c(p,[0,0,0,1,1,0,1,1]),w=m(p,l.boxVert,l.lineFrag);return new g(M,x,w)}},1913:function(L,F,a){L.exports=p;var c=a(2762),m=a(9405),l=a(2478),g=a(3603);function d(x,w,o,v){this.plot=x,this.vbo=w,this.shader=o,this.tickShader=v,this.ticks=[[],[]]}function E(x,w){return x-w}var M=d.prototype;M.draw=function(){var x=[0,0],w=[0,0],o=[0,0];return function(){for(var v=this.plot,u=this.vbo,f=this.shader,h=this.ticks,r=v.gl,s=v._tickBounds,n=v.dataBox,t=v.viewBox,i=v.gridLineWidth,e=v.gridLineColor,T=v.gridLineEnable,b=v.pixelRatio,A=0;A<2;++A){var _=s[A],C=s[A+2],S=C-_,y=.5*(n[A+2]+n[A]),R=n[A+2]-n[A];w[A]=2*S/R,x[A]=2*(_-y)/R}f.bind(),u.bind(),f.attributes.dataCoord.pointer(),f.uniforms.dataShift=x,f.uniforms.dataScale=w;for(var O=0,A=0;A<2;++A){o[0]=o[1]=0,o[A]=1,f.uniforms.dataAxis=o,f.uniforms.lineWidth=i[A]/(t[A+2]-t[A])*b,f.uniforms.color=e[A];var P=h[A].length*6;T[A]&&P&&r.drawArrays(r.TRIANGLES,O,P),O+=P}}}(),M.drawTickMarks=function(){var x=[0,0],w=[0,0],o=[1,0],v=[0,1],u=[0,0],f=[0,0];return function(){for(var h=this.plot,r=this.vbo,s=this.tickShader,n=this.ticks,t=h.gl,i=h._tickBounds,e=h.dataBox,T=h.viewBox,b=h.pixelRatio,A=h.screenBox,_=A[2]-A[0],C=A[3]-A[1],S=T[2]-T[0],y=T[3]-T[1],R=0;R<2;++R){var O=i[R],P=i[R+2],D=P-O,H=.5*(e[R+2]+e[R]),G=e[R+2]-e[R];w[R]=2*D/G,x[R]=2*(O-H)/G}w[0]*=S/_,x[0]*=S/_,w[1]*=y/C,x[1]*=y/C,s.bind(),r.bind(),s.attributes.dataCoord.pointer();var B=s.uniforms;B.dataShift=x,B.dataScale=w;var I=h.tickMarkLength,N=h.tickMarkWidth,$=h.tickMarkColor,U=0,K=n[0].length*6,W=Math.min(l.ge(n[0],(e[0]-i[0])/(i[2]-i[0]),E),n[0].length),Y=Math.min(l.gt(n[0],(e[2]-i[0])/(i[2]-i[0]),E),n[0].length),j=U+6*W,X=6*Math.max(0,Y-W),Q=Math.min(l.ge(n[1],(e[1]-i[1])/(i[3]-i[1]),E),n[1].length),q=Math.min(l.gt(n[1],(e[3]-i[1])/(i[3]-i[1]),E),n[1].length),it=K+6*Q,ft=6*Math.max(0,q-Q);u[0]=2*(T[0]-I[1])/_-1,u[1]=(T[3]+T[1])/C-1,f[0]=I[1]*b/_,f[1]=N[1]*b/C,ft&&(B.color=$[1],B.tickScale=f,B.dataAxis=v,B.screenOffset=u,t.drawArrays(t.TRIANGLES,it,ft)),u[0]=(T[2]+T[0])/_-1,u[1]=2*(T[1]-I[0])/C-1,f[0]=N[0]*b/_,f[1]=I[0]*b/C,X&&(B.color=$[0],B.tickScale=f,B.dataAxis=o,B.screenOffset=u,t.drawArrays(t.TRIANGLES,j,X)),u[0]=2*(T[2]+I[3])/_-1,u[1]=(T[3]+T[1])/C-1,f[0]=I[3]*b/_,f[1]=N[3]*b/C,ft&&(B.color=$[3],B.tickScale=f,B.dataAxis=v,B.screenOffset=u,t.drawArrays(t.TRIANGLES,it,ft)),u[0]=(T[2]+T[0])/_-1,u[1]=2*(T[3]+I[2])/C-1,f[0]=N[2]*b/_,f[1]=I[2]*b/C,X&&(B.color=$[2],B.tickScale=f,B.dataAxis=o,B.screenOffset=u,t.drawArrays(t.TRIANGLES,j,X))}}(),M.update=function(){var x=[1,1,-1,-1,1,-1],w=[1,-1,1,1,-1,-1];return function(o){var v=o.ticks,u=o.bounds,f=new Float32Array(6*3*(v[0].length+v[1].length));this.plot.zeroLineEnable;for(var h=0,r=[[],[]],s=0;s<2;++s)for(var n=r[s],t=v[s],i=u[s],e=u[s+2],T=0;T<t.length;++T){var b=(t[T].x-i)/(e-i);n.push(b);for(var A=0;A<6;++A)f[h++]=b,f[h++]=x[A],f[h++]=w[A]}this.ticks=r,this.vbo.update(f)}}(),M.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function p(x){var w=x.gl,o=c(w),v=m(w,g.gridVert,g.gridFrag),u=m(w,g.tickVert,g.gridFrag),f=new d(x,o,v,u);return f}},4747:function(L,F,a){L.exports=E;var c=a(2762),m=a(9405),l=a(3603);function g(M,p,x){this.plot=M,this.vbo=p,this.shader=x}var d=g.prototype;d.bind=function(){var M=this.shader;this.vbo.bind(),this.shader.bind(),M.attributes.coord.pointer(),M.uniforms.screenBox=this.plot.screenBox},d.drawLine=function(){var M=[0,0],p=[0,0];return function(x,w,o,v,u,f){var h=this.plot,r=this.shader,s=h.gl;M[0]=x,M[1]=w,p[0]=o,p[1]=v,r.uniforms.start=M,r.uniforms.end=p,r.uniforms.width=u*h.pixelRatio,r.uniforms.color=f,s.drawArrays(s.TRIANGLE_STRIP,0,4)}}(),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function E(M){var p=M.gl,x=c(p,[-1,-1,-1,1,1,-1,1,1]),w=m(p,l.lineVert,l.lineFrag),o=new g(M,x,w);return o}},3603:function(L,F,a){var c=a(3236),m=c([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);L.exports={lineVert:c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:m,textVert:c([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:m,gridVert:c([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:m,boxVert:c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:c([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(L,F,a){L.exports=p;var c=a(2762),m=a(9405),l=a(529),g=a(2478),d=a(3603);function E(x,w,o){this.plot=x,this.vbo=w,this.shader=o,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var M=E.prototype;M.drawTicks=function(){var x=[0,0],w=[0,0],o=[0,0];return function(v){var u=this.plot,f=this.shader,h=this.tickX[v],r=this.tickOffset[v],s=u.gl,n=u.viewBox,t=u.dataBox,i=u.screenBox,e=u.pixelRatio,T=u.tickEnable,b=u.tickPad,A=u.tickColor,_=u.tickAngle,C=u.labelEnable,S=u.labelPad,y=u.labelColor,R=u.labelAngle,O=this.labelOffset[v],P=this.labelCount[v],D=g.lt(h,t[v]),H=g.le(h,t[v+2]);x[0]=x[1]=0,x[v]=1,w[v]=(n[2+v]+n[v])/(i[2+v]-i[v])-1;var G=2/i[2+(v^1)]-i[v^1];w[v^1]=G*n[v^1]-1,T[v]&&(w[v^1]-=G*e*b[v],D<H&&r[H]>r[D]&&(f.uniforms.dataAxis=x,f.uniforms.screenOffset=w,f.uniforms.color=A[v],f.uniforms.angle=_[v],s.drawArrays(s.TRIANGLES,r[D],r[H]-r[D]))),C[v]&&P&&(w[v^1]-=G*e*S[v],f.uniforms.dataAxis=o,f.uniforms.screenOffset=w,f.uniforms.color=y[v],f.uniforms.angle=R[v],s.drawArrays(s.TRIANGLES,O,P)),w[v^1]=G*n[2+(v^1)]-1,T[v+2]&&(w[v^1]+=G*e*b[v+2],D<H&&r[H]>r[D]&&(f.uniforms.dataAxis=x,f.uniforms.screenOffset=w,f.uniforms.color=A[v+2],f.uniforms.angle=_[v+2],s.drawArrays(s.TRIANGLES,r[D],r[H]-r[D]))),C[v+2]&&P&&(w[v^1]+=G*e*S[v+2],f.uniforms.dataAxis=o,f.uniforms.screenOffset=w,f.uniforms.color=y[v+2],f.uniforms.angle=R[v+2],s.drawArrays(s.TRIANGLES,O,P))}}(),M.drawTitle=function(){var x=[0,0],w=[0,0];return function(){var o=this.plot,v=this.shader,u=o.gl,f=o.screenBox,h=o.titleCenter,r=o.titleAngle,s=o.titleColor,n=o.pixelRatio;if(this.titleCount){for(var t=0;t<2;++t)w[t]=2*(h[t]*n-f[t])/(f[2+t]-f[t])-1;v.bind(),v.uniforms.dataAxis=x,v.uniforms.screenOffset=w,v.uniforms.angle=r,v.uniforms.color=s,u.drawArrays(u.TRIANGLES,this.titleOffset,this.titleCount)}}}(),M.bind=function(){var x=[0,0],w=[0,0],o=[0,0];return function(){var v=this.plot,u=this.shader,f=v._tickBounds,h=v.dataBox,r=v.screenBox,s=v.viewBox;u.bind();for(var n=0;n<2;++n){var t=f[n],i=f[n+2],e=i-t,T=.5*(h[n+2]+h[n]),b=h[n+2]-h[n],A=s[n],_=s[n+2],C=_-A,S=r[n],y=r[n+2],R=y-S;w[n]=2*e/b*C/R,x[n]=2*(t-T)/b*C/R}o[1]=2*v.pixelRatio/(r[3]-r[1]),o[0]=o[1]*(r[3]-r[1])/(r[2]-r[0]),u.uniforms.dataScale=w,u.uniforms.dataShift=x,u.uniforms.textScale=o,this.vbo.bind(),u.attributes.textCoordinate.pointer()}}(),M.update=function(x){var w=[],o=x.ticks,v=x.bounds,u,f,h,r,s;for(s=0;s<2;++s){var n=[Math.floor(w.length/3)],t=[-1/0],i=o[s];for(u=0;u<i.length;++u){var e=i[u],T=e.x,b=e.text,A=e.font||"sans-serif",_=e.fontStyle||"normal",C=e.fontWeight||"normal",S=e.fontVariant||"normal";r=e.fontSize||12;for(var y=1/(v[s+2]-v[s]),R=v[s],O=b.split(`
`),P=0;P<O.length;P++)for(h=l(A,O[P],{fontStyle:_,fontWeight:C,fontVariant:S}).data,f=0;f<h.length;f+=2)w.push(h[f]*r,-h[f+1]*r-P*r*1.2,(T-R)*y);n.push(Math.floor(w.length/3)),t.push(T)}this.tickOffset[s]=n,this.tickX[s]=t}for(s=0;s<2;++s){for(this.labelOffset[s]=Math.floor(w.length/3),h=l(x.labelFont[s],x.labels[s],{fontStyle:x.labelFontStyle[s],fontWeight:x.labelFontWeight[s],fontVariant:x.labelFontVariant[s],textAlign:"center"}).data,r=x.labelSize[s],u=0;u<h.length;u+=2)w.push(h[u]*r,-h[u+1]*r,0);this.labelCount[s]=Math.floor(w.length/3)-this.labelOffset[s]}for(this.titleOffset=Math.floor(w.length/3),h=l(x.titleFont,x.title,{fontStyle:x.titleFontStyle,fontWeight:x.titleFontWeight,fontVariant:x.titleFontVariant}).data,r=x.titleSize,u=0;u<h.length;u+=2)w.push(h[u]*r,-h[u+1]*r,0);this.titleCount=Math.floor(w.length/3)-this.titleOffset,this.vbo.update(w)},M.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function p(x){var w=x.gl,o=c(w),v=m(w,d.textVert,d.textFrag),u=new E(x,o,v);return u}},1850:function(L,F,a){L.exports=w;var c=a(3589),m=a(1913),l=a(2142),g=a(4747),d=a(8120);function E(o,v){this.gl=o,this.pickBuffer=v,this.screenBox=[0,0,o.drawingBufferWidth,o.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var M=E.prototype;M.setDirty=function(){this.dirty=this.pickDirty=!0},M.setOverlayDirty=function(){this.dirty=!0},M.nextDepthValue=function(){return this._depthCounter++/65536},M.draw=function(){return function(){var o=this.gl,v=this.screenBox,u=this.viewBox,f=this.dataBox,h=this.pixelRatio,r=this.grid,s=this.line,n=this.text,t=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,o.bindFramebuffer(o.FRAMEBUFFER,null),o.enable(o.SCISSOR_TEST),o.disable(o.DEPTH_TEST),o.depthFunc(o.LESS),o.depthMask(!1),o.enable(o.BLEND),o.blendEquation(o.FUNC_ADD,o.FUNC_ADD),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),this.borderColor){o.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]);var i=this.borderColor;o.clearColor(i[0]*i[3],i[1]*i[3],i[2]*i[3],i[3]),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)}o.scissor(u[0],u[1],u[2]-u[0],u[3]-u[1]),o.viewport(u[0],u[1],u[2]-u[0],u[3]-u[1]);var e=this.backgroundColor;o.clearColor(e[0]*e[3],e[1]*e[3],e[2]*e[3],e[3]),o.clear(o.COLOR_BUFFER_BIT),r.draw();var T=this.zeroLineEnable,b=this.zeroLineColor,A=this.zeroLineWidth;if(T[0]||T[1]){s.bind();for(var _=0;_<2;++_)if(!(!T[_]||!(f[_]<=0&&f[_+2]>=0))){var C=v[_]-f[_]*(v[_+2]-v[_])/(f[_+2]-f[_]);_===0?s.drawLine(C,v[1],C,v[3],A[_],b[_]):s.drawLine(v[0],C,v[2],C,A[_],b[_])}}for(var _=0;_<t.length;++_)t[_].draw();o.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]),o.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),this.grid.drawTickMarks(),s.bind();var S=this.borderLineEnable,y=this.borderLineWidth,R=this.borderLineColor;S[1]&&s.drawLine(u[0],u[1]-.5*y[1]*h,u[0],u[3]+.5*y[3]*h,y[1],R[1]),S[0]&&s.drawLine(u[0]-.5*y[0]*h,u[1],u[2]+.5*y[2]*h,u[1],y[0],R[0]),S[3]&&s.drawLine(u[2],u[1]-.5*y[1]*h,u[2],u[3]+.5*y[3]*h,y[3],R[3]),S[2]&&s.drawLine(u[0]-.5*y[0]*h,u[3],u[2]+.5*y[2]*h,u[3],y[2],R[2]),n.bind();for(var _=0;_<2;++_)n.drawTicks(_);this.titleEnable&&n.drawTitle();for(var O=this.overlays,_=0;_<O.length;++_)O[_].draw();o.disable(o.SCISSOR_TEST),o.disable(o.BLEND),o.depthMask(!0)}}}(),M.drawPick=function(){return function(){if(!this.static){var o=this.pickBuffer;this.gl,this._pickTimeout=null,o.begin();for(var v=1,u=this.objects,f=0;f<u.length;++f)v=u[f].drawPick(v);o.end()}}}(),M.pick=function(){return function(o,v){if(!this.static){var u=this.pixelRatio,f=this.pickPixelRatio,h=this.viewBox,r=Math.round((o-h[0]/u)*f)|0,s=Math.round((v-h[1]/u)*f)|0,n=this.pickBuffer.query(r,s,this.pickRadius);if(!n)return null;for(var t=n.id+(n.value[0]<<8)+(n.value[1]<<16)+(n.value[2]<<24),i=this.objects,e=0;e<i.length;++e){var T=i[e].pick(r,s,t);if(T)return T}return null}}}();function p(o){for(var v=o.slice(),u=0;u<v.length;++u)v[u]=v[u].slice();return v}function x(o,v){return o.x-v.x}M.setScreenBox=function(o){var v=this.screenBox,u=this.pixelRatio;v[0]=Math.round(o[0]*u)|0,v[1]=Math.round(o[1]*u)|0,v[2]=Math.round(o[2]*u)|0,v[3]=Math.round(o[3]*u)|0,this.setDirty()},M.setDataBox=function(o){var v=this.dataBox,u=v[0]!==o[0]||v[1]!==o[1]||v[2]!==o[2]||v[3]!==o[3];u&&(v[0]=o[0],v[1]=o[1],v[2]=o[2],v[3]=o[3],this.setDirty())},M.setViewBox=function(o){var v=this.pixelRatio,u=this.viewBox;u[0]=Math.round(o[0]*v)|0,u[1]=Math.round(o[1]*v)|0,u[2]=Math.round(o[2]*v)|0,u[3]=Math.round(o[3]*v)|0;var f=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((o[2]-o[0])*f)|0,Math.round((o[3]-o[1])*f)|0],this.setDirty()},M.update=function(o){o=o||{};var v=this.gl;this.pixelRatio=o.pixelRatio||1;var u=this.pixelRatio;this.pickPixelRatio=Math.max(u,1),this.setScreenBox(o.screenBox||[0,0,v.drawingBufferWidth/u,v.drawingBufferHeight/u]),this.screenBox,this.setViewBox(o.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/u,.125*(this.screenBox[3]-this.screenBox[1])/u,.875*(this.screenBox[2]-this.screenBox[0])/u,.875*(this.screenBox[3]-this.screenBox[1])/u]);var f=this.viewBox,h=(f[2]-f[0])/(f[3]-f[1]);this.setDataBox(o.dataBox||[-10,-10/h,10,10/h]),this.borderColor=o.borderColor!==!1?(o.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(o.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(o.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(o.gridLineWidth||[1,1]).slice(),this.gridLineColor=p(o.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(o.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(o.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=p(o.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(o.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(o.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=p(o.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(o.titleCenter||[.5*(f[0]+f[2])/u,(f[3]+120)/u]).slice(),this.titleEnable=!("titleEnable"in o)||!!o.titleEnable,this.titleAngle=o.titleAngle||0,this.titleColor=(o.titleColor||[0,0,0,1]).slice(),this.labelPad=(o.labelPad||[15,15,15,15]).slice(),this.labelAngle=(o.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(o.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=p(o.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(o.tickPad||[15,15,15,15]).slice(),this.tickAngle=(o.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(o.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=p(o.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(o.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(o.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=p(o.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var r=o.ticks||[[],[]],s=this._tickBounds;s[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(var n=0;n<2;++n){var t=r[n].slice(0);t.length!==0&&(t.sort(x),s[n]=Math.min(s[n],t[0].x),s[n+2]=Math.max(s[n+2],t[t.length-1].x))}this.grid.update({bounds:s,ticks:r}),this.text.update({bounds:s,ticks:r,labels:o.labels||["x","y"],labelSize:o.labelSize||[12,12],labelFont:o.labelFont||["sans-serif","sans-serif"],labelFontStyle:o.labelFontStyle||["normal","normal"],labelFontWeight:o.labelFontWeight||["normal","normal"],labelFontVariant:o.labelFontVariant||["normal","normal"],title:o.title||"",titleSize:o.titleSize||18,titleFont:o.titleFont||"sans-serif",titleFontStyle:o.titleFontStyle||"normal",titleFontWeight:o.titleFontWeight||"normal",titleFontVariant:o.titleFontVariant||"normal"}),this.static=!!o.static,this.setDirty()},M.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var o=this.objects.length-1;o>=0;--o)this.objects[o].dispose();this.objects.length=0;for(var o=this.overlays.length-1;o>=0;--o)this.overlays[o].dispose();this.overlays.length=0,this.gl=null},M.addObject=function(o){this.objects.indexOf(o)<0&&(this.objects.push(o),this.setDirty())},M.removeObject=function(o){for(var v=this.objects,u=0;u<v.length;++u)if(v[u]===o){v.splice(u,1),this.setDirty();break}},M.addOverlay=function(o){this.overlays.indexOf(o)<0&&(this.overlays.push(o),this.setOverlayDirty())},M.removeOverlay=function(o){for(var v=this.overlays,u=0;u<v.length;++u)if(v[u]===o){v.splice(u,1),this.setOverlayDirty();break}};function w(o){var v=o.gl,u=c(v,[v.drawingBufferWidth,v.drawingBufferHeight]),f=new E(v,u);return f.grid=m(f),f.text=l(f),f.line=g(f),f.box=d(f),f.update(o),f}},4437:function(L,F,a){L.exports=M;var c=a(3025),m=a(6296),l=a(351),g=a(8512),d=a(24),E=a(7520);function M(p,x){p=p||document.body,x=x||{};var w=[.01,1/0];"distanceLimits"in x&&(w[0]=x.distanceLimits[0],w[1]=x.distanceLimits[1]),"zoomMin"in x&&(w[0]=x.zoomMin),"zoomMax"in x&&(w[1]=x.zoomMax);var o=m({center:x.center||[0,0,0],up:x.up||[0,1,0],eye:x.eye||[0,0,10],mode:x.mode||"orbit",distanceLimits:w}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,f=p.clientWidth,h=p.clientHeight,r={keyBindingMode:"rotate",enableWheel:!0,view:o,element:p,delay:x.delay||16,rotateSpeed:x.rotateSpeed||1,zoomSpeed:x.zoomSpeed||1,translateSpeed:x.translateSpeed||1,flipX:!!x.flipX,flipY:!!x.flipY,modes:o.modes,_ortho:x._ortho||x.projection&&x.projection.type==="orthographic"||!1,tick:function(){var s=c(),n=this.delay,t=s-2*n;o.idle(s-n),o.recalcMatrix(t),o.flush(s-(100+n*2));for(var i=!0,e=o.computedMatrix,T=0;T<16;++T)i=i&&v[T]===e[T],v[T]=e[T];var b=p.clientWidth===f&&p.clientHeight===h;return f=p.clientWidth,h=p.clientHeight,i?!b:(u=Math.exp(o.computedRadius[0]),!0)},lookAt:function(s,n,t){o.lookAt(o.lastT(),s,n,t)},rotate:function(s,n,t){o.rotate(o.lastT(),s,n,t)},pan:function(s,n,t){o.pan(o.lastT(),s,n,t)},translate:function(s,n,t){o.translate(o.lastT(),s,n,t)}};return Object.defineProperties(r,{matrix:{get:function(){return o.computedMatrix},set:function(s){return o.setMatrix(o.lastT(),s),o.computedMatrix},enumerable:!0},mode:{get:function(){return o.getMode()},set:function(s){var n=o.computedUp.slice(),t=o.computedEye.slice(),i=o.computedCenter.slice();if(o.setMode(s),s==="turntable"){var e=c();o._active.lookAt(e,t,i,n),o._active.lookAt(e+500,t,i,[0,0,1]),o._active.flush(e)}return o.getMode()},enumerable:!0},center:{get:function(){return o.computedCenter},set:function(s){return o.lookAt(o.lastT(),null,s),o.computedCenter},enumerable:!0},eye:{get:function(){return o.computedEye},set:function(s){return o.lookAt(o.lastT(),s),o.computedEye},enumerable:!0},up:{get:function(){return o.computedUp},set:function(s){return o.lookAt(o.lastT(),null,null,s),o.computedUp},enumerable:!0},distance:{get:function(){return u},set:function(s){return o.setDistance(o.lastT(),s),s},enumerable:!0},distanceLimits:{get:function(){return o.getDistanceLimits(w)},set:function(s){return o.setDistanceLimits(s),s},enumerable:!0}}),p.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),r._lastX=-1,r._lastY=-1,r._lastMods={shift:!1,control:!1,alt:!1,meta:!1},r.enableMouseListeners=function(){r.mouseListener=l(p,s),p.addEventListener("touchstart",function(n){var t=d(n.changedTouches[0],p);s(0,t[0],t[1],r._lastMods),s(1,t[0],t[1],r._lastMods)},E?{passive:!0}:!1),p.addEventListener("touchmove",function(n){var t=d(n.changedTouches[0],p);s(1,t[0],t[1],r._lastMods),n.preventDefault()},E?{passive:!1}:!1),p.addEventListener("touchend",function(n){s(0,r._lastX,r._lastY,r._lastMods)},E?{passive:!0}:!1);function s(n,t,i,e){var T=r.keyBindingMode;if(T!==!1){var b=T==="rotate",A=T==="pan",_=T==="zoom",C=!!e.control,S=!!e.alt,y=!!e.shift,R=!!(n&1),O=!!(n&2),P=!!(n&4),D=1/p.clientHeight,H=D*(t-r._lastX),G=D*(i-r._lastY),B=r.flipX?1:-1,I=r.flipY?1:-1,N=Math.PI*r.rotateSpeed,$=c();if(r._lastX!==-1&&r._lastY!==-1&&((b&&R&&!C&&!S&&!y||R&&!C&&!S&&y)&&o.rotate($,B*N*H,-I*N*G,0),(A&&R&&!C&&!S&&!y||O||R&&C&&!S&&!y)&&o.pan($,-r.translateSpeed*H*u,r.translateSpeed*G*u,0),_&&R&&!C&&!S&&!y||P||R&&!C&&S&&!y)){var U=-r.zoomSpeed*G/window.innerHeight*($-o.lastT())*100;o.pan($,0,0,u*(Math.exp(U)-1))}return r._lastX=t,r._lastY=i,r._lastMods=e,!0}}r.wheelListener=g(p,function(n,t){if(r.keyBindingMode!==!1&&r.enableWheel){var i=r.flipX?1:-1,e=r.flipY?1:-1,T=c();if(Math.abs(n)>Math.abs(t))o.rotate(T,0,0,-n*i*Math.PI*r.rotateSpeed/window.innerWidth);else if(!r._ortho){var b=-r.zoomSpeed*e*t/window.innerHeight*(T-o.lastT())/20;o.pan(T,0,0,u*(Math.exp(b)-1))}}},!0)},r.enableMouseListeners(),r}},799:function(L,F,a){var c=a(3236),m=a(9405),l=c([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),g=c([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);L.exports=function(d){return m(d,l,g,null,[{name:"position",type:"vec2"}])}},4100:function(L,F,a){var c=a(4437),m=a(3837),l=a(5445),g=a(4449),d=a(3589),E=a(2260),M=a(7169),p=a(351),x=a(4772),w=a(4040),o=a(799),v=a(9216)({tablet:!0,featureDetect:!0});L.exports={createScene:s,createCamera:c};function u(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function f(t,i){var e=null;try{e=t.getContext("webgl",i),e||(e=t.getContext("experimental-webgl",i))}catch{return null}return e}function h(t){var i=Math.round(Math.log(Math.abs(t))/Math.log(10));if(i<0){var e=Math.round(Math.pow(10,-i));return Math.ceil(t*e)/e}else if(i>0){var e=Math.round(Math.pow(10,i));return Math.ceil(t/e)*e}return Math.ceil(t)}function r(t){return typeof t=="boolean"?t:!0}function s(t){t=t||{},t.camera=t.camera||{};var i=t.canvas;if(!i)if(i=document.createElement("canvas"),t.container){var e=t.container;e.appendChild(i)}else document.body.appendChild(i);var T=t.gl;if(T||(t.glOptions&&(v=!!t.glOptions.preserveDrawingBuffer),T=f(i,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!T)throw new Error("webgl not supported");var b=t.bounds||[[-10,-10,-10],[10,10,10]],A=new u,_=E(T,T.drawingBufferWidth,T.drawingBufferHeight,{preferFloat:!v}),C=o(T),S=t.cameraObject&&t.cameraObject._ortho===!0||t.camera.projection&&t.camera.projection.type==="orthographic"||!1,y={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:S},R=t.axes||{},O=m(T,R);O.enable=!R.disable;var P=t.spikes||{},D=g(T,P),H=[],G=[],B=[],I=[],N=!0,W=!0,$=new Array(16),U=new Array(16),K={view:null,projection:$,model:U,_ortho:!1},W=!0,Y=[T.drawingBufferWidth,T.drawingBufferHeight],j=t.cameraObject||c(i,y),X={gl:T,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:i,selection:A,camera:j,axes:O,axesPixels:null,spikes:D,bounds:b,objects:H,shape:Y,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:r(t.autoResize),autoBounds:r(t.autoBounds),autoScale:!!t.autoScale,autoCenter:r(t.autoCenter),clipToBounds:r(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(lt){this.aspect[0]=lt.x,this.aspect[1]=lt.y,this.aspect[2]=lt.z,W=!0},setBounds:function(lt,ut){this.bounds[0][lt]=ut.min,this.bounds[1][lt]=ut.max},setClearColor:function(lt){this.clearColor=lt},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Q=[T.drawingBufferWidth/X.pixelRatio|0,T.drawingBufferHeight/X.pixelRatio|0];function q(){if(!X._stopped&&X.autoResize){var lt=i.parentNode,ut=1,mt=1;lt&&lt!==document.body?(ut=lt.clientWidth,mt=lt.clientHeight):(ut=window.innerWidth,mt=window.innerHeight);var Et=Math.ceil(ut*X.pixelRatio)|0,ct=Math.ceil(mt*X.pixelRatio)|0;if(Et!==i.width||ct!==i.height){i.width=Et,i.height=ct;var xt=i.style;xt.position=xt.position||"absolute",xt.left="0px",xt.top="0px",xt.width=ut+"px",xt.height=mt+"px",N=!0}}}X.autoResize&&q(),window.addEventListener("resize",q);function it(){for(var lt=H.length,ut=I.length,mt=0;mt<ut;++mt)B[mt]=0;t:for(var mt=0;mt<lt;++mt){var Et=H[mt],ct=Et.pickSlots;if(!ct){G[mt]=-1;continue}for(var xt=0;xt<ut;++xt)if(B[xt]+ct<255){G[mt]=xt,Et.setPickBase(B[xt]+1),B[xt]+=ct;continue t}var pt=d(T,Y);G[mt]=ut,I.push(pt),B.push(ct),Et.setPickBase(1),ut+=1}for(;ut>0&&B[ut-1]===0;)B.pop(),I.pop().dispose()}X.update=function(lt){X._stopped||(N=!0,W=!0)},X.add=function(lt){X._stopped||(lt.axes=O,H.push(lt),G.push(-1),N=!0,W=!0,it())},X.remove=function(lt){if(!X._stopped){var ut=H.indexOf(lt);ut<0||(H.splice(ut,1),G.pop(),N=!0,W=!0,it())}},X.dispose=function(){if(!X._stopped&&(X._stopped=!0,window.removeEventListener("resize",q),i.removeEventListener("webglcontextlost",ft),X.mouseListener.enabled=!1,!X.contextLost)){O.dispose(),D.dispose();for(var lt=0;lt<H.length;++lt)H[lt].dispose();_.dispose();for(var lt=0;lt<I.length;++lt)I[lt].dispose();C.dispose(),T=null,O=null,D=null,H=[]}},X._mouseRotating=!1,X._prevButtons=0,X.enableMouseListeners=function(){X.mouseListener=p(i,function(lt,ut,mt){if(!X._stopped){var Et=I.length,ct=H.length,xt=A.object;A.distance=1/0,A.mouse[0]=ut,A.mouse[1]=mt,A.object=null,A.screen=null,A.dataCoordinate=A.dataPosition=null;var pt=!1;if(lt&&X._prevButtons)X._mouseRotating=!0;else{X._mouseRotating&&(W=!0),X._mouseRotating=!1;for(var Mt=0;Mt<Et;++Mt){var At=I[Mt].query(ut,Q[1]-mt-1,X.pickRadius);if(At){if(At.distance>A.distance)continue;for(var wt=0;wt<ct;++wt){var dt=H[wt];if(G[wt]===Mt){var gt=dt.pick(At);gt&&(A.buttons=lt,A.screen=At.coord,A.distance=At.distance,A.object=dt,A.index=gt.distance,A.dataPosition=gt.position,A.dataCoordinate=gt.dataCoordinate,A.data=gt,pt=!0)}}}}}xt&&xt!==A.object&&(xt.highlight&&xt.highlight(null),N=!0),A.object&&(A.object.highlight&&A.object.highlight(A.data),N=!0),pt=pt||A.object!==xt,pt&&X.onselect&&X.onselect(A),lt&1&&!(X._prevButtons&1)&&X.onclick&&X.onclick(A),X._prevButtons=lt}})};function ft(){if(X.contextLost)return!0;T.isContextLost()&&(X.contextLost=!0,X.mouseListener.enabled=!1,X.selection.object=null,X.oncontextloss&&X.oncontextloss())}i.addEventListener("webglcontextlost",ft);function at(){if(!ft()){T.colorMask(!0,!0,!0,!0),T.depthMask(!0),T.disable(T.BLEND),T.enable(T.DEPTH_TEST),T.depthFunc(T.LEQUAL);for(var lt=H.length,ut=I.length,mt=0;mt<ut;++mt){var Et=I[mt];Et.shape=Q,Et.begin();for(var ct=0;ct<lt;++ct)if(G[ct]===mt){var xt=H[ct];xt.drawPick&&(xt.pixelRatio=1,xt.drawPick(K))}Et.end()}}}var rt=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ht=[rt[0].slice(),rt[1].slice()];function ot(){if(!ft()){q();var lt=X.camera.tick();K.view=X.camera.matrix,N=N||lt,W=W||lt,O.pixelRatio=X.pixelRatio,D.pixelRatio=X.pixelRatio;var ut=H.length,mt=rt[0],Et=rt[1];mt[0]=mt[1]=mt[2]=1/0,Et[0]=Et[1]=Et[2]=-1/0;for(var ct=0;ct<ut;++ct){var xt=H[ct];xt.pixelRatio=X.pixelRatio,xt.axes=X.axes,N=N||!!xt.dirty,W=W||!!xt.dirty;var pt=xt.bounds;if(pt)for(var Mt=pt[0],At=pt[1],wt=0;wt<3;++wt)mt[wt]=Math.min(mt[wt],Mt[wt]),Et[wt]=Math.max(Et[wt],At[wt])}var dt=X.bounds;if(X.autoBounds)for(var wt=0;wt<3;++wt){if(Et[wt]<mt[wt])mt[wt]=-1,Et[wt]=1;else{mt[wt]===Et[wt]&&(mt[wt]-=1,Et[wt]+=1);var gt=.05*(Et[wt]-mt[wt]);mt[wt]=mt[wt]-gt,Et[wt]=Et[wt]+gt}dt[0][wt]=mt[wt],dt[1][wt]=Et[wt]}for(var Tt=!1,wt=0;wt<3;++wt)Tt=Tt||ht[0][wt]!==dt[0][wt]||ht[1][wt]!==dt[1][wt],ht[0][wt]=dt[0][wt],ht[1][wt]=dt[1][wt];if(W=W||Tt,N=N||Tt,!!N){if(Tt){for(var _t=[0,0,0],ct=0;ct<3;++ct)_t[ct]=h((dt[1][ct]-dt[0][ct])/10);O.autoTicks?O.update({bounds:dt,tickSpacing:_t}):O.update({bounds:dt})}var Bt=T.drawingBufferWidth,Lt=T.drawingBufferHeight;Y[0]=Bt,Y[1]=Lt,Q[0]=Math.max(Bt/X.pixelRatio,1)|0,Q[1]=Math.max(Lt/X.pixelRatio,1)|0,n(X,S);for(var ct=0;ct<ut;++ct){var xt=H[ct];xt.axesBounds=dt,X.clipToBounds&&(xt.clipBounds=dt)}A.object&&(X.snapToData?D.position=A.dataCoordinate:D.position=A.dataPosition,D.bounds=dt),W&&(W=!1,at()),X.axesPixels=l(X.axes,K,Bt,Lt),X.onrender&&X.onrender(),T.bindFramebuffer(T.FRAMEBUFFER,null),T.viewport(0,0,Bt,Lt),X.clearRGBA(),T.depthMask(!0),T.colorMask(!0,!0,!0,!0),T.enable(T.DEPTH_TEST),T.depthFunc(T.LEQUAL),T.disable(T.BLEND),T.disable(T.CULL_FACE);var St=!1;O.enable&&(St=St||O.isTransparent(),O.draw(K)),D.axes=O,A.object&&D.draw(K),T.disable(T.CULL_FACE);for(var ct=0;ct<ut;++ct){var xt=H[ct];xt.axes=O,xt.pixelRatio=X.pixelRatio,xt.isOpaque&&xt.isOpaque()&&xt.draw(K),xt.isTransparent&&xt.isTransparent()&&(St=!0)}if(St){_.shape=Y,_.bind(),T.clear(T.DEPTH_BUFFER_BIT),T.colorMask(!1,!1,!1,!1),T.depthMask(!0),T.depthFunc(T.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(K);for(var ct=0;ct<ut;++ct){var xt=H[ct];xt.isOpaque&&xt.isOpaque()&&xt.draw(K)}T.enable(T.BLEND),T.blendEquation(T.FUNC_ADD),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.colorMask(!0,!0,!0,!0),T.depthMask(!1),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(K);for(var ct=0;ct<ut;++ct){var xt=H[ct];xt.isTransparent&&xt.isTransparent()&&xt.drawTransparent(K)}T.bindFramebuffer(T.FRAMEBUFFER,null),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.disable(T.DEPTH_TEST),C.bind(),_.color[0].bind(0),C.uniforms.accumBuffer=0,M(T),T.disable(T.BLEND)}N=!1;for(var ct=0;ct<ut;++ct)H[ct].dirty=!1}}}function vt(){X._stopped||X.contextLost||(ot(),requestAnimationFrame(vt))}return X.enableMouseListeners(),vt(),X.redraw=function(){X._stopped||(N=!0,ot())},X}function n(t,i){var e=t.bounds,T=t.cameraParams,b=T.projection,A=T.model,_=t.gl.drawingBufferWidth,C=t.gl.drawingBufferHeight,S=t.zNear,y=t.zFar,R=t.fovy,O=_/C;i?(w(b,-O,O,-1,1,S,y),T._ortho=!0):(x(b,R,O,S,y),T._ortho=!1);for(var P=0;P<16;++P)A[P]=0;A[15]=1;for(var D=0,P=0;P<3;++P)D=Math.max(D,e[1][P]-e[0][P]);for(var P=0;P<3;++P)t.autoScale?A[5*P]=t.aspect[P]/(e[1][P]-e[0][P]):A[5*P]=1/D,t.autoCenter&&(A[12+P]=-A[5*P]*.5*(e[0][P]+e[1][P]))}},6640:function(L,F,a){var c=a(3236);F.pointVertex=c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),F.pointFragment=c([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),F.pickVertex=c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),F.pickFragment=c([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(L,F,a){var c=a(9405),m=a(2762),l=a(1888),g=a(6640);L.exports=p;function d(x,w,o,v,u){this.plot=x,this.offsetBuffer=w,this.pickBuffer=o,this.shader=v,this.pickShader=u,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var E=d.prototype;E.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},E.update=function(x){var w;x=x||{};function o(n,t){return n in x?x[n]:t}this.sizeMin=o("sizeMin",.5),this.sizeMax=o("sizeMax",20),this.color=o("color",[1,0,0,1]).slice(),this.areaRatio=o("areaRatio",1),this.borderColor=o("borderColor",[0,0,0,1]).slice(),this.blend=o("blend",!1);var v=x.positions.length>>>1,u=x.positions instanceof Float32Array,f=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=v,h=x.positions,r=u?h:l.mallocFloat32(h.length),s=f?x.idToIndex:l.mallocInt32(v);if(u||r.set(h),!f)for(r.set(h),w=0;w<v;w++)s[w]=w;this.points=h,this.offsetBuffer.update(r),this.pickBuffer.update(s),u||l.free(r),f||l.free(s),this.pointCount=v,this.pickOffset=0};function M(x,w){var o=0,v=x.length>>>1,u;for(u=0;u<v;u++){var f=x[u*2],h=x[u*2+1];f>=w[0]&&f<=w[2]&&h>=w[1]&&h<=w[3]&&o++}return o}E.unifiedDraw=function(){var x=[1,0,0,0,1,0,0,0,1],w=[0,0,0,0];return function(o){var v=o!==void 0,u=v?this.pickShader:this.shader,f=this.plot.gl,h=this.plot.dataBox;if(this.pointCount===0)return o;var r=h[2]-h[0],s=h[3]-h[1],n=M(this.points,h),t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(n,.33333)));x[0]=2/r,x[4]=2/s,x[6]=-2*h[0]/r-1,x[7]=-2*h[1]/s-1,this.offsetBuffer.bind(),u.bind(),u.attributes.position.pointer(),u.uniforms.matrix=x,u.uniforms.color=this.color,u.uniforms.borderColor=this.borderColor,u.uniforms.pointCloud=t<5,u.uniforms.pointSize=t,u.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(w[0]=o&255,w[1]=o>>8&255,w[2]=o>>16&255,w[3]=o>>24&255,this.pickBuffer.bind(),u.attributes.pickId.pointer(f.UNSIGNED_BYTE),u.uniforms.pickOffset=w,this.pickOffset=o);var i=f.getParameter(f.BLEND),e=f.getParameter(f.DITHER);return i&&!this.blend&&f.disable(f.BLEND),e&&f.disable(f.DITHER),f.drawArrays(f.POINTS,0,this.pointCount),i&&!this.blend&&f.enable(f.BLEND),e&&f.enable(f.DITHER),o+this.pointCount}}(),E.draw=E.unifiedDraw,E.drawPick=E.unifiedDraw,E.pick=function(x,w,o){var v=this.pickOffset,u=this.pointCount;if(o<v||o>=v+u)return null;var f=o-v,h=this.points;return{object:this,pointId:f,dataCoord:[h[2*f],h[2*f+1]]}};function p(x,w){var o=x.gl,v=m(o),u=m(o),f=c(o,g.pointVertex,g.pointFragment),h=c(o,g.pickVertex,g.pickFragment),r=new d(x,v,u,f,h);return r.update(w),x.addObject(r),r}},783:function(L){L.exports=F;function F(a,c,m,l){var g=c[0],d=c[1],E=c[2],M=c[3],p=m[0],x=m[1],w=m[2],o=m[3],v,u,f,h,r;return u=g*p+d*x+E*w+M*o,u<0&&(u=-u,p=-p,x=-x,w=-w,o=-o),1-u>1e-6?(v=Math.acos(u),f=Math.sin(v),h=Math.sin((1-l)*v)/f,r=Math.sin(l*v)/f):(h=1-l,r=l),a[0]=h*g+r*p,a[1]=h*d+r*x,a[2]=h*E+r*w,a[3]=h*M+r*o,a}},5964:function(L){L.exports=function(F){return!F&&F!==0?"":F.toString()}},9366:function(L,F,a){var c=a(4359);L.exports=l;var m={};function l(g,d,E){var M=[d.style,d.weight,d.variant,d.family].join("_"),p=m[M];if(p||(p=m[M]={}),g in p)return p[g];var x={textAlign:"center",textBaseline:"middle",lineHeight:1,font:d.family,fontStyle:d.style,fontWeight:d.weight,fontVariant:d.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};x.triangles=!0;var w=c(g,x);x.triangles=!1;var o=c(g,x),v,u;if(E&&E!==1){for(v=0;v<w.positions.length;++v)for(u=0;u<w.positions[v].length;++u)w.positions[v][u]/=E;for(v=0;v<o.positions.length;++v)for(u=0;u<o.positions[v].length;++u)o.positions[v][u]/=E}var f=[[1/0,1/0],[-1/0,-1/0]],h=o.positions.length;for(v=0;v<h;++v){var r=o.positions[v];for(u=0;u<2;++u)f[0][u]=Math.min(f[0][u],r[u]),f[1][u]=Math.max(f[1][u],r[u])}return p[g]=[w,o,f]}},1283:function(L,F,a){var c=a(9405),m=a(3236),l=m([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),g=m([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),d=m([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),E=m([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),M=m([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),p=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:l,fragment:E,attributes:p},w={vertex:g,fragment:E,attributes:p},o={vertex:d,fragment:E,attributes:p},v={vertex:l,fragment:M,attributes:p},u={vertex:g,fragment:M,attributes:p},f={vertex:d,fragment:M,attributes:p};function h(r,s){var n=c(r,s),t=n.attributes;return t.position.location=0,t.color.location=1,t.glyph.location=2,t.id.location=3,n}F.createPerspective=function(r){return h(r,x)},F.createOrtho=function(r){return h(r,w)},F.createProject=function(r){return h(r,o)},F.createPickPerspective=function(r){return h(r,v)},F.createPickOrtho=function(r){return h(r,u)},F.createPickProject=function(r){return h(r,f)}},8418:function(L,F,a){var c=a(5219),m=a(2762),l=a(8116),g=a(1888),d=a(6760),E=a(1283),M=a(9366),p=a(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w=ArrayBuffer,o=DataView;function v(U){return w.isView(U)&&!(U instanceof o)}function u(U){return Array.isArray(U)||v(U)}L.exports=$;function f(U,K){var W=U[0],Y=U[1],j=U[2],X=U[3];return U[0]=K[0]*W+K[4]*Y+K[8]*j+K[12]*X,U[1]=K[1]*W+K[5]*Y+K[9]*j+K[13]*X,U[2]=K[2]*W+K[6]*Y+K[10]*j+K[14]*X,U[3]=K[3]*W+K[7]*Y+K[11]*j+K[15]*X,U}function h(U,K,W,Y){return f(Y,Y),f(Y,Y),f(Y,Y)}function r(U,K){this.index=U,this.dataCoordinate=this.position=K}function s(U){return U===!0||U>1?1:U}function n(U,K,W,Y,j,X,Q,q,it,ft,at,rt){this.gl=U,this.pixelRatio=1,this.shader=K,this.orthoShader=W,this.projectShader=Y,this.pointBuffer=j,this.colorBuffer=X,this.glyphBuffer=Q,this.idBuffer=q,this.vao=it,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ft,this.pickOrthoShader=at,this.pickProjectShader=rt,this.points=[],this._selectResult=new r(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var t=n.prototype;t.pickSlots=1,t.setPickBase=function(U){this.pickId=U},t.isTransparent=function(){if(this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&this.projectHasAlpha)return!0;return!1},t.isOpaque=function(){if(!this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&!this.projectHasAlpha)return!0;return!1};var i=[0,0],e=[0,0,0],T=[0,0,0],b=[0,0,0,1],A=[0,0,0,1],_=x.slice(),C=[0,0,0],S=[[0,0,0],[0,0,0]];function y(U){return U[0]=U[1]=U[2]=0,U}function R(U,K){return U[0]=K[0],U[1]=K[1],U[2]=K[2],U[3]=1,U}function O(U,K,W,Y){return U[0]=K[0],U[1]=K[1],U[2]=K[2],U[W]=Y,U}function P(U){for(var K=S,W=0;W<2;++W)for(var Y=0;Y<3;++Y)K[W][Y]=Math.max(Math.min(U[W][Y],1e8),-1e8);return K}function D(U,K,W,Y){var j=K.axesProject,X=K.gl,Q=U.uniforms,q=W.model||x,it=W.view||x,ft=W.projection||x,at=K.axesBounds,rt=P(K.clipBounds),ht;K.axes&&K.axes.lastCubeProps?ht=K.axes.lastCubeProps.axis:ht=[1,1,1],i[0]=2/X.drawingBufferWidth,i[1]=2/X.drawingBufferHeight,U.bind(),Q.view=it,Q.projection=ft,Q.screenSize=i,Q.highlightId=K.highlightId,Q.highlightScale=K.highlightScale,Q.clipBounds=rt,Q.pickGroup=K.pickId/255,Q.pixelRatio=Y;for(var ot=0;ot<3;++ot)if(j[ot]){Q.scale=K.projectScale[ot],Q.opacity=K.projectOpacity[ot];for(var vt=_,lt=0;lt<16;++lt)vt[lt]=0;for(var lt=0;lt<4;++lt)vt[5*lt]=1;vt[5*ot]=0,ht[ot]<0?vt[12+ot]=at[0][ot]:vt[12+ot]=at[1][ot],d(vt,q,vt),Q.model=vt;var ut=(ot+1)%3,mt=(ot+2)%3,Et=y(e),ct=y(T);Et[ut]=1,ct[mt]=1;var xt=h(ft,it,q,R(b,Et)),pt=h(ft,it,q,R(A,ct));if(Math.abs(xt[1])>Math.abs(pt[1])){var Mt=xt;xt=pt,pt=Mt,Mt=Et,Et=ct,ct=Mt;var At=ut;ut=mt,mt=At}xt[0]<0&&(Et[ut]=-1),pt[1]>0&&(ct[mt]=-1);for(var wt=0,dt=0,lt=0;lt<4;++lt)wt+=Math.pow(q[4*ut+lt],2),dt+=Math.pow(q[4*mt+lt],2);Et[ut]/=Math.sqrt(wt),ct[mt]/=Math.sqrt(dt),Q.axes[0]=Et,Q.axes[1]=ct,Q.fragClipBounds[0]=O(C,rt[0],ot,-1e8),Q.fragClipBounds[1]=O(C,rt[1],ot,1e8),K.vao.bind(),K.vao.draw(X.TRIANGLES,K.vertexCount),K.lineWidth>0&&(X.lineWidth(K.lineWidth*Y),K.vao.draw(X.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}var H=[-1e8,-1e8,-1e8],G=[1e8,1e8,1e8],B=[H,G];function I(U,K,W,Y,j,X,Q){var q=W.gl;if((X===W.projectHasAlpha||Q)&&D(K,W,Y,j),X===W.hasAlpha||Q){U.bind();var it=U.uniforms;it.model=Y.model||x,it.view=Y.view||x,it.projection=Y.projection||x,i[0]=2/q.drawingBufferWidth,i[1]=2/q.drawingBufferHeight,it.screenSize=i,it.highlightId=W.highlightId,it.highlightScale=W.highlightScale,it.fragClipBounds=B,it.clipBounds=W.axes.bounds,it.opacity=W.opacity,it.pickGroup=W.pickId/255,it.pixelRatio=j,W.vao.bind(),W.vao.draw(q.TRIANGLES,W.vertexCount),W.lineWidth>0&&(q.lineWidth(W.lineWidth*j),W.vao.draw(q.LINES,W.lineVertexCount,W.vertexCount)),W.vao.unbind()}}t.draw=function(U){var K=this.useOrtho?this.orthoShader:this.shader;I(K,this.projectShader,this,U,this.pixelRatio,!1,!1)},t.drawTransparent=function(U){var K=this.useOrtho?this.orthoShader:this.shader;I(K,this.projectShader,this,U,this.pixelRatio,!0,!1)},t.drawPick=function(U){var K=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;I(K,this.pickProjectShader,this,U,1,!0,!0)},t.pick=function(U){if(!U||U.id!==this.pickId)return null;var K=U.value[2]+(U.value[1]<<8)+(U.value[0]<<16);if(K>=this.pointCount||K<0)return null;var W=this.points[K],Y=this._selectResult;Y.index=K;for(var j=0;j<3;++j)Y.position[j]=Y.dataCoordinate[j]=W[j];return Y},t.highlight=function(U){if(!U)this.highlightId=[1,1,1,1];else{var K=U.index,W=K&255,Y=K>>8&255,j=K>>16&255;this.highlightId=[W/255,Y/255,j/255,0]}};function N(U,K,W,Y){var j;u(U)?K<U.length?j=U[K]:j=void 0:j=U,j=p(j);var X=!0;c(j)&&(j="",X=!1),W||(W={});var Q=W.family;u(Q)&&(Q=Q[K]),Q||(Q="normal");var q=W.weight;u(q)&&(q=q[K]),q||(q="normal");var it=W.style;u(it)&&(it=it[K]),it||(it="normal");var ft=W.variant;u(ft)&&(ft=ft[K]),ft||(ft="normal");var at=M(j,{family:Q,weight:q,style:it,variant:ft},Y),at=M(j,W,Y);return{mesh:at[0],lines:at[1],bounds:at[2],visible:X}}t.update=function(U){if(U=U||{},"perspective"in U&&(this.useOrtho=!U.perspective),"orthographic"in U&&(this.useOrtho=!!U.orthographic),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"project"in U)if(u(U.project))this.axesProject=U.project;else{var K=!!U.project;this.axesProject=[K,K,K]}if("projectScale"in U)if(u(U.projectScale))this.projectScale=U.projectScale.slice();else{var W=+U.projectScale;this.projectScale=[W,W,W]}if(this.projectHasAlpha=!1,"projectOpacity"in U){if(u(U.projectOpacity))this.projectOpacity=U.projectOpacity.slice();else{var W=+U.projectOpacity;this.projectOpacity=[W,W,W]}for(var Y=0;Y<3;++Y)this.projectOpacity[Y]=s(this.projectOpacity[Y]),this.projectOpacity[Y]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in U&&(this.opacity=s(U.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var j=U.position,X={family:U.font||"normal",style:U.fontStyle||"normal",weight:U.fontWeight||"normal",variant:U.fontVariant||"normal"},Q=U.alignment||[0,0],q,it;if(Q.length===2)q=Q[0],it=Q[1];else{q=[],it=[];for(var Y=0;Y<Q.length;++Y)q[Y]=Q[Y][0],it[Y]=Q[Y][1]}var ft=[1/0,1/0,1/0],at=[-1/0,-1/0,-1/0],rt=U.glyph,ht=U.color,ot=U.size,vt=U.angle,lt=U.lineColor,ut=-1,mt=0,Et=0,ct=0;if(j.length){ct=j.length;t:for(var Y=0;Y<ct;++Y){for(var xt=j[Y],pt=0;pt<3;++pt)if(isNaN(xt[pt])||!isFinite(xt[pt]))continue t;var Mt=N(rt,Y,X,this.pixelRatio),At=Mt.mesh,wt=Mt.lines,dt=Mt.bounds;mt+=At.cells.length*3,Et+=wt.edges.length*2}}var gt=mt+Et,Tt=g.mallocFloat(3*gt),_t=g.mallocFloat(4*gt),Bt=g.mallocFloat(2*gt),Lt=g.mallocUint32(gt);if(gt>0){var St=0,Ft=mt,Ot=[0,0,0,1],It=[0,0,0,1],Yt=u(ht)&&u(ht[0]),J=u(lt)&&u(lt[0]);t:for(var Y=0;Y<ct;++Y){ut+=1;for(var xt=j[Y],pt=0;pt<3;++pt){if(isNaN(xt[pt])||!isFinite(xt[pt]))continue t;at[pt]=Math.max(at[pt],xt[pt]),ft[pt]=Math.min(ft[pt],xt[pt])}var Mt=N(rt,Y,X,this.pixelRatio),At=Mt.mesh,wt=Mt.lines,dt=Mt.bounds,k=Mt.visible;if(!k)Ot=[1,1,1,0];else if(u(ht)){var z;if(Yt?Y<ht.length?z=ht[Y]:z=[0,0,0,0]:z=ht,z.length===3){for(var pt=0;pt<3;++pt)Ot[pt]=z[pt];Ot[3]=1}else if(z.length===4){for(var pt=0;pt<4;++pt)Ot[pt]=z[pt];!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)}}else Ot[0]=Ot[1]=Ot[2]=0,Ot[3]=1;if(!k)It=[1,1,1,0];else if(u(lt)){var z;if(J?Y<lt.length?z=lt[Y]:z=[0,0,0,0]:z=lt,z.length===3){for(var pt=0;pt<3;++pt)It[pt]=z[pt];It[pt]=1}else if(z.length===4){for(var pt=0;pt<4;++pt)It[pt]=z[pt];!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)}}else It[0]=It[1]=It[2]=0,It[3]=1;var et=.5;k?u(ot)?Y<ot.length?et=+ot[Y]:et=12:ot?et=+ot:this.useOrtho&&(et=12):et=0;var st=0;u(vt)?Y<vt.length?st=+vt[Y]:st=0:vt&&(st=+vt);for(var yt=Math.cos(st),bt=Math.sin(st),xt=j[Y],pt=0;pt<3;++pt)at[pt]=Math.max(at[pt],xt[pt]),ft[pt]=Math.min(ft[pt],xt[pt]);var Rt=q,Nt=it,Rt=0;u(q)?Y<q.length?Rt=q[Y]:Rt=0:q&&(Rt=q);var Nt=0;u(it)?Y<it.length?Nt=it[Y]:Nt=0:it&&(Nt=it),Rt*=Rt>0?1-dt[0][0]:Rt<0?1+dt[1][0]:1,Nt*=Nt>0?1-dt[0][1]:Nt<0?1+dt[1][1]:1;for(var Ct=[Rt,Nt],Jt=At.cells||[],Ut=At.positions||[],pt=0;pt<Jt.length;++pt)for(var Pt=Jt[pt],zt=0;zt<3;++zt){for(var kt=0;kt<3;++kt)Tt[3*St+kt]=xt[kt];for(var kt=0;kt<4;++kt)_t[4*St+kt]=Ot[kt];Lt[St]=ut;var Dt=Ut[Pt[zt]];Bt[2*St]=et*(yt*Dt[0]-bt*Dt[1]+Ct[0]),Bt[2*St+1]=et*(bt*Dt[0]+yt*Dt[1]+Ct[1]),St+=1}for(var Jt=wt.edges,Ut=wt.positions,pt=0;pt<Jt.length;++pt)for(var Pt=Jt[pt],zt=0;zt<2;++zt){for(var kt=0;kt<3;++kt)Tt[3*Ft+kt]=xt[kt];for(var kt=0;kt<4;++kt)_t[4*Ft+kt]=It[kt];Lt[Ft]=ut;var Dt=Ut[Pt[zt]];Bt[2*Ft]=et*(yt*Dt[0]-bt*Dt[1]+Ct[0]),Bt[2*Ft+1]=et*(bt*Dt[0]+yt*Dt[1]+Ct[1]),Ft+=1}}}this.bounds=[ft,at],this.points=j,this.pointCount=j.length,this.vertexCount=mt,this.lineVertexCount=Et,this.pointBuffer.update(Tt),this.colorBuffer.update(_t),this.glyphBuffer.update(Bt),this.idBuffer.update(Lt),g.free(Tt),g.free(_t),g.free(Bt),g.free(Lt)},t.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function $(U){var K=U.gl,W=E.createPerspective(K),Y=E.createOrtho(K),j=E.createProject(K),X=E.createPickPerspective(K),Q=E.createPickOrtho(K),q=E.createPickProject(K),it=m(K),ft=m(K),at=m(K),rt=m(K),ht=l(K,[{buffer:it,size:3,type:K.FLOAT},{buffer:ft,size:4,type:K.FLOAT},{buffer:at,size:2,type:K.FLOAT},{buffer:rt,size:4,type:K.UNSIGNED_BYTE,normalized:!0}]),ot=new n(K,W,Y,j,it,ft,at,rt,ht,X,Q,q);return ot.update(U),ot}},4298:function(L,F,a){var c=a(3236);F.boxVertex=c([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),F.boxFragment=c([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(L,F,a){var c=a(9405),m=a(2762),l=a(4298);L.exports=E;function g(M,p,x){this.plot=M,this.boxBuffer=p,this.boxShader=x,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var d=g.prototype;d.draw=function(){if(this.enabled){var M=this.plot,p=this.selectBox,x=this.borderWidth;this.innerFill;var w=this.innerColor;this.outerFill;var o=this.outerColor,v=this.borderColor,u=M.box,f=M.screenBox,h=M.dataBox,r=M.viewBox,s=M.pixelRatio,n=(p[0]-h[0])*(r[2]-r[0])/(h[2]-h[0])+r[0],t=(p[1]-h[1])*(r[3]-r[1])/(h[3]-h[1])+r[1],i=(p[2]-h[0])*(r[2]-r[0])/(h[2]-h[0])+r[0],e=(p[3]-h[1])*(r[3]-r[1])/(h[3]-h[1])+r[1];if(n=Math.max(n,r[0]),t=Math.max(t,r[1]),i=Math.min(i,r[2]),e=Math.min(e,r[3]),!(i<n||e<t)){u.bind();var T=f[2]-f[0],b=f[3]-f[1];if(this.outerFill&&(u.drawBox(0,0,T,t,o),u.drawBox(0,t,n,e,o),u.drawBox(0,e,T,b,o),u.drawBox(i,t,T,e,o)),this.innerFill&&u.drawBox(n,t,i,e,w),x>0){var A=x*s;u.drawBox(n-A,t-A,i+A,t+A,v),u.drawBox(n-A,e-A,i+A,e+A,v),u.drawBox(n-A,t-A,n+A,e+A,v),u.drawBox(i-A,t-A,i+A,e+A,v)}}}},d.update=function(M){M=M||{},this.innerFill=!!M.innerFill,this.outerFill=!!M.outerFill,this.innerColor=(M.innerColor||[0,0,0,.5]).slice(),this.outerColor=(M.outerColor||[0,0,0,.5]).slice(),this.borderColor=(M.borderColor||[0,0,0,1]).slice(),this.borderWidth=M.borderWidth||0,this.selectBox=(M.selectBox||this.selectBox).slice()},d.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function E(M,p){var x=M.gl,w=m(x,[0,0,0,1,1,0,1,1]),o=c(x,l.boxVertex,l.boxFragment),v=new g(M,w,o);return v.update(p),M.addOverlay(v),v}},3589:function(L,F,a){L.exports=x;var c=a(2260),m=a(1888),l=a(9618),g=a(8828).nextPow2,d=function(w,o,v){for(var u=1e8,f=-1,h=-1,r=w.shape[0],s=w.shape[1],n=0;n<r;n++)for(var t=0;t<s;t++){var i=w.get(n,t,0),e=w.get(n,t,1),T=w.get(n,t,2),b=w.get(n,t,3);if(i<255||e<255||T<255||b<255){var A=o-n,_=v-t,C=A*A+_*_;C<u&&(u=C,f=n,h=t)}}return[f,h,u]};function E(w,o,v,u,f){this.coord=[w,o],this.id=v,this.value=u,this.distance=f}function M(w,o,v){this.gl=w,this.fbo=o,this.buffer=v,this._readTimeout=null;var u=this;this._readCallback=function(){u.gl&&(o.bind(),w.readPixels(0,0,o.shape[0],o.shape[1],w.RGBA,w.UNSIGNED_BYTE,u.buffer),u._readTimeout=null)}}var p=M.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(w){if(this.gl){this.fbo.shape=w;var o=this.fbo.shape[0],v=this.fbo.shape[1];if(v*o*4>this.buffer.length){m.free(this.buffer);for(var u=this.buffer=m.mallocUint8(g(v*o*4)),f=0;f<v*o*4;++f)u[f]=255}return w}}}),p.begin=function(){var w=this.gl;this.shape,w&&(this.fbo.bind(),w.clearColor(1,1,1,1),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT))},p.end=function(){var w=this.gl;w&&(w.bindFramebuffer(w.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(w,o,v){if(!this.gl)return null;var u=this.fbo.shape.slice();w=w|0,o=o|0,typeof v!="number"&&(v=1);var f=Math.min(Math.max(w-v,0),u[0])|0,h=Math.min(Math.max(w+v,0),u[0])|0,r=Math.min(Math.max(o-v,0),u[1])|0,s=Math.min(Math.max(o+v,0),u[1])|0;if(h<=f||s<=r)return null;var n=[h-f,s-r],t=l(this.buffer,[n[0],n[1],4],[4,u[0]*4,1],4*(f+u[0]*r)),i=d(t.hi(n[0],n[1],1),v,v),e=i[0],T=i[1];if(e<0||Math.pow(this.radius,2)<i[2])return null;var b=t.get(e,T,0),A=t.get(e,T,1),_=t.get(e,T,2),C=t.get(e,T,3);return new E(e+f|0,T+r|0,b,[A,_,C],Math.sqrt(i[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),m.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function x(w,o){var v=o[0],u=o[1],f={},h=c(w,v,u,f),r=m.mallocUint8(v*u*4);return new M(w,h,r)}},9405:function(L,F,a){var c=a(3327),m=a(8731),l=a(216),g=a(5091),d=a(2145),E=a(8866);function M(o){this.gl=o,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var p=M.prototype;p.bind=function(){this.program||this._relink();var o,v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),u=this.gl.lastAttribCount;if(v>u)for(o=u;o<v;o++)this.gl.enableVertexAttribArray(o);else if(u>v)for(o=v;o<u;o++)this.gl.disableVertexAttribArray(o);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},p.dispose=function(){for(var o=this.gl.lastAttribCount,v=0;v<o;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function x(o,v){return o.name<v.name?-1:1}p.update=function(o,v,u,f){if(!v||arguments.length===1){var h=o;o=h.vertex,v=h.fragment,u=h.uniforms,f=h.attributes}var r=this,s=r.gl,n=r._vref;r._vref=g.shader(s,s.VERTEX_SHADER,o),n&&n.dispose(),r.vertShader=r._vref.shader;var t=this._fref;if(r._fref=g.shader(s,s.FRAGMENT_SHADER,v),t&&t.dispose(),r.fragShader=r._fref.shader,!u||!f){var i=s.createProgram();if(s.attachShader(i,r.fragShader),s.attachShader(i,r.vertShader),s.linkProgram(i),!s.getProgramParameter(i,s.LINK_STATUS)){var e=s.getProgramInfoLog(i);throw new E(e,"Error linking program:"+e)}u=u||d.uniforms(s,i),f=f||d.attributes(s,i),s.deleteProgram(i)}f=f.slice(),f.sort(x);var T=[],b=[],A=[],_;for(_=0;_<f.length;++_){var C=f[_];if(C.type.indexOf("mat")>=0){for(var S=C.type.charAt(C.type.length-1)|0,y=new Array(S),R=0;R<S;++R)y[R]=A.length,b.push(C.name+"["+R+"]"),typeof C.location=="number"?A.push(C.location+R):Array.isArray(C.location)&&C.location.length===S&&typeof C.location[R]=="number"?A.push(C.location[R]|0):A.push(-1);T.push({name:C.name,type:C.type,locations:y})}else T.push({name:C.name,type:C.type,locations:[A.length]}),b.push(C.name),typeof C.location=="number"?A.push(C.location|0):A.push(-1)}var O=0;for(_=0;_<A.length;++_)if(A[_]<0){for(;A.indexOf(O)>=0;)O+=1;A[_]=O}var P=new Array(u.length);function D(){r.program=g.program(s,r._vref,r._fref,b,A);for(var H=0;H<u.length;++H)P[H]=s.getUniformLocation(r.program,u[H].name)}D(),r._relink=D,r.types={uniforms:l(u),attributes:l(f)},r.attributes=m(s,r,T,A),Object.defineProperty(r,"uniforms",c(s,r,u,P))};function w(o,v,u,f,h){var r=new M(o);return r.update(v,u,f,h),r}L.exports=w},8866:function(L){function F(a,c,m){this.shortMessage=c||"",this.longMessage=m||"",this.rawError=a||"",this.message="gl-shader: "+(c||a||"")+(m?`
`+m:""),this.stack=new Error().stack}F.prototype=new Error,F.prototype.name="GLError",F.prototype.constructor=F,L.exports=F},8731:function(L,F,a){L.exports=M;var c=a(8866);function m(p,x,w,o,v,u){this._gl=p,this._wrapper=x,this._index=w,this._locations=o,this._dimension=v,this._constFunc=u}var l=m.prototype;l.pointer=function(x,w,o,v){var u=this,f=u._gl,h=u._locations[u._index];f.vertexAttribPointer(h,u._dimension,x||f.FLOAT,!!w,o||0,v||0),f.enableVertexAttribArray(h)},l.set=function(p,x,w,o){return this._constFunc(this._locations[this._index],p,x,w,o)},Object.defineProperty(l,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=p|0,this._wrapper.program=null),p|0}});var g=[function(p,x,w){return w.length===void 0?p.vertexAttrib1f(x,w):p.vertexAttrib1fv(x,w)},function(p,x,w,o){return w.length===void 0?p.vertexAttrib2f(x,w,o):p.vertexAttrib2fv(x,w)},function(p,x,w,o,v){return w.length===void 0?p.vertexAttrib3f(x,w,o,v):p.vertexAttrib3fv(x,w)},function(p,x,w,o,v,u){return w.length===void 0?p.vertexAttrib4f(x,w,o,v,u):p.vertexAttrib4fv(x,w)}];function d(p,x,w,o,v,u,f){var h=g[v],r=new m(p,x,w,o,v,h);Object.defineProperty(u,f,{set:function(s){return p.disableVertexAttribArray(o[w]),h(p,o[w],s),s},get:function(){return r},enumerable:!0})}function E(p,x,w,o,v,u,f){for(var h=new Array(v),r=new Array(v),s=0;s<v;++s)d(p,x,w[s],o,v,h,s),r[s]=h[s];Object.defineProperty(h,"location",{set:function(i){if(Array.isArray(i))for(var e=0;e<v;++e)r[e].location=i[e];else for(var e=0;e<v;++e)r[e].location=i+e;return i},get:function(){for(var i=new Array(v),e=0;e<v;++e)i[e]=o[w[e]];return i},enumerable:!0}),h.pointer=function(i,e,T,b){i=i||p.FLOAT,e=!!e,T=T||v*v,b=b||0;for(var A=0;A<v;++A){var _=o[w[A]];p.vertexAttribPointer(_,v,i,e,T,b+A*v),p.enableVertexAttribArray(_)}};var n=new Array(v),t=p["vertexAttrib"+v+"fv"];Object.defineProperty(u,f,{set:function(i){for(var e=0;e<v;++e){var T=o[w[e]];if(p.disableVertexAttribArray(T),Array.isArray(i[0]))t.call(p,T,i[e]);else{for(var b=0;b<v;++b)n[b]=i[v*e+b];t.call(p,T,n)}}return i},get:function(){return h},enumerable:!0})}function M(p,x,w,o){for(var v={},u=0,f=w.length;u<f;++u){var h=w[u],r=h.name,s=h.type,n=h.locations;switch(s){case"bool":case"int":case"float":d(p,x,n[0],o,1,v,r);break;default:if(s.indexOf("vec")>=0){var t=s.charCodeAt(s.length-1)-48;if(t<2||t>4)throw new c("","Invalid data type for attribute "+r+": "+s);d(p,x,n[0],o,t,v,r)}else if(s.indexOf("mat")>=0){var t=s.charCodeAt(s.length-1)-48;if(t<2||t>4)throw new c("","Invalid data type for attribute "+r+": "+s);E(p,x,n,o,t,v,r)}else throw new c("","Unknown data type for attribute "+r+": "+s);break}}return v}},3327:function(L,F,a){var c=a(216),m=a(8866);L.exports=d;function l(E){return function(){return E}}function g(E,M){for(var p=new Array(E),x=0;x<E;++x)p[x]=M;return p}function d(E,M,p,x){function w(s){return function(n,t,i){return n.getUniform(t.program,i[s])}}function o(s){return function(t){for(var i=v("",s),e=0;e<i.length;++e){var T=i[e],b=T[0],A=T[1];if(x[A]){var _=t;if(typeof b=="string"&&(b.indexOf(".")===0||b.indexOf("[")===0)){var C=b;if(b.indexOf(".")===0&&(C=b.slice(1)),C.indexOf("]")===C.length-1){var S=C.indexOf("["),y=C.slice(0,S),R=C.slice(S+1,C.length-1);_=y?t[y][R]:t[R]}else _=t[C]}var O=p[A].type,P;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":E.uniform1i(x[A],_);break;case"float":E.uniform1f(x[A],_);break;default:var D=O.indexOf("vec");if(0<=D&&D<=1&&O.length===4+D){if(P=O.charCodeAt(O.length-1)-48,P<2||P>4)throw new m("","Invalid data type");switch(O.charAt(0)){case"b":case"i":E["uniform"+P+"iv"](x[A],_);break;case"v":E["uniform"+P+"fv"](x[A],_);break;default:throw new m("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(P=O.charCodeAt(O.length-1)-48,P<2||P>4)throw new m("","Invalid uniform dimension type for matrix "+name+": "+O);E["uniformMatrix"+P+"fv"](x[A],!1,_);break}else throw new m("","Unknown uniform data type for "+name+": "+O)}}}}}function v(s,n){if(typeof n!="object")return[[s,n]];var t=[];for(var i in n){var e=n[i],T=s;parseInt(i)+""===i?T+="["+i+"]":T+="."+i,typeof e=="object"?t.push.apply(t,v(T,e)):t.push([T,e])}return t}function u(s){switch(s){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var n=s.indexOf("vec");if(0<=n&&n<=1&&s.length===4+n){var t=s.charCodeAt(s.length-1)-48;if(t<2||t>4)throw new m("","Invalid data type");return s.charAt(0)==="b"?g(t,!1):g(t,0)}else if(s.indexOf("mat")===0&&s.length===4){var t=s.charCodeAt(s.length-1)-48;if(t<2||t>4)throw new m("","Invalid uniform dimension type for matrix "+name+": "+s);return g(t*t,0)}else throw new m("","Unknown uniform data type for "+name+": "+s)}}function f(s,n,t){if(typeof t=="object"){var i=h(t);Object.defineProperty(s,n,{get:l(i),set:o(t),enumerable:!0,configurable:!1})}else x[t]?Object.defineProperty(s,n,{get:w(t),set:o(t),enumerable:!0,configurable:!1}):s[n]=u(p[t].type)}function h(s){var n;if(Array.isArray(s)){n=new Array(s.length);for(var t=0;t<s.length;++t)f(n,t,s[t])}else{n={};for(var i in s)f(n,i,s[i])}return n}var r=c(p,!0);return{get:l(h(r)),set:o(r),enumerable:!0,configurable:!0}}},216:function(L){L.exports=F;function F(a,c){for(var m={},l=0;l<a.length;++l)for(var g=a[l].name,d=g.split("."),E=m,M=0;M<d.length;++M){var p=d[M].split("[");if(p.length>1){p[0]in E||(E[p[0]]=[]),E=E[p[0]];for(var x=1;x<p.length;++x){var w=parseInt(p[x]);x<p.length-1||M<d.length-1?(w in E||(x<p.length-1?E[w]=[]:E[w]={}),E=E[w]):c?E[w]=l:E[w]=a[l].type}}else M<d.length-1?(p[0]in E||(E[p[0]]={}),E=E[p[0]]):c?E[p[0]]=l:E[p[0]]=a[l].type}return m}},2145:function(L,F){F.uniforms=l,F.attributes=g;var a={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},c=null;function m(d,E){if(!c){var M=Object.keys(a);c={};for(var p=0;p<M.length;++p){var x=M[p];c[d[x]]=a[x]}}return c[E]}function l(d,E){for(var M=d.getProgramParameter(E,d.ACTIVE_UNIFORMS),p=[],x=0;x<M;++x){var w=d.getActiveUniform(E,x);if(w){var o=m(d,w.type);if(w.size>1)for(var v=0;v<w.size;++v)p.push({name:w.name.replace("[0]","["+v+"]"),type:o});else p.push({name:w.name,type:o})}}return p}function g(d,E){for(var M=d.getProgramParameter(E,d.ACTIVE_ATTRIBUTES),p=[],x=0;x<M;++x){var w=d.getActiveAttrib(E,x);w&&p.push({name:w.name,type:m(d,w.type)})}return p}},5091:function(L,F,a){F.shader=v,F.program=u;var c=a(8866),m=a(2992),l=typeof WeakMap>"u"?a(606):WeakMap,g=new l,d=0;function E(f,h,r,s,n,t,i){this.id=f,this.src=h,this.type=r,this.shader=s,this.count=t,this.programs=[],this.cache=i}E.prototype.dispose=function(){if(--this.count===0){for(var f=this.cache,h=f.gl,r=this.programs,s=0,n=r.length;s<n;++s){var t=f.programs[r[s]];t&&(delete f.programs[s],h.deleteProgram(t))}h.deleteShader(this.shader),delete f.shaders[this.type===h.FRAGMENT_SHADER|0][this.src]}};function M(f){this.gl=f,this.shaders=[{},{}],this.programs={}}var p=M.prototype;function x(f,h,r){var s=f.createShader(h);if(f.shaderSource(s,r),f.compileShader(s),!f.getShaderParameter(s,f.COMPILE_STATUS)){var n=f.getShaderInfoLog(s);try{var t=m(n,r,h)}catch(i){throw console.warn("Failed to format compiler error: "+i),new c(n,`Error compiling shader:
`+n)}throw new c(n,t.short,t.long)}return s}p.getShaderReference=function(f,h){var r=this.gl,s=this.shaders[f===r.FRAGMENT_SHADER|0],n=s[h];if(!n||!r.isShader(n.shader)){var t=x(r,f,h);n=s[h]=new E(d++,h,f,t,[],1,this)}else n.count+=1;return n};function w(f,h,r,s,n){var t=f.createProgram();f.attachShader(t,h),f.attachShader(t,r);for(var i=0;i<s.length;++i)f.bindAttribLocation(t,n[i],s[i]);if(f.linkProgram(t),!f.getProgramParameter(t,f.LINK_STATUS)){var e=f.getProgramInfoLog(t);throw new c(e,"Error linking program: "+e)}return t}p.getProgram=function(f,h,r,s){var n=[f.id,h.id,r.join(":"),s.join(":")].join("@"),t=this.programs[n];return(!t||!this.gl.isProgram(t))&&(this.programs[n]=t=w(this.gl,f.shader,h.shader,r,s),f.programs.push(n),h.programs.push(n)),t};function o(f){var h=g.get(f);return h||(h=new M(f),g.set(f,h)),h}function v(f,h,r){return o(f).getShaderReference(h,r)}function u(f,h,r,s,n){return o(f).getProgram(h,r,s,n)}},4098:function(L){L.exports=c;function F(m){this.plot=m,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=F.prototype;a.update=function(m){m=m||{},this.enable=(m.enable||[!0,!0,!1,!1]).slice(),this.width=(m.width||[1,1,1,1]).slice(),this.color=(m.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(m.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var m=this.enable,l=this.width,g=this.color,d=this.center,E=this.plot,M=E.line,p=E.dataBox,x=E.viewBox;if(M.bind(),p[0]<=d[0]&&d[0]<=p[2]&&p[1]<=d[1]&&d[1]<=p[3]){var w=x[0]+(d[0]-p[0])/(p[2]-p[0])*(x[2]-x[0]),o=x[1]+(d[1]-p[1])/(p[3]-p[1])*(x[3]-x[1]);m[0]&&M.drawLine(w,o,x[0],o,l[0],g[0]),m[1]&&M.drawLine(w,o,w,x[1],l[1],g[1]),m[2]&&M.drawLine(w,o,x[2],o,l[2],g[2]),m[3]&&M.drawLine(w,o,w,x[3],l[3],g[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function c(m,l){var g=new F(m);return g.update(l),m.addOverlay(g),g}},1493:function(L,F,a){var c=a(3236),m=a(9405),l=c([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),g=c([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);L.exports=function(d){return m(d,l,g,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(L,F,a){var c=a(2762),m=a(8116),l=a(1493);L.exports=w;var g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(o,v,u,f){this.gl=o,this.buffer=v,this.vao=u,this.shader=f,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var E=d.prototype,M=[0,0,0],p=[0,0,0],x=[0,0];E.isTransparent=function(){return!1},E.drawTransparent=function(o){},E.draw=function(o){var v=this.gl,u=this.vao,f=this.shader;u.bind(),f.bind();var h=o.model||g,r=o.view||g,s=o.projection||g,n;this.axes&&(n=this.axes.lastCubeProps.axis);for(var t=M,i=p,e=0;e<3;++e)n&&n[e]<0?(t[e]=this.bounds[0][e],i[e]=this.bounds[1][e]):(t[e]=this.bounds[1][e],i[e]=this.bounds[0][e]);x[0]=v.drawingBufferWidth,x[1]=v.drawingBufferHeight,f.uniforms.model=h,f.uniforms.view=r,f.uniforms.projection=s,f.uniforms.coordinates=[this.position,t,i],f.uniforms.colors=this.colors,f.uniforms.screenShape=x;for(var e=0;e<3;++e)f.uniforms.lineWidth=this.lineWidth[e]*this.pixelRatio,this.enabled[e]&&(u.draw(v.TRIANGLES,6,6*e),this.drawSides[e]&&u.draw(v.TRIANGLES,12,18+12*e));u.unbind()},E.update=function(o){o&&("bounds"in o&&(this.bounds=o.bounds),"position"in o&&(this.position=o.position),"lineWidth"in o&&(this.lineWidth=o.lineWidth),"colors"in o&&(this.colors=o.colors),"enabled"in o&&(this.enabled=o.enabled),"drawSides"in o&&(this.drawSides=o.drawSides))},E.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function w(o,v){var u=[];function f(t,i,e,T,b,A){var _=[t,i,e,0,0,0,1];_[T+3]=1,_[T]=b,u.push.apply(u,_),_[6]=-1,u.push.apply(u,_),_[T]=A,u.push.apply(u,_),u.push.apply(u,_),_[6]=1,u.push.apply(u,_),_[T]=b,u.push.apply(u,_)}f(0,0,0,0,0,1),f(0,0,0,1,0,1),f(0,0,0,2,0,1),f(1,0,0,1,-1,1),f(1,0,0,2,-1,1),f(0,1,0,0,-1,1),f(0,1,0,2,-1,1),f(0,0,1,0,-1,1),f(0,0,1,1,-1,1);var h=c(o,u),r=m(o,[{type:o.FLOAT,buffer:h,size:3,offset:0,stride:28},{type:o.FLOAT,buffer:h,size:3,offset:12,stride:28},{type:o.FLOAT,buffer:h,size:1,offset:24,stride:28}]),s=l(o);s.attributes.position.location=0,s.attributes.color.location=1,s.attributes.weight.location=2;var n=new d(o,h,r,s);return n.update(v),n}},6740:function(L,F,a){var c=a(3236),m=c([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),l=c([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),g=c([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),d=c([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);F.meshShader={vertex:m,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},F.pickShader={vertex:g,fragment:d,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(L,F,a){var c=a(2931),m=a(9970),l=["xyz","xzy","yxz","yzx","zxy","zyx"],g=function(u,f,h,r){for(var s=u.points,n=u.velocities,t=u.divergences,i=[],e=[],T=[],b=[],A=[],_=[],C=0,S=0,y=m.create(),R=m.create(),O=8,P=0;P<s.length;P++){var D=s[P],H=n[P],G=t[P];f===0&&(G=h*.05),S=c.length(H)/r,y=m.create(),c.copy(y,H),y[3]=G;for(var B=0;B<O;B++)A[B]=[D[0],D[1],D[2],B];if(b.length>0)for(var B=0;B<O;B++){var I=(B+1)%O;i.push(b[B],A[B],A[I],A[I],b[I],b[B]),T.push(R,y,y,y,R,R),_.push(C,S,S,S,C,C);var N=i.length;e.push([N-6,N-5,N-4],[N-3,N-2,N-1])}var $=b;b=A,A=$;var U=R;R=y,y=U;var K=C;C=S,S=K}return{positions:i,cells:e,vectors:T,vertexIntensity:_}},d=function(u,f,h,r){for(var s=0,n=0;n<u.length;n++)for(var t=u[n].velocities,i=0;i<t.length;i++)s=Math.max(s,c.length(t[i]));for(var e=u.map(function(P){return g(P,h,r,s)}),T=[],b=[],A=[],_=[],n=0;n<e.length;n++){var C=e[n],S=T.length;T=T.concat(C.positions),A=A.concat(C.vectors),_=_.concat(C.vertexIntensity);for(var i=0;i<C.cells.length;i++){var y=C.cells[i],R=[];b.push(R);for(var O=0;O<y.length;O++)R.push(y[O]+S)}}return{positions:T,cells:b,vectors:A,vertexIntensity:_,colormap:f}},E=function(u,f){var h=u.length,r;for(r=0;r<h;r++){var s=u[r];if(s===f)return r;if(s>f)return r-1}return r},M=function(u,f,h){return u<f?f:u>h?h:u},p=function(u,f,h){var r=f.vectors,s=f.meshgrid,n=u[0],t=u[1],i=u[2],e=s[0].length,T=s[1].length,b=s[2].length,A=E(s[0],n),_=E(s[1],t),C=E(s[2],i),S=A+1,y=_+1,R=C+1;if(A=M(A,0,e-1),S=M(S,0,e-1),_=M(_,0,T-1),y=M(y,0,T-1),C=M(C,0,b-1),R=M(R,0,b-1),A<0||_<0||C<0||S>e-1||y>T-1||R>b-1)return c.create();var O=s[0][A],P=s[0][S],D=s[1][_],H=s[1][y],G=s[2][C],B=s[2][R],I=(n-O)/(P-O),N=(t-D)/(H-D),$=(i-G)/(B-G);isFinite(I)||(I=.5),isFinite(N)||(N=.5),isFinite($)||($=.5);var U,K,W,Y,j,X;switch(h.reversedX&&(A=e-1-A,S=e-1-S),h.reversedY&&(_=T-1-_,y=T-1-y),h.reversedZ&&(C=b-1-C,R=b-1-R),h.filled){case 5:j=C,X=R,W=_*b,Y=y*b,U=A*b*T,K=S*b*T;break;case 4:j=C,X=R,U=A*b,K=S*b,W=_*b*e,Y=y*b*e;break;case 3:W=_,Y=y,j=C*T,X=R*T,U=A*T*b,K=S*T*b;break;case 2:W=_,Y=y,U=A*T,K=S*T,j=C*T*e,X=R*T*e;break;case 1:U=A,K=S,j=C*e,X=R*e,W=_*e*b,Y=y*e*b;break;default:U=A,K=S,W=_*e,Y=y*e,j=C*e*T,X=R*e*T;break}var Q=r[U+W+j],q=r[U+W+X],it=r[U+Y+j],ft=r[U+Y+X],at=r[K+W+j],rt=r[K+W+X],ht=r[K+Y+j],ot=r[K+Y+X],vt=c.create(),lt=c.create(),ut=c.create(),mt=c.create();c.lerp(vt,Q,at,I),c.lerp(lt,q,rt,I),c.lerp(ut,it,ht,I),c.lerp(mt,ft,ot,I);var Et=c.create(),ct=c.create();c.lerp(Et,vt,ut,N),c.lerp(ct,lt,mt,N);var xt=c.create();return c.lerp(xt,Et,ct,$),xt},x=function(u){var f=1/0;u.sort(function(n,t){return n-t});for(var h=u.length,r=1;r<h;r++){var s=Math.abs(u[r]-u[r-1]);s<f&&(f=s)}return f},w=function(u){for(var f=[],h=[],r=[],s={},n={},t={},i=u.length,e=0;e<i;e++){var T=u[e],b=T[0],A=T[1],_=T[2];s[b]||(f.push(b),s[b]=!0),n[A]||(h.push(A),n[A]=!0),t[_]||(r.push(_),t[_]=!0)}var C=x(f),S=x(h),y=x(r),R=Math.min(C,S,y);return isFinite(R)?R:1};L.exports=function(u,f){var h=u.startingPositions,r=u.maxLength||1e3,s=u.tubeSize||1,n=u.absoluteTubeSize,t=u.gridFill||"+x+y+z",i={};t.indexOf("-x")!==-1&&(i.reversedX=!0),t.indexOf("-y")!==-1&&(i.reversedY=!0),t.indexOf("-z")!==-1&&(i.reversedZ=!0),i.filled=l.indexOf(t.replace(/-/g,"").replace(/\+/g,""));var e=u.getVelocity||function(rt){return p(rt,u,i)},T=u.getDivergence||function(rt,ht){var ot=c.create(),vt=1e-4;c.add(ot,rt,[vt,0,0]);var lt=e(ot);c.subtract(lt,lt,ht),c.scale(lt,lt,1/vt),c.add(ot,rt,[0,vt,0]);var ut=e(ot);c.subtract(ut,ut,ht),c.scale(ut,ut,1/vt),c.add(ot,rt,[0,0,vt]);var mt=e(ot);return c.subtract(mt,mt,ht),c.scale(mt,mt,1/vt),c.add(ot,lt,ut),c.add(ot,ot,mt),ot},b=[],A=f[0][0],_=f[0][1],C=f[0][2],S=f[1][0],y=f[1][1],R=f[1][2],O=function(rt){var ht=rt[0],ot=rt[1],vt=rt[2];return!(ht<A||ht>S||ot<_||ot>y||vt<C||vt>R)},P=c.distance(f[0],f[1]),D=10*P/r,H=D*D,G=1,B=0,I=h.length;I>1&&(G=w(h));for(var N=0;N<I;N++){var $=c.create();c.copy($,h[N]);var U=[$],K=[],W=e($),Y=$;K.push(W);var j=[],X=T($,W),Q=c.length(X);isFinite(Q)&&Q>B&&(B=Q),j.push(Q),b.push({points:U,velocities:K,divergences:j});for(var q=0;q<r*100&&U.length<r&&O($);){q++;var it=c.clone(W),ft=c.squaredLength(it);if(ft===0)break;if(ft>H&&c.scale(it,it,D/Math.sqrt(ft)),c.add(it,it,$),W=e(it),c.squaredDistance(Y,it)-H>-1e-4*H){U.push(it),Y=it,K.push(W);var X=T(it,W),Q=c.length(X);isFinite(Q)&&Q>B&&(B=Q),j.push(Q)}$=it}}var at=d(b,u.colormap,B,G);return n?at.tubeScale=n:(B===0&&(B=1),at.tubeScale=s*.5*G/B),at};var o=a(6740),v=a(6405).createMesh;L.exports.createTubeMesh=function(u,f){return v(u,f,{shaders:o,traceType:"streamtube"})}},990:function(L,F,a){var c=a(9405),m=a(3236),l=m([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),g=m([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),d=m([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),E=m([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);F.createShader=function(M){var p=c(M,l,g,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p.attributes.normal.location=2,p},F.createPickShader=function(M){var p=c(M,l,E,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p.attributes.normal.location=2,p},F.createContourShader=function(M){var p=c(M,d,g,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p},F.createPickContourShader=function(M){var p=c(M,d,E,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p}},9499:function(L,F,a){L.exports=K;var c=a(8828),m=a(2762),l=a(8116),g=a(7766),d=a(1888),E=a(6729),M=a(5298),p=a(9994),x=a(9618),w=a(3711),o=a(6760),v=a(7608),u=a(2478),f=a(6199),h=a(990),r=h.createShader,s=h.createContourShader,n=h.createPickShader,t=h.createPickContourShader,i=4*10,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],b=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var W=0;W<3;++W){var Y=b[W],j=(W+1)%3,X=(W+2)%3;Y[j+0]=1,Y[X+3]=1,Y[W+6]=1}})();function A(W,Y,j,X,Q){this.position=W,this.index=Y,this.uv=j,this.level=X,this.dataCoordinate=Q}var _=256;function C(W,Y,j,X,Q,q,it,ft,at,rt,ht,ot,vt,lt,ut){this.gl=W,this.shape=Y,this.bounds=j,this.objectOffset=ut,this.intensityBounds=[],this._shader=X,this._pickShader=Q,this._coordinateBuffer=q,this._vao=it,this._colorMap=ft,this._contourShader=at,this._contourPickShader=rt,this._contourBuffer=ht,this._contourVAO=ot,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new A([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=vt,this._dynamicVAO=lt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(d.mallocFloat(1024),[0,0]),x(d.mallocFloat(1024),[0,0]),x(d.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var S=C.prototype;S.genColormap=function(W,Y){var j=!1,X=p([E({colormap:W,nshades:_,format:"rgba"}).map(function(Q,q){var it=Y?y(q/255,Y):Q[3];return it<1&&(j=!0),[Q[0],Q[1],Q[2],255*it]})]);return M.divseq(X,255),this.hasAlphaScale=j,X},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(W){this.pickId=W};function y(W,Y){if(!Y||!Y.length)return 1;for(var j=0;j<Y.length;++j){if(Y.length<2)return 1;if(Y[j][0]===W)return Y[j][1];if(Y[j][0]>W&&j>0){var X=(Y[j][0]-W)/(Y[j][0]-Y[j-1][0]);return Y[j][1]*(1-X)+X*Y[j-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[e.slice(),e.slice(),e.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function P(W,Y){var j,X,Q,q=Y.axes&&Y.axes.lastCubeProps.axis||R,it=Y.showSurface,ft=Y.showContour;for(j=0;j<3;++j)for(it=it||Y.surfaceProject[j],X=0;X<3;++X)ft=ft||Y.contourProject[j][X];for(j=0;j<3;++j){var at=O.projections[j];for(X=0;X<16;++X)at[X]=0;for(X=0;X<4;++X)at[5*X]=1;at[5*j]=0,at[12+j]=Y.axesBounds[+(q[j]>0)][j],o(at,W.model,at);var rt=O.clipBounds[j];for(Q=0;Q<2;++Q)for(X=0;X<3;++X)rt[Q][X]=W.clipBounds[Q][X];rt[0][j]=-1e8,rt[1][j]=1e8}return O.showSurface=it,O.showContour=ft,O}var D={model:e,view:e,projection:e,inverseModel:e.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},H=e.slice(),G=[1,0,0,0,1,0,0,0,1];function B(W,Y){W=W||{};var j=this.gl;j.disable(j.CULL_FACE),this._colorMap.bind(0);var X=D;X.model=W.model||e,X.view=W.view||e,X.projection=W.projection||e,X.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],X.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],X.objectOffset=this.objectOffset,X.contourColor=this.contourColor[0],X.inverseModel=v(X.inverseModel,X.model);for(var Q=0;Q<2;++Q)for(var q=X.clipBounds[Q],it=0;it<3;++it)q[it]=Math.min(Math.max(this.clipBounds[Q][it],-1e8),1e8);X.kambient=this.ambientLight,X.kdiffuse=this.diffuseLight,X.kspecular=this.specularLight,X.roughness=this.roughness,X.fresnel=this.fresnel,X.opacity=this.opacity,X.height=0,X.permutation=G,X.vertexColor=this.vertexColor;var ft=H;for(o(ft,X.view,X.model),o(ft,X.projection,ft),v(ft,ft),Q=0;Q<3;++Q)X.eyePosition[Q]=ft[12+Q]/ft[15];var at=ft[15];for(Q=0;Q<3;++Q)at+=this.lightPosition[Q]*ft[4*Q+3];for(Q=0;Q<3;++Q){var rt=ft[12+Q];for(it=0;it<3;++it)rt+=ft[4*it+Q]*this.lightPosition[it];X.lightPosition[Q]=rt/at}var ht=P(X,this);if(ht.showSurface){for(this._shader.bind(),this._shader.uniforms=X,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(j.TRIANGLES,this._vertexCount),Q=0;Q<3;++Q)!this.surfaceProject[Q]||!this.vertexCount||(this._shader.uniforms.model=ht.projections[Q],this._shader.uniforms.clipBounds=ht.clipBounds[Q],this._vao.draw(j.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ht.showContour){var ot=this._contourShader;X.kambient=1,X.kdiffuse=0,X.kspecular=0,X.opacity=1,ot.bind(),ot.uniforms=X;var vt=this._contourVAO;for(vt.bind(),Q=0;Q<3;++Q)for(ot.uniforms.permutation=b[Q],j.lineWidth(this.contourWidth[Q]*this.pixelRatio),it=0;it<this.contourLevels[Q].length;++it)it===this.highlightLevel[Q]?(ot.uniforms.contourColor=this.highlightColor[Q],ot.uniforms.contourTint=this.highlightTint[Q]):(it===0||it-1===this.highlightLevel[Q])&&(ot.uniforms.contourColor=this.contourColor[Q],ot.uniforms.contourTint=this.contourTint[Q]),this._contourCounts[Q][it]&&(ot.uniforms.height=this.contourLevels[Q][it],vt.draw(j.LINES,this._contourCounts[Q][it],this._contourOffsets[Q][it]));for(Q=0;Q<3;++Q)for(ot.uniforms.model=ht.projections[Q],ot.uniforms.clipBounds=ht.clipBounds[Q],it=0;it<3;++it)if(this.contourProject[Q][it]){ot.uniforms.permutation=b[it],j.lineWidth(this.contourWidth[it]*this.pixelRatio);for(var lt=0;lt<this.contourLevels[it].length;++lt)lt===this.highlightLevel[it]?(ot.uniforms.contourColor=this.highlightColor[it],ot.uniforms.contourTint=this.highlightTint[it]):(lt===0||lt-1===this.highlightLevel[it])&&(ot.uniforms.contourColor=this.contourColor[it],ot.uniforms.contourTint=this.contourTint[it]),this._contourCounts[it][lt]&&(ot.uniforms.height=this.contourLevels[it][lt],vt.draw(j.LINES,this._contourCounts[it][lt],this._contourOffsets[it][lt]))}for(vt.unbind(),vt=this._dynamicVAO,vt.bind(),Q=0;Q<3;++Q)if(this._dynamicCounts[Q]!==0)for(ot.uniforms.model=X.model,ot.uniforms.clipBounds=X.clipBounds,ot.uniforms.permutation=b[Q],j.lineWidth(this.dynamicWidth[Q]*this.pixelRatio),ot.uniforms.contourColor=this.dynamicColor[Q],ot.uniforms.contourTint=this.dynamicTint[Q],ot.uniforms.height=this.dynamicLevel[Q],vt.draw(j.LINES,this._dynamicCounts[Q],this._dynamicOffsets[Q]),it=0;it<3;++it)this.contourProject[it][Q]&&(ot.uniforms.model=ht.projections[it],ot.uniforms.clipBounds=ht.clipBounds[it],vt.draw(j.LINES,this._dynamicCounts[Q],this._dynamicOffsets[Q]));vt.unbind()}}S.draw=function(W){return B.call(this,W,!1)},S.drawTransparent=function(W){return B.call(this,W,!0)};var I={model:e,view:e,projection:e,inverseModel:e,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};S.drawPick=function(W){W=W||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var j=I;j.model=W.model||e,j.view=W.view||e,j.projection=W.projection||e,j.shape=this._field[2].shape,j.pickId=this.pickId/255,j.lowerBound=this.bounds[0],j.upperBound=this.bounds[1],j.objectOffset=this.objectOffset,j.permutation=G;for(var X=0;X<2;++X)for(var Q=j.clipBounds[X],q=0;q<3;++q)Q[q]=Math.min(Math.max(this.clipBounds[X][q],-1e8),1e8);var it=P(j,this);if(it.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=j,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),X=0;X<3;++X)this.surfaceProject[X]&&(this._pickShader.uniforms.model=it.projections[X],this._pickShader.uniforms.clipBounds=it.clipBounds[X],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(it.showContour){var ft=this._contourPickShader;ft.bind(),ft.uniforms=j;var at=this._contourVAO;for(at.bind(),q=0;q<3;++q)for(Y.lineWidth(this.contourWidth[q]*this.pixelRatio),ft.uniforms.permutation=b[q],X=0;X<this.contourLevels[q].length;++X)this._contourCounts[q][X]&&(ft.uniforms.height=this.contourLevels[q][X],at.draw(Y.LINES,this._contourCounts[q][X],this._contourOffsets[q][X]));for(X=0;X<3;++X)for(ft.uniforms.model=it.projections[X],ft.uniforms.clipBounds=it.clipBounds[X],q=0;q<3;++q)if(this.contourProject[X][q]){ft.uniforms.permutation=b[q],Y.lineWidth(this.contourWidth[q]*this.pixelRatio);for(var rt=0;rt<this.contourLevels[q].length;++rt)this._contourCounts[q][rt]&&(ft.uniforms.height=this.contourLevels[q][rt],at.draw(Y.LINES,this._contourCounts[q][rt],this._contourOffsets[q][rt]))}at.unbind()}},S.pick=function(W){if(!W||W.id!==this.pickId)return null;var Y=this._field[2].shape,j=this._pickResult,X=Y[0]*(W.value[0]+(W.value[2]>>4)/16)/255,Q=Math.floor(X),q=X-Q,it=Y[1]*(W.value[1]+(W.value[2]&15)/16)/255,ft=Math.floor(it),at=it-ft;Q+=1,ft+=1;var rt=j.position;rt[0]=rt[1]=rt[2]=0;for(var ht=0;ht<2;++ht)for(var ot=ht?q:1-q,vt=0;vt<2;++vt)for(var lt=vt?at:1-at,ut=Q+ht,mt=ft+vt,Et=ot*lt,ct=0;ct<3;++ct)rt[ct]+=this._field[ct].get(ut,mt)*Et;for(var xt=this._pickResult.level,pt=0;pt<3;++pt)if(xt[pt]=u.le(this.contourLevels[pt],rt[pt]),xt[pt]<0)this.contourLevels[pt].length>0&&(xt[pt]=0);else if(xt[pt]<this.contourLevels[pt].length-1){var Mt=this.contourLevels[pt][xt[pt]],At=this.contourLevels[pt][xt[pt]+1];Math.abs(Mt-rt[pt])>Math.abs(At-rt[pt])&&(xt[pt]+=1)}for(j.index[0]=q<.5?Q:Q+1,j.index[1]=at<.5?ft:ft+1,j.uv[0]=X/Y[0],j.uv[1]=it/Y[1],ct=0;ct<3;++ct)j.dataCoordinate[ct]=this._field[ct].get(j.index[0],j.index[1]);return j},S.padField=function(W,Y){var j=Y.shape.slice(),X=W.shape.slice();M.assign(W.lo(1,1).hi(j[0],j[1]),Y),M.assign(W.lo(1).hi(j[0],1),Y.hi(j[0],1)),M.assign(W.lo(1,X[1]-1).hi(j[0],1),Y.lo(0,j[1]-1).hi(j[0],1)),M.assign(W.lo(0,1).hi(1,j[1]),Y.hi(1)),M.assign(W.lo(X[0]-1,1).hi(1,j[1]),Y.lo(j[0]-1)),W.set(0,0,Y.get(0,0)),W.set(0,X[1]-1,Y.get(0,j[1]-1)),W.set(X[0]-1,0,Y.get(j[0]-1,0)),W.set(X[0]-1,X[1]-1,Y.get(j[0]-1,j[1]-1))};function N(W,Y){return Array.isArray(W)?[Y(W[0]),Y(W[1]),Y(W[2])]:[Y(W),Y(W),Y(W)]}function $(W){return Array.isArray(W)?W.length===3?[W[0],W[1],W[2],1]:[W[0],W[1],W[2],W[3]]:[0,0,0,1]}function U(W){if(Array.isArray(W)){if(Array.isArray(W))return[$(W[0]),$(W[1]),$(W[2])];var Y=$(W);return[Y.slice(),Y.slice(),Y.slice()]}}S.update=function(W){W=W||{},this.objectOffset=W.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in W&&(this.contourWidth=N(W.contourWidth,Number)),"showContour"in W&&(this.showContour=N(W.showContour,Boolean)),"showSurface"in W&&(this.showSurface=!!W.showSurface),"contourTint"in W&&(this.contourTint=N(W.contourTint,Boolean)),"contourColor"in W&&(this.contourColor=U(W.contourColor)),"contourProject"in W&&(this.contourProject=N(W.contourProject,function(fe){return N(fe,Boolean)})),"surfaceProject"in W&&(this.surfaceProject=W.surfaceProject),"dynamicColor"in W&&(this.dynamicColor=U(W.dynamicColor)),"dynamicTint"in W&&(this.dynamicTint=N(W.dynamicTint,Number)),"dynamicWidth"in W&&(this.dynamicWidth=N(W.dynamicWidth,Number)),"opacity"in W&&(this.opacity=W.opacity),"opacityscale"in W&&(this.opacityscale=W.opacityscale),"colorBounds"in W&&(this.colorBounds=W.colorBounds),"vertexColor"in W&&(this.vertexColor=W.vertexColor?1:0),"colormap"in W&&this._colorMap.setPixels(this.genColormap(W.colormap,this.opacityscale));var Y=W.field||W.coords&&W.coords[2]||null,j=!1;if(Y||(this._field[2].shape[0]||this._field[2].shape[2]?Y=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Y=this._field[2].hi(0,0)),"field"in W||"coords"in W){var X=(Y.shape[0]+2)*(Y.shape[1]+2);X>this._field[2].data.length&&(d.freeFloat(this._field[2].data),this._field[2].data=d.mallocFloat(c.nextPow2(X))),this._field[2]=x(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var Q=this.shape,q=0;q<2;++q)this._field[2].size>this._field[q].data.length&&(d.freeFloat(this._field[q].data),this._field[q].data=d.mallocFloat(this._field[2].size)),this._field[q]=x(this._field[q].data,[Q[0]+2,Q[1]+2]);if(W.coords){var it=W.coords;if(!Array.isArray(it)||it.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(q=0;q<2;++q){var ft=it[q];for(vt=0;vt<2;++vt)if(ft.shape[vt]!==Q[vt])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[q],ft)}}else if(W.ticks){var at=W.ticks;if(!Array.isArray(at)||at.length!==2)throw new Error("gl-surface: invalid ticks");for(q=0;q<2;++q){var rt=at[q];if((Array.isArray(rt)||rt.length)&&(rt=x(rt)),rt.shape[0]!==Q[q])throw new Error("gl-surface: invalid tick length");var ht=x(rt.data,Q);ht.stride[q]=rt.stride[0],ht.stride[q^1]=0,this.padField(this._field[q],ht)}}else{for(q=0;q<2;++q){var ot=[0,0];ot[q]=1,this._field[q]=x(this._field[q].data,[Q[0]+2,Q[1]+2],ot,0)}this._field[0].set(0,0,0);for(var vt=0;vt<Q[0];++vt)this._field[0].set(vt+1,0,vt);for(this._field[0].set(Q[0]+1,0,Q[0]-1),this._field[1].set(0,0,0),vt=0;vt<Q[1];++vt)this._field[1].set(0,vt+1,vt);this._field[1].set(0,Q[1]+1,Q[1]-1)}var lt=this._field,ut=x(d.mallocFloat(lt[2].size*3*2),[3,Q[0]+2,Q[1]+2,2]);for(q=0;q<3;++q)f(ut.pick(q),lt[q],"mirror");var mt=x(d.mallocFloat(lt[2].size*3),[Q[0]+2,Q[1]+2,3]);for(q=0;q<Q[0]+2;++q)for(vt=0;vt<Q[1]+2;++vt){var Et=ut.get(0,q,vt,0),ct=ut.get(0,q,vt,1),xt=ut.get(1,q,vt,0),pt=ut.get(1,q,vt,1),Mt=ut.get(2,q,vt,0),At=ut.get(2,q,vt,1),wt=xt*At-pt*Mt,dt=Mt*ct-At*Et,gt=Et*pt-ct*xt,Tt=Math.sqrt(wt*wt+dt*dt+gt*gt);Tt<1e-8?(Tt=Math.max(Math.abs(wt),Math.abs(dt),Math.abs(gt)),Tt<1e-8?(gt=1,dt=wt=0,Tt=1):Tt=1/Tt):Tt=1/Math.sqrt(Tt),mt.set(q,vt,0,wt*Tt),mt.set(q,vt,1,dt*Tt),mt.set(q,vt,2,gt*Tt)}d.free(ut.data);var _t=[1/0,1/0,1/0],Bt=[-1/0,-1/0,-1/0],Lt=1/0,St=-1/0,Ft=(Q[0]-1)*(Q[1]-1)*6,Ot=d.mallocFloat(c.nextPow2(10*Ft)),It=0,Yt=0;for(q=0;q<Q[0]-1;++q)t:for(vt=0;vt<Q[1]-1;++vt){for(var J=0;J<2;++J)for(var k=0;k<2;++k)for(var z=0;z<3;++z){var et=this._field[z].get(1+q+J,1+vt+k);if(isNaN(et)||!isFinite(et))continue t}for(z=0;z<6;++z){var st=q+T[z][0],yt=vt+T[z][1],bt=this._field[0].get(st+1,yt+1),Rt=this._field[1].get(st+1,yt+1);et=this._field[2].get(st+1,yt+1),wt=mt.get(st+1,yt+1,0),dt=mt.get(st+1,yt+1,1),gt=mt.get(st+1,yt+1,2),W.intensity&&(Nt=W.intensity.get(st,yt));var Nt=W.intensity?W.intensity.get(st,yt):et+this.objectOffset[2];Ot[It++]=st,Ot[It++]=yt,Ot[It++]=bt,Ot[It++]=Rt,Ot[It++]=et,Ot[It++]=0,Ot[It++]=Nt,Ot[It++]=wt,Ot[It++]=dt,Ot[It++]=gt,_t[0]=Math.min(_t[0],bt+this.objectOffset[0]),_t[1]=Math.min(_t[1],Rt+this.objectOffset[1]),_t[2]=Math.min(_t[2],et+this.objectOffset[2]),Lt=Math.min(Lt,Nt),Bt[0]=Math.max(Bt[0],bt+this.objectOffset[0]),Bt[1]=Math.max(Bt[1],Rt+this.objectOffset[1]),Bt[2]=Math.max(Bt[2],et+this.objectOffset[2]),St=Math.max(St,Nt),Yt+=1}}for(W.intensityBounds&&(Lt=+W.intensityBounds[0],St=+W.intensityBounds[1]),q=6;q<It;q+=10)Ot[q]=(Ot[q]-Lt)/(St-Lt);this._vertexCount=Yt,this._coordinateBuffer.update(Ot.subarray(0,It)),d.freeFloat(Ot),d.free(mt.data),this.bounds=[_t,Bt],this.intensity=W.intensity||this._field[2],(this.intensityBounds[0]!==Lt||this.intensityBounds[1]!==St)&&(j=!0),this.intensityBounds=[Lt,St]}if("levels"in W){var Ct=W.levels;for(Array.isArray(Ct[0])?Ct=Ct.slice():Ct=[[],[],Ct],q=0;q<3;++q)Ct[q]=Ct[q].slice(),Ct[q].sort(function(fe,Ae){return fe-Ae});for(q=0;q<3;++q)for(vt=0;vt<Ct[q].length;++vt)Ct[q][vt]-=this.objectOffset[q];t:for(q=0;q<3;++q){if(Ct[q].length!==this.contourLevels[q].length){j=!0;break}for(vt=0;vt<Ct[q].length;++vt)if(Ct[q][vt]!==this.contourLevels[q][vt]){j=!0;break t}}this.contourLevels=Ct}if(j){lt=this._field,Q=this.shape;for(var Pt=[],zt=0;zt<3;++zt){var kt=this.contourLevels[zt],Dt=[],Jt=[],Ut=[0,0,0];for(q=0;q<kt.length;++q){var Ht=w(this._field[zt],kt[q]);Dt.push(Pt.length/5|0),Yt=0;t:for(vt=0;vt<Ht.cells.length;++vt){var Ie=Ht.cells[vt];for(z=0;z<2;++z){var Vt=Ht.positions[Ie[z]],Gt=Vt[0],we=Math.floor(Gt)|0,Wt=Gt-we,Xt=Vt[1],le=Math.floor(Xt)|0,ue=Xt-le,ve=!1;e:for(var re=0;re<3;++re){Ut[re]=0;var me=(zt+re+1)%3;for(J=0;J<2;++J){var Ee=J?Wt:1-Wt;for(st=Math.min(Math.max(we+J,0),Q[0])|0,k=0;k<2;++k){var Me=k?ue:1-ue;if(yt=Math.min(Math.max(le+k,0),Q[1])|0,re<2?et=this._field[me].get(st,yt):et=(this.intensity.get(st,yt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(et)||isNaN(et)){ve=!0;break e}var Te=Ee*Me;Ut[re]+=Te*et}}}if(!ve)Pt.push(Ut[0],Ut[1],Vt[0],Vt[1],Ut[2]),Yt+=1;else{if(z>0){for(var ce=0;ce<5;++ce)Pt.pop();Yt-=1}continue t}}}Jt.push(Yt)}this._contourOffsets[zt]=Dt,this._contourCounts[zt]=Jt}var se=d.mallocFloat(Pt.length);for(q=0;q<Pt.length;++q)se[q]=Pt[q];this._contourBuffer.update(se),d.freeFloat(se)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var W=0;W<3;++W)d.freeFloat(this._field[W].data)},S.highlight=function(W){var Y;if(!W){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=W.level[Y]:this.highlightLevel[Y]=-1;var j;for(this.snapToData?j=W.dataCoordinate:j=W.position,Y=0;Y<3;++Y)j[Y]-=this.objectOffset[Y];if(!((!this.enableDynamic[0]||j[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||j[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||j[2]===this.dynamicLevel[2]))){for(var X=0,Q=this.shape,q=d.mallocFloat(12*Q[0]*Q[1]),it=0;it<3;++it){if(!this.enableDynamic[it]){this.dynamicLevel[it]=NaN,this._dynamicCounts[it]=0;continue}this.dynamicLevel[it]=j[it];var ft=(it+1)%3,at=(it+2)%3,rt=this._field[it],ht=this._field[ft],ot=this._field[at],vt=w(rt,j[it]),lt=vt.cells,ut=vt.positions;for(this._dynamicOffsets[it]=X,Y=0;Y<lt.length;++Y)for(var mt=lt[Y],Et=0;Et<2;++Et){var ct=ut[mt[Et]],xt=+ct[0],pt=xt|0,Mt=Math.min(pt+1,Q[0])|0,At=xt-pt,wt=1-At,dt=+ct[1],gt=dt|0,Tt=Math.min(gt+1,Q[1])|0,_t=dt-gt,Bt=1-_t,Lt=wt*Bt,St=wt*_t,Ft=At*Bt,Ot=At*_t,It=Lt*ht.get(pt,gt)+St*ht.get(pt,Tt)+Ft*ht.get(Mt,gt)+Ot*ht.get(Mt,Tt),Yt=Lt*ot.get(pt,gt)+St*ot.get(pt,Tt)+Ft*ot.get(Mt,gt)+Ot*ot.get(Mt,Tt);if(isNaN(It)||isNaN(Yt)){Et&&(X-=1);break}q[2*X+0]=It,q[2*X+1]=Yt,X+=1}this._dynamicCounts[it]=X-this._dynamicOffsets[it]}this._dynamicBuffer.update(q.subarray(0,2*X)),d.freeFloat(q)}};function K(W){var Y=W.gl,j=r(Y),X=n(Y),Q=s(Y),q=t(Y),it=m(Y),ft=l(Y,[{buffer:it,size:4,stride:i,offset:0},{buffer:it,size:3,stride:i,offset:16},{buffer:it,size:3,stride:i,offset:28}]),at=m(Y),rt=l(Y,[{buffer:at,size:4,stride:20,offset:0},{buffer:at,size:1,stride:20,offset:16}]),ht=m(Y),ot=l(Y,[{buffer:ht,size:2,type:Y.FLOAT}]),vt=g(Y,1,_,Y.RGBA,Y.UNSIGNED_BYTE);vt.minFilter=Y.LINEAR,vt.magFilter=Y.LINEAR;var lt=new C(Y,[0,0],[[0,0,0],[0,0,0]],j,X,it,ft,vt,Q,q,at,rt,ht,ot,[0,0,0]),ut={levels:[[],[],[]]};for(var mt in W)ut[mt]=W[mt];return ut.colormap=ut.colormap||"jet",lt.update(ut),lt}},7766:function(L,F,a){var c=a(9618),m=a(5298),l=a(1888);L.exports=t;var g=null,d=null,E=null;function M(i){g=[i.LINEAR,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_NEAREST],d=[i.NEAREST,i.LINEAR,i.NEAREST_MIPMAP_NEAREST,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_LINEAR],E=[i.REPEAT,i.CLAMP_TO_EDGE,i.MIRRORED_REPEAT]}function p(i){return typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement||typeof ImageData<"u"&&i instanceof ImageData}var x=function(i,e){m.muls(i,e,255)};function w(i,e,T){var b=i.gl,A=b.getParameter(b.MAX_TEXTURE_SIZE);if(e<0||e>A||T<0||T>A)throw new Error("gl-texture2d: Invalid texture size");return i._shape=[e,T],i.bind(),b.texImage2D(b.TEXTURE_2D,0,i.format,e,T,0,i.format,i.type,null),i._mipLevels=[0],i}function o(i,e,T,b,A,_){this.gl=i,this.handle=e,this.format=A,this.type=_,this._shape=[T,b],this._mipLevels=[0],this._magFilter=i.NEAREST,this._minFilter=i.NEAREST,this._wrapS=i.CLAMP_TO_EDGE,this._wrapT=i.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return C._wrapS},set:function(R){return C.wrapS=R}},{get:function(){return C._wrapT},set:function(R){return C.wrapT=R}}]),this._wrapVector=S;var y=[this._shape[0],this._shape[1]];Object.defineProperties(y,[{get:function(){return C._shape[0]},set:function(R){return C.width=R}},{get:function(){return C._shape[1]},set:function(R){return C.height=R}}]),this._shapeVector=y}var v=o.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(i){this.bind();var e=this.gl;if(this.type===e.FLOAT&&g.indexOf(i)>=0&&(e.getExtension("OES_texture_float_linear")||(i=e.NEAREST)),d.indexOf(i)<0)throw new Error("gl-texture2d: Unknown filter mode "+i);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),this._minFilter=i}},magFilter:{get:function(){return this._magFilter},set:function(i){this.bind();var e=this.gl;if(this.type===e.FLOAT&&g.indexOf(i)>=0&&(e.getExtension("OES_texture_float_linear")||(i=e.NEAREST)),d.indexOf(i)<0)throw new Error("gl-texture2d: Unknown filter mode "+i);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),this._magFilter=i}},mipSamples:{get:function(){return this._anisoSamples},set:function(i){var e=this._anisoSamples;if(this._anisoSamples=Math.max(i,1)|0,e!==this._anisoSamples){var T=this.gl.getExtension("EXT_texture_filter_anisotropic");T&&this.gl.texParameterf(this.gl.TEXTURE_2D,T.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(i){if(this.bind(),E.indexOf(i)<0)throw new Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i),this._wrapS=i}},wrapT:{get:function(){return this._wrapT},set:function(i){if(this.bind(),E.indexOf(i)<0)throw new Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,i),this._wrapT=i}},wrap:{get:function(){return this._wrapVector},set:function(i){if(Array.isArray(i)||(i=[i,i]),i.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(E.indexOf(i[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+i);this._wrapS=i[0],this._wrapT=i[1];var T=this.gl;return this.bind(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,this._wrapS),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,this._wrapT),i}},shape:{get:function(){return this._shapeVector},set:function(i){if(!Array.isArray(i))i=[i|0,i|0];else if(i.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return w(this,i[0]|0,i[1]|0),[i[0]|0,i[1]|0]}},width:{get:function(){return this._shape[0]},set:function(i){return i=i|0,w(this,i,this._shape[1]),i}},height:{get:function(){return this._shape[1]},set:function(i){return i=i|0,w(this,this._shape[0],i),i}}}),v.bind=function(i){var e=this.gl;return i!==void 0&&e.activeTexture(e.TEXTURE0+(i|0)),e.bindTexture(e.TEXTURE_2D,this.handle),i!==void 0?i|0:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var i=Math.min(this._shape[0],this._shape[1]),e=0;i>0;++e,i>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},v.setPixels=function(i,e,T,b){var A=this.gl;this.bind(),Array.isArray(e)?(b=T,T=e[1]|0,e=e[0]|0):(e=e||0,T=T||0),b=b||0;var _=p(i)?i:i.raw;if(_){var C=this._mipLevels.indexOf(b)<0;C?(A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,this.type,_),this._mipLevels.push(b)):A.texSubImage2D(A.TEXTURE_2D,b,e,T,this.format,this.type,_)}else if(i.shape&&i.stride&&i.data){if(i.shape.length<2||e+i.shape[1]>this._shape[1]>>>b||T+i.shape[0]>this._shape[0]>>>b||e<0||T<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");f(A,e,T,b,this.format,this.type,this._mipLevels,i)}else throw new Error("gl-texture2d: Unsupported data type")};function u(i,e){return i.length===3?e[2]===1&&e[1]===i[0]*i[2]&&e[0]===i[2]:e[0]===1&&e[1]===i[0]}function f(i,e,T,b,A,_,C,S){var y=S.dtype,R=S.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,P=0,D=u(R,S.stride.slice());if(y==="float32"?O=i.FLOAT:y==="float64"?(O=i.FLOAT,D=!1,y="float32"):y==="uint8"?O=i.UNSIGNED_BYTE:(O=i.UNSIGNED_BYTE,D=!1,y="uint8"),R.length===2)P=i.LUMINANCE,R=[R[0],R[1],1],S=c(S.data,R,[S.stride[0],S.stride[1],1],S.offset);else if(R.length===3){if(R[2]===1)P=i.ALPHA;else if(R[2]===2)P=i.LUMINANCE_ALPHA;else if(R[2]===3)P=i.RGB;else if(R[2]===4)P=i.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((P===i.LUMINANCE||P===i.ALPHA)&&(A===i.LUMINANCE||A===i.ALPHA)&&(P=A),P!==A)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var H=S.size,G=C.indexOf(b)<0;if(G&&C.push(b),O===_&&D)S.offset===0&&S.data.length===H?G?i.texImage2D(i.TEXTURE_2D,b,A,R[0],R[1],0,A,_,S.data):i.texSubImage2D(i.TEXTURE_2D,b,e,T,R[0],R[1],A,_,S.data):G?i.texImage2D(i.TEXTURE_2D,b,A,R[0],R[1],0,A,_,S.data.subarray(S.offset,S.offset+H)):i.texSubImage2D(i.TEXTURE_2D,b,e,T,R[0],R[1],A,_,S.data.subarray(S.offset,S.offset+H));else{var B;_===i.FLOAT?B=l.mallocFloat32(H):B=l.mallocUint8(H);var I=c(B,R,[R[2],R[2]*R[0],1]);O===i.FLOAT&&_===i.UNSIGNED_BYTE?x(I,S):m.assign(I,S),G?i.texImage2D(i.TEXTURE_2D,b,A,R[0],R[1],0,A,_,B.subarray(0,H)):i.texSubImage2D(i.TEXTURE_2D,b,e,T,R[0],R[1],A,_,B.subarray(0,H)),_===i.FLOAT?l.freeFloat32(B):l.freeUint8(B)}}function h(i){var e=i.createTexture();return i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e}function r(i,e,T,b,A){var _=i.getParameter(i.MAX_TEXTURE_SIZE);if(e<0||e>_||T<0||T>_)throw new Error("gl-texture2d: Invalid texture shape");if(A===i.FLOAT&&!i.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=h(i);return i.texImage2D(i.TEXTURE_2D,0,b,e,T,0,b,A,null),new o(i,C,e,T,b,A)}function s(i,e,T,b,A,_){var C=h(i);return i.texImage2D(i.TEXTURE_2D,0,A,A,_,e),new o(i,C,T,b,A,_)}function n(i,e){var T=e.dtype,b=e.shape.slice(),A=i.getParameter(i.MAX_TEXTURE_SIZE);if(b[0]<0||b[0]>A||b[1]<0||b[1]>A)throw new Error("gl-texture2d: Invalid texture size");var _=u(b,e.stride.slice()),C=0;T==="float32"?C=i.FLOAT:T==="float64"?(C=i.FLOAT,_=!1,T="float32"):T==="uint8"?C=i.UNSIGNED_BYTE:(C=i.UNSIGNED_BYTE,_=!1,T="uint8");var S=0;if(b.length===2)S=i.LUMINANCE,b=[b[0],b[1],1],e=c(e.data,b,[e.stride[0],e.stride[1],1],e.offset);else if(b.length===3)if(b[2]===1)S=i.ALPHA;else if(b[2]===2)S=i.LUMINANCE_ALPHA;else if(b[2]===3)S=i.RGB;else if(b[2]===4)S=i.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");C===i.FLOAT&&!i.getExtension("OES_texture_float")&&(C=i.UNSIGNED_BYTE,_=!1);var y,R,O=e.size;if(_)e.offset===0&&e.data.length===O?y=e.data:y=e.data.subarray(e.offset,e.offset+O);else{var P=[b[2],b[2]*b[0],1];R=l.malloc(O,T);var D=c(R,b,P,0);(T==="float32"||T==="float64")&&C===i.UNSIGNED_BYTE?x(D,e):m.assign(D,e),y=R.subarray(0,O)}var H=h(i);return i.texImage2D(i.TEXTURE_2D,0,S,b[0],b[1],0,S,C,y),_||l.free(R),new o(i,H,b[0],b[1],S,C)}function t(i){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(g||M(i),typeof arguments[1]=="number")return r(i,arguments[1],arguments[2],arguments[3]||i.RGBA,arguments[4]||i.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return r(i,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var e=arguments[1],T=p(e)?e:e.raw;if(T)return s(i,T,e.width|0,e.height|0,arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return n(i,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},1433:function(L){function F(a,c,m){c?c.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var l=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(m){if(m.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var g=0;g<m.length;++g){var d=m[g];if(d.buffer){var E=d.buffer,M=d.size||4,p=d.type||a.FLOAT,x=!!d.normalized,w=d.stride||0,o=d.offset||0;E.bind(),a.enableVertexAttribArray(g),a.vertexAttribPointer(g,M,p,x,w,o)}else{if(typeof d=="number")a.vertexAttrib1f(g,d);else if(d.length===1)a.vertexAttrib1f(g,d[0]);else if(d.length===2)a.vertexAttrib2f(g,d[0],d[1]);else if(d.length===3)a.vertexAttrib3f(g,d[0],d[1],d[2]);else if(d.length===4)a.vertexAttrib4f(g,d[0],d[1],d[2],d[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(g)}}for(;g<l;++g)a.disableVertexAttribArray(g)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var g=0;g<l;++g)a.disableVertexAttribArray(g)}}L.exports=F},870:function(L,F,a){var c=a(1433);function m(g){this.gl=g,this._elements=null,this._attributes=null,this._elementsType=g.UNSIGNED_SHORT}m.prototype.bind=function(){c(this.gl,this._elements,this._attributes)},m.prototype.update=function(g,d,E){this._elements=d,this._attributes=g,this._elementsType=E||this.gl.UNSIGNED_SHORT},m.prototype.dispose=function(){},m.prototype.unbind=function(){},m.prototype.draw=function(g,d,E){E=E||0;var M=this.gl;this._elements?M.drawElements(g,d,this._elementsType,E):M.drawArrays(g,E,d)};function l(g){return new m(g)}L.exports=l},7518:function(L,F,a){var c=a(1433);function m(d,E,M,p,x,w){this.location=d,this.dimension=E,this.a=M,this.b=p,this.c=x,this.d=w}m.prototype.bind=function(d){switch(this.dimension){case 1:d.vertexAttrib1f(this.location,this.a);break;case 2:d.vertexAttrib2f(this.location,this.a,this.b);break;case 3:d.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:d.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function l(d,E,M){this.gl=d,this._ext=E,this.handle=M,this._attribs=[],this._useElements=!1,this._elementsType=d.UNSIGNED_SHORT}l.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var d=0;d<this._attribs.length;++d)this._attribs[d].bind(this.gl)},l.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},l.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},l.prototype.update=function(d,E,M){if(this.bind(),c(this.gl,E,d),this.unbind(),this._attribs.length=0,d)for(var p=0;p<d.length;++p){var x=d[p];typeof x=="number"?this._attribs.push(new m(p,1,x)):Array.isArray(x)&&this._attribs.push(new m(p,x.length,x[0],x[1],x[2],x[3]))}this._useElements=!!E,this._elementsType=M||this.gl.UNSIGNED_SHORT},l.prototype.draw=function(d,E,M){M=M||0;var p=this.gl;this._useElements?p.drawElements(d,E,this._elementsType,M):p.drawArrays(d,M,E)};function g(d,E){return new l(d,E,E.createVertexArrayOES())}L.exports=g},8116:function(L,F,a){var c=a(7518),m=a(870);function l(d){this.bindVertexArrayOES=d.bindVertexArray.bind(d),this.createVertexArrayOES=d.createVertexArray.bind(d),this.deleteVertexArrayOES=d.deleteVertexArray.bind(d)}function g(d,E,M,p){var x=d.createVertexArray?new l(d):d.getExtension("OES_vertex_array_object"),w;return x?w=c(d,x):w=m(d),w.update(E,M,p),w}L.exports=g},5632:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]+m[0],a[1]=c[1]+m[1],a[2]=c[2]+m[2],a}},8192:function(L,F,a){L.exports=g;var c=a(2825),m=a(3536),l=a(244);function g(d,E){var M=c(d[0],d[1],d[2]),p=c(E[0],E[1],E[2]);m(M,M),m(p,p);var x=l(M,p);return x>1?0:Math.acos(x)}},9226:function(L){L.exports=F;function F(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a}},3126:function(L){L.exports=F;function F(a){var c=new Float32Array(3);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c}},3990:function(L){L.exports=F;function F(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a}},1091:function(L){L.exports=F;function F(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},5911:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=m[0],M=m[1],p=m[2];return a[0]=g*p-d*M,a[1]=d*E-l*p,a[2]=l*M-g*E,a}},5455:function(L,F,a){L.exports=a(7056)},7056:function(L){L.exports=F;function F(a,c){var m=c[0]-a[0],l=c[1]-a[1],g=c[2]-a[2];return Math.sqrt(m*m+l*l+g*g)}},4008:function(L,F,a){L.exports=a(6690)},6690:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]/m[0],a[1]=c[1]/m[1],a[2]=c[2]/m[2],a}},244:function(L){L.exports=F;function F(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}},2613:function(L){L.exports=1e-6},9922:function(L,F,a){L.exports=m;var c=a(2613);function m(l,g){var d=l[0],E=l[1],M=l[2],p=g[0],x=g[1],w=g[2];return Math.abs(d-p)<=c*Math.max(1,Math.abs(d),Math.abs(p))&&Math.abs(E-x)<=c*Math.max(1,Math.abs(E),Math.abs(x))&&Math.abs(M-w)<=c*Math.max(1,Math.abs(M),Math.abs(w))}},9265:function(L){L.exports=F;function F(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]}},2681:function(L){L.exports=F;function F(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a}},5137:function(L,F,a){L.exports=m;var c=a(1091)();function m(l,g,d,E,M,p){var x,w;for(g||(g=3),d||(d=0),E?w=Math.min(E*g+d,l.length):w=l.length,x=d;x<w;x+=g)c[0]=l[x],c[1]=l[x+1],c[2]=l[x+2],M(c,c,p),l[x]=c[0],l[x+1]=c[1],l[x+2]=c[2];return l}},2825:function(L){L.exports=F;function F(a,c,m){var l=new Float32Array(3);return l[0]=a,l[1]=c,l[2]=m,l}},2931:function(L,F,a){L.exports={EPSILON:a(2613),create:a(1091),clone:a(3126),angle:a(8192),fromValues:a(2825),copy:a(3990),set:a(1463),equals:a(9922),exactEquals:a(9265),add:a(5632),subtract:a(6843),sub:a(2229),multiply:a(5847),mul:a(4505),divide:a(6690),div:a(4008),min:a(8107),max:a(7417),floor:a(2681),ceil:a(9226),round:a(2447),scale:a(6621),scaleAndAdd:a(8489),distance:a(7056),dist:a(5455),squaredDistance:a(2953),sqrDist:a(6141),length:a(1387),len:a(868),squaredLength:a(3066),sqrLen:a(5486),negate:a(5093),inverse:a(811),normalize:a(3536),dot:a(244),cross:a(5911),lerp:a(6658),random:a(7636),transformMat4:a(5673),transformMat3:a(492),transformQuat:a(264),rotateX:a(6894),rotateY:a(109),rotateZ:a(8692),forEach:a(5137)}},811:function(L){L.exports=F;function F(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a}},868:function(L,F,a){L.exports=a(1387)},1387:function(L){L.exports=F;function F(a){var c=a[0],m=a[1],l=a[2];return Math.sqrt(c*c+m*m+l*l)}},6658:function(L){L.exports=F;function F(a,c,m,l){var g=c[0],d=c[1],E=c[2];return a[0]=g+l*(m[0]-g),a[1]=d+l*(m[1]-d),a[2]=E+l*(m[2]-E),a}},7417:function(L){L.exports=F;function F(a,c,m){return a[0]=Math.max(c[0],m[0]),a[1]=Math.max(c[1],m[1]),a[2]=Math.max(c[2],m[2]),a}},8107:function(L){L.exports=F;function F(a,c,m){return a[0]=Math.min(c[0],m[0]),a[1]=Math.min(c[1],m[1]),a[2]=Math.min(c[2],m[2]),a}},4505:function(L,F,a){L.exports=a(5847)},5847:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]*m[0],a[1]=c[1]*m[1],a[2]=c[2]*m[2],a}},5093:function(L){L.exports=F;function F(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a}},3536:function(L){L.exports=F;function F(a,c){var m=c[0],l=c[1],g=c[2],d=m*m+l*l+g*g;return d>0&&(d=1/Math.sqrt(d),a[0]=c[0]*d,a[1]=c[1]*d,a[2]=c[2]*d),a}},7636:function(L){L.exports=F;function F(a,c){c=c||1;var m=Math.random()*2*Math.PI,l=Math.random()*2-1,g=Math.sqrt(1-l*l)*c;return a[0]=Math.cos(m)*g,a[1]=Math.sin(m)*g,a[2]=l*c,a}},6894:function(L){L.exports=F;function F(a,c,m,l){var g=m[1],d=m[2],E=c[1]-g,M=c[2]-d,p=Math.sin(l),x=Math.cos(l);return a[0]=c[0],a[1]=g+E*x-M*p,a[2]=d+E*p+M*x,a}},109:function(L){L.exports=F;function F(a,c,m,l){var g=m[0],d=m[2],E=c[0]-g,M=c[2]-d,p=Math.sin(l),x=Math.cos(l);return a[0]=g+M*p+E*x,a[1]=c[1],a[2]=d+M*x-E*p,a}},8692:function(L){L.exports=F;function F(a,c,m,l){var g=m[0],d=m[1],E=c[0]-g,M=c[1]-d,p=Math.sin(l),x=Math.cos(l);return a[0]=g+E*x-M*p,a[1]=d+E*p+M*x,a[2]=c[2],a}},2447:function(L){L.exports=F;function F(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),a[2]=Math.round(c[2]),a}},6621:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]*m,a[1]=c[1]*m,a[2]=c[2]*m,a}},8489:function(L){L.exports=F;function F(a,c,m,l){return a[0]=c[0]+m[0]*l,a[1]=c[1]+m[1]*l,a[2]=c[2]+m[2]*l,a}},1463:function(L){L.exports=F;function F(a,c,m,l){return a[0]=c,a[1]=m,a[2]=l,a}},6141:function(L,F,a){L.exports=a(2953)},5486:function(L,F,a){L.exports=a(3066)},2953:function(L){L.exports=F;function F(a,c){var m=c[0]-a[0],l=c[1]-a[1],g=c[2]-a[2];return m*m+l*l+g*g}},3066:function(L){L.exports=F;function F(a){var c=a[0],m=a[1],l=a[2];return c*c+m*m+l*l}},2229:function(L,F,a){L.exports=a(6843)},6843:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]-m[0],a[1]=c[1]-m[1],a[2]=c[2]-m[2],a}},492:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2];return a[0]=l*m[0]+g*m[3]+d*m[6],a[1]=l*m[1]+g*m[4]+d*m[7],a[2]=l*m[2]+g*m[5]+d*m[8],a}},5673:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=m[3]*l+m[7]*g+m[11]*d+m[15];return E=E||1,a[0]=(m[0]*l+m[4]*g+m[8]*d+m[12])/E,a[1]=(m[1]*l+m[5]*g+m[9]*d+m[13])/E,a[2]=(m[2]*l+m[6]*g+m[10]*d+m[14])/E,a}},264:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=m[0],M=m[1],p=m[2],x=m[3],w=x*l+M*d-p*g,o=x*g+p*l-E*d,v=x*d+E*g-M*l,u=-E*l-M*g-p*d;return a[0]=w*x+u*-E+o*-p-v*-M,a[1]=o*x+u*-M+v*-E-w*-p,a[2]=v*x+u*-p+w*-M-o*-E,a}},4361:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]+m[0],a[1]=c[1]+m[1],a[2]=c[2]+m[2],a[3]=c[3]+m[3],a}},2335:function(L){L.exports=F;function F(a){var c=new Float32Array(4);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c}},2933:function(L){L.exports=F;function F(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a}},7536:function(L){L.exports=F;function F(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},4691:function(L){L.exports=F;function F(a,c){var m=c[0]-a[0],l=c[1]-a[1],g=c[2]-a[2],d=c[3]-a[3];return Math.sqrt(m*m+l*l+g*g+d*d)}},1373:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]/m[0],a[1]=c[1]/m[1],a[2]=c[2]/m[2],a[3]=c[3]/m[3],a}},3750:function(L){L.exports=F;function F(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]}},3390:function(L){L.exports=F;function F(a,c,m,l){var g=new Float32Array(4);return g[0]=a,g[1]=c,g[2]=m,g[3]=l,g}},9970:function(L,F,a){L.exports={create:a(7536),clone:a(2335),fromValues:a(3390),copy:a(2933),set:a(4578),add:a(4361),subtract:a(6860),multiply:a(3576),divide:a(1373),min:a(2334),max:a(160),scale:a(9288),scaleAndAdd:a(4844),distance:a(4691),squaredDistance:a(7960),length:a(6808),squaredLength:a(483),negate:a(1498),inverse:a(4494),normalize:a(5177),dot:a(3750),lerp:a(2573),random:a(9131),transformMat4:a(5352),transformQuat:a(4041)}},4494:function(L){L.exports=F;function F(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a[3]=1/c[3],a}},6808:function(L){L.exports=F;function F(a){var c=a[0],m=a[1],l=a[2],g=a[3];return Math.sqrt(c*c+m*m+l*l+g*g)}},2573:function(L){L.exports=F;function F(a,c,m,l){var g=c[0],d=c[1],E=c[2],M=c[3];return a[0]=g+l*(m[0]-g),a[1]=d+l*(m[1]-d),a[2]=E+l*(m[2]-E),a[3]=M+l*(m[3]-M),a}},160:function(L){L.exports=F;function F(a,c,m){return a[0]=Math.max(c[0],m[0]),a[1]=Math.max(c[1],m[1]),a[2]=Math.max(c[2],m[2]),a[3]=Math.max(c[3],m[3]),a}},2334:function(L){L.exports=F;function F(a,c,m){return a[0]=Math.min(c[0],m[0]),a[1]=Math.min(c[1],m[1]),a[2]=Math.min(c[2],m[2]),a[3]=Math.min(c[3],m[3]),a}},3576:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]*m[0],a[1]=c[1]*m[1],a[2]=c[2]*m[2],a[3]=c[3]*m[3],a}},1498:function(L){L.exports=F;function F(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=-c[3],a}},5177:function(L){L.exports=F;function F(a,c){var m=c[0],l=c[1],g=c[2],d=c[3],E=m*m+l*l+g*g+d*d;return E>0&&(E=1/Math.sqrt(E),a[0]=m*E,a[1]=l*E,a[2]=g*E,a[3]=d*E),a}},9131:function(L,F,a){var c=a(5177),m=a(9288);L.exports=l;function l(g,d){return d=d||1,g[0]=Math.random(),g[1]=Math.random(),g[2]=Math.random(),g[3]=Math.random(),c(g,g),m(g,g,d),g}},9288:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]*m,a[1]=c[1]*m,a[2]=c[2]*m,a[3]=c[3]*m,a}},4844:function(L){L.exports=F;function F(a,c,m,l){return a[0]=c[0]+m[0]*l,a[1]=c[1]+m[1]*l,a[2]=c[2]+m[2]*l,a[3]=c[3]+m[3]*l,a}},4578:function(L){L.exports=F;function F(a,c,m,l,g){return a[0]=c,a[1]=m,a[2]=l,a[3]=g,a}},7960:function(L){L.exports=F;function F(a,c){var m=c[0]-a[0],l=c[1]-a[1],g=c[2]-a[2],d=c[3]-a[3];return m*m+l*l+g*g+d*d}},483:function(L){L.exports=F;function F(a){var c=a[0],m=a[1],l=a[2],g=a[3];return c*c+m*m+l*l+g*g}},6860:function(L){L.exports=F;function F(a,c,m){return a[0]=c[0]-m[0],a[1]=c[1]-m[1],a[2]=c[2]-m[2],a[3]=c[3]-m[3],a}},5352:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=c[3];return a[0]=m[0]*l+m[4]*g+m[8]*d+m[12]*E,a[1]=m[1]*l+m[5]*g+m[9]*d+m[13]*E,a[2]=m[2]*l+m[6]*g+m[10]*d+m[14]*E,a[3]=m[3]*l+m[7]*g+m[11]*d+m[15]*E,a}},4041:function(L){L.exports=F;function F(a,c,m){var l=c[0],g=c[1],d=c[2],E=m[0],M=m[1],p=m[2],x=m[3],w=x*l+M*d-p*g,o=x*g+p*l-E*d,v=x*d+E*g-M*l,u=-E*l-M*g-p*d;return a[0]=w*x+u*-E+o*-p-v*-M,a[1]=o*x+u*-M+v*-E-w*-p,a[2]=v*x+u*-p+w*-M-o*-E,a[3]=c[3],a}},1848:function(L,F,a){var c=a(4905),m=a(6468);L.exports=l;function l(g){for(var d=Array.isArray(g)?g:c(g),E=0;E<d.length;E++){var M=d[E];if(M.type==="preprocessor"){var p=M.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var x=p[1],w=p[2];return(x?m(w):w).trim()}}}}},5874:function(L,F,a){L.exports=e;var c=a(620),m=a(7827),l=a(6852),g=a(7932),d=a(3508),E=999,M=9999,p=0,x=1,w=2,o=3,v=4,u=5,f=6,h=7,r=8,s=9,n=10,t=11,i=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function e(T){var b=0,A=0,_=E,C,S,y=[],R=[],O=1,P=0,D=0,H=!1,G=!1,B="",I;T=T||{};var N=l,$=c;T.version==="300 es"&&(N=d,$=g);for(var U={},K={},b=0;b<N.length;b++)U[N[b]]=!0;for(var b=0;b<$.length;b++)K[$[b]]=!0;return function(ut){return R=[],ut!==null?Y(ut):j()};function W(ut){ut.length&&R.push({type:i[_],data:ut,position:D,line:O,column:P})}function Y(ut){b=0,ut.toString&&(ut=ut.toString()),B+=ut.replace(/\r\n/g,`
`),I=B.length;for(var mt;C=B[b],b<I;){switch(mt=b,_){case p:b=ft();break;case x:b=it();break;case w:b=q();break;case o:b=at();break;case v:b=ot();break;case t:b=ht();break;case u:b=vt();break;case M:b=lt();break;case s:b=Q();break;case E:b=X();break}if(mt!==b)switch(B[mt]){case`
`:P=0,++O;break;default:++P;break}}return A+=b,B=B.slice(b),R}function j(ut){return y.length&&W(y.join("")),_=n,W("(eof)"),R}function X(){return y=y.length?[]:y,S==="/"&&C==="*"?(D=A+b-1,_=p,S=C,b+1):S==="/"&&C==="/"?(D=A+b-1,_=x,S=C,b+1):C==="#"?(_=w,D=A+b,b):/\s/.test(C)?(_=s,D=A+b,b):(H=/\d/.test(C),G=/[^\w_]/.test(C),D=A+b,_=H?v:G?o:M,b)}function Q(){return/[^\s]/g.test(C)?(W(y.join("")),_=E,b):(y.push(C),S=C,b+1)}function q(){return(C==="\r"||C===`
`)&&S!=="\\"?(W(y.join("")),_=E,b):(y.push(C),S=C,b+1)}function it(){return q()}function ft(){return C==="/"&&S==="*"?(y.push(C),W(y.join("")),_=E,b+1):(y.push(C),S=C,b+1)}function at(){if(S==="."&&/\d/.test(C))return _=u,b;if(S==="/"&&C==="*")return _=p,b;if(S==="/"&&C==="/")return _=x,b;if(C==="."&&y.length){for(;rt(y););return _=u,b}if(C===";"||C===")"||C==="("){if(y.length)for(;rt(y););return W(C),_=E,b+1}var ut=y.length===2&&C!=="=";if(/[\w_\d\s]/.test(C)||ut){for(;rt(y););return _=E,b}return y.push(C),S=C,b+1}function rt(ut){var mt=0,Et,ct;do{if(Et=m.indexOf(ut.slice(0,ut.length+mt).join("")),ct=m[Et],Et===-1){if(mt--+ut.length>0)continue;ct=ut.slice(0,1).join("")}return W(ct),D+=ct.length,y=y.slice(ct.length),y.length}while(!0)}function ht(){return/[^a-fA-F0-9]/.test(C)?(W(y.join("")),_=E,b):(y.push(C),S=C,b+1)}function ot(){return C==="."||/[eE]/.test(C)?(y.push(C),_=u,S=C,b+1):C==="x"&&y.length===1&&y[0]==="0"?(_=t,y.push(C),S=C,b+1):/[^\d]/.test(C)?(W(y.join("")),_=E,b):(y.push(C),S=C,b+1)}function vt(){return C==="f"&&(y.push(C),S=C,b+=1),/[eE]/.test(C)||(C==="-"||C==="+")&&/[eE]/.test(S)?(y.push(C),S=C,b+1):/[^\d]/.test(C)?(W(y.join("")),_=E,b):(y.push(C),S=C,b+1)}function lt(){if(/[^\d\w_]/.test(C)){var ut=y.join("");return K[ut]?_=r:U[ut]?_=h:_=f,W(y.join("")),_=E,b}return y.push(C),S=C,b+1}}},3508:function(L,F,a){var c=a(6852);c=c.slice().filter(function(m){return!/^(gl\_|texture)/.test(m)}),L.exports=c.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(L){L.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(L,F,a){var c=a(620);L.exports=c.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(L){L.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(L){L.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(L,F,a){var c=a(5874);L.exports=m;function m(l,g){var d=c(g),E=[];return E=E.concat(d(l)),E=E.concat(d(null)),E}},3236:function(L){L.exports=function(F){typeof F=="string"&&(F=[F]);for(var a=[].slice.call(arguments,1),c=[],m=0;m<F.length-1;m++)c.push(F[m],a[m]||"");return c.push(F[m]),c.join("")}},7520:function(L,F,a){var c=a(9507);function m(){var l=!1;try{var g=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,g),window.removeEventListener("test",null,g)}catch{l=!1}return l}L.exports=c&&m()},3778:function(L,F){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */F.read=function(a,c,m,l,g){var d,E,M=g*8-l-1,p=(1<<M)-1,x=p>>1,w=-7,o=m?g-1:0,v=m?-1:1,u=a[c+o];for(o+=v,d=u&(1<<-w)-1,u>>=-w,w+=M;w>0;d=d*256+a[c+o],o+=v,w-=8);for(E=d&(1<<-w)-1,d>>=-w,w+=l;w>0;E=E*256+a[c+o],o+=v,w-=8);if(d===0)d=1-x;else{if(d===p)return E?NaN:(u?-1:1)*(1/0);E=E+Math.pow(2,l),d=d-x}return(u?-1:1)*E*Math.pow(2,d-l)},F.write=function(a,c,m,l,g,d){var E,M,p,x=d*8-g-1,w=(1<<x)-1,o=w>>1,v=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=l?0:d-1,f=l?1:-1,h=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(M=isNaN(c)?1:0,E=w):(E=Math.floor(Math.log(c)/Math.LN2),c*(p=Math.pow(2,-E))<1&&(E--,p*=2),E+o>=1?c+=v/p:c+=v*Math.pow(2,1-o),c*p>=2&&(E++,p/=2),E+o>=w?(M=0,E=w):E+o>=1?(M=(c*p-1)*Math.pow(2,g),E=E+o):(M=c*Math.pow(2,o-1)*Math.pow(2,g),E=0));g>=8;a[m+u]=M&255,u+=f,M/=256,g-=8);for(E=E<<g|M,x+=g;x>0;a[m+u]=E&255,u+=f,E/=256,x-=8);a[m+u-f]|=h*128}},8954:function(L,F,a){L.exports=o;var c=a(3250),m=a(6803).Fw;function l(v,u,f){this.vertices=v,this.adjacent=u,this.boundary=f,this.lastVisited=-1}l.prototype.flip=function(){var v=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=v;var u=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=u};function g(v,u,f){this.vertices=v,this.cell=u,this.index=f}function d(v,u){return m(v.vertices,u.vertices)}function E(v){return function(){var u=this.tuple;return v.apply(this,u)}}function M(v){var u=c[v+1];return u||(u=c),E(u)}var p=[];function x(v,u,f){this.dimension=v,this.vertices=u,this.simplices=f,this.interior=f.filter(function(s){return!s.boundary}),this.tuple=new Array(v+1);for(var h=0;h<=v;++h)this.tuple[h]=this.vertices[h];var r=p[v];r||(r=p[v]=M(v)),this.orient=r}var w=x.prototype;w.handleBoundaryDegeneracy=function(v,u){var f=this.dimension,h=this.vertices.length-1,r=this.tuple,s=this.vertices,n=[v];for(v.lastVisited=-h;n.length>0;){v=n.pop();for(var t=v.adjacent,i=0;i<=f;++i){var e=t[i];if(!(!e.boundary||e.lastVisited<=-h)){for(var T=e.vertices,b=0;b<=f;++b){var A=T[b];A<0?r[b]=u:r[b]=s[A]}var _=this.orient();if(_>0)return e;e.lastVisited=-h,_===0&&n.push(e)}}}return null},w.walk=function(v,u){var f=this.vertices.length-1,h=this.dimension,r=this.vertices,s=this.tuple,n=u?this.interior.length*Math.random()|0:this.interior.length-1,t=this.interior[n];t:for(;!t.boundary;){for(var i=t.vertices,e=t.adjacent,T=0;T<=h;++T)s[T]=r[i[T]];t.lastVisited=f;for(var T=0;T<=h;++T){var b=e[T];if(!(b.lastVisited>=f)){var A=s[T];s[T]=v;var _=this.orient();if(s[T]=A,_<0){t=b;continue t}else b.boundary?b.lastVisited=-f:b.lastVisited=f}}return}return t},w.addPeaks=function(v,u){var f=this.vertices.length-1,h=this.dimension,r=this.vertices,s=this.tuple,n=this.interior,t=this.simplices,i=[u];u.lastVisited=f,u.vertices[u.vertices.indexOf(-1)]=f,u.boundary=!1,n.push(u);for(var e=[];i.length>0;){var u=i.pop(),T=u.vertices,b=u.adjacent,A=T.indexOf(f);if(!(A<0)){for(var _=0;_<=h;++_)if(_!==A){var C=b[_];if(!(!C.boundary||C.lastVisited>=f)){var S=C.vertices;if(C.lastVisited!==-f){for(var y=0,R=0;R<=h;++R)S[R]<0?(y=R,s[R]=v):s[R]=r[S[R]];var O=this.orient();if(O>0){S[y]=f,C.boundary=!1,n.push(C),i.push(C),C.lastVisited=f;continue}else C.lastVisited=-f}var P=C.adjacent,D=T.slice(),H=b.slice(),G=new l(D,H,!0);t.push(G);var B=P.indexOf(u);if(!(B<0)){P[B]=G,H[A]=C,D[_]=-1,H[_]=u,b[_]=G,G.flip();for(var R=0;R<=h;++R){var I=D[R];if(!(I<0||I===f)){for(var N=new Array(h-1),$=0,U=0;U<=h;++U){var K=D[U];K<0||U===R||(N[$++]=K)}e.push(new g(N,G,R))}}}}}}}e.sort(d);for(var _=0;_+1<e.length;_+=2){var W=e[_],Y=e[_+1],j=W.index,X=Y.index;j<0||X<0||(W.cell.adjacent[W.index]=Y.cell,Y.cell.adjacent[Y.index]=W.cell)}},w.insert=function(v,u){var f=this.vertices;f.push(v);var h=this.walk(v,u);if(h){for(var r=this.dimension,s=this.tuple,n=0;n<=r;++n){var t=h.vertices[n];t<0?s[n]=v:s[n]=f[t]}var i=this.orient(s);i<0||i===0&&(h=this.handleBoundaryDegeneracy(h,v),!h)||this.addPeaks(v,h)}},w.boundary=function(){for(var v=this.dimension,u=[],f=this.simplices,h=f.length,r=0;r<h;++r){var s=f[r];if(s.boundary){for(var n=new Array(v),t=s.vertices,i=0,e=0,T=0;T<=v;++T)t[T]>=0?n[i++]=t[T]:e=T&1;if(e===(v&1)){var b=n[0];n[0]=n[1],n[1]=b}u.push(n)}}return u};function o(v,u){var f=v.length;if(f===0)throw new Error("Must have at least d+1 points");var h=v[0].length;if(f<=h)throw new Error("Must input at least d+1 points");var r=v.slice(0,h+1),s=c.apply(void 0,r);if(s===0)throw new Error("Input not in general position");for(var n=new Array(h+1),t=0;t<=h;++t)n[t]=t;s<0&&(n[0]=1,n[1]=0);for(var i=new l(n,new Array(h+1),!1),e=i.adjacent,T=new Array(h+2),t=0;t<=h;++t){for(var b=n.slice(),A=0;A<=h;++A)A===t&&(b[A]=-1);var _=b[0];b[0]=b[1],b[1]=_;var C=new l(b,new Array(h+1),!0);e[t]=C,T[t]=C}T[h+1]=i;for(var t=0;t<=h;++t)for(var b=e[t].vertices,S=e[t].adjacent,A=0;A<=h;++A){var y=b[A];if(y<0){S[A]=i;continue}for(var R=0;R<=h;++R)e[R].vertices.indexOf(y)<0&&(S[A]=e[R])}for(var O=new x(h,r,T),P=!!u,t=h+1;t<f;++t)O.insert(v[t],P);return O.boundary()}},3352:function(L,F,a){var c=a(2478),m=0,l=1,g=2;L.exports=i;function d(e,T,b,A,_){this.mid=e,this.left=T,this.right=b,this.leftPoints=A,this.rightPoints=_,this.count=(T?T.count:0)+(b?b.count:0)+A.length}var E=d.prototype;function M(e,T){e.mid=T.mid,e.left=T.left,e.right=T.right,e.leftPoints=T.leftPoints,e.rightPoints=T.rightPoints,e.count=T.count}function p(e,T){var b=s(T);e.mid=b.mid,e.left=b.left,e.right=b.right,e.leftPoints=b.leftPoints,e.rightPoints=b.rightPoints,e.count=b.count}function x(e,T){var b=e.intervals([]);b.push(T),p(e,b)}function w(e,T){var b=e.intervals([]),A=b.indexOf(T);return A<0?m:(b.splice(A,1),p(e,b),l)}E.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},E.insert=function(e){var T=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(T+1)?x(this,e):this.left.insert(e):this.left=s([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(T+1)?x(this,e):this.right.insert(e):this.right=s([e]);else{var b=c.ge(this.leftPoints,e,h),A=c.ge(this.rightPoints,e,r);this.leftPoints.splice(b,0,e),this.rightPoints.splice(A,0,e)}},E.remove=function(e){var T=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return m;var b=this.right?this.right.count:0;if(4*b>3*(T-1))return w(this,e);var A=this.left.remove(e);return A===g?(this.left=null,this.count-=1,l):(A===l&&(this.count-=1),A)}else if(e[0]>this.mid){if(!this.right)return m;var _=this.left?this.left.count:0;if(4*_>3*(T-1))return w(this,e);var A=this.right.remove(e);return A===g?(this.right=null,this.count-=1,l):(A===l&&(this.count-=1),A)}else{if(this.count===1)return this.leftPoints[0]===e?g:m;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var C=this,S=this.left;S.right;)C=S,S=S.right;if(C===this)S.right=this.right;else{var y=this.left,A=this.right;C.count-=S.count,C.right=S.left,S.left=y,S.right=A}M(this,S),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?M(this,this.left):M(this,this.right);return l}for(var y=c.ge(this.leftPoints,e,h);y<this.leftPoints.length&&this.leftPoints[y][0]===e[0];++y)if(this.leftPoints[y]===e){this.count-=1,this.leftPoints.splice(y,1);for(var A=c.ge(this.rightPoints,e,r);A<this.rightPoints.length&&this.rightPoints[A][1]===e[1];++A)if(this.rightPoints[A]===e)return this.rightPoints.splice(A,1),l}return m}};function o(e,T,b){for(var A=0;A<e.length&&e[A][0]<=T;++A){var _=b(e[A]);if(_)return _}}function v(e,T,b){for(var A=e.length-1;A>=0&&e[A][1]>=T;--A){var _=b(e[A]);if(_)return _}}function u(e,T){for(var b=0;b<e.length;++b){var A=T(e[b]);if(A)return A}}E.queryPoint=function(e,T){if(e<this.mid){if(this.left){var b=this.left.queryPoint(e,T);if(b)return b}return o(this.leftPoints,e,T)}else if(e>this.mid){if(this.right){var b=this.right.queryPoint(e,T);if(b)return b}return v(this.rightPoints,e,T)}else return u(this.leftPoints,T)},E.queryInterval=function(e,T,b){if(e<this.mid&&this.left){var A=this.left.queryInterval(e,T,b);if(A)return A}if(T>this.mid&&this.right){var A=this.right.queryInterval(e,T,b);if(A)return A}return T<this.mid?o(this.leftPoints,T,b):e>this.mid?v(this.rightPoints,e,b):u(this.leftPoints,b)};function f(e,T){return e-T}function h(e,T){var b=e[0]-T[0];return b||e[1]-T[1]}function r(e,T){var b=e[1]-T[1];return b||e[0]-T[0]}function s(e){if(e.length===0)return null;for(var T=[],b=0;b<e.length;++b)T.push(e[b][0],e[b][1]);T.sort(f);for(var A=T[T.length>>1],_=[],C=[],S=[],b=0;b<e.length;++b){var y=e[b];y[1]<A?_.push(y):A<y[0]?C.push(y):S.push(y)}var R=S,O=S.slice();return R.sort(h),O.sort(r),new d(A,s(_),s(C),R,O)}function n(e){this.root=e}var t=n.prototype;t.insert=function(e){this.root?this.root.insert(e):this.root=new d(e[0],null,null,[e],[e])},t.remove=function(e){if(this.root){var T=this.root.remove(e);return T===g&&(this.root=null),T!==m}return!1},t.queryPoint=function(e,T){if(this.root)return this.root.queryPoint(e,T)},t.queryInterval=function(e,T,b){if(e<=T&&this.root)return this.root.queryInterval(e,T,b)},Object.defineProperty(t,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(t,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function i(e){return!e||e.length===0?new n(null):new n(s(e))}},7762:function(L){function F(a){for(var c=new Array(a),m=0;m<a;++m)c[m]=m;return c}L.exports=F},9507:function(L){L.exports=!0},7163:function(L){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */L.exports=function(c){return c!=null&&(F(c)||a(c)||!!c._isBuffer)};function F(c){return!!c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c)}function a(c){return typeof c.readFloatLE=="function"&&typeof c.slice=="function"&&F(c.slice(0,0))}},5219:function(L){L.exports=function(F){for(var a=F.length,c,m=0;m<a;m++)if(c=F.charCodeAt(m),(c<9||c>13)&&c!==32&&c!==133&&c!==160&&c!==5760&&c!==6158&&(c<8192||c>8205)&&c!==8232&&c!==8233&&c!==8239&&c!==8287&&c!==8288&&c!==12288&&c!==65279)return!1;return!0}},395:function(L){function F(a,c,m){return a*(1-m)+c*m}L.exports=F},2652:function(L,F,a){var c=a(4335),m=a(6864),l=a(1903),g=a(9921),d=a(7608),E=a(5665),M={length:a(1387),normalize:a(3536),dot:a(244),cross:a(5911)},p=m(),x=m(),w=[0,0,0,0],o=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];L.exports=function(s,n,t,i,e,T){if(n||(n=[0,0,0]),t||(t=[0,0,0]),i||(i=[0,0,0]),e||(e=[0,0,0,1]),T||(T=[0,0,0,1]),!c(p,s)||(l(x,p),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(g(x)<1e-8)))return!1;var b=p[3],A=p[7],_=p[11],C=p[12],S=p[13],y=p[14],R=p[15];if(b!==0||A!==0||_!==0){w[0]=b,w[1]=A,w[2]=_,w[3]=R;var O=d(x,x);if(!O)return!1;E(x,x),u(e,w,x)}else e[0]=e[1]=e[2]=0,e[3]=1;if(n[0]=C,n[1]=S,n[2]=y,f(o,p),t[0]=M.length(o[0]),M.normalize(o[0],o[0]),i[0]=M.dot(o[0],o[1]),h(o[1],o[1],o[0],1,-i[0]),t[1]=M.length(o[1]),M.normalize(o[1],o[1]),i[0]/=t[1],i[1]=M.dot(o[0],o[2]),h(o[2],o[2],o[0],1,-i[1]),i[2]=M.dot(o[1],o[2]),h(o[2],o[2],o[1],1,-i[2]),t[2]=M.length(o[2]),M.normalize(o[2],o[2]),i[1]/=t[2],i[2]/=t[2],M.cross(v,o[1],o[2]),M.dot(o[0],v)<0)for(var P=0;P<3;P++)t[P]*=-1,o[P][0]*=-1,o[P][1]*=-1,o[P][2]*=-1;return T[0]=.5*Math.sqrt(Math.max(1+o[0][0]-o[1][1]-o[2][2],0)),T[1]=.5*Math.sqrt(Math.max(1-o[0][0]+o[1][1]-o[2][2],0)),T[2]=.5*Math.sqrt(Math.max(1-o[0][0]-o[1][1]+o[2][2],0)),T[3]=.5*Math.sqrt(Math.max(1+o[0][0]+o[1][1]+o[2][2],0)),o[2][1]>o[1][2]&&(T[0]=-T[0]),o[0][2]>o[2][0]&&(T[1]=-T[1]),o[1][0]>o[0][1]&&(T[2]=-T[2]),!0};function u(r,s,n){var t=s[0],i=s[1],e=s[2],T=s[3];return r[0]=n[0]*t+n[4]*i+n[8]*e+n[12]*T,r[1]=n[1]*t+n[5]*i+n[9]*e+n[13]*T,r[2]=n[2]*t+n[6]*i+n[10]*e+n[14]*T,r[3]=n[3]*t+n[7]*i+n[11]*e+n[15]*T,r}function f(r,s){r[0][0]=s[0],r[0][1]=s[1],r[0][2]=s[2],r[1][0]=s[4],r[1][1]=s[5],r[1][2]=s[6],r[2][0]=s[8],r[2][1]=s[9],r[2][2]=s[10]}function h(r,s,n,t,i){r[0]=s[0]*t+n[0]*i,r[1]=s[1]*t+n[1]*i,r[2]=s[2]*t+n[2]*i}},4335:function(L){L.exports=function(a,c){var m=c[15];if(m===0)return!1;for(var l=1/m,g=0;g<16;g++)a[g]=c[g]*l;return!0}},7442:function(L,F,a){var c=a(6658),m=a(7182),l=a(2652),g=a(9921),d=a(8648),E=w(),M=w(),p=w();L.exports=x;function x(u,f,h,r){if(g(f)===0||g(h)===0)return!1;var s=l(f,E.translate,E.scale,E.skew,E.perspective,E.quaternion),n=l(h,M.translate,M.scale,M.skew,M.perspective,M.quaternion);return!s||!n?!1:(c(p.translate,E.translate,M.translate,r),c(p.skew,E.skew,M.skew,r),c(p.scale,E.scale,M.scale,r),c(p.perspective,E.perspective,M.perspective,r),d(p.quaternion,E.quaternion,M.quaternion,r),m(u,p.translate,p.scale,p.skew,p.perspective,p.quaternion),!0)}function w(){return{translate:o(),scale:o(1),skew:o(),perspective:v(),quaternion:v()}}function o(u){return[u||0,u||0,u||0]}function v(){return[0,0,0,1]}},7182:function(L,F,a){var c={identity:a(7894),translate:a(7656),multiply:a(6760),create:a(6864),scale:a(2504),fromRotationTranslation:a(6743)};c.create();var m=c.create();L.exports=function(g,d,E,M,p,x){return c.identity(g),c.fromRotationTranslation(g,x,d),g[3]=p[0],g[7]=p[1],g[11]=p[2],g[15]=p[3],c.identity(m),M[2]!==0&&(m[9]=M[2],c.multiply(g,g,m)),M[1]!==0&&(m[9]=0,m[8]=M[1],c.multiply(g,g,m)),M[0]!==0&&(m[8]=0,m[4]=M[0],c.multiply(g,g,m)),c.scale(g,g,E),g}},4192:function(L,F,a){var c=a(2478),m=a(7442),l=a(7608),g=a(5567),d=a(2408),E=a(7089),M=a(6582),p=a(7656);a(2504);var x=a(3536),w=[0,0,0];L.exports=f;function o(h){this._components=h.slice(),this._time=[0],this.prevMatrix=h.slice(),this.nextMatrix=h.slice(),this.computedMatrix=h.slice(),this.computedInverse=h.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var v=o.prototype;v.recalcMatrix=function(h){var r=this._time,s=c.le(r,h),n=this.computedMatrix;if(!(s<0)){var t=this._components;if(s===r.length-1)for(var i=16*s,e=0;e<16;++e)n[e]=t[i++];else{for(var T=r[s+1]-r[s],i=16*s,b=this.prevMatrix,A=!0,e=0;e<16;++e)b[e]=t[i++];for(var _=this.nextMatrix,e=0;e<16;++e)_[e]=t[i++],A=A&&b[e]===_[e];if(T<1e-6||A)for(var e=0;e<16;++e)n[e]=b[e];else m(n,b,_,(h-r[s])/T)}var C=this.computedUp;C[0]=n[1],C[1]=n[5],C[2]=n[9],x(C,C);var S=this.computedInverse;l(S,n);var y=this.computedEye,R=S[15];y[0]=S[12]/R,y[1]=S[13]/R,y[2]=S[14]/R;for(var O=this.computedCenter,P=Math.exp(this.computedRadius[0]),e=0;e<3;++e)O[e]=y[e]-n[2+4*e]*P}},v.idle=function(h){if(!(h<this.lastT())){for(var r=this._components,s=r.length-16,n=0;n<16;++n)r.push(r[s++]);this._time.push(h)}},v.flush=function(h){var r=c.gt(this._time,h)-2;r<0||(this._time.splice(0,r),this._components.splice(0,16*r))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(h,r,s,n){this.recalcMatrix(h),r=r||this.computedEye,s=s||w,n=n||this.computedUp,this.setMatrix(h,M(this.computedMatrix,r,s,n));for(var t=0,i=0;i<3;++i)t+=Math.pow(s[i]-r[i],2);t=Math.log(Math.sqrt(t)),this.computedRadius[0]=t},v.rotate=function(h,r,s,n){this.recalcMatrix(h);var t=this.computedInverse;r&&d(t,t,r),s&&g(t,t,s),n&&E(t,t,n),this.setMatrix(h,l(this.computedMatrix,t))};var u=[0,0,0];v.pan=function(h,r,s,n){u[0]=-(r||0),u[1]=-(s||0),u[2]=-(n||0),this.recalcMatrix(h);var t=this.computedInverse;p(t,t,u),this.setMatrix(h,l(t,t))},v.translate=function(h,r,s,n){u[0]=r||0,u[1]=s||0,u[2]=n||0,this.recalcMatrix(h);var t=this.computedMatrix;p(t,t,u),this.setMatrix(h,t)},v.setMatrix=function(h,r){if(!(h<this.lastT())){this._time.push(h);for(var s=0;s<16;++s)this._components.push(r[s])}},v.setDistance=function(h,r){this.computedRadius[0]=r},v.setDistanceLimits=function(h,r){var s=this._limits;s[0]=h,s[1]=r},v.getDistanceLimits=function(h){var r=this._limits;return h?(h[0]=r[0],h[1]=r[1],h):r};function f(h){h=h||{};var r=h.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new o(r)}},3090:function(L,F,a){L.exports=m;var c=a(3250)[3];function m(l){var g=l.length;if(g<3){for(var v=new Array(g),d=0;d<g;++d)v[d]=d;return g===2&&l[0][0]===l[1][0]&&l[0][1]===l[1][1]?[0]:v}for(var E=new Array(g),d=0;d<g;++d)E[d]=d;E.sort(function(r,s){var n=l[r][0]-l[s][0];return n||l[r][1]-l[s][1]});for(var M=[E[0],E[1]],p=[E[0],E[1]],d=2;d<g;++d){for(var x=E[d],w=l[x],o=M.length;o>1&&c(l[M[o-2]],l[M[o-1]],w)<=0;)o-=1,M.pop();for(M.push(x),o=p.length;o>1&&c(l[p[o-2]],l[p[o-1]],w)>=0;)o-=1,p.pop();p.push(x)}for(var v=new Array(p.length+M.length-2),u=0,d=0,f=M.length;d<f;++d)v[u++]=M[d];for(var h=p.length-2;h>0;--h)v[u++]=p[h];return v}},351:function(L,F,a){L.exports=m;var c=a(4687);function m(l,g){g||(g=l,l=window);var d=0,E=0,M=0,p={shift:!1,alt:!1,control:!1,meta:!1},x=!1;function w(e){var T=!1;return"altKey"in e&&(T=T||e.altKey!==p.alt,p.alt=!!e.altKey),"shiftKey"in e&&(T=T||e.shiftKey!==p.shift,p.shift=!!e.shiftKey),"ctrlKey"in e&&(T=T||e.ctrlKey!==p.control,p.control=!!e.ctrlKey),"metaKey"in e&&(T=T||e.metaKey!==p.meta,p.meta=!!e.metaKey),T}function o(e,T){var b=c.x(T),A=c.y(T);"buttons"in T&&(e=T.buttons|0),(e!==d||b!==E||A!==M||w(T))&&(d=e|0,E=b||0,M=A||0,g&&g(d,E,M,p))}function v(e){o(0,e)}function u(){(d||E||M||p.shift||p.alt||p.meta||p.control)&&(E=M=0,d=0,p.shift=p.alt=p.control=p.meta=!1,g&&g(0,0,0,p))}function f(e){w(e)&&g&&g(d,E,M,p)}function h(e){c.buttons(e)===0?o(0,e):o(d,e)}function r(e){o(d|c.buttons(e),e)}function s(e){o(d&~c.buttons(e),e)}function n(){x||(x=!0,l.addEventListener("mousemove",h),l.addEventListener("mousedown",r),l.addEventListener("mouseup",s),l.addEventListener("mouseleave",v),l.addEventListener("mouseenter",v),l.addEventListener("mouseout",v),l.addEventListener("mouseover",v),l.addEventListener("blur",u),l.addEventListener("keyup",f),l.addEventListener("keydown",f),l.addEventListener("keypress",f),l!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}function t(){x&&(x=!1,l.removeEventListener("mousemove",h),l.removeEventListener("mousedown",r),l.removeEventListener("mouseup",s),l.removeEventListener("mouseleave",v),l.removeEventListener("mouseenter",v),l.removeEventListener("mouseout",v),l.removeEventListener("mouseover",v),l.removeEventListener("blur",u),l.removeEventListener("keyup",f),l.removeEventListener("keydown",f),l.removeEventListener("keypress",f),l!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))}n();var i={element:l};return Object.defineProperties(i,{enabled:{get:function(){return x},set:function(e){e?n():t()},enumerable:!0},buttons:{get:function(){return d},enumerable:!0},x:{get:function(){return E},enumerable:!0},y:{get:function(){return M},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),i}},24:function(L){var F={left:0,top:0};L.exports=a;function a(m,l,g){l=l||m.currentTarget||m.srcElement,Array.isArray(g)||(g=[0,0]);var d=m.clientX||0,E=m.clientY||0,M=c(l);return g[0]=d-M.left,g[1]=E-M.top,g}function c(m){return m===window||m===document||m===document.body?F:m.getBoundingClientRect()}},4687:function(L,F){function a(g){if(typeof g=="object"){if("buttons"in g)return g.buttons;if("which"in g){var d=g.which;if(d===2)return 4;if(d===3)return 2;if(d>0)return 1<<d-1}else if("button"in g){var d=g.button;if(d===1)return 4;if(d===2)return 2;if(d>=0)return 1<<d}}return 0}F.buttons=a;function c(g){return g.target||g.srcElement||window}F.element=c;function m(g){if(typeof g=="object"){if("offsetX"in g)return g.offsetX;var d=c(g),E=d.getBoundingClientRect();return g.clientX-E.left}return 0}F.x=m;function l(g){if(typeof g=="object"){if("offsetY"in g)return g.offsetY;var d=c(g),E=d.getBoundingClientRect();return g.clientY-E.top}return 0}F.y=l},8512:function(L,F,a){var c=a(665);L.exports=m;function m(l,g,d){typeof l=="function"&&(d=!!g,g=l,l=window);var E=c("ex",l),M=function(p){d&&p.preventDefault();var x=p.deltaX||0,w=p.deltaY||0,o=p.deltaZ||0,v=p.deltaMode,u=1;switch(v){case 1:u=E;break;case 2:u=window.innerHeight;break}if(x*=u,w*=u,o*=u,x||w||o)return g(x,w,o,p)};return l.addEventListener("wheel",M),M}},2640:function(L,F,a){var c=a(1888);L.exports=g;var m={"false,0,1":function(E,M,p,x,w){return function(v,u,f,h){var r=v.shape[0]|0,s=v.shape[1]|0,n=v.data,t=v.offset|0,i=v.stride[0]|0,e=v.stride[1]|0,T=t,b,A=-i|0,_=0,C=-e|0,S=0,y=-i-e|0,R=0,O=i|0,P=e-i*r|0,D=0,H=0,G=0,B=2*r|0,I=x(B),N=x(B),$=0,U=0,K=-1,W=-1,Y=0,j=-r|0,X=r|0,Q=0,q=-r-1|0,it=r-1|0,ft=0,at=0,rt=0;for(D=0;D<r;++D)I[$++]=p(n[T],u,f,h),T+=O;if(T+=P,s>0){if(H=1,I[$++]=p(n[T],u,f,h),T+=O,r>0)for(D=1,b=n[T],U=I[$]=p(b,u,f,h),Y=I[$+K],Q=I[$+j],ft=I[$+q],(U!==Y||U!==Q||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Y,Q,ft,u,f,h),at=N[$]=G++),$+=1,T+=O,D=2;D<r;++D)b=n[T],U=I[$]=p(b,u,f,h),Y=I[$+K],Q=I[$+j],ft=I[$+q],(U!==Y||U!==Q||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Y,Q,ft,u,f,h),at=N[$]=G++,ft!==Y&&M(N[$+K],at,R,_,ft,Y,u,f,h)),$+=1,T+=O;for(T+=P,$=0,rt=K,K=W,W=rt,rt=j,j=X,X=rt,rt=q,q=it,it=rt,H=2;H<s;++H){if(I[$++]=p(n[T],u,f,h),T+=O,r>0)for(D=1,b=n[T],U=I[$]=p(b,u,f,h),Y=I[$+K],Q=I[$+j],ft=I[$+q],(U!==Y||U!==Q||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Y,Q,ft,u,f,h),at=N[$]=G++,ft!==Q&&M(N[$+j],at,S,R,Q,ft,u,f,h)),$+=1,T+=O,D=2;D<r;++D)b=n[T],U=I[$]=p(b,u,f,h),Y=I[$+K],Q=I[$+j],ft=I[$+q],(U!==Y||U!==Q||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Y,Q,ft,u,f,h),at=N[$]=G++,ft!==Q&&M(N[$+j],at,S,R,Q,ft,u,f,h),ft!==Y&&M(N[$+K],at,R,_,ft,Y,u,f,h)),$+=1,T+=O;H&1&&($=0),rt=K,K=W,W=rt,rt=j,j=X,X=rt,rt=q,q=it,it=rt,T+=P}}w(N),w(I)}},"false,1,0":function(E,M,p,x,w){return function(v,u,f,h){var r=v.shape[0]|0,s=v.shape[1]|0,n=v.data,t=v.offset|0,i=v.stride[0]|0,e=v.stride[1]|0,T=t,b,A=-i|0,_=0,C=-e|0,S=0,y=-i-e|0,R=0,O=e|0,P=i-e*s|0,D=0,H=0,G=0,B=2*s|0,I=x(B),N=x(B),$=0,U=0,K=-1,W=-1,Y=0,j=-s|0,X=s|0,Q=0,q=-s-1|0,it=s-1|0,ft=0,at=0,rt=0;for(H=0;H<s;++H)I[$++]=p(n[T],u,f,h),T+=O;if(T+=P,r>0){if(D=1,I[$++]=p(n[T],u,f,h),T+=O,s>0)for(H=1,b=n[T],U=I[$]=p(b,u,f,h),Q=I[$+j],Y=I[$+K],ft=I[$+q],(U!==Q||U!==Y||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Q,Y,ft,u,f,h),at=N[$]=G++),$+=1,T+=O,H=2;H<s;++H)b=n[T],U=I[$]=p(b,u,f,h),Q=I[$+j],Y=I[$+K],ft=I[$+q],(U!==Q||U!==Y||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Q,Y,ft,u,f,h),at=N[$]=G++,ft!==Y&&M(N[$+K],at,S,R,Y,ft,u,f,h)),$+=1,T+=O;for(T+=P,$=0,rt=j,j=X,X=rt,rt=K,K=W,W=rt,rt=q,q=it,it=rt,D=2;D<r;++D){if(I[$++]=p(n[T],u,f,h),T+=O,s>0)for(H=1,b=n[T],U=I[$]=p(b,u,f,h),Q=I[$+j],Y=I[$+K],ft=I[$+q],(U!==Q||U!==Y||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Q,Y,ft,u,f,h),at=N[$]=G++,ft!==Q&&M(N[$+j],at,R,_,ft,Q,u,f,h)),$+=1,T+=O,H=2;H<s;++H)b=n[T],U=I[$]=p(b,u,f,h),Q=I[$+j],Y=I[$+K],ft=I[$+q],(U!==Q||U!==Y||U!==ft)&&(_=n[T+A],S=n[T+C],R=n[T+y],E(D,H,b,_,S,R,U,Q,Y,ft,u,f,h),at=N[$]=G++,ft!==Y&&M(N[$+K],at,S,R,Y,ft,u,f,h),ft!==Q&&M(N[$+j],at,R,_,ft,Q,u,f,h)),$+=1,T+=O;D&1&&($=0),rt=j,j=X,X=rt,rt=K,K=W,W=rt,rt=q,q=it,it=rt,T+=P}}w(N),w(I)}}};function l(d,E,M,p,x,w){var o=[w,x].join(","),v=m[o];return v(d,E,M,c.mallocUint32,c.freeUint32)}function g(d){function E(u){throw new Error("ndarray-extract-contour: "+u)}typeof d!="object"&&E("Must specify arguments");var M=d.order;Array.isArray(M)||E("Must specify order");var p=d.arrayArguments||1;p<1&&E("Must have at least one array argument");var x=d.scalarArguments||0;x<0&&E("Scalar arg count must be > 0"),typeof d.vertex!="function"&&E("Must specify vertex creation function"),typeof d.cell!="function"&&E("Must specify cell creation function"),typeof d.phase!="function"&&E("Must specify phase function");for(var w=d.getters||[],o=new Array(p),v=0;v<p;++v)w.indexOf(v)>=0?o[v]=!0:o[v]=!1;return l(d.vertex,d.cell,d.phase,x,M,o)}},6199:function(L,F,a){var c=a(1338),m={zero:function(f,h,r,s){var n=f[0],t=r[0];s|=0;var i=0,e=t;for(i=0;i<n;++i)h[s]=0,s+=e},fdTemplate1:function(f,h,r,s,n,t,i){var e=f[0],T=r[0],b=t[0],A=-1*T,_=T;s|=0,i|=0;var C=0,S=T,y=b;for(C=0;C<e;++C)n[i]=.5*(h[s+A]-h[s+_]),s+=S,i+=y},fdTemplate2:function(f,h,r,s,n,t,i,e,T,b){var A=f[0],_=f[1],C=r[0],S=r[1],y=t[0],R=t[1],O=T[0],P=T[1],D=-1*C,H=C,G=-1*S,B=S;s|=0,i|=0,b|=0;var I=0,N=0,$=S,U=C-_*S,K=R,W=y-_*R,Y=P,j=O-_*P;for(N=0;N<A;++N){for(I=0;I<_;++I)n[i]=.5*(h[s+D]-h[s+H]),e[b]=.5*(h[s+G]-h[s+B]),s+=$,i+=K,b+=Y;s+=U,i+=W,b+=j}}},l={cdiff:function(f){var h={};return function(s,n,t){var i=s.dtype,e=s.order,T=n.dtype,b=n.order,A=t.dtype,_=t.order,C=[i,e.join(),T,b.join(),A,_.join()].join(),S=h[C];return S||(h[C]=S=f([i,e,T,b,A,_])),S(s.shape.slice(0),s.data,s.stride,s.offset|0,n.data,n.stride,n.offset|0,t.data,t.stride,t.offset|0)}},zero:function(f){var h={};return function(s){var n=s.dtype,t=s.order,i=[n,t.join()].join(),e=h[i];return e||(h[i]=e=f([n,t])),e(s.shape.slice(0),s.data,s.stride,s.offset|0)}},fdTemplate1:function(f){var h={};return function(s,n){var t=s.dtype,i=s.order,e=n.dtype,T=n.order,b=[t,i.join(),e,T.join()].join(),A=h[b];return A||(h[b]=A=f([t,i,e,T])),A(s.shape.slice(0),s.data,s.stride,s.offset|0,n.data,n.stride,n.offset|0)}},fdTemplate2:function(f){var h={};return function(s,n,t){var i=s.dtype,e=s.order,T=n.dtype,b=n.order,A=t.dtype,_=t.order,C=[i,e.join(),T,b.join(),A,_.join()].join(),S=h[C];return S||(h[C]=S=f([i,e,T,b,A,_])),S(s.shape.slice(0),s.data,s.stride,s.offset|0,n.data,n.stride,n.offset|0,t.data,t.stride,t.offset|0)}}};function g(f){var h=l[f.funcName];return h(d.bind(void 0,f))}function d(f){return m[f.funcName]}function E(f){return g({funcName:f.funcName})}var M={},p={},x=E({funcName:"cdiff"}),w=E({funcName:"zero"});function o(f){return f in M?M[f]:M[f]=E({funcName:"fdTemplate"+f})}function v(f,h,r,s){return function(n,t){var i=t.shape.slice();return i[0]>2&&i[1]>2&&s(t.pick(-1,-1).lo(1,1).hi(i[0]-2,i[1]-2),n.pick(-1,-1,0).lo(1,1).hi(i[0]-2,i[1]-2),n.pick(-1,-1,1).lo(1,1).hi(i[0]-2,i[1]-2)),i[1]>2&&(r(t.pick(0,-1).lo(1).hi(i[1]-2),n.pick(0,-1,1).lo(1).hi(i[1]-2)),h(n.pick(0,-1,0).lo(1).hi(i[1]-2))),i[1]>2&&(r(t.pick(i[0]-1,-1).lo(1).hi(i[1]-2),n.pick(i[0]-1,-1,1).lo(1).hi(i[1]-2)),h(n.pick(i[0]-1,-1,0).lo(1).hi(i[1]-2))),i[0]>2&&(r(t.pick(-1,0).lo(1).hi(i[0]-2),n.pick(-1,0,0).lo(1).hi(i[0]-2)),h(n.pick(-1,0,1).lo(1).hi(i[0]-2))),i[0]>2&&(r(t.pick(-1,i[1]-1).lo(1).hi(i[0]-2),n.pick(-1,i[1]-1,0).lo(1).hi(i[0]-2)),h(n.pick(-1,i[1]-1,1).lo(1).hi(i[0]-2))),n.set(0,0,0,0),n.set(0,0,1,0),n.set(i[0]-1,0,0,0),n.set(i[0]-1,0,1,0),n.set(0,i[1]-1,0,0),n.set(0,i[1]-1,1,0),n.set(i[0]-1,i[1]-1,0,0),n.set(i[0]-1,i[1]-1,1,0),n}}function u(f){var h=f.join(),i=p[h];if(i)return i;for(var r=f.length,s=[x,w],n=1;n<=r;++n)s.push(o(n));var t=v,i=t.apply(void 0,s);return p[h]=i,i}L.exports=function(h,r,s){if(Array.isArray(s)||(typeof s=="string"?s=c(r.dimension,s):s=c(r.dimension,"clamp")),r.size===0)return h;if(r.dimension===0)return h.set(0),h;var n=u(s);return n(h,r)}},4317:function(L){function F(g,d){var E=Math.floor(d),M=d-E,p=0<=E&&E<g.shape[0],x=0<=E+1&&E+1<g.shape[0],w=p?+g.get(E):0,o=x?+g.get(E+1):0;return(1-M)*w+M*o}function a(g,d,E){var M=Math.floor(d),p=d-M,x=0<=M&&M<g.shape[0],w=0<=M+1&&M+1<g.shape[0],o=Math.floor(E),v=E-o,u=0<=o&&o<g.shape[1],f=0<=o+1&&o+1<g.shape[1],h=x&&u?g.get(M,o):0,r=x&&f?g.get(M,o+1):0,s=w&&u?g.get(M+1,o):0,n=w&&f?g.get(M+1,o+1):0;return(1-v)*((1-p)*h+p*s)+v*((1-p)*r+p*n)}function c(g,d,E,M){var p=Math.floor(d),x=d-p,w=0<=p&&p<g.shape[0],o=0<=p+1&&p+1<g.shape[0],v=Math.floor(E),u=E-v,f=0<=v&&v<g.shape[1],h=0<=v+1&&v+1<g.shape[1],r=Math.floor(M),s=M-r,n=0<=r&&r<g.shape[2],t=0<=r+1&&r+1<g.shape[2],i=w&&f&&n?g.get(p,v,r):0,e=w&&h&&n?g.get(p,v+1,r):0,T=o&&f&&n?g.get(p+1,v,r):0,b=o&&h&&n?g.get(p+1,v+1,r):0,A=w&&f&&t?g.get(p,v,r+1):0,_=w&&h&&t?g.get(p,v+1,r+1):0,C=o&&f&&t?g.get(p+1,v,r+1):0,S=o&&h&&t?g.get(p+1,v+1,r+1):0;return(1-s)*((1-u)*((1-x)*i+x*T)+u*((1-x)*e+x*b))+s*((1-u)*((1-x)*A+x*C)+u*((1-x)*_+x*S))}function m(g){var d=g.shape.length|0,E=new Array(d),M=new Array(d),p=new Array(d),x=new Array(d),w,o;for(w=0;w<d;++w)o=+arguments[w+1],E[w]=Math.floor(o),M[w]=o-E[w],p[w]=0<=E[w]&&E[w]<g.shape[w],x[w]=0<=E[w]+1&&E[w]+1<g.shape[w];var v=0,u,f,h;t:for(w=0;w<1<<d;++w){for(f=1,h=g.offset,u=0;u<d;++u)if(w&1<<u){if(!x[u])continue t;f*=M[u],h+=g.stride[u]*(E[u]+1)}else{if(!p[u])continue t;f*=1-M[u],h+=g.stride[u]*E[u]}v+=f*g.data[h]}return v}function l(g,d,E,M){switch(g.shape.length){case 0:return 0;case 1:return F(g,d);case 2:return a(g,d,E);case 3:return c(g,d,E,M);default:return m.apply(void 0,arguments)}}L.exports=l,L.exports.d1=F,L.exports.d2=a,L.exports.d3=c},5298:function(L,F){var a={"float64,2,1,0":function(){return function(p,x,w,o,v){var u=p[0],f=p[1],h=p[2],r=w[0],s=w[1],n=w[2];o|=0;var t=0,i=0,e=0,T=n,b=s-h*n,A=r-f*s;for(e=0;e<u;++e){for(i=0;i<f;++i){for(t=0;t<h;++t)x[o]/=v,o+=T;o+=b}o+=A}}},"uint8,2,0,1,float64,2,1,0":function(){return function(p,x,w,o,v,u,f,h){var r=p[0],s=p[1],n=p[2],t=w[0],i=w[1],e=w[2],T=u[0],b=u[1],A=u[2];o|=0,f|=0;for(var _=o,C=f,S=p[0]|0;S>0;){S<64?(r=S,S=0):(r=64,S-=64);for(var y=p[1]|0;y>0;){y<64?(s=y,y=0):(s=64,y-=64),o=_+S*t+y*i,f=C+S*T+y*b;var R=0,O=0,P=0,D=e,H=t-n*e,G=i-r*t,B=A,I=T-n*A,N=b-r*T;for(P=0;P<s;++P){for(O=0;O<r;++O){for(R=0;R<n;++R)x[o]=v[f]*h,o+=D,f+=B;o+=H,f+=I}o+=G,f+=N}}}}},"float32,1,0,float32,1,0":function(){return function(p,x,w,o,v,u,f){var h=p[0],r=p[1],s=w[0],n=w[1],t=u[0],i=u[1];o|=0,f|=0;var e=0,T=0,b=n,A=s-r*n,_=i,C=t-r*i;for(T=0;T<h;++T){for(e=0;e<r;++e)x[o]=v[f],o+=b,f+=_;o+=A,f+=C}}},"float32,1,0,float32,0,1":function(){return function(p,x,w,o,v,u,f){var h=p[0],r=p[1],s=w[0],n=w[1],t=u[0],i=u[1];o|=0,f|=0;for(var e=o,T=f,b=p[1]|0;b>0;){b<64?(r=b,b=0):(r=64,b-=64);for(var A=p[0]|0;A>0;){A<64?(h=A,A=0):(h=64,A-=64),o=e+b*n+A*s,f=T+b*i+A*t;var _=0,C=0,S=n,y=s-r*n,R=i,O=t-r*i;for(C=0;C<h;++C){for(_=0;_<r;++_)x[o]=v[f],o+=S,f+=R;o+=y,f+=O}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(p,x,w,o,v,u,f){var h=p[0],r=p[1],s=p[2],n=w[0],t=w[1],i=w[2],e=u[0],T=u[1],b=u[2];o|=0,f|=0;for(var A=o,_=f,C=p[2]|0;C>0;){C<64?(s=C,C=0):(s=64,C-=64);for(var S=p[0]|0;S>0;){S<64?(h=S,S=0):(h=64,S-=64);for(var y=p[1]|0;y>0;){y<64?(r=y,y=0):(r=64,y-=64),o=A+C*i+S*n+y*t,f=_+C*b+S*e+y*T;var R=0,O=0,P=0,D=i,H=n-s*i,G=t-h*n,B=b,I=e-s*b,N=T-h*e;for(P=0;P<r;++P){for(O=0;O<h;++O){for(R=0;R<s;++R)x[o]=v[f],o+=D,f+=B;o+=H,f+=I}o+=G,f+=N}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(p,x,w,o,v,u,f){var h=p[0],r=p[1],s=p[2],n=w[0],t=w[1],i=w[2],e=u[0],T=u[1],b=u[2];o|=0,f|=0;var A=0,_=0,C=0,S=i,y=n-s*i,R=t-h*n,O=b,P=e-s*b,D=T-h*e;for(C=0;C<r;++C){for(_=0;_<h;++_){for(A=0;A<s;++A)x[o]=v[f],o+=S,f+=O;o+=y,f+=P}o+=R,f+=D}}}};function c(M,p){var x=p.join(","),w=a[x];return w()}var m=c,l={mul:function(M){var p={};return function(w,o,v){var u=w.dtype,f=w.order,h=o.dtype,r=o.order,s=v.dtype,n=v.order,t=[u,f.join(),h,r.join(),s,n.join()].join(),i=p[t];return i||(p[t]=i=M([u,f,h,r,s,n])),i(w.shape.slice(0),w.data,w.stride,w.offset|0,o.data,o.stride,o.offset|0,v.data,v.stride,v.offset|0)}},muls:function(M){var p={};return function(w,o,v){var u=w.dtype,f=w.order,h=o.dtype,r=o.order,s=[u,f.join(),h,r.join()].join(),n=p[s];return n||(p[s]=n=M([u,f,h,r])),n(w.shape.slice(0),w.data,w.stride,w.offset|0,o.data,o.stride,o.offset|0,v)}},mulseq:function(M){var p={};return function(w,o){var v=w.dtype,u=w.order,f=[v,u.join()].join(),h=p[f];return h||(p[f]=h=M([v,u])),h(w.shape.slice(0),w.data,w.stride,w.offset|0,o)}},div:function(M){var p={};return function(w,o,v){var u=w.dtype,f=w.order,h=o.dtype,r=o.order,s=v.dtype,n=v.order,t=[u,f.join(),h,r.join(),s,n.join()].join(),i=p[t];return i||(p[t]=i=M([u,f,h,r,s,n])),i(w.shape.slice(0),w.data,w.stride,w.offset|0,o.data,o.stride,o.offset|0,v.data,v.stride,v.offset|0)}},divs:function(M){var p={};return function(w,o,v){var u=w.dtype,f=w.order,h=o.dtype,r=o.order,s=[u,f.join(),h,r.join()].join(),n=p[s];return n||(p[s]=n=M([u,f,h,r])),n(w.shape.slice(0),w.data,w.stride,w.offset|0,o.data,o.stride,o.offset|0,v)}},divseq:function(M){var p={};return function(w,o){var v=w.dtype,u=w.order,f=[v,u.join()].join(),h=p[f];return h||(p[f]=h=M([v,u])),h(w.shape.slice(0),w.data,w.stride,w.offset|0,o)}},assign:function(M){var p={};return function(w,o){var v=w.dtype,u=w.order,f=o.dtype,h=o.order,r=[v,u.join(),f,h.join()].join(),s=p[r];return s||(p[r]=s=M([v,u,f,h])),s(w.shape.slice(0),w.data,w.stride,w.offset|0,o.data,o.stride,o.offset|0)}}};function g(M){var p=l[M.funcName];return p(m.bind(void 0,M))}function d(M){return g({funcName:M.funcName})}var E={mul:"*",div:"/"};(function(){for(var M in E)F[M]=d({funcName:M}),F[M+"s"]=d({funcName:M+"s"}),F[M+"seq"]=d({funcName:M+"seq"})})(),F.assign=d({funcName:"assign"})},9994:function(L,F,a){var c=a(9618),m=a(8277);L.exports=function(g,d){for(var E=[],M=g,p=1;Array.isArray(M);)E.push(M.length),p*=M.length,M=M[0];return E.length===0?c():(d||(d=c(new Float64Array(p),E)),m(d,g),d)}},8277:function(L){function F(){return function(d,E,M,p,x){var w=d[0],o=d[1],v=d[2],u=M[0],f=M[1],h=M[2],r=[0,0,0];p|=0;var s=0,n=0,t=0,i=h,e=f-v*h,T=u-o*f;for(t=0;t<w;++t){for(n=0;n<o;++n){for(s=0;s<v;++s){{var b=x,A;for(A=0;A<r.length-1;++A)b=b[r[A]];E[p]=b[r[r.length-1]]}p+=i,++r[2]}p+=e,r[2]-=v,++r[1]}p+=T,r[1]-=o,++r[0]}}}function a(){return F()}var c=a;function m(d){var E={};return function(p,x){var w=p.dtype,o=p.order,v=[w,o.join()].join(),u=E[v];return u||(E[v]=u=d([w,o])),u(p.shape.slice(0),p.data,p.stride,p.offset|0,x)}}function l(d){return m(c.bind(void 0,d))}function g(d){return l({funcName:d.funcName})}L.exports=g({funcName:"convert"})},7640:function(L,F,a){var c=a(1888);function m(x){switch(x){case"uint32":return[c.mallocUint32,c.freeUint32];default:return null}}var l={"uint32,1,0":function(x,w){return function(v,u,f,h,r,s,n,t,i,e,T){var b,A,_,C=v*r+h,S,y=x(t),R,O,P,D;for(b=v+1;b<=u;++b){for(A=b,C+=r,_=C,R=0,O=C,S=0;S<t;++S)y[R++]=f[O],O+=i;t:for(;A-- >v;){R=0,O=_-r;e:for(S=0;S<t;++S){if(P=f[O],D=y[R],P<D)break t;if(P>D)break e;O+=e,R+=T}for(R=_,O=_-r,S=0;S<t;++S)f[R]=f[O],R+=i,O+=i;_-=r}for(R=_,O=0,S=0;S<t;++S)f[R]=y[O++],R+=i}w(y)}}};function g(x,w){var o=m(w),v=[w,x].join(","),u=l[v];return o?u(o[0],o[1]):u()}var d={"uint32,1,0":function(x,w,o){return function v(u,f,h,r,s,n,t,i,e,T,b){var A=(f-u+1)/6|0,_=u+A,C=f-A,S=u+f>>1,y=S-A,R=S+A,O=_,P=y,D=S,H=R,G=C,B=u+1,I=f-1,N=!0,$,U,K,W,Y,j,X,Q,q,it=0,ft=0,at=0,rt,ht,ot,vt,lt,ut,mt,Et,ct,xt,pt,Mt,At,wt,dt,gt,Tt=i,_t=w(Tt),Bt=w(Tt);ht=s*O,ot=s*P,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=O,O=P,P=U;break t}if(at<0)break t;gt+=T}ht=s*H,ot=s*G,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=H,H=G,G=U;break t}if(at<0)break t;gt+=T}ht=s*O,ot=s*D,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=O,O=D,D=U;break t}if(at<0)break t;gt+=T}ht=s*P,ot=s*D,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=P,P=D,D=U;break t}if(at<0)break t;gt+=T}ht=s*O,ot=s*H,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=O,O=H,H=U;break t}if(at<0)break t;gt+=T}ht=s*D,ot=s*H,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=D,D=H,H=U;break t}if(at<0)break t;gt+=T}ht=s*P,ot=s*G,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=P,P=G,G=U;break t}if(at<0)break t;gt+=T}ht=s*P,ot=s*D,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=P,P=D,D=U;break t}if(at<0)break t;gt+=T}ht=s*H,ot=s*G,gt=r;t:for(rt=0;rt<i;++rt){if(X=ht+gt,Q=ot+gt,at=h[X]-h[Q],at>0){U=H,H=G,G=U;break t}if(at<0)break t;gt+=T}for(ht=s*O,ot=s*P,vt=s*D,lt=s*H,ut=s*G,mt=s*_,Et=s*S,ct=s*C,dt=0,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,q=vt+gt,xt=lt+gt,pt=ut+gt,Mt=mt+gt,At=Et+gt,wt=ct+gt,_t[dt]=h[Q],Bt[dt]=h[xt],N=N&&_t[dt]===Bt[dt],K=h[X],W=h[q],Y=h[pt],h[Mt]=K,h[At]=W,h[wt]=Y,++dt,gt+=e;for(ht=s*y,ot=s*u,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,h[X]=h[Q],gt+=e;for(ht=s*R,ot=s*f,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,h[X]=h[Q],gt+=e;if(N)for(j=B;j<=I;++j){X=r+j*s,dt=0;t:for(rt=0;rt<i;++rt){if(at=h[X]-_t[dt],at!==0)break t;dt+=b,X+=T}if(at!==0)if(at<0){if(j!==B)for(ht=s*j,ot=s*B,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,$=h[X],h[X]=h[Q],h[Q]=$,gt+=e;++B}else for(;;){X=r+I*s,dt=0;t:for(rt=0;rt<i;++rt){if(at=h[X]-_t[dt],at!==0)break t;dt+=b,X+=T}if(at>0)I--;else if(at<0){for(ht=s*j,ot=s*B,vt=s*I,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,q=vt+gt,$=h[X],h[X]=h[Q],h[Q]=h[q],h[q]=$,gt+=e;++B,--I;break}else{for(ht=s*j,ot=s*I,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,$=h[X],h[X]=h[Q],h[Q]=$,gt+=e;--I;break}}}else for(j=B;j<=I;++j){X=r+j*s,dt=0;t:for(rt=0;rt<i;++rt){if(it=h[X]-_t[dt],it!==0)break t;dt+=b,X+=T}if(it<0){if(j!==B)for(ht=s*j,ot=s*B,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,$=h[X],h[X]=h[Q],h[Q]=$,gt+=e;++B}else{X=r+j*s,dt=0;t:for(rt=0;rt<i;++rt){if(ft=h[X]-Bt[dt],ft!==0)break t;dt+=b,X+=T}if(ft>0)for(;;){X=r+I*s,dt=0;t:for(rt=0;rt<i;++rt){if(at=h[X]-Bt[dt],at!==0)break t;dt+=b,X+=T}if(at>0){if(--I<j)break;continue}else{X=r+I*s,dt=0;t:for(rt=0;rt<i;++rt){if(at=h[X]-_t[dt],at!==0)break t;dt+=b,X+=T}if(at<0){for(ht=s*j,ot=s*B,vt=s*I,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,q=vt+gt,$=h[X],h[X]=h[Q],h[Q]=h[q],h[q]=$,gt+=e;++B,--I}else{for(ht=s*j,ot=s*I,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,$=h[X],h[X]=h[Q],h[Q]=$,gt+=e;--I}break}}}}for(ht=s*u,ot=s*(B-1),dt=0,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,h[X]=h[Q],h[Q]=_t[dt],++dt,gt+=e;for(ht=s*f,ot=s*(I+1),dt=0,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,h[X]=h[Q],h[Q]=Bt[dt],++dt,gt+=e;if(B-2-u<=32?x(u,B-2,h,r,s,n,t,i,e,T,b):v(u,B-2,h,r,s,n,t,i,e,T,b),f-(I+2)<=32?x(I+2,f,h,r,s,n,t,i,e,T,b):v(I+2,f,h,r,s,n,t,i,e,T,b),N){o(_t),o(Bt);return}if(B<_&&I>C){t:for(;;){for(X=r+B*s,dt=0,gt=r,rt=0;rt<i;++rt){if(h[X]!==_t[dt])break t;++dt,X+=e}++B}t:for(;;){for(X=r+I*s,dt=0,gt=r,rt=0;rt<i;++rt){if(h[X]!==Bt[dt])break t;++dt,X+=e}--I}for(j=B;j<=I;++j){X=r+j*s,dt=0;t:for(rt=0;rt<i;++rt){if(it=h[X]-_t[dt],it!==0)break t;dt+=b,X+=T}if(it===0){if(j!==B)for(ht=s*j,ot=s*B,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,$=h[X],h[X]=h[Q],h[Q]=$,gt+=e;++B}else{X=r+j*s,dt=0;t:for(rt=0;rt<i;++rt){if(ft=h[X]-Bt[dt],ft!==0)break t;dt+=b,X+=T}if(ft===0)for(;;){X=r+I*s,dt=0;t:for(rt=0;rt<i;++rt){if(at=h[X]-Bt[dt],at!==0)break t;dt+=b,X+=T}if(at===0){if(--I<j)break;continue}else{X=r+I*s,dt=0;t:for(rt=0;rt<i;++rt){if(at=h[X]-_t[dt],at!==0)break t;dt+=b,X+=T}if(at<0){for(ht=s*j,ot=s*B,vt=s*I,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,q=vt+gt,$=h[X],h[X]=h[Q],h[Q]=h[q],h[q]=$,gt+=e;++B,--I}else{for(ht=s*j,ot=s*I,gt=r,rt=0;rt<i;++rt)X=ht+gt,Q=ot+gt,$=h[X],h[X]=h[Q],h[Q]=$,gt+=e;--I}break}}}}}o(_t),o(Bt),I-B<=32?x(B,I,h,r,s,n,t,i,e,T,b):v(B,I,h,r,s,n,t,i,e,T,b)}}};function E(x,w,o){var v=m(w),u=[w,x].join(","),f=d[u];return x.length>1&&v?f(o,v[0],v[1]):f(o)}var M={"uint32,1,0":function(x,w){return function(o){var v=o.data,u=o.offset|0,f=o.shape,h=o.stride,r=h[0]|0,s=f[0]|0,n=h[1]|0,t=f[1]|0,i=n,e=n,T=1;s<=32?x(0,s-1,v,u,r,n,s,t,i,e,T):w(0,s-1,v,u,r,n,s,t,i,e,T)}}};function p(x,w){var o=[w,x].join(","),v=M[o],u=g(x,w),f=E(x,w,u);return v(u,f)}L.exports=p},446:function(L,F,a){var c=a(7640),m={};function l(g){var d=g.order,E=g.dtype,M=[d,E],p=M.join(":"),x=m[p];return x||(m[p]=x=c(d,E)),x(g),g}L.exports=l},9618:function(L,F,a){var c=a(7163),m=typeof Float64Array<"u";function l(w,o){return w[0]-o[0]}function g(){var w=this.stride,o=new Array(w.length),v;for(v=0;v<o.length;++v)o[v]=[Math.abs(w[v]),v];o.sort(l);var u=new Array(o.length);for(v=0;v<u.length;++v)u[v]=o[v][1];return u}var d={T:function(w){function o(u){this.data=u}var v=o.prototype;return v.dtype=w,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new o(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(f){return new o(f)}},0:function(w,o){function v(f,h){this.data=f,this.offset=h}var u=v.prototype;return u.dtype=w,u.index=function(){return this.offset},u.dimension=0,u.size=1,u.shape=u.stride=u.order=[],u.lo=u.hi=u.transpose=u.step=function(){return new v(this.data,this.offset)},u.pick=function(){return o(this.data)},u.valueOf=u.get=function(){return w==="generic"?this.data.get(this.offset):this.data[this.offset]},u.set=function(h){return w==="generic"?this.data.set(this.offset,h):this.data[this.offset]=h},function(h,r,s,n){return new v(h,n)}},1:function(w,o,v){function u(h,r,s,n){this.data=h,this.shape=[r],this.stride=[s],this.offset=n|0}var f=u.prototype;return f.dtype=w,f.dimension=1,Object.defineProperty(f,"size",{get:function(){return this.shape[0]}}),f.order=[0],f.set=function(r,s){return w==="generic"?this.data.set(this.offset+this.stride[0]*r,s):this.data[this.offset+this.stride[0]*r]=s},f.get=function(r){return w==="generic"?this.data.get(this.offset+this.stride[0]*r):this.data[this.offset+this.stride[0]*r]},f.index=function(r){return this.offset+this.stride[0]*r},f.hi=function(r){return new u(this.data,typeof r!="number"||r<0?this.shape[0]:r|0,this.stride[0],this.offset)},f.lo=function(r){var s=this.offset,n=0,t=this.shape[0],i=this.stride[0];return typeof r=="number"&&r>=0&&(n=r|0,s+=i*n,t-=n),new u(this.data,t,i,s)},f.step=function(r){var s=this.shape[0],n=this.stride[0],t=this.offset,i=0,e=Math.ceil;return typeof r=="number"&&(i=r|0,i<0?(t+=n*(s-1),s=e(-s/i)):s=e(s/i),n*=i),new u(this.data,s,n,t)},f.transpose=function(r){r=r===void 0?0:r|0;var s=this.shape,n=this.stride;return new u(this.data,s[r],n[r],this.offset)},f.pick=function(r){var s=[],n=[],t=this.offset;typeof r=="number"&&r>=0?t=t+this.stride[0]*r|0:(s.push(this.shape[0]),n.push(this.stride[0]));var i=o[s.length+1];return i(this.data,s,n,t)},function(r,s,n,t){return new u(r,s[0],n[0],t)}},2:function(w,o,v){function u(h,r,s,n,t,i){this.data=h,this.shape=[r,s],this.stride=[n,t],this.offset=i|0}var f=u.prototype;return f.dtype=w,f.dimension=2,Object.defineProperty(f,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(f,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),f.set=function(r,s,n){return w==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*s,n):this.data[this.offset+this.stride[0]*r+this.stride[1]*s]=n},f.get=function(r,s){return w==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*s):this.data[this.offset+this.stride[0]*r+this.stride[1]*s]},f.index=function(r,s){return this.offset+this.stride[0]*r+this.stride[1]*s},f.hi=function(r,s){return new u(this.data,typeof r!="number"||r<0?this.shape[0]:r|0,typeof s!="number"||s<0?this.shape[1]:s|0,this.stride[0],this.stride[1],this.offset)},f.lo=function(r,s){var n=this.offset,t=0,i=this.shape[0],e=this.shape[1],T=this.stride[0],b=this.stride[1];return typeof r=="number"&&r>=0&&(t=r|0,n+=T*t,i-=t),typeof s=="number"&&s>=0&&(t=s|0,n+=b*t,e-=t),new u(this.data,i,e,T,b,n)},f.step=function(r,s){var n=this.shape[0],t=this.shape[1],i=this.stride[0],e=this.stride[1],T=this.offset,b=0,A=Math.ceil;return typeof r=="number"&&(b=r|0,b<0?(T+=i*(n-1),n=A(-n/b)):n=A(n/b),i*=b),typeof s=="number"&&(b=s|0,b<0?(T+=e*(t-1),t=A(-t/b)):t=A(t/b),e*=b),new u(this.data,n,t,i,e,T)},f.transpose=function(r,s){r=r===void 0?0:r|0,s=s===void 0?1:s|0;var n=this.shape,t=this.stride;return new u(this.data,n[r],n[s],t[r],t[s],this.offset)},f.pick=function(r,s){var n=[],t=[],i=this.offset;typeof r=="number"&&r>=0?i=i+this.stride[0]*r|0:(n.push(this.shape[0]),t.push(this.stride[0])),typeof s=="number"&&s>=0?i=i+this.stride[1]*s|0:(n.push(this.shape[1]),t.push(this.stride[1]));var e=o[n.length+1];return e(this.data,n,t,i)},function(r,s,n,t){return new u(r,s[0],s[1],n[0],n[1],t)}},3:function(w,o,v){function u(h,r,s,n,t,i,e,T){this.data=h,this.shape=[r,s,n],this.stride=[t,i,e],this.offset=T|0}var f=u.prototype;return f.dtype=w,f.dimension=3,Object.defineProperty(f,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(f,"order",{get:function(){var r=Math.abs(this.stride[0]),s=Math.abs(this.stride[1]),n=Math.abs(this.stride[2]);return r>s?s>n?[2,1,0]:r>n?[1,2,0]:[1,0,2]:r>n?[2,0,1]:n>s?[0,1,2]:[0,2,1]}}),f.set=function(r,s,n,t){return w==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n,t):this.data[this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n]=t},f.get=function(r,s,n){return w==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n):this.data[this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n]},f.index=function(r,s,n){return this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n},f.hi=function(r,s,n){return new u(this.data,typeof r!="number"||r<0?this.shape[0]:r|0,typeof s!="number"||s<0?this.shape[1]:s|0,typeof n!="number"||n<0?this.shape[2]:n|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},f.lo=function(r,s,n){var t=this.offset,i=0,e=this.shape[0],T=this.shape[1],b=this.shape[2],A=this.stride[0],_=this.stride[1],C=this.stride[2];return typeof r=="number"&&r>=0&&(i=r|0,t+=A*i,e-=i),typeof s=="number"&&s>=0&&(i=s|0,t+=_*i,T-=i),typeof n=="number"&&n>=0&&(i=n|0,t+=C*i,b-=i),new u(this.data,e,T,b,A,_,C,t)},f.step=function(r,s,n){var t=this.shape[0],i=this.shape[1],e=this.shape[2],T=this.stride[0],b=this.stride[1],A=this.stride[2],_=this.offset,C=0,S=Math.ceil;return typeof r=="number"&&(C=r|0,C<0?(_+=T*(t-1),t=S(-t/C)):t=S(t/C),T*=C),typeof s=="number"&&(C=s|0,C<0?(_+=b*(i-1),i=S(-i/C)):i=S(i/C),b*=C),typeof n=="number"&&(C=n|0,C<0?(_+=A*(e-1),e=S(-e/C)):e=S(e/C),A*=C),new u(this.data,t,i,e,T,b,A,_)},f.transpose=function(r,s,n){r=r===void 0?0:r|0,s=s===void 0?1:s|0,n=n===void 0?2:n|0;var t=this.shape,i=this.stride;return new u(this.data,t[r],t[s],t[n],i[r],i[s],i[n],this.offset)},f.pick=function(r,s,n){var t=[],i=[],e=this.offset;typeof r=="number"&&r>=0?e=e+this.stride[0]*r|0:(t.push(this.shape[0]),i.push(this.stride[0])),typeof s=="number"&&s>=0?e=e+this.stride[1]*s|0:(t.push(this.shape[1]),i.push(this.stride[1])),typeof n=="number"&&n>=0?e=e+this.stride[2]*n|0:(t.push(this.shape[2]),i.push(this.stride[2]));var T=o[t.length+1];return T(this.data,t,i,e)},function(r,s,n,t){return new u(r,s[0],s[1],s[2],n[0],n[1],n[2],t)}},4:function(w,o,v){function u(h,r,s,n,t,i,e,T,b,A){this.data=h,this.shape=[r,s,n,t],this.stride=[i,e,T,b],this.offset=A|0}var f=u.prototype;return f.dtype=w,f.dimension=4,Object.defineProperty(f,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(f,"order",{get:v}),f.set=function(r,s,n,t,i){return w==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n+this.stride[3]*t,i):this.data[this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n+this.stride[3]*t]=i},f.get=function(r,s,n,t){return w==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n+this.stride[3]*t):this.data[this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n+this.stride[3]*t]},f.index=function(r,s,n,t){return this.offset+this.stride[0]*r+this.stride[1]*s+this.stride[2]*n+this.stride[3]*t},f.hi=function(r,s,n,t){return new u(this.data,typeof r!="number"||r<0?this.shape[0]:r|0,typeof s!="number"||s<0?this.shape[1]:s|0,typeof n!="number"||n<0?this.shape[2]:n|0,typeof t!="number"||t<0?this.shape[3]:t|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},f.lo=function(r,s,n,t){var i=this.offset,e=0,T=this.shape[0],b=this.shape[1],A=this.shape[2],_=this.shape[3],C=this.stride[0],S=this.stride[1],y=this.stride[2],R=this.stride[3];return typeof r=="number"&&r>=0&&(e=r|0,i+=C*e,T-=e),typeof s=="number"&&s>=0&&(e=s|0,i+=S*e,b-=e),typeof n=="number"&&n>=0&&(e=n|0,i+=y*e,A-=e),typeof t=="number"&&t>=0&&(e=t|0,i+=R*e,_-=e),new u(this.data,T,b,A,_,C,S,y,R,i)},f.step=function(r,s,n,t){var i=this.shape[0],e=this.shape[1],T=this.shape[2],b=this.shape[3],A=this.stride[0],_=this.stride[1],C=this.stride[2],S=this.stride[3],y=this.offset,R=0,O=Math.ceil;return typeof r=="number"&&(R=r|0,R<0?(y+=A*(i-1),i=O(-i/R)):i=O(i/R),A*=R),typeof s=="number"&&(R=s|0,R<0?(y+=_*(e-1),e=O(-e/R)):e=O(e/R),_*=R),typeof n=="number"&&(R=n|0,R<0?(y+=C*(T-1),T=O(-T/R)):T=O(T/R),C*=R),typeof t=="number"&&(R=t|0,R<0?(y+=S*(b-1),b=O(-b/R)):b=O(b/R),S*=R),new u(this.data,i,e,T,b,A,_,C,S,y)},f.transpose=function(r,s,n,t){r=r===void 0?0:r|0,s=s===void 0?1:s|0,n=n===void 0?2:n|0,t=t===void 0?3:t|0;var i=this.shape,e=this.stride;return new u(this.data,i[r],i[s],i[n],i[t],e[r],e[s],e[n],e[t],this.offset)},f.pick=function(r,s,n,t){var i=[],e=[],T=this.offset;typeof r=="number"&&r>=0?T=T+this.stride[0]*r|0:(i.push(this.shape[0]),e.push(this.stride[0])),typeof s=="number"&&s>=0?T=T+this.stride[1]*s|0:(i.push(this.shape[1]),e.push(this.stride[1])),typeof n=="number"&&n>=0?T=T+this.stride[2]*n|0:(i.push(this.shape[2]),e.push(this.stride[2])),typeof t=="number"&&t>=0?T=T+this.stride[3]*t|0:(i.push(this.shape[3]),e.push(this.stride[3]));var b=o[i.length+1];return b(this.data,i,e,T)},function(r,s,n,t){return new u(r,s[0],s[1],s[2],s[3],n[0],n[1],n[2],n[3],t)}},5:function(o,v,u){function f(r,s,n,t,i,e,T,b,A,_,C,S){this.data=r,this.shape=[s,n,t,i,e],this.stride=[T,b,A,_,C],this.offset=S|0}var h=f.prototype;return h.dtype=o,h.dimension=5,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(h,"order",{get:u}),h.set=function(s,n,t,i,e,T){return o==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*n+this.stride[2]*t+this.stride[3]*i+this.stride[4]*e,T):this.data[this.offset+this.stride[0]*s+this.stride[1]*n+this.stride[2]*t+this.stride[3]*i+this.stride[4]*e]=T},h.get=function(s,n,t,i,e){return o==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*n+this.stride[2]*t+this.stride[3]*i+this.stride[4]*e):this.data[this.offset+this.stride[0]*s+this.stride[1]*n+this.stride[2]*t+this.stride[3]*i+this.stride[4]*e]},h.index=function(s,n,t,i,e){return this.offset+this.stride[0]*s+this.stride[1]*n+this.stride[2]*t+this.stride[3]*i+this.stride[4]*e},h.hi=function(s,n,t,i,e){return new f(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof n!="number"||n<0?this.shape[1]:n|0,typeof t!="number"||t<0?this.shape[2]:t|0,typeof i!="number"||i<0?this.shape[3]:i|0,typeof e!="number"||e<0?this.shape[4]:e|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},h.lo=function(s,n,t,i,e){var T=this.offset,b=0,A=this.shape[0],_=this.shape[1],C=this.shape[2],S=this.shape[3],y=this.shape[4],R=this.stride[0],O=this.stride[1],P=this.stride[2],D=this.stride[3],H=this.stride[4];return typeof s=="number"&&s>=0&&(b=s|0,T+=R*b,A-=b),typeof n=="number"&&n>=0&&(b=n|0,T+=O*b,_-=b),typeof t=="number"&&t>=0&&(b=t|0,T+=P*b,C-=b),typeof i=="number"&&i>=0&&(b=i|0,T+=D*b,S-=b),typeof e=="number"&&e>=0&&(b=e|0,T+=H*b,y-=b),new f(this.data,A,_,C,S,y,R,O,P,D,H,T)},h.step=function(s,n,t,i,e){var T=this.shape[0],b=this.shape[1],A=this.shape[2],_=this.shape[3],C=this.shape[4],S=this.stride[0],y=this.stride[1],R=this.stride[2],O=this.stride[3],P=this.stride[4],D=this.offset,H=0,G=Math.ceil;return typeof s=="number"&&(H=s|0,H<0?(D+=S*(T-1),T=G(-T/H)):T=G(T/H),S*=H),typeof n=="number"&&(H=n|0,H<0?(D+=y*(b-1),b=G(-b/H)):b=G(b/H),y*=H),typeof t=="number"&&(H=t|0,H<0?(D+=R*(A-1),A=G(-A/H)):A=G(A/H),R*=H),typeof i=="number"&&(H=i|0,H<0?(D+=O*(_-1),_=G(-_/H)):_=G(_/H),O*=H),typeof e=="number"&&(H=e|0,H<0?(D+=P*(C-1),C=G(-C/H)):C=G(C/H),P*=H),new f(this.data,T,b,A,_,C,S,y,R,O,P,D)},h.transpose=function(s,n,t,i,e){s=s===void 0?0:s|0,n=n===void 0?1:n|0,t=t===void 0?2:t|0,i=i===void 0?3:i|0,e=e===void 0?4:e|0;var T=this.shape,b=this.stride;return new f(this.data,T[s],T[n],T[t],T[i],T[e],b[s],b[n],b[t],b[i],b[e],this.offset)},h.pick=function(s,n,t,i,e){var T=[],b=[],A=this.offset;typeof s=="number"&&s>=0?A=A+this.stride[0]*s|0:(T.push(this.shape[0]),b.push(this.stride[0])),typeof n=="number"&&n>=0?A=A+this.stride[1]*n|0:(T.push(this.shape[1]),b.push(this.stride[1])),typeof t=="number"&&t>=0?A=A+this.stride[2]*t|0:(T.push(this.shape[2]),b.push(this.stride[2])),typeof i=="number"&&i>=0?A=A+this.stride[3]*i|0:(T.push(this.shape[3]),b.push(this.stride[3])),typeof e=="number"&&e>=0?A=A+this.stride[4]*e|0:(T.push(this.shape[4]),b.push(this.stride[4]));var _=v[T.length+1];return _(this.data,T,b,A)},function(s,n,t,i){return new f(s,n[0],n[1],n[2],n[3],n[4],t[0],t[1],t[2],t[3],t[4],i)}}};function E(w,o){var v=o===-1?"T":String(o),u=d[v];return o===-1?u(w):o===0?u(w,p[w][0]):u(w,p[w],g)}function M(w){if(c(w))return"buffer";if(m)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function x(w,o,v,u){if(w===void 0){var t=p.array[0];return t([])}else typeof w=="number"&&(w=[w]);o===void 0&&(o=[w.length]);var f=o.length;if(v===void 0){v=new Array(f);for(var h=f-1,r=1;h>=0;--h)v[h]=r,r*=o[h]}if(u===void 0){u=0;for(var h=0;h<f;++h)v[h]<0&&(u-=(o[h]-1)*v[h])}for(var s=M(w),n=p[s];n.length<=f+1;)n.push(E(s,n.length-1));var t=n[f+1];return t(w,o,v,u)}L.exports=x},1278:function(L,F,a){var c=a(2361),m=Math.pow(2,-1074),l=-1>>>0;L.exports=g;function g(d,E){if(isNaN(d)||isNaN(E))return NaN;if(d===E)return d;if(d===0)return E<0?-m:m;var M=c.hi(d),p=c.lo(d);return E>d==d>0?p===l?(M+=1,p=0):p+=1:p===0?(p=l,M-=1):p-=1,c.pack(p,M)}},8406:function(L,F){var a=1e-6,c=1e-6;F.vertexNormals=function(m,l,g){for(var d=l.length,E=new Array(d),M=g===void 0?a:g,p=0;p<d;++p)E[p]=[0,0,0];for(var p=0;p<m.length;++p)for(var x=m[p],w=0,o=x[x.length-1],v=x[0],u=0;u<x.length;++u){w=o,o=v,v=x[(u+1)%x.length];for(var f=l[w],h=l[o],r=l[v],s=new Array(3),n=0,t=new Array(3),i=0,e=0;e<3;++e)s[e]=f[e]-h[e],n+=s[e]*s[e],t[e]=r[e]-h[e],i+=t[e]*t[e];if(n*i>M)for(var T=E[o],b=1/Math.sqrt(n*i),e=0;e<3;++e){var A=(e+1)%3,_=(e+2)%3;T[e]+=b*(t[A]*s[_]-t[_]*s[A])}}for(var p=0;p<d;++p){for(var T=E[p],C=0,e=0;e<3;++e)C+=T[e]*T[e];if(C>M)for(var b=1/Math.sqrt(C),e=0;e<3;++e)T[e]*=b;else for(var e=0;e<3;++e)T[e]=0}return E},F.faceNormals=function(m,l,g){for(var d=m.length,E=new Array(d),M=g===void 0?c:g,p=0;p<d;++p){for(var x=m[p],w=new Array(3),o=0;o<3;++o)w[o]=l[x[o]];for(var v=new Array(3),u=new Array(3),o=0;o<3;++o)v[o]=w[1][o]-w[0][o],u[o]=w[2][o]-w[0][o];for(var f=new Array(3),h=0,o=0;o<3;++o){var r=(o+1)%3,s=(o+2)%3;f[o]=v[r]*u[s]-v[s]*u[r],h+=f[o]*f[o]}h>M?h=1/Math.sqrt(h):h=0;for(var o=0;o<3;++o)f[o]*=h;E[p]=f}return E}},4081:function(L){L.exports=F;function F(a,c,m,l,g,d,E,M,p,x){var w=c+d+x;if(o>0){var o=Math.sqrt(w+1);a[0]=.5*(E-p)/o,a[1]=.5*(M-l)/o,a[2]=.5*(m-d)/o,a[3]=.5*o}else{var v=Math.max(c,d,x),o=Math.sqrt(2*v-w+1);c>=v?(a[0]=.5*o,a[1]=.5*(g+m)/o,a[2]=.5*(M+l)/o,a[3]=.5*(E-p)/o):d>=v?(a[0]=.5*(m+g)/o,a[1]=.5*o,a[2]=.5*(p+E)/o,a[3]=.5*(M-l)/o):(a[0]=.5*(l+M)/o,a[1]=.5*(E+p)/o,a[2]=.5*o,a[3]=.5*(m-g)/o)}return a}},9977:function(L,F,a){L.exports=o;var c=a(9215),m=a(6582),l=a(7399),g=a(7608),d=a(4081);function E(v,u,f){return Math.sqrt(Math.pow(v,2)+Math.pow(u,2)+Math.pow(f,2))}function M(v,u,f,h){return Math.sqrt(Math.pow(v,2)+Math.pow(u,2)+Math.pow(f,2)+Math.pow(h,2))}function p(v,u){var f=u[0],h=u[1],r=u[2],s=u[3],n=M(f,h,r,s);n>1e-6?(v[0]=f/n,v[1]=h/n,v[2]=r/n,v[3]=s/n):(v[0]=v[1]=v[2]=0,v[3]=1)}function x(v,u,f){this.radius=c([f]),this.center=c(u),this.rotation=c(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var w=x.prototype;w.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},w.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var u=this.computedRotation;p(u,u);var f=this.computedMatrix;l(f,u);var h=this.computedCenter,r=this.computedEye,s=this.computedUp,n=Math.exp(this.computedRadius[0]);r[0]=h[0]+n*f[2],r[1]=h[1]+n*f[6],r[2]=h[2]+n*f[10],s[0]=f[1],s[1]=f[5],s[2]=f[9];for(var t=0;t<3;++t){for(var i=0,e=0;e<3;++e)i+=f[t+4*e]*r[e];f[12+t]=-i}},w.getMatrix=function(v,u){this.recalcMatrix(v);var f=this.computedMatrix;if(u){for(var h=0;h<16;++h)u[h]=f[h];return u}return f},w.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},w.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},w.pan=function(v,u,f,h){u=u||0,f=f||0,h=h||0,this.recalcMatrix(v);var r=this.computedMatrix,s=r[1],n=r[5],t=r[9],i=E(s,n,t);s/=i,n/=i,t/=i;var e=r[0],T=r[4],b=r[8],A=e*s+T*n+b*t;e-=s*A,T-=n*A,b-=t*A;var _=E(e,T,b);e/=_,T/=_,b/=_,r[2],r[6],r[10];var C=e*u+s*f,S=T*u+n*f,y=b*u+t*f;this.center.move(v,C,S,y);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+h),this.radius.set(v,Math.log(R))},w.rotate=function(v,u,f,h){this.recalcMatrix(v),u=u||0,f=f||0;var r=this.computedMatrix,s=r[0],n=r[4],t=r[8],i=r[1],e=r[5],T=r[9],b=r[2],A=r[6],_=r[10],C=u*s+f*i,S=u*n+f*e,y=u*t+f*T,R=-(A*y-_*S),O=-(_*C-b*y),P=-(b*S-A*C),D=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(P,2))),H=M(R,O,P,D);H>1e-6?(R/=H,O/=H,P/=H,D/=H):(R=O=P=0,D=1);var G=this.computedRotation,B=G[0],I=G[1],N=G[2],$=G[3],U=B*D+$*R+I*P-N*O,K=I*D+$*O+N*R-B*P,W=N*D+$*P+B*O-I*R,Y=$*D-B*R-I*O-N*P;if(h){R=b,O=A,P=_;var j=Math.sin(h)/E(R,O,P);R*=j,O*=j,P*=j,D=Math.cos(u),U=U*D+Y*R+K*P-W*O,K=K*D+Y*O+W*R-U*P,W=W*D+Y*P+U*O-K*R,Y=Y*D-U*R-K*O-W*P}var X=M(U,K,W,Y);X>1e-6?(U/=X,K/=X,W/=X,Y/=X):(U=K=W=0,Y=1),this.rotation.set(v,U,K,W,Y)},w.lookAt=function(v,u,f,h){this.recalcMatrix(v),f=f||this.computedCenter,u=u||this.computedEye,h=h||this.computedUp;var r=this.computedMatrix;m(r,u,f,h);var s=this.computedRotation;d(s,r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]),p(s,s),this.rotation.set(v,s[0],s[1],s[2],s[3]);for(var n=0,t=0;t<3;++t)n+=Math.pow(f[t]-u[t],2);this.radius.set(v,.5*Math.log(Math.max(n,1e-6))),this.center.set(v,f[0],f[1],f[2])},w.translate=function(v,u,f,h){this.center.move(v,u||0,f||0,h||0)},w.setMatrix=function(v,u){var f=this.computedRotation;d(f,u[0],u[1],u[2],u[4],u[5],u[6],u[8],u[9],u[10]),p(f,f),this.rotation.set(v,f[0],f[1],f[2],f[3]);var h=this.computedMatrix;g(h,u);var r=h[15];if(Math.abs(r)>1e-6){var s=h[12]/r,n=h[13]/r,t=h[14]/r;this.recalcMatrix(v);var i=Math.exp(this.computedRadius[0]);this.center.set(v,s-h[2]*i,n-h[6]*i,t-h[10]*i),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},w.setDistance=function(v,u){u>0&&this.radius.set(v,Math.log(u))},w.setDistanceLimits=function(v,u){v>0?v=Math.log(v):v=-1/0,u>0?u=Math.log(u):u=1/0,u=Math.max(u,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=u},w.getDistanceLimits=function(v){var u=this.radius.bounds;return v?(v[0]=Math.exp(u[0][0]),v[1]=Math.exp(u[1][0]),v):[Math.exp(u[0][0]),Math.exp(u[1][0])]},w.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},w.fromJSON=function(v){var u=this.lastT(),f=v.center;f&&this.center.set(u,f[0],f[1],f[2]);var h=v.rotation;h&&this.rotation.set(u,h[0],h[1],h[2],h[3]);var r=v.distance;r&&r>0&&this.radius.set(u,Math.log(r)),this.setDistanceLimits(v.zoomMin,v.zoomMax)};function o(v){v=v||{};var u=v.center||[0,0,0],f=v.rotation||[0,0,0,1],h=v.radius||1;u=[].slice.call(u,0,3),f=[].slice.call(f,0,4),p(f,f);var r=new x(f,u,Math.log(h));return r.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&r.lookAt(0,v.eye,v.center,v.up),r}},1371:function(L,F,a){/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */var c=a(3233);L.exports=function(l,g,d){return d=typeof d<"u"?d+"":" ",c(d,g)+l}},3202:function(L){L.exports=function(a,c){c||(c=[0,""]),a=String(a);var m=parseFloat(a,10);return c[0]=m,c[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",c}},3088:function(L,F,a){L.exports=m;var c=a(3140);function m(l,g){for(var d=g.length|0,E=l.length,M=[new Array(d),new Array(d)],p=0;p<d;++p)M[0][p]=[],M[1][p]=[];for(var p=0;p<E;++p){var x=l[p];M[0][x[0]].push(x),M[1][x[1]].push(x)}for(var w=[],p=0;p<d;++p)M[0][p].length+M[1][p].length===0&&w.push([p]);function o(n,t){var i=M[t][n[t]];i.splice(i.indexOf(n),1)}function v(n,t,i){for(var e,T,b,A=0;A<2;++A)if(M[A][t].length>0){e=M[A][t][0],b=A;break}T=e[b^1];for(var _=0;_<2;++_)for(var C=M[_][t],S=0;S<C.length;++S){var y=C[S],R=y[_^1],O=c(g[n],g[t],g[T],g[R]);O>0&&(e=y,T=R,b=_)}return i||e&&o(e,b),T}function u(n,t){var i=M[t][n][0],e=[n];o(i,t);for(var T=i[t^1];;){for(;T!==n;)e.push(T),T=v(e[e.length-2],T,!1);if(M[0][n].length+M[1][n].length===0)break;var b=e[e.length-1],A=n,_=e[1],C=v(b,A,!0);if(c(g[b],g[A],g[_],g[C])<0)break;e.push(n),T=v(b,A)}return e}function f(n,t){return t[1]===t[t.length-1]}for(var p=0;p<d;++p)for(var h=0;h<2;++h){for(var r=[];M[h][p].length>0;){M[0][p].length;var s=u(p,h);f(r,s)?r.push.apply(r,s):(r.length>0&&w.push(r),r=s)}r.length>0&&w.push(r)}return w}},5609:function(L,F,a){L.exports=m;var c=a(3134);function m(l,g){for(var d=c(l,g.length),E=new Array(g.length),M=new Array(g.length),p=[],x=0;x<g.length;++x){var w=d[x].length;M[x]=w,E[x]=!0,w<=1&&p.push(x)}for(;p.length>0;){var o=p.pop();E[o]=!1;for(var v=d[o],x=0;x<v.length;++x){var u=v[x];--M[u]===0&&p.push(u)}}for(var f=new Array(g.length),h=[],x=0;x<g.length;++x)if(E[x]){var o=h.length;f[x]=o,h.push(g[x])}else f[x]=-1;for(var r=[],x=0;x<l.length;++x){var s=l[x];E[s[0]]&&E[s[1]]&&r.push([f[s[0]],f[s[1]]])}return[r,h]}},2095:function(L,F,a){L.exports=w;var c=a(3134),m=a(3088),l=a(5085),g=a(5250),d=a(8210),E=a(1682),M=a(5609);function p(o,v){for(var u=new Array(o),f=0;f<o;++f)u[f]=v;return u}function x(o){for(var v=new Array(o),u=0;u<o;++u)v[u]=[];return v}function w(o,v){var Y=M(o,v);o=Y[0],v=Y[1];var u=v.length;o.length;for(var f=c(o,v.length),h=0;h<u;++h)if(f[h].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var r=m(o,v);function s(at){for(var rt=at.length,ht=[0],ot=0;ot<rt;++ot){var vt=v[at[ot]],lt=v[at[(ot+1)%rt]],ut=g(-vt[0],vt[1]),mt=g(-vt[0],lt[1]),Et=g(lt[0],vt[1]),ct=g(lt[0],lt[1]);ht=d(ht,d(d(ut,mt),d(Et,ct)))}return ht[ht.length-1]>0}r=r.filter(s);for(var n=r.length,t=new Array(n),i=new Array(n),h=0;h<n;++h){t[h]=h;var e=new Array(n),T=r[h].map(function(rt){return v[rt]}),b=l([T]),A=0;t:for(var _=0;_<n;++_)if(e[_]=0,h!==_){for(var C=r[_],S=C.length,y=0;y<S;++y){var R=b(v[C[y]]);if(R!==0){R<0&&(e[_]=1,A+=1);continue t}}e[_]=1,A+=1}i[h]=[A,h,e]}i.sort(function(at,rt){return rt[0]-at[0]});for(var h=0;h<n;++h)for(var e=i[h],O=e[1],P=e[2],_=0;_<n;++_)P[_]&&(t[_]=O);for(var D=x(n),h=0;h<n;++h)D[h].push(t[h]),D[t[h]].push(h);for(var H={},G=p(u,!1),h=0;h<n;++h)for(var C=r[h],S=C.length,_=0;_<S;++_){var B=C[_],I=C[(_+1)%S],N=Math.min(B,I)+":"+Math.max(B,I);if(N in H){var $=H[N];D[$].push(h),D[h].push($),G[B]=G[I]=!0}else H[N]=h}function U(at){for(var rt=at.length,ht=0;ht<rt;++ht)if(!G[at[ht]])return!1;return!0}for(var K=[],W=p(n,-1),h=0;h<n;++h)t[h]===h&&!U(r[h])?(K.push(h),W[h]=0):W[h]=-1;for(var Y=[];K.length>0;){var j=K.pop(),X=D[j];E(X,function(at,rt){return at-rt});var Q=X.length,q=W[j],it;if(q===0){var C=r[j];it=[C]}for(var h=0;h<Q;++h){var ft=X[h];if(!(W[ft]>=0)&&(W[ft]=q^1,K.push(ft),q===0)){var C=r[ft];U(C)||(C.reverse(),it.push(C))}}q===0&&Y.push(it)}return Y}},5085:function(L,F,a){L.exports=v;var c=a(3250)[3],m=a(4209),l=a(3352),g=a(2478);function d(){return!0}function E(u){return function(f,h){var r=u[f];return r?!!r.queryPoint(h,d):!1}}function M(u){for(var f={},h=0;h<u.length;++h){var r=u[h],s=r[0][0],n=r[0][1],t=r[1][1],i=[Math.min(n,t),Math.max(n,t)];s in f?f[s].push(i):f[s]=[i]}for(var e={},T=Object.keys(f),h=0;h<T.length;++h){var b=f[T[h]];e[T[h]]=l(b)}return E(e)}function p(u,f){return function(h){var r=g.le(f,h[0]);if(r<0)return 1;var s=u[r];if(!s)if(r>0&&f[r]===h[0])s=u[r-1];else return 1;for(var n=1;s;){var t=s.key,i=c(h,t[0],t[1]);if(t[0][0]<t[1][0])if(i<0)s=s.left;else if(i>0)n=-1,s=s.right;else return 0;else if(i>0)s=s.left;else if(i<0)n=1,s=s.right;else return 0}return n}}function x(u){return 1}function w(u){return function(h){return u(h[0],h[1])?0:1}}function o(u,f){return function(r){return u(r[0],r[1])?0:f(r)}}function v(u){for(var f=u.length,h=[],r=[],s=0;s<f;++s)for(var n=u[s],t=n.length,i=t-1,e=0;e<t;i=e++){var T=n[i],b=n[e];T[0]===b[0]?r.push([T,b]):h.push([T,b])}if(h.length===0)return r.length===0?x:w(M(r));var A=m(h),_=p(A.slabs,A.coordinates);return r.length===0?_:o(M(r),_)}},9346:function(L){var F=new Float64Array(4),a=new Float64Array(4),c=new Float64Array(4);function m(l,g,d,E,M){F.length<E.length&&(F=new Float64Array(E.length),a=new Float64Array(E.length),c=new Float64Array(E.length));for(var p=0;p<E.length;++p)F[p]=l[p]-E[p],a[p]=g[p]-l[p],c[p]=d[p]-l[p];for(var x=0,w=0,o=0,v=0,u=0,f=0,p=0;p<E.length;++p){var h=a[p],r=c[p],s=F[p];x+=h*h,w+=h*r,o+=r*r,v+=s*h,u+=s*r,f+=s*s}var n=Math.abs(x*o-w*w),t=w*u-o*v,i=w*v-x*u,e;if(t+i<=n)if(t<0)i<0&&v<0?(i=0,-v>=x?(t=1,e=x+2*v+f):(t=-v/x,e=v*t+f)):(t=0,u>=0?(i=0,e=f):-u>=o?(i=1,e=o+2*u+f):(i=-u/o,e=u*i+f));else if(i<0)i=0,v>=0?(t=0,e=f):-v>=x?(t=1,e=x+2*v+f):(t=-v/x,e=v*t+f);else{var T=1/n;t*=T,i*=T,e=t*(x*t+w*i+2*v)+i*(w*t+o*i+2*u)+f}else{var b,A,_,C;t<0?(b=w+v,A=o+u,A>b?(_=A-b,C=x-2*w+o,_>=C?(t=1,i=0,e=x+2*v+f):(t=_/C,i=1-t,e=t*(x*t+w*i+2*v)+i*(w*t+o*i+2*u)+f)):(t=0,A<=0?(i=1,e=o+2*u+f):u>=0?(i=0,e=f):(i=-u/o,e=u*i+f))):i<0?(b=w+u,A=x+v,A>b?(_=A-b,C=x-2*w+o,_>=C?(i=1,t=0,e=o+2*u+f):(i=_/C,t=1-i,e=t*(x*t+w*i+2*v)+i*(w*t+o*i+2*u)+f)):(i=0,A<=0?(t=1,e=x+2*v+f):v>=0?(t=0,e=f):(t=-v/x,e=v*t+f))):(_=o+u-w-v,_<=0?(t=0,i=1,e=o+2*u+f):(C=x-2*w+o,_>=C?(t=1,i=0,e=x+2*v+f):(t=_/C,i=1-t,e=t*(x*t+w*i+2*v)+i*(w*t+o*i+2*u)+f)))}for(var S=1-t-i,p=0;p<E.length;++p)M[p]=S*l[p]+t*g[p]+i*d[p];return e<0?0:e}L.exports=m},8648:function(L,F,a){L.exports=a(783)},2653:function(L,F,a){var c=a(3865);L.exports=m;function m(l,g){for(var d=l.length,E=new Array(d),M=0;M<d;++M)E[M]=c(l[M],g[M]);return E}},5838:function(L,F,a){L.exports=m;var c=a(7842);function m(l){for(var g=new Array(l.length),d=0;d<l.length;++d)g[d]=c(l[d]);return g}},8987:function(L,F,a){var c=a(7842),m=a(6504);L.exports=l;function l(g,d){for(var E=c(d),M=g.length,p=new Array(M),x=0;x<M;++x)p[x]=m(g[x],E);return p}},544:function(L,F,a){var c=a(5572);L.exports=m;function m(l,g){for(var d=l.length,E=new Array(d),M=0;M<d;++M)E[M]=c(l[M],g[M]);return E}},5771:function(L,F,a){var c=a(8507),m=a(3788),l=a(2419);L.exports=g;function g(d){d.sort(m);for(var E=d.length,M=0,p=0;p<E;++p){var x=d[p],w=l(x);if(w!==0){if(M>0){var o=d[M-1];if(c(x,o)===0&&l(o)!==w){M-=1;continue}}d[M++]=x}}return d.length=M,d}},3233:function(L){/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var F="",a;L.exports=c;function c(m,l){if(typeof m!="string")throw new TypeError("expected a string");if(l===1)return m;if(l===2)return m+m;var g=m.length*l;if(a!==m||typeof a>"u")a=m,F="";else if(F.length>=g)return F.substr(0,g);for(;g>F.length&&l>1;)l&1&&(F+=m),l>>=1,m+=m;return F+=m,F=F.substr(0,g),F}},3025:function(L,F,a){L.exports=a.g.performance&&a.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(L){L.exports=F;function F(a){for(var c=a.length,m=a[a.length-1],l=c,g=c-2;g>=0;--g){var d=m,E=a[g];m=d+E;var M=m-d,p=E-M;p&&(a[--l]=m,m=p)}for(var x=0,g=l;g<c;++g){var d=a[g],E=m;m=d+E;var M=m-d,p=E-M;p&&(a[x++]=p)}return a[x++]=m,a.length=x,a}},2962:function(L,F,a){var c=a(5250),m=a(8210),l=a(3012),g=a(7004),d=6;function E(f,h,r,s){return function(t){return s(f(r(t[0][0],t[1][1]),r(-t[0][1],t[1][0])))}}function M(f,h,r,s){return function(t){return s(f(h(f(r(t[1][1],t[2][2]),r(-t[1][2],t[2][1])),t[0][0]),f(h(f(r(t[1][0],t[2][2]),r(-t[1][2],t[2][0])),-t[0][1]),h(f(r(t[1][0],t[2][1]),r(-t[1][1],t[2][0])),t[0][2]))))}}function p(f,h,r,s){return function(t){return s(f(f(h(f(h(f(r(t[2][2],t[3][3]),r(-t[2][3],t[3][2])),t[1][1]),f(h(f(r(t[2][1],t[3][3]),r(-t[2][3],t[3][1])),-t[1][2]),h(f(r(t[2][1],t[3][2]),r(-t[2][2],t[3][1])),t[1][3]))),t[0][0]),h(f(h(f(r(t[2][2],t[3][3]),r(-t[2][3],t[3][2])),t[1][0]),f(h(f(r(t[2][0],t[3][3]),r(-t[2][3],t[3][0])),-t[1][2]),h(f(r(t[2][0],t[3][2]),r(-t[2][2],t[3][0])),t[1][3]))),-t[0][1])),f(h(f(h(f(r(t[2][1],t[3][3]),r(-t[2][3],t[3][1])),t[1][0]),f(h(f(r(t[2][0],t[3][3]),r(-t[2][3],t[3][0])),-t[1][1]),h(f(r(t[2][0],t[3][1]),r(-t[2][1],t[3][0])),t[1][3]))),t[0][2]),h(f(h(f(r(t[2][1],t[3][2]),r(-t[2][2],t[3][1])),t[1][0]),f(h(f(r(t[2][0],t[3][2]),r(-t[2][2],t[3][0])),-t[1][1]),h(f(r(t[2][0],t[3][1]),r(-t[2][1],t[3][0])),t[1][2]))),-t[0][3]))))}}function x(f,h,r,s){return function(t){return s(f(f(h(f(f(h(f(h(f(r(t[3][3],t[4][4]),r(-t[3][4],t[4][3])),t[2][2]),f(h(f(r(t[3][2],t[4][4]),r(-t[3][4],t[4][2])),-t[2][3]),h(f(r(t[3][2],t[4][3]),r(-t[3][3],t[4][2])),t[2][4]))),t[1][1]),h(f(h(f(r(t[3][3],t[4][4]),r(-t[3][4],t[4][3])),t[2][1]),f(h(f(r(t[3][1],t[4][4]),r(-t[3][4],t[4][1])),-t[2][3]),h(f(r(t[3][1],t[4][3]),r(-t[3][3],t[4][1])),t[2][4]))),-t[1][2])),f(h(f(h(f(r(t[3][2],t[4][4]),r(-t[3][4],t[4][2])),t[2][1]),f(h(f(r(t[3][1],t[4][4]),r(-t[3][4],t[4][1])),-t[2][2]),h(f(r(t[3][1],t[4][2]),r(-t[3][2],t[4][1])),t[2][4]))),t[1][3]),h(f(h(f(r(t[3][2],t[4][3]),r(-t[3][3],t[4][2])),t[2][1]),f(h(f(r(t[3][1],t[4][3]),r(-t[3][3],t[4][1])),-t[2][2]),h(f(r(t[3][1],t[4][2]),r(-t[3][2],t[4][1])),t[2][3]))),-t[1][4]))),t[0][0]),h(f(f(h(f(h(f(r(t[3][3],t[4][4]),r(-t[3][4],t[4][3])),t[2][2]),f(h(f(r(t[3][2],t[4][4]),r(-t[3][4],t[4][2])),-t[2][3]),h(f(r(t[3][2],t[4][3]),r(-t[3][3],t[4][2])),t[2][4]))),t[1][0]),h(f(h(f(r(t[3][3],t[4][4]),r(-t[3][4],t[4][3])),t[2][0]),f(h(f(r(t[3][0],t[4][4]),r(-t[3][4],t[4][0])),-t[2][3]),h(f(r(t[3][0],t[4][3]),r(-t[3][3],t[4][0])),t[2][4]))),-t[1][2])),f(h(f(h(f(r(t[3][2],t[4][4]),r(-t[3][4],t[4][2])),t[2][0]),f(h(f(r(t[3][0],t[4][4]),r(-t[3][4],t[4][0])),-t[2][2]),h(f(r(t[3][0],t[4][2]),r(-t[3][2],t[4][0])),t[2][4]))),t[1][3]),h(f(h(f(r(t[3][2],t[4][3]),r(-t[3][3],t[4][2])),t[2][0]),f(h(f(r(t[3][0],t[4][3]),r(-t[3][3],t[4][0])),-t[2][2]),h(f(r(t[3][0],t[4][2]),r(-t[3][2],t[4][0])),t[2][3]))),-t[1][4]))),-t[0][1])),f(h(f(f(h(f(h(f(r(t[3][3],t[4][4]),r(-t[3][4],t[4][3])),t[2][1]),f(h(f(r(t[3][1],t[4][4]),r(-t[3][4],t[4][1])),-t[2][3]),h(f(r(t[3][1],t[4][3]),r(-t[3][3],t[4][1])),t[2][4]))),t[1][0]),h(f(h(f(r(t[3][3],t[4][4]),r(-t[3][4],t[4][3])),t[2][0]),f(h(f(r(t[3][0],t[4][4]),r(-t[3][4],t[4][0])),-t[2][3]),h(f(r(t[3][0],t[4][3]),r(-t[3][3],t[4][0])),t[2][4]))),-t[1][1])),f(h(f(h(f(r(t[3][1],t[4][4]),r(-t[3][4],t[4][1])),t[2][0]),f(h(f(r(t[3][0],t[4][4]),r(-t[3][4],t[4][0])),-t[2][1]),h(f(r(t[3][0],t[4][1]),r(-t[3][1],t[4][0])),t[2][4]))),t[1][3]),h(f(h(f(r(t[3][1],t[4][3]),r(-t[3][3],t[4][1])),t[2][0]),f(h(f(r(t[3][0],t[4][3]),r(-t[3][3],t[4][0])),-t[2][1]),h(f(r(t[3][0],t[4][1]),r(-t[3][1],t[4][0])),t[2][3]))),-t[1][4]))),t[0][2]),f(h(f(f(h(f(h(f(r(t[3][2],t[4][4]),r(-t[3][4],t[4][2])),t[2][1]),f(h(f(r(t[3][1],t[4][4]),r(-t[3][4],t[4][1])),-t[2][2]),h(f(r(t[3][1],t[4][2]),r(-t[3][2],t[4][1])),t[2][4]))),t[1][0]),h(f(h(f(r(t[3][2],t[4][4]),r(-t[3][4],t[4][2])),t[2][0]),f(h(f(r(t[3][0],t[4][4]),r(-t[3][4],t[4][0])),-t[2][2]),h(f(r(t[3][0],t[4][2]),r(-t[3][2],t[4][0])),t[2][4]))),-t[1][1])),f(h(f(h(f(r(t[3][1],t[4][4]),r(-t[3][4],t[4][1])),t[2][0]),f(h(f(r(t[3][0],t[4][4]),r(-t[3][4],t[4][0])),-t[2][1]),h(f(r(t[3][0],t[4][1]),r(-t[3][1],t[4][0])),t[2][4]))),t[1][2]),h(f(h(f(r(t[3][1],t[4][2]),r(-t[3][2],t[4][1])),t[2][0]),f(h(f(r(t[3][0],t[4][2]),r(-t[3][2],t[4][0])),-t[2][1]),h(f(r(t[3][0],t[4][1]),r(-t[3][1],t[4][0])),t[2][2]))),-t[1][4]))),-t[0][3]),h(f(f(h(f(h(f(r(t[3][2],t[4][3]),r(-t[3][3],t[4][2])),t[2][1]),f(h(f(r(t[3][1],t[4][3]),r(-t[3][3],t[4][1])),-t[2][2]),h(f(r(t[3][1],t[4][2]),r(-t[3][2],t[4][1])),t[2][3]))),t[1][0]),h(f(h(f(r(t[3][2],t[4][3]),r(-t[3][3],t[4][2])),t[2][0]),f(h(f(r(t[3][0],t[4][3]),r(-t[3][3],t[4][0])),-t[2][2]),h(f(r(t[3][0],t[4][2]),r(-t[3][2],t[4][0])),t[2][3]))),-t[1][1])),f(h(f(h(f(r(t[3][1],t[4][3]),r(-t[3][3],t[4][1])),t[2][0]),f(h(f(r(t[3][0],t[4][3]),r(-t[3][3],t[4][0])),-t[2][1]),h(f(r(t[3][0],t[4][1]),r(-t[3][1],t[4][0])),t[2][3]))),t[1][2]),h(f(h(f(r(t[3][1],t[4][2]),r(-t[3][2],t[4][1])),t[2][0]),f(h(f(r(t[3][0],t[4][2]),r(-t[3][2],t[4][0])),-t[2][1]),h(f(r(t[3][0],t[4][1]),r(-t[3][1],t[4][0])),t[2][2]))),-t[1][3]))),t[0][4])))))}}function w(f){var h=f===2?E:f===3?M:f===4?p:f===5?x:void 0;return h(m,l,c,g)}var o=[function(){return[0]},function(h){return[h[0][0]]}];function v(f,h,r,s,n,t,i,e){return function(b){switch(b.length){case 0:return f(b);case 1:return h(b);case 2:return r(b);case 3:return s(b);case 4:return n(b);case 5:return t(b)}var A=i[b.length];return A||(A=i[b.length]=e(b.length)),A(b)}}function u(){for(;o.length<d;)o.push(w(o.length));L.exports=v.apply(void 0,o.concat([o,w]));for(var f=0;f<o.length;++f)L.exports[f]=o[f]}u()},1944:function(L,F,a){var c=a(5250),m=a(8210);L.exports=l;function l(g,d){for(var E=c(g[0],d[0]),M=1;M<g.length;++M)E=m(E,c(g[M],d[M]));return E}},2646:function(L,F,a){var c=a(5250),m=a(8210),l=a(8545),g=a(3012),d=6;function E(n){var t=n===3?w:n===4?o:n===5?v:u;return t(m,l,c,g)}function M(){return 0}function p(){return 0}function x(){return 0}function w(n,t,i,e){function T(b,A,_){var C=i(b[0],b[0]),S=e(C,A[0]),y=e(C,_[0]),R=i(A[0],A[0]),O=e(R,b[0]),P=e(R,_[0]),D=i(_[0],_[0]),H=e(D,b[0]),G=e(D,A[0]),B=n(t(G,P),t(O,S)),I=t(H,y),N=t(B,I);return N[N.length-1]}return T}function o(n,t,i,e){function T(b,A,_,C){var S=n(i(b[0],b[0]),i(b[1],b[1])),y=e(S,A[0]),R=e(S,_[0]),O=e(S,C[0]),P=n(i(A[0],A[0]),i(A[1],A[1])),D=e(P,b[0]),H=e(P,_[0]),G=e(P,C[0]),B=n(i(_[0],_[0]),i(_[1],_[1])),I=e(B,b[0]),N=e(B,A[0]),$=e(B,C[0]),U=n(i(C[0],C[0]),i(C[1],C[1])),K=e(U,b[0]),W=e(U,A[0]),Y=e(U,_[0]),j=n(n(e(t(Y,$),A[1]),n(e(t(W,G),-_[1]),e(t(N,H),C[1]))),n(e(t(W,G),b[1]),n(e(t(K,O),-A[1]),e(t(D,y),C[1])))),X=n(n(e(t(Y,$),b[1]),n(e(t(K,O),-_[1]),e(t(I,R),C[1]))),n(e(t(N,H),b[1]),n(e(t(I,R),-A[1]),e(t(D,y),_[1])))),Q=t(j,X);return Q[Q.length-1]}return T}function v(n,t,i,e){function T(b,A,_,C,S){var y=n(i(b[0],b[0]),n(i(b[1],b[1]),i(b[2],b[2]))),R=e(y,A[0]),O=e(y,_[0]),P=e(y,C[0]),D=e(y,S[0]),H=n(i(A[0],A[0]),n(i(A[1],A[1]),i(A[2],A[2]))),G=e(H,b[0]),B=e(H,_[0]),I=e(H,C[0]),N=e(H,S[0]),$=n(i(_[0],_[0]),n(i(_[1],_[1]),i(_[2],_[2]))),U=e($,b[0]),K=e($,A[0]),W=e($,C[0]),Y=e($,S[0]),j=n(i(C[0],C[0]),n(i(C[1],C[1]),i(C[2],C[2]))),X=e(j,b[0]),Q=e(j,A[0]),q=e(j,_[0]),it=e(j,S[0]),ft=n(i(S[0],S[0]),n(i(S[1],S[1]),i(S[2],S[2]))),at=e(ft,b[0]),rt=e(ft,A[0]),ht=e(ft,_[0]),ot=e(ft,C[0]),vt=n(n(n(e(n(e(t(ot,it),_[1]),n(e(t(ht,Y),-C[1]),e(t(q,W),S[1]))),A[2]),n(e(n(e(t(ot,it),A[1]),n(e(t(rt,N),-C[1]),e(t(Q,I),S[1]))),-_[2]),e(n(e(t(ht,Y),A[1]),n(e(t(rt,N),-_[1]),e(t(K,B),S[1]))),C[2]))),n(e(n(e(t(q,W),A[1]),n(e(t(Q,I),-_[1]),e(t(K,B),C[1]))),-S[2]),n(e(n(e(t(ot,it),A[1]),n(e(t(rt,N),-C[1]),e(t(Q,I),S[1]))),b[2]),e(n(e(t(ot,it),b[1]),n(e(t(at,D),-C[1]),e(t(X,P),S[1]))),-A[2])))),n(n(e(n(e(t(rt,N),b[1]),n(e(t(at,D),-A[1]),e(t(G,R),S[1]))),C[2]),n(e(n(e(t(Q,I),b[1]),n(e(t(X,P),-A[1]),e(t(G,R),C[1]))),-S[2]),e(n(e(t(q,W),A[1]),n(e(t(Q,I),-_[1]),e(t(K,B),C[1]))),b[2]))),n(e(n(e(t(q,W),b[1]),n(e(t(X,P),-_[1]),e(t(U,O),C[1]))),-A[2]),n(e(n(e(t(Q,I),b[1]),n(e(t(X,P),-A[1]),e(t(G,R),C[1]))),_[2]),e(n(e(t(K,B),b[1]),n(e(t(U,O),-A[1]),e(t(G,R),_[1]))),-C[2]))))),lt=n(n(n(e(n(e(t(ot,it),_[1]),n(e(t(ht,Y),-C[1]),e(t(q,W),S[1]))),b[2]),e(n(e(t(ot,it),b[1]),n(e(t(at,D),-C[1]),e(t(X,P),S[1]))),-_[2])),n(e(n(e(t(ht,Y),b[1]),n(e(t(at,D),-_[1]),e(t(U,O),S[1]))),C[2]),e(n(e(t(q,W),b[1]),n(e(t(X,P),-_[1]),e(t(U,O),C[1]))),-S[2]))),n(n(e(n(e(t(ht,Y),A[1]),n(e(t(rt,N),-_[1]),e(t(K,B),S[1]))),b[2]),e(n(e(t(ht,Y),b[1]),n(e(t(at,D),-_[1]),e(t(U,O),S[1]))),-A[2])),n(e(n(e(t(rt,N),b[1]),n(e(t(at,D),-A[1]),e(t(G,R),S[1]))),_[2]),e(n(e(t(K,B),b[1]),n(e(t(U,O),-A[1]),e(t(G,R),_[1]))),-S[2])))),ut=t(vt,lt);return ut[ut.length-1]}return T}function u(n,t,i,e){function T(b,A,_,C,S,y){var R=n(n(i(b[0],b[0]),i(b[1],b[1])),n(i(b[2],b[2]),i(b[3],b[3]))),O=e(R,A[0]),P=e(R,_[0]),D=e(R,C[0]),H=e(R,S[0]),G=e(R,y[0]),B=n(n(i(A[0],A[0]),i(A[1],A[1])),n(i(A[2],A[2]),i(A[3],A[3]))),I=e(B,b[0]),N=e(B,_[0]),$=e(B,C[0]),U=e(B,S[0]),K=e(B,y[0]),W=n(n(i(_[0],_[0]),i(_[1],_[1])),n(i(_[2],_[2]),i(_[3],_[3]))),Y=e(W,b[0]),j=e(W,A[0]),X=e(W,C[0]),Q=e(W,S[0]),q=e(W,y[0]),it=n(n(i(C[0],C[0]),i(C[1],C[1])),n(i(C[2],C[2]),i(C[3],C[3]))),ft=e(it,b[0]),at=e(it,A[0]),rt=e(it,_[0]),ht=e(it,S[0]),ot=e(it,y[0]),vt=n(n(i(S[0],S[0]),i(S[1],S[1])),n(i(S[2],S[2]),i(S[3],S[3]))),lt=e(vt,b[0]),ut=e(vt,A[0]),mt=e(vt,_[0]),Et=e(vt,C[0]),ct=e(vt,y[0]),xt=n(n(i(y[0],y[0]),i(y[1],y[1])),n(i(y[2],y[2]),i(y[3],y[3]))),pt=e(xt,b[0]),Mt=e(xt,A[0]),At=e(xt,_[0]),wt=e(xt,C[0]),dt=e(xt,S[0]),gt=n(n(n(e(n(n(e(n(e(t(dt,ct),C[1]),n(e(t(wt,ot),-S[1]),e(t(Et,ht),y[1]))),_[2]),e(n(e(t(dt,ct),_[1]),n(e(t(At,q),-S[1]),e(t(mt,Q),y[1]))),-C[2])),n(e(n(e(t(wt,ot),_[1]),n(e(t(At,q),-C[1]),e(t(rt,X),y[1]))),S[2]),e(n(e(t(Et,ht),_[1]),n(e(t(mt,Q),-C[1]),e(t(rt,X),S[1]))),-y[2]))),A[3]),n(e(n(n(e(n(e(t(dt,ct),C[1]),n(e(t(wt,ot),-S[1]),e(t(Et,ht),y[1]))),A[2]),e(n(e(t(dt,ct),A[1]),n(e(t(Mt,K),-S[1]),e(t(ut,U),y[1]))),-C[2])),n(e(n(e(t(wt,ot),A[1]),n(e(t(Mt,K),-C[1]),e(t(at,$),y[1]))),S[2]),e(n(e(t(Et,ht),A[1]),n(e(t(ut,U),-C[1]),e(t(at,$),S[1]))),-y[2]))),-_[3]),e(n(n(e(n(e(t(dt,ct),_[1]),n(e(t(At,q),-S[1]),e(t(mt,Q),y[1]))),A[2]),e(n(e(t(dt,ct),A[1]),n(e(t(Mt,K),-S[1]),e(t(ut,U),y[1]))),-_[2])),n(e(n(e(t(At,q),A[1]),n(e(t(Mt,K),-_[1]),e(t(j,N),y[1]))),S[2]),e(n(e(t(mt,Q),A[1]),n(e(t(ut,U),-_[1]),e(t(j,N),S[1]))),-y[2]))),C[3]))),n(n(e(n(n(e(n(e(t(wt,ot),_[1]),n(e(t(At,q),-C[1]),e(t(rt,X),y[1]))),A[2]),e(n(e(t(wt,ot),A[1]),n(e(t(Mt,K),-C[1]),e(t(at,$),y[1]))),-_[2])),n(e(n(e(t(At,q),A[1]),n(e(t(Mt,K),-_[1]),e(t(j,N),y[1]))),C[2]),e(n(e(t(rt,X),A[1]),n(e(t(at,$),-_[1]),e(t(j,N),C[1]))),-y[2]))),-S[3]),e(n(n(e(n(e(t(Et,ht),_[1]),n(e(t(mt,Q),-C[1]),e(t(rt,X),S[1]))),A[2]),e(n(e(t(Et,ht),A[1]),n(e(t(ut,U),-C[1]),e(t(at,$),S[1]))),-_[2])),n(e(n(e(t(mt,Q),A[1]),n(e(t(ut,U),-_[1]),e(t(j,N),S[1]))),C[2]),e(n(e(t(rt,X),A[1]),n(e(t(at,$),-_[1]),e(t(j,N),C[1]))),-S[2]))),y[3])),n(e(n(n(e(n(e(t(dt,ct),C[1]),n(e(t(wt,ot),-S[1]),e(t(Et,ht),y[1]))),A[2]),e(n(e(t(dt,ct),A[1]),n(e(t(Mt,K),-S[1]),e(t(ut,U),y[1]))),-C[2])),n(e(n(e(t(wt,ot),A[1]),n(e(t(Mt,K),-C[1]),e(t(at,$),y[1]))),S[2]),e(n(e(t(Et,ht),A[1]),n(e(t(ut,U),-C[1]),e(t(at,$),S[1]))),-y[2]))),b[3]),e(n(n(e(n(e(t(dt,ct),C[1]),n(e(t(wt,ot),-S[1]),e(t(Et,ht),y[1]))),b[2]),e(n(e(t(dt,ct),b[1]),n(e(t(pt,G),-S[1]),e(t(lt,H),y[1]))),-C[2])),n(e(n(e(t(wt,ot),b[1]),n(e(t(pt,G),-C[1]),e(t(ft,D),y[1]))),S[2]),e(n(e(t(Et,ht),b[1]),n(e(t(lt,H),-C[1]),e(t(ft,D),S[1]))),-y[2]))),-A[3])))),n(n(n(e(n(n(e(n(e(t(dt,ct),A[1]),n(e(t(Mt,K),-S[1]),e(t(ut,U),y[1]))),b[2]),e(n(e(t(dt,ct),b[1]),n(e(t(pt,G),-S[1]),e(t(lt,H),y[1]))),-A[2])),n(e(n(e(t(Mt,K),b[1]),n(e(t(pt,G),-A[1]),e(t(I,O),y[1]))),S[2]),e(n(e(t(ut,U),b[1]),n(e(t(lt,H),-A[1]),e(t(I,O),S[1]))),-y[2]))),C[3]),e(n(n(e(n(e(t(wt,ot),A[1]),n(e(t(Mt,K),-C[1]),e(t(at,$),y[1]))),b[2]),e(n(e(t(wt,ot),b[1]),n(e(t(pt,G),-C[1]),e(t(ft,D),y[1]))),-A[2])),n(e(n(e(t(Mt,K),b[1]),n(e(t(pt,G),-A[1]),e(t(I,O),y[1]))),C[2]),e(n(e(t(at,$),b[1]),n(e(t(ft,D),-A[1]),e(t(I,O),C[1]))),-y[2]))),-S[3])),n(e(n(n(e(n(e(t(Et,ht),A[1]),n(e(t(ut,U),-C[1]),e(t(at,$),S[1]))),b[2]),e(n(e(t(Et,ht),b[1]),n(e(t(lt,H),-C[1]),e(t(ft,D),S[1]))),-A[2])),n(e(n(e(t(ut,U),b[1]),n(e(t(lt,H),-A[1]),e(t(I,O),S[1]))),C[2]),e(n(e(t(at,$),b[1]),n(e(t(ft,D),-A[1]),e(t(I,O),C[1]))),-S[2]))),y[3]),e(n(n(e(n(e(t(wt,ot),_[1]),n(e(t(At,q),-C[1]),e(t(rt,X),y[1]))),A[2]),e(n(e(t(wt,ot),A[1]),n(e(t(Mt,K),-C[1]),e(t(at,$),y[1]))),-_[2])),n(e(n(e(t(At,q),A[1]),n(e(t(Mt,K),-_[1]),e(t(j,N),y[1]))),C[2]),e(n(e(t(rt,X),A[1]),n(e(t(at,$),-_[1]),e(t(j,N),C[1]))),-y[2]))),b[3]))),n(n(e(n(n(e(n(e(t(wt,ot),_[1]),n(e(t(At,q),-C[1]),e(t(rt,X),y[1]))),b[2]),e(n(e(t(wt,ot),b[1]),n(e(t(pt,G),-C[1]),e(t(ft,D),y[1]))),-_[2])),n(e(n(e(t(At,q),b[1]),n(e(t(pt,G),-_[1]),e(t(Y,P),y[1]))),C[2]),e(n(e(t(rt,X),b[1]),n(e(t(ft,D),-_[1]),e(t(Y,P),C[1]))),-y[2]))),-A[3]),e(n(n(e(n(e(t(wt,ot),A[1]),n(e(t(Mt,K),-C[1]),e(t(at,$),y[1]))),b[2]),e(n(e(t(wt,ot),b[1]),n(e(t(pt,G),-C[1]),e(t(ft,D),y[1]))),-A[2])),n(e(n(e(t(Mt,K),b[1]),n(e(t(pt,G),-A[1]),e(t(I,O),y[1]))),C[2]),e(n(e(t(at,$),b[1]),n(e(t(ft,D),-A[1]),e(t(I,O),C[1]))),-y[2]))),_[3])),n(e(n(n(e(n(e(t(At,q),A[1]),n(e(t(Mt,K),-_[1]),e(t(j,N),y[1]))),b[2]),e(n(e(t(At,q),b[1]),n(e(t(pt,G),-_[1]),e(t(Y,P),y[1]))),-A[2])),n(e(n(e(t(Mt,K),b[1]),n(e(t(pt,G),-A[1]),e(t(I,O),y[1]))),_[2]),e(n(e(t(j,N),b[1]),n(e(t(Y,P),-A[1]),e(t(I,O),_[1]))),-y[2]))),-C[3]),e(n(n(e(n(e(t(rt,X),A[1]),n(e(t(at,$),-_[1]),e(t(j,N),C[1]))),b[2]),e(n(e(t(rt,X),b[1]),n(e(t(ft,D),-_[1]),e(t(Y,P),C[1]))),-A[2])),n(e(n(e(t(at,$),b[1]),n(e(t(ft,D),-A[1]),e(t(I,O),C[1]))),_[2]),e(n(e(t(j,N),b[1]),n(e(t(Y,P),-A[1]),e(t(I,O),_[1]))),-C[2]))),y[3]))))),Tt=n(n(n(e(n(n(e(n(e(t(dt,ct),C[1]),n(e(t(wt,ot),-S[1]),e(t(Et,ht),y[1]))),_[2]),e(n(e(t(dt,ct),_[1]),n(e(t(At,q),-S[1]),e(t(mt,Q),y[1]))),-C[2])),n(e(n(e(t(wt,ot),_[1]),n(e(t(At,q),-C[1]),e(t(rt,X),y[1]))),S[2]),e(n(e(t(Et,ht),_[1]),n(e(t(mt,Q),-C[1]),e(t(rt,X),S[1]))),-y[2]))),b[3]),n(e(n(n(e(n(e(t(dt,ct),C[1]),n(e(t(wt,ot),-S[1]),e(t(Et,ht),y[1]))),b[2]),e(n(e(t(dt,ct),b[1]),n(e(t(pt,G),-S[1]),e(t(lt,H),y[1]))),-C[2])),n(e(n(e(t(wt,ot),b[1]),n(e(t(pt,G),-C[1]),e(t(ft,D),y[1]))),S[2]),e(n(e(t(Et,ht),b[1]),n(e(t(lt,H),-C[1]),e(t(ft,D),S[1]))),-y[2]))),-_[3]),e(n(n(e(n(e(t(dt,ct),_[1]),n(e(t(At,q),-S[1]),e(t(mt,Q),y[1]))),b[2]),e(n(e(t(dt,ct),b[1]),n(e(t(pt,G),-S[1]),e(t(lt,H),y[1]))),-_[2])),n(e(n(e(t(At,q),b[1]),n(e(t(pt,G),-_[1]),e(t(Y,P),y[1]))),S[2]),e(n(e(t(mt,Q),b[1]),n(e(t(lt,H),-_[1]),e(t(Y,P),S[1]))),-y[2]))),C[3]))),n(n(e(n(n(e(n(e(t(wt,ot),_[1]),n(e(t(At,q),-C[1]),e(t(rt,X),y[1]))),b[2]),e(n(e(t(wt,ot),b[1]),n(e(t(pt,G),-C[1]),e(t(ft,D),y[1]))),-_[2])),n(e(n(e(t(At,q),b[1]),n(e(t(pt,G),-_[1]),e(t(Y,P),y[1]))),C[2]),e(n(e(t(rt,X),b[1]),n(e(t(ft,D),-_[1]),e(t(Y,P),C[1]))),-y[2]))),-S[3]),e(n(n(e(n(e(t(Et,ht),_[1]),n(e(t(mt,Q),-C[1]),e(t(rt,X),S[1]))),b[2]),e(n(e(t(Et,ht),b[1]),n(e(t(lt,H),-C[1]),e(t(ft,D),S[1]))),-_[2])),n(e(n(e(t(mt,Q),b[1]),n(e(t(lt,H),-_[1]),e(t(Y,P),S[1]))),C[2]),e(n(e(t(rt,X),b[1]),n(e(t(ft,D),-_[1]),e(t(Y,P),C[1]))),-S[2]))),y[3])),n(e(n(n(e(n(e(t(dt,ct),_[1]),n(e(t(At,q),-S[1]),e(t(mt,Q),y[1]))),A[2]),e(n(e(t(dt,ct),A[1]),n(e(t(Mt,K),-S[1]),e(t(ut,U),y[1]))),-_[2])),n(e(n(e(t(At,q),A[1]),n(e(t(Mt,K),-_[1]),e(t(j,N),y[1]))),S[2]),e(n(e(t(mt,Q),A[1]),n(e(t(ut,U),-_[1]),e(t(j,N),S[1]))),-y[2]))),b[3]),e(n(n(e(n(e(t(dt,ct),_[1]),n(e(t(At,q),-S[1]),e(t(mt,Q),y[1]))),b[2]),e(n(e(t(dt,ct),b[1]),n(e(t(pt,G),-S[1]),e(t(lt,H),y[1]))),-_[2])),n(e(n(e(t(At,q),b[1]),n(e(t(pt,G),-_[1]),e(t(Y,P),y[1]))),S[2]),e(n(e(t(mt,Q),b[1]),n(e(t(lt,H),-_[1]),e(t(Y,P),S[1]))),-y[2]))),-A[3])))),n(n(n(e(n(n(e(n(e(t(dt,ct),A[1]),n(e(t(Mt,K),-S[1]),e(t(ut,U),y[1]))),b[2]),e(n(e(t(dt,ct),b[1]),n(e(t(pt,G),-S[1]),e(t(lt,H),y[1]))),-A[2])),n(e(n(e(t(Mt,K),b[1]),n(e(t(pt,G),-A[1]),e(t(I,O),y[1]))),S[2]),e(n(e(t(ut,U),b[1]),n(e(t(lt,H),-A[1]),e(t(I,O),S[1]))),-y[2]))),_[3]),e(n(n(e(n(e(t(At,q),A[1]),n(e(t(Mt,K),-_[1]),e(t(j,N),y[1]))),b[2]),e(n(e(t(At,q),b[1]),n(e(t(pt,G),-_[1]),e(t(Y,P),y[1]))),-A[2])),n(e(n(e(t(Mt,K),b[1]),n(e(t(pt,G),-A[1]),e(t(I,O),y[1]))),_[2]),e(n(e(t(j,N),b[1]),n(e(t(Y,P),-A[1]),e(t(I,O),_[1]))),-y[2]))),-S[3])),n(e(n(n(e(n(e(t(mt,Q),A[1]),n(e(t(ut,U),-_[1]),e(t(j,N),S[1]))),b[2]),e(n(e(t(mt,Q),b[1]),n(e(t(lt,H),-_[1]),e(t(Y,P),S[1]))),-A[2])),n(e(n(e(t(ut,U),b[1]),n(e(t(lt,H),-A[1]),e(t(I,O),S[1]))),_[2]),e(n(e(t(j,N),b[1]),n(e(t(Y,P),-A[1]),e(t(I,O),_[1]))),-S[2]))),y[3]),e(n(n(e(n(e(t(Et,ht),_[1]),n(e(t(mt,Q),-C[1]),e(t(rt,X),S[1]))),A[2]),e(n(e(t(Et,ht),A[1]),n(e(t(ut,U),-C[1]),e(t(at,$),S[1]))),-_[2])),n(e(n(e(t(mt,Q),A[1]),n(e(t(ut,U),-_[1]),e(t(j,N),S[1]))),C[2]),e(n(e(t(rt,X),A[1]),n(e(t(at,$),-_[1]),e(t(j,N),C[1]))),-S[2]))),b[3]))),n(n(e(n(n(e(n(e(t(Et,ht),_[1]),n(e(t(mt,Q),-C[1]),e(t(rt,X),S[1]))),b[2]),e(n(e(t(Et,ht),b[1]),n(e(t(lt,H),-C[1]),e(t(ft,D),S[1]))),-_[2])),n(e(n(e(t(mt,Q),b[1]),n(e(t(lt,H),-_[1]),e(t(Y,P),S[1]))),C[2]),e(n(e(t(rt,X),b[1]),n(e(t(ft,D),-_[1]),e(t(Y,P),C[1]))),-S[2]))),-A[3]),e(n(n(e(n(e(t(Et,ht),A[1]),n(e(t(ut,U),-C[1]),e(t(at,$),S[1]))),b[2]),e(n(e(t(Et,ht),b[1]),n(e(t(lt,H),-C[1]),e(t(ft,D),S[1]))),-A[2])),n(e(n(e(t(ut,U),b[1]),n(e(t(lt,H),-A[1]),e(t(I,O),S[1]))),C[2]),e(n(e(t(at,$),b[1]),n(e(t(ft,D),-A[1]),e(t(I,O),C[1]))),-S[2]))),_[3])),n(e(n(n(e(n(e(t(mt,Q),A[1]),n(e(t(ut,U),-_[1]),e(t(j,N),S[1]))),b[2]),e(n(e(t(mt,Q),b[1]),n(e(t(lt,H),-_[1]),e(t(Y,P),S[1]))),-A[2])),n(e(n(e(t(ut,U),b[1]),n(e(t(lt,H),-A[1]),e(t(I,O),S[1]))),_[2]),e(n(e(t(j,N),b[1]),n(e(t(Y,P),-A[1]),e(t(I,O),_[1]))),-S[2]))),-C[3]),e(n(n(e(n(e(t(rt,X),A[1]),n(e(t(at,$),-_[1]),e(t(j,N),C[1]))),b[2]),e(n(e(t(rt,X),b[1]),n(e(t(ft,D),-_[1]),e(t(Y,P),C[1]))),-A[2])),n(e(n(e(t(at,$),b[1]),n(e(t(ft,D),-A[1]),e(t(I,O),C[1]))),_[2]),e(n(e(t(j,N),b[1]),n(e(t(Y,P),-A[1]),e(t(I,O),_[1]))),-C[2]))),S[3]))))),_t=t(gt,Tt);return _t[_t.length-1]}return T}var f=[M,p,x];function h(n){var t=f[n.length];return t||(t=f[n.length]=E(n.length)),t.apply(void 0,n)}function r(n,t,i,e,T,b,A,_){function C(S,y,R,O,P,D){switch(arguments.length){case 0:case 1:return 0;case 2:return e(S,y);case 3:return T(S,y,R);case 4:return b(S,y,R,O);case 5:return A(S,y,R,O,P);case 6:return _(S,y,R,O,P,D)}for(var H=new Array(arguments.length),G=0;G<arguments.length;++G)H[G]=arguments[G];return n(H)}return C}function s(){for(;f.length<=d;)f.push(E(f.length));L.exports=r.apply(void 0,[h].concat(f));for(var n=0;n<=d;++n)L.exports[n]=f[n]}s()},727:function(L,F,a){var c=a(2962),m=6;function l(f){var h=f===2?E:f===3?M:f===4?p:f===5?x:w;return f<6?h(c[f]):h(c)}function g(){return[[0]]}function d(f,h){return[[h[0]],[f[0][0]]]}function E(f){return function(r,s){return[f([[+s[0],+r[0][1]],[+s[1],+r[1][1]]]),f([[+r[0][0],+s[0]],[+r[1][0],+s[1]]]),f(r)]}}function M(f){return function(r,s){return[f([[+s[0],+r[0][1],+r[0][2]],[+s[1],+r[1][1],+r[1][2]],[+s[2],+r[2][1],+r[2][2]]]),f([[+r[0][0],+s[0],+r[0][2]],[+r[1][0],+s[1],+r[1][2]],[+r[2][0],+s[2],+r[2][2]]]),f([[+r[0][0],+r[0][1],+s[0]],[+r[1][0],+r[1][1],+s[1]],[+r[2][0],+r[2][1],+s[2]]]),f(r)]}}function p(f){return function(r,s){return[f([[+s[0],+r[0][1],+r[0][2],+r[0][3]],[+s[1],+r[1][1],+r[1][2],+r[1][3]],[+s[2],+r[2][1],+r[2][2],+r[2][3]],[+s[3],+r[3][1],+r[3][2],+r[3][3]]]),f([[+r[0][0],+s[0],+r[0][2],+r[0][3]],[+r[1][0],+s[1],+r[1][2],+r[1][3]],[+r[2][0],+s[2],+r[2][2],+r[2][3]],[+r[3][0],+s[3],+r[3][2],+r[3][3]]]),f([[+r[0][0],+r[0][1],+s[0],+r[0][3]],[+r[1][0],+r[1][1],+s[1],+r[1][3]],[+r[2][0],+r[2][1],+s[2],+r[2][3]],[+r[3][0],+r[3][1],+s[3],+r[3][3]]]),f([[+r[0][0],+r[0][1],+r[0][2],+s[0]],[+r[1][0],+r[1][1],+r[1][2],+s[1]],[+r[2][0],+r[2][1],+r[2][2],+s[2]],[+r[3][0],+r[3][1],+r[3][2],+s[3]]]),f(r)]}}function x(f){return function(r,s){return[f([[+s[0],+r[0][1],+r[0][2],+r[0][3],+r[0][4]],[+s[1],+r[1][1],+r[1][2],+r[1][3],+r[1][4]],[+s[2],+r[2][1],+r[2][2],+r[2][3],+r[2][4]],[+s[3],+r[3][1],+r[3][2],+r[3][3],+r[3][4]],[+s[4],+r[4][1],+r[4][2],+r[4][3],+r[4][4]]]),f([[+r[0][0],+s[0],+r[0][2],+r[0][3],+r[0][4]],[+r[1][0],+s[1],+r[1][2],+r[1][3],+r[1][4]],[+r[2][0],+s[2],+r[2][2],+r[2][3],+r[2][4]],[+r[3][0],+s[3],+r[3][2],+r[3][3],+r[3][4]],[+r[4][0],+s[4],+r[4][2],+r[4][3],+r[4][4]]]),f([[+r[0][0],+r[0][1],+s[0],+r[0][3],+r[0][4]],[+r[1][0],+r[1][1],+s[1],+r[1][3],+r[1][4]],[+r[2][0],+r[2][1],+s[2],+r[2][3],+r[2][4]],[+r[3][0],+r[3][1],+s[3],+r[3][3],+r[3][4]],[+r[4][0],+r[4][1],+s[4],+r[4][3],+r[4][4]]]),f([[+r[0][0],+r[0][1],+r[0][2],+s[0],+r[0][4]],[+r[1][0],+r[1][1],+r[1][2],+s[1],+r[1][4]],[+r[2][0],+r[2][1],+r[2][2],+s[2],+r[2][4]],[+r[3][0],+r[3][1],+r[3][2],+s[3],+r[3][4]],[+r[4][0],+r[4][1],+r[4][2],+s[4],+r[4][4]]]),f([[+r[0][0],+r[0][1],+r[0][2],+r[0][3],+s[0]],[+r[1][0],+r[1][1],+r[1][2],+r[1][3],+s[1]],[+r[2][0],+r[2][1],+r[2][2],+r[2][3],+s[2]],[+r[3][0],+r[3][1],+r[3][2],+r[3][3],+s[3]],[+r[4][0],+r[4][1],+r[4][2],+r[4][3],+s[4]]]),f(r)]}}function w(f){return function(r,s){return[f([[+s[0],+r[0][1],+r[0][2],+r[0][3],+r[0][4],+r[0][5]],[+s[1],+r[1][1],+r[1][2],+r[1][3],+r[1][4],+r[1][5]],[+s[2],+r[2][1],+r[2][2],+r[2][3],+r[2][4],+r[2][5]],[+s[3],+r[3][1],+r[3][2],+r[3][3],+r[3][4],+r[3][5]],[+s[4],+r[4][1],+r[4][2],+r[4][3],+r[4][4],+r[4][5]],[+s[5],+r[5][1],+r[5][2],+r[5][3],+r[5][4],+r[5][5]]]),f([[+r[0][0],+s[0],+r[0][2],+r[0][3],+r[0][4],+r[0][5]],[+r[1][0],+s[1],+r[1][2],+r[1][3],+r[1][4],+r[1][5]],[+r[2][0],+s[2],+r[2][2],+r[2][3],+r[2][4],+r[2][5]],[+r[3][0],+s[3],+r[3][2],+r[3][3],+r[3][4],+r[3][5]],[+r[4][0],+s[4],+r[4][2],+r[4][3],+r[4][4],+r[4][5]],[+r[5][0],+s[5],+r[5][2],+r[5][3],+r[5][4],+r[5][5]]]),f([[+r[0][0],+r[0][1],+s[0],+r[0][3],+r[0][4],+r[0][5]],[+r[1][0],+r[1][1],+s[1],+r[1][3],+r[1][4],+r[1][5]],[+r[2][0],+r[2][1],+s[2],+r[2][3],+r[2][4],+r[2][5]],[+r[3][0],+r[3][1],+s[3],+r[3][3],+r[3][4],+r[3][5]],[+r[4][0],+r[4][1],+s[4],+r[4][3],+r[4][4],+r[4][5]],[+r[5][0],+r[5][1],+s[5],+r[5][3],+r[5][4],+r[5][5]]]),f([[+r[0][0],+r[0][1],+r[0][2],+s[0],+r[0][4],+r[0][5]],[+r[1][0],+r[1][1],+r[1][2],+s[1],+r[1][4],+r[1][5]],[+r[2][0],+r[2][1],+r[2][2],+s[2],+r[2][4],+r[2][5]],[+r[3][0],+r[3][1],+r[3][2],+s[3],+r[3][4],+r[3][5]],[+r[4][0],+r[4][1],+r[4][2],+s[4],+r[4][4],+r[4][5]],[+r[5][0],+r[5][1],+r[5][2],+s[5],+r[5][4],+r[5][5]]]),f([[+r[0][0],+r[0][1],+r[0][2],+r[0][3],+s[0],+r[0][5]],[+r[1][0],+r[1][1],+r[1][2],+r[1][3],+s[1],+r[1][5]],[+r[2][0],+r[2][1],+r[2][2],+r[2][3],+s[2],+r[2][5]],[+r[3][0],+r[3][1],+r[3][2],+r[3][3],+s[3],+r[3][5]],[+r[4][0],+r[4][1],+r[4][2],+r[4][3],+s[4],+r[4][5]],[+r[5][0],+r[5][1],+r[5][2],+r[5][3],+s[5],+r[5][5]]]),f([[+r[0][0],+r[0][1],+r[0][2],+r[0][3],+r[0][4],+s[0]],[+r[1][0],+r[1][1],+r[1][2],+r[1][3],+r[1][4],+s[1]],[+r[2][0],+r[2][1],+r[2][2],+r[2][3],+r[2][4],+s[2]],[+r[3][0],+r[3][1],+r[3][2],+r[3][3],+r[3][4],+s[3]],[+r[4][0],+r[4][1],+r[4][2],+r[4][3],+r[4][4],+s[4]],[+r[5][0],+r[5][1],+r[5][2],+r[5][3],+r[5][4],+s[5]]]),f(r)]}}var o=[g,d];function v(f,h,r,s,n,t,i,e){return function(b,A){switch(b.length){case 0:return f(b,A);case 1:return h(b,A);case 2:return r(b,A);case 3:return s(b,A);case 4:return n(b,A);case 5:return t(b,A)}var _=i[b.length];return _||(_=i[b.length]=e(b.length)),_(b,A)}}function u(){for(;o.length<m;)o.push(l(o.length));L.exports=v.apply(void 0,o.concat([o,l]));for(var f=0;f<m;++f)L.exports[f]=o[f]}u()},3250:function(L,F,a){var c=a(5250),m=a(8210),l=a(3012),g=a(8545),d=5,E=11102230246251565e-32,M=(3+16*E)*E,p=(7+56*E)*E;function x(t,i,e,T){return function(A,_,C){var S=t(t(i(_[1],C[0]),i(-C[1],_[0])),t(i(A[1],_[0]),i(-_[1],A[0]))),y=t(i(A[1],C[0]),i(-C[1],A[0])),R=T(S,y);return R[R.length-1]}}function w(t,i,e,T){return function(A,_,C,S){var y=t(t(e(t(i(C[1],S[0]),i(-S[1],C[0])),_[2]),t(e(t(i(_[1],S[0]),i(-S[1],_[0])),-C[2]),e(t(i(_[1],C[0]),i(-C[1],_[0])),S[2]))),t(e(t(i(_[1],S[0]),i(-S[1],_[0])),A[2]),t(e(t(i(A[1],S[0]),i(-S[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),S[2])))),R=t(t(e(t(i(C[1],S[0]),i(-S[1],C[0])),A[2]),t(e(t(i(A[1],S[0]),i(-S[1],A[0])),-C[2]),e(t(i(A[1],C[0]),i(-C[1],A[0])),S[2]))),t(e(t(i(_[1],C[0]),i(-C[1],_[0])),A[2]),t(e(t(i(A[1],C[0]),i(-C[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),C[2])))),O=T(y,R);return O[O.length-1]}}function o(t,i,e,T){return function(A,_,C,S,y){var R=t(t(t(e(t(e(t(i(S[1],y[0]),i(-y[1],S[0])),C[2]),t(e(t(i(C[1],y[0]),i(-y[1],C[0])),-S[2]),e(t(i(C[1],S[0]),i(-S[1],C[0])),y[2]))),_[3]),t(e(t(e(t(i(S[1],y[0]),i(-y[1],S[0])),_[2]),t(e(t(i(_[1],y[0]),i(-y[1],_[0])),-S[2]),e(t(i(_[1],S[0]),i(-S[1],_[0])),y[2]))),-C[3]),e(t(e(t(i(C[1],y[0]),i(-y[1],C[0])),_[2]),t(e(t(i(_[1],y[0]),i(-y[1],_[0])),-C[2]),e(t(i(_[1],C[0]),i(-C[1],_[0])),y[2]))),S[3]))),t(e(t(e(t(i(C[1],S[0]),i(-S[1],C[0])),_[2]),t(e(t(i(_[1],S[0]),i(-S[1],_[0])),-C[2]),e(t(i(_[1],C[0]),i(-C[1],_[0])),S[2]))),-y[3]),t(e(t(e(t(i(S[1],y[0]),i(-y[1],S[0])),_[2]),t(e(t(i(_[1],y[0]),i(-y[1],_[0])),-S[2]),e(t(i(_[1],S[0]),i(-S[1],_[0])),y[2]))),A[3]),e(t(e(t(i(S[1],y[0]),i(-y[1],S[0])),A[2]),t(e(t(i(A[1],y[0]),i(-y[1],A[0])),-S[2]),e(t(i(A[1],S[0]),i(-S[1],A[0])),y[2]))),-_[3])))),t(t(e(t(e(t(i(_[1],y[0]),i(-y[1],_[0])),A[2]),t(e(t(i(A[1],y[0]),i(-y[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),y[2]))),S[3]),t(e(t(e(t(i(_[1],S[0]),i(-S[1],_[0])),A[2]),t(e(t(i(A[1],S[0]),i(-S[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),S[2]))),-y[3]),e(t(e(t(i(C[1],S[0]),i(-S[1],C[0])),_[2]),t(e(t(i(_[1],S[0]),i(-S[1],_[0])),-C[2]),e(t(i(_[1],C[0]),i(-C[1],_[0])),S[2]))),A[3]))),t(e(t(e(t(i(C[1],S[0]),i(-S[1],C[0])),A[2]),t(e(t(i(A[1],S[0]),i(-S[1],A[0])),-C[2]),e(t(i(A[1],C[0]),i(-C[1],A[0])),S[2]))),-_[3]),t(e(t(e(t(i(_[1],S[0]),i(-S[1],_[0])),A[2]),t(e(t(i(A[1],S[0]),i(-S[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),S[2]))),C[3]),e(t(e(t(i(_[1],C[0]),i(-C[1],_[0])),A[2]),t(e(t(i(A[1],C[0]),i(-C[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),C[2]))),-S[3]))))),O=t(t(t(e(t(e(t(i(S[1],y[0]),i(-y[1],S[0])),C[2]),t(e(t(i(C[1],y[0]),i(-y[1],C[0])),-S[2]),e(t(i(C[1],S[0]),i(-S[1],C[0])),y[2]))),A[3]),e(t(e(t(i(S[1],y[0]),i(-y[1],S[0])),A[2]),t(e(t(i(A[1],y[0]),i(-y[1],A[0])),-S[2]),e(t(i(A[1],S[0]),i(-S[1],A[0])),y[2]))),-C[3])),t(e(t(e(t(i(C[1],y[0]),i(-y[1],C[0])),A[2]),t(e(t(i(A[1],y[0]),i(-y[1],A[0])),-C[2]),e(t(i(A[1],C[0]),i(-C[1],A[0])),y[2]))),S[3]),e(t(e(t(i(C[1],S[0]),i(-S[1],C[0])),A[2]),t(e(t(i(A[1],S[0]),i(-S[1],A[0])),-C[2]),e(t(i(A[1],C[0]),i(-C[1],A[0])),S[2]))),-y[3]))),t(t(e(t(e(t(i(C[1],y[0]),i(-y[1],C[0])),_[2]),t(e(t(i(_[1],y[0]),i(-y[1],_[0])),-C[2]),e(t(i(_[1],C[0]),i(-C[1],_[0])),y[2]))),A[3]),e(t(e(t(i(C[1],y[0]),i(-y[1],C[0])),A[2]),t(e(t(i(A[1],y[0]),i(-y[1],A[0])),-C[2]),e(t(i(A[1],C[0]),i(-C[1],A[0])),y[2]))),-_[3])),t(e(t(e(t(i(_[1],y[0]),i(-y[1],_[0])),A[2]),t(e(t(i(A[1],y[0]),i(-y[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),y[2]))),C[3]),e(t(e(t(i(_[1],C[0]),i(-C[1],_[0])),A[2]),t(e(t(i(A[1],C[0]),i(-C[1],A[0])),-_[2]),e(t(i(A[1],_[0]),i(-_[1],A[0])),C[2]))),-y[3])))),P=T(R,O);return P[P.length-1]}}function v(t){var i=t===3?x:t===4?w:o;return i(m,c,l,g)}var u=v(3),f=v(4),h=[function(){return 0},function(){return 0},function(i,e){return e[0]-i[0]},function(i,e,T){var b=(i[1]-T[1])*(e[0]-T[0]),A=(i[0]-T[0])*(e[1]-T[1]),_=b-A,C;if(b>0){if(A<=0)return _;C=b+A}else if(b<0){if(A>=0)return _;C=-(b+A)}else return _;var S=M*C;return _>=S||_<=-S?_:u(i,e,T)},function(i,e,T,b){var A=i[0]-b[0],_=e[0]-b[0],C=T[0]-b[0],S=i[1]-b[1],y=e[1]-b[1],R=T[1]-b[1],O=i[2]-b[2],P=e[2]-b[2],D=T[2]-b[2],H=_*R,G=C*y,B=C*S,I=A*R,N=A*y,$=_*S,U=O*(H-G)+P*(B-I)+D*(N-$),K=(Math.abs(H)+Math.abs(G))*Math.abs(O)+(Math.abs(B)+Math.abs(I))*Math.abs(P)+(Math.abs(N)+Math.abs($))*Math.abs(D),W=p*K;return U>W||-U>W?U:f(i,e,T,b)}];function r(t){var i=h[t.length];return i||(i=h[t.length]=v(t.length)),i.apply(void 0,t)}function s(t,i,e,T,b,A,_){return function(S,y,R,O,P){switch(arguments.length){case 0:case 1:return 0;case 2:return T(S,y);case 3:return b(S,y,R);case 4:return A(S,y,R,O);case 5:return _(S,y,R,O,P)}for(var D=new Array(arguments.length),H=0;H<arguments.length;++H)D[H]=arguments[H];return t(D)}}function n(){for(;h.length<=d;)h.push(v(h.length));L.exports=s.apply(void 0,[r].concat(h));for(var t=0;t<=d;++t)L.exports[t]=h[t]}n()},5382:function(L,F,a){var c=a(8210),m=a(3012);L.exports=l;function l(g,d){if(g.length===1)return m(d,g[0]);if(d.length===1)return m(g,d[0]);if(g.length===0||d.length===0)return[0];var E=[0];if(g.length<d.length)for(var M=0;M<g.length;++M)E=c(E,m(d,g[M]));else for(var M=0;M<d.length;++M)E=c(E,m(g,d[M]));return E}},3012:function(L,F,a){var c=a(5250),m=a(9362);L.exports=l;function l(g,d){var E=g.length;if(E===1){var M=c(g[0],d);return M[0]?M:[M[1]]}var p=new Array(2*E),x=[.1,.1],w=[.1,.1],o=0;c(g[0],d,x),x[0]&&(p[o++]=x[0]);for(var v=1;v<E;++v){c(g[v],d,w);var u=x[1];m(u,w[0],x),x[0]&&(p[o++]=x[0]);var f=w[1],h=x[1],r=f+h,s=r-f,n=h-s;x[1]=r,n&&(p[o++]=n)}return x[1]&&(p[o++]=x[1]),o===0&&(p[o++]=0),p.length=o,p}},1125:function(L,F,a){L.exports=l;var c=a(3250)[3];function m(g,d,E,M){for(var p=0;p<2;++p){var x=g[p],w=d[p],o=Math.min(x,w),v=Math.max(x,w),u=E[p],f=M[p],h=Math.min(u,f),r=Math.max(u,f);if(r<o||v<h)return!1}return!0}function l(g,d,E,M){var p=c(g,E,M),x=c(d,E,M);if(p>0&&x>0||p<0&&x<0)return!1;var w=c(E,g,d),o=c(M,g,d);return w>0&&o>0||w<0&&o<0?!1:p===0&&x===0&&w===0&&o===0?m(g,d,E,M):!0}},8545:function(L){L.exports=a;function F(c,m){var l=c+m,g=l-c,d=l-g,E=m-g,M=c-d,p=M+E;return p?[p,l]:[l]}function a(c,m){var l=c.length|0,g=m.length|0;if(l===1&&g===1)return F(c[0],-m[0]);var d=l+g,E=new Array(d),M=0,p=0,x=0,w=Math.abs,o=c[p],v=w(o),u=-m[x],f=w(u),h,r;v<f?(r=o,p+=1,p<l&&(o=c[p],v=w(o))):(r=u,x+=1,x<g&&(u=-m[x],f=w(u))),p<l&&v<f||x>=g?(h=o,p+=1,p<l&&(o=c[p],v=w(o))):(h=u,x+=1,x<g&&(u=-m[x],f=w(u)));for(var s=h+r,n=s-h,t=r-n,i=t,e=s,T,b,A,_,C;p<l&&x<g;)v<f?(h=o,p+=1,p<l&&(o=c[p],v=w(o))):(h=u,x+=1,x<g&&(u=-m[x],f=w(u))),r=i,s=h+r,n=s-h,t=r-n,t&&(E[M++]=t),T=e+s,b=T-e,A=T-b,_=s-b,C=e-A,i=C+_,e=T;for(;p<l;)h=o,r=i,s=h+r,n=s-h,t=r-n,t&&(E[M++]=t),T=e+s,b=T-e,A=T-b,_=s-b,C=e-A,i=C+_,e=T,p+=1,p<l&&(o=c[p]);for(;x<g;)h=u,r=i,s=h+r,n=s-h,t=r-n,t&&(E[M++]=t),T=e+s,b=T-e,A=T-b,_=s-b,C=e-A,i=C+_,e=T,x+=1,x<g&&(u=-m[x]);return i&&(E[M++]=i),e&&(E[M++]=e),M||(E[M++]=0),E.length=M,E}},8210:function(L){L.exports=a;function F(c,m){var l=c+m,g=l-c,d=l-g,E=m-g,M=c-d,p=M+E;return p?[p,l]:[l]}function a(c,m){var l=c.length|0,g=m.length|0;if(l===1&&g===1)return F(c[0],m[0]);var d=l+g,E=new Array(d),M=0,p=0,x=0,w=Math.abs,o=c[p],v=w(o),u=m[x],f=w(u),h,r;v<f?(r=o,p+=1,p<l&&(o=c[p],v=w(o))):(r=u,x+=1,x<g&&(u=m[x],f=w(u))),p<l&&v<f||x>=g?(h=o,p+=1,p<l&&(o=c[p],v=w(o))):(h=u,x+=1,x<g&&(u=m[x],f=w(u)));for(var s=h+r,n=s-h,t=r-n,i=t,e=s,T,b,A,_,C;p<l&&x<g;)v<f?(h=o,p+=1,p<l&&(o=c[p],v=w(o))):(h=u,x+=1,x<g&&(u=m[x],f=w(u))),r=i,s=h+r,n=s-h,t=r-n,t&&(E[M++]=t),T=e+s,b=T-e,A=T-b,_=s-b,C=e-A,i=C+_,e=T;for(;p<l;)h=o,r=i,s=h+r,n=s-h,t=r-n,t&&(E[M++]=t),T=e+s,b=T-e,A=T-b,_=s-b,C=e-A,i=C+_,e=T,p+=1,p<l&&(o=c[p]);for(;x<g;)h=u,r=i,s=h+r,n=s-h,t=r-n,t&&(E[M++]=t),T=e+s,b=T-e,A=T-b,_=s-b,C=e-A,i=C+_,e=T,x+=1,x<g&&(u=m[x]);return i&&(E[M++]=i),e&&(E[M++]=e),M||(E[M++]=0),E.length=M,E}},9127:function(L,F,a){L.exports=l;var c=a(6204),m=a(5771);function l(g){return m(c(g))}},7765:function(L,F,a){L.exports=o;var c=a(9618),m=a(1888),l=a(446),g=a(1570);function d(v){for(var u=v.length,f=0,h=0;h<u;++h)f=Math.max(f,v[h].length)|0;return f-1}function E(v,u){for(var f=v.length,h=m.mallocUint8(f),r=0;r<f;++r)h[r]=v[r]<u|0;return h}function M(v,u){for(var f=v.length,h=u*(u+1)/2*f|0,r=m.mallocUint32(h*2),s=0,n=0;n<f;++n)for(var t=v[n],u=t.length,i=0;i<u;++i)for(var e=0;e<i;++e){var T=t[e],b=t[i];r[s++]=Math.min(T,b)|0,r[s++]=Math.max(T,b)|0}var A=s/2|0;l(c(r,[A,2]));for(var _=2,n=2;n<s;n+=2)r[n-2]===r[n]&&r[n-1]===r[n+1]||(r[_++]=r[n],r[_++]=r[n+1]);return c(r,[_/2|0,2])}function p(v,u,f,h){for(var r=v.data,s=v.shape[0],n=m.mallocDouble(s),t=0,i=0;i<s;++i){var e=r[2*i],T=r[2*i+1];if(f[e]!==f[T]){var b=u[e],A=u[T];r[2*t]=e,r[2*t+1]=T,n[t++]=(A-h)/(A-b)}}return v.shape[0]=t,c(n,[t])}function x(v,u){var f=m.mallocInt32(u*2),h=v.shape[0],r=v.data;f[0]=0;for(var s=0,n=0;n<h;++n){var t=r[2*n];if(t!==s){for(f[2*s+1]=n;++s<t;)f[2*s]=n,f[2*s+1]=n;f[2*s]=n}}for(f[2*s+1]=h;++s<u;)f[2*s]=f[2*s+1]=h;return f}function w(v){for(var u=v.shape[0]|0,f=v.data,h=new Array(u),r=0;r<u;++r)h[r]=[f[2*r],f[2*r+1]];return h}function o(v,u,f,h){f=f||0,typeof h>"u"&&(h=d(v));var r=v.length;if(r===0||h<1)return{cells:[],vertexIds:[],vertexWeights:[]};var s=E(u,+f),n=M(v,h),t=p(n,u,s,+f),i=x(n,u.length|0),e=g(h)(v,n.data,i,s),T=w(n),b=[].slice.call(t.data,0,t.shape[0]);return m.free(s),m.free(n.data),m.free(t.data),m.free(i),{cells:e,vertexIds:T,vertexWeights:b}}},1570:function(L){L.exports=a;var F=[function(){function m(l,g,d,E){for(var M=l.length,p=[],x=0;x<M;++x){var w=l[x];w.length}return p}return m},function(){function m(g,d,E,M){for(var p=Math.min(E,M)|0,x=Math.max(E,M)|0,w=g[2*p],o=g[2*p+1];w<o;){var v=w+o>>1,u=d[2*v+1];if(u===x)return v;x<u?o=v:w=v+1}return w}function l(g,d,E,M){for(var p=g.length,x=[],w=0;w<p;++w){var o=g[w],v=o.length;if(v===2){var u=(M[o[0]]<<0)+(M[o[1]]<<1);if(u===0||u===3)continue;switch(u){case 0:break;case 1:x.push([m(E,d,o[0],o[1])]);break;case 2:x.push([m(E,d,o[1],o[0])]);break}}}return x}return l},function(){function m(g,d,E,M){for(var p=Math.min(E,M)|0,x=Math.max(E,M)|0,w=g[2*p],o=g[2*p+1];w<o;){var v=w+o>>1,u=d[2*v+1];if(u===x)return v;x<u?o=v:w=v+1}return w}function l(g,d,E,M){for(var p=g.length,x=[],w=0;w<p;++w){var o=g[w],v=o.length;if(v===3){var u=(M[o[0]]<<0)+(M[o[1]]<<1)+(M[o[2]]<<2);if(u===0||u===7)continue;switch(u){case 0:break;case 1:x.push([m(E,d,o[0],o[2]),m(E,d,o[0],o[1])]);break;case 2:x.push([m(E,d,o[1],o[0]),m(E,d,o[1],o[2])]);break;case 3:x.push([m(E,d,o[0],o[2]),m(E,d,o[1],o[2])]);break;case 4:x.push([m(E,d,o[2],o[1]),m(E,d,o[2],o[0])]);break;case 5:x.push([m(E,d,o[2],o[1]),m(E,d,o[0],o[1])]);break;case 6:x.push([m(E,d,o[1],o[0]),m(E,d,o[2],o[0])]);break}}else if(v===2){var u=(M[o[0]]<<0)+(M[o[1]]<<1);if(u===0||u===3)continue;switch(u){case 0:break;case 1:x.push([m(E,d,o[0],o[1])]);break;case 2:x.push([m(E,d,o[1],o[0])]);break}}}return x}return l},function(){function m(g,d,E,M){for(var p=Math.min(E,M)|0,x=Math.max(E,M)|0,w=g[2*p],o=g[2*p+1];w<o;){var v=w+o>>1,u=d[2*v+1];if(u===x)return v;x<u?o=v:w=v+1}return w}function l(g,d,E,M){for(var p=g.length,x=[],w=0;w<p;++w){var o=g[w],v=o.length;if(v===4){var u=(M[o[0]]<<0)+(M[o[1]]<<1)+(M[o[2]]<<2)+(M[o[3]]<<3);if(u===0||u===15)continue;switch(u){case 0:break;case 1:x.push([m(E,d,o[0],o[1]),m(E,d,o[0],o[2]),m(E,d,o[0],o[3])]);break;case 2:x.push([m(E,d,o[1],o[2]),m(E,d,o[1],o[0]),m(E,d,o[1],o[3])]);break;case 3:x.push([m(E,d,o[1],o[2]),m(E,d,o[0],o[2]),m(E,d,o[0],o[3])],[m(E,d,o[1],o[3]),m(E,d,o[1],o[2]),m(E,d,o[0],o[3])]);break;case 4:x.push([m(E,d,o[2],o[0]),m(E,d,o[2],o[1]),m(E,d,o[2],o[3])]);break;case 5:x.push([m(E,d,o[0],o[1]),m(E,d,o[2],o[1]),m(E,d,o[0],o[3])],[m(E,d,o[2],o[1]),m(E,d,o[2],o[3]),m(E,d,o[0],o[3])]);break;case 6:x.push([m(E,d,o[2],o[0]),m(E,d,o[1],o[0]),m(E,d,o[1],o[3])],[m(E,d,o[2],o[3]),m(E,d,o[2],o[0]),m(E,d,o[1],o[3])]);break;case 7:x.push([m(E,d,o[0],o[3]),m(E,d,o[1],o[3]),m(E,d,o[2],o[3])]);break;case 8:x.push([m(E,d,o[3],o[1]),m(E,d,o[3],o[0]),m(E,d,o[3],o[2])]);break;case 9:x.push([m(E,d,o[3],o[1]),m(E,d,o[0],o[1]),m(E,d,o[0],o[2])],[m(E,d,o[3],o[2]),m(E,d,o[3],o[1]),m(E,d,o[0],o[2])]);break;case 10:x.push([m(E,d,o[1],o[0]),m(E,d,o[3],o[0]),m(E,d,o[1],o[2])],[m(E,d,o[3],o[0]),m(E,d,o[3],o[2]),m(E,d,o[1],o[2])]);break;case 11:x.push([m(E,d,o[1],o[2]),m(E,d,o[0],o[2]),m(E,d,o[3],o[2])]);break;case 12:x.push([m(E,d,o[3],o[0]),m(E,d,o[2],o[0]),m(E,d,o[2],o[1])],[m(E,d,o[3],o[1]),m(E,d,o[3],o[0]),m(E,d,o[2],o[1])]);break;case 13:x.push([m(E,d,o[0],o[1]),m(E,d,o[2],o[1]),m(E,d,o[3],o[1])]);break;case 14:x.push([m(E,d,o[2],o[0]),m(E,d,o[1],o[0]),m(E,d,o[3],o[0])]);break}}else if(v===3){var u=(M[o[0]]<<0)+(M[o[1]]<<1)+(M[o[2]]<<2);if(u===0||u===7)continue;switch(u){case 0:break;case 1:x.push([m(E,d,o[0],o[2]),m(E,d,o[0],o[1])]);break;case 2:x.push([m(E,d,o[1],o[0]),m(E,d,o[1],o[2])]);break;case 3:x.push([m(E,d,o[0],o[2]),m(E,d,o[1],o[2])]);break;case 4:x.push([m(E,d,o[2],o[1]),m(E,d,o[2],o[0])]);break;case 5:x.push([m(E,d,o[2],o[1]),m(E,d,o[0],o[1])]);break;case 6:x.push([m(E,d,o[1],o[0]),m(E,d,o[2],o[0])]);break}}else if(v===2){var u=(M[o[0]]<<0)+(M[o[1]]<<1);if(u===0||u===3)continue;switch(u){case 0:break;case 1:x.push([m(E,d,o[0],o[1])]);break;case 2:x.push([m(E,d,o[1],o[0])]);break}}}return x}return l}];function a(c){return F[c]()}},6803:function(L,F,a){a(8828),a(1755);function c(m,l){var g=m.length,d=m.length-l.length,E=Math.min;if(d)return d;switch(g){case 0:return 0;case 1:return m[0]-l[0];case 2:var o=m[0]+m[1]-l[0]-l[1];return o||E(m[0],m[1])-E(l[0],l[1]);case 3:var M=m[0]+m[1],p=l[0]+l[1];if(o=M+m[2]-(p+l[2]),o)return o;var x=E(m[0],m[1]),w=E(l[0],l[1]),o=E(x,m[2])-E(w,l[2]);return o||E(x+m[2],M)-E(w+l[2],p);default:var v=m.slice(0);v.sort();var u=l.slice(0);u.sort();for(var f=0;f<g;++f)if(d=v[f]-u[f],d)return d;return 0}}F.Fw=c},3105:function(L,F){"use restrict";var a=32;F.INT_BITS=a,F.INT_MAX=2147483647,F.INT_MIN=-1<<a-1,F.sign=function(l){return(l>0)-(l<0)},F.abs=function(l){var g=l>>a-1;return(l^g)-g},F.min=function(l,g){return g^(l^g)&-(l<g)},F.max=function(l,g){return l^(l^g)&-(l<g)},F.isPow2=function(l){return!(l&l-1)&&!!l},F.log2=function(l){var g,d;return g=(l>65535)<<4,l>>>=g,d=(l>255)<<3,l>>>=d,g|=d,d=(l>15)<<2,l>>>=d,g|=d,d=(l>3)<<1,l>>>=d,g|=d,g|l>>1},F.log10=function(l){return l>=1e9?9:l>=1e8?8:l>=1e7?7:l>=1e6?6:l>=1e5?5:l>=1e4?4:l>=1e3?3:l>=100?2:l>=10?1:0},F.popCount=function(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),(l+(l>>>4)&252645135)*16843009>>>24};function c(l){var g=32;return l&=-l,l&&g--,l&65535&&(g-=16),l&16711935&&(g-=8),l&252645135&&(g-=4),l&858993459&&(g-=2),l&1431655765&&(g-=1),g}F.countTrailingZeros=c,F.nextPow2=function(l){return l+=l===0,--l,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l+1},F.prevPow2=function(l){return l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l-(l>>>1)},F.parity=function(l){return l^=l>>>16,l^=l>>>8,l^=l>>>4,l&=15,27030>>>l&1};var m=new Array(256);(function(l){for(var g=0;g<256;++g){var d=g,E=g,M=7;for(d>>>=1;d;d>>>=1)E<<=1,E|=d&1,--M;l[g]=E<<M&255}})(m),F.reverse=function(l){return m[l&255]<<24|m[l>>>8&255]<<16|m[l>>>16&255]<<8|m[l>>>24&255]},F.interleave2=function(l,g){return l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,g&=65535,g=(g|g<<8)&16711935,g=(g|g<<4)&252645135,g=(g|g<<2)&858993459,g=(g|g<<1)&1431655765,l|g<<1},F.deinterleave2=function(l,g){return l=l>>>g&1431655765,l=(l|l>>>1)&858993459,l=(l|l>>>2)&252645135,l=(l|l>>>4)&16711935,l=(l|l>>>16)&65535,l<<16>>16},F.interleave3=function(l,g,d){return l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,g&=1023,g=(g|g<<16)&4278190335,g=(g|g<<8)&251719695,g=(g|g<<4)&3272356035,g=(g|g<<2)&1227133513,l|=g<<1,d&=1023,d=(d|d<<16)&4278190335,d=(d|d<<8)&251719695,d=(d|d<<4)&3272356035,d=(d|d<<2)&1227133513,l|d<<2},F.deinterleave3=function(l,g){return l=l>>>g&1227133513,l=(l|l>>>2)&3272356035,l=(l|l>>>4)&251719695,l=(l|l>>>8)&4278190335,l=(l|l>>>16)&1023,l<<22>>22},F.nextCombination=function(l){var g=l|l-1;return g+1|(~g&-~g)-1>>>c(l)+1}},2014:function(L,F,a){"use restrict";var c=a(3105),m=a(4623);function l(t){for(var i=0,e=Math.max,T=0,b=t.length;T<b;++T)i=e(i,t[T].length);return i-1}F.dimension=l;function g(t){for(var i=-1,e=Math.max,T=0,b=t.length;T<b;++T)for(var A=t[T],_=0,C=A.length;_<C;++_)i=e(i,A[_]);return i+1}F.countVertices=g;function d(t){for(var i=new Array(t.length),e=0,T=t.length;e<T;++e)i[e]=t[e].slice(0);return i}F.cloneCells=d;function E(t,i){var e=t.length,T=t.length-i.length,b=Math.min;if(T)return T;switch(e){case 0:return 0;case 1:return t[0]-i[0];case 2:var y=t[0]+t[1]-i[0]-i[1];return y||b(t[0],t[1])-b(i[0],i[1]);case 3:var A=t[0]+t[1],_=i[0]+i[1];if(y=A+t[2]-(_+i[2]),y)return y;var C=b(t[0],t[1]),S=b(i[0],i[1]),y=b(C,t[2])-b(S,i[2]);return y||b(C+t[2],A)-b(S+i[2],_);default:var R=t.slice(0);R.sort();var O=i.slice(0);O.sort();for(var P=0;P<e;++P)if(T=R[P]-O[P],T)return T;return 0}}F.compareCells=E;function M(t,i){return E(t[0],i[0])}function p(t,i){if(i){for(var e=t.length,T=new Array(e),b=0;b<e;++b)T[b]=[t[b],i[b]];T.sort(M);for(var b=0;b<e;++b)t[b]=T[b][0],i[b]=T[b][1];return t}else return t.sort(E),t}F.normalize=p;function x(t){if(t.length===0)return[];for(var i=1,e=t.length,T=1;T<e;++T){var b=t[T];if(E(b,t[T-1])){if(T===i){i++;continue}t[i++]=b}}return t.length=i,t}F.unique=x;function w(t,i){for(var e=0,T=t.length-1,b=-1;e<=T;){var A=e+T>>1,_=E(t[A],i);_<=0?(_===0&&(b=A),e=A+1):_>0&&(T=A-1)}return b}F.findCell=w;function o(t,i){for(var e=new Array(t.length),T=0,b=e.length;T<b;++T)e[T]=[];for(var A=[],T=0,_=i.length;T<_;++T)for(var C=i[T],S=C.length,y=1,R=1<<S;y<R;++y){A.length=c.popCount(y);for(var O=0,P=0;P<S;++P)y&1<<P&&(A[O++]=C[P]);var D=w(t,A);if(!(D<0))for(;e[D++].push(T),!(D>=t.length||E(t[D],A)!==0););}return e}F.incidence=o;function v(t,i){if(!i)return o(x(f(t,0)),t);for(var e=new Array(i),T=0;T<i;++T)e[T]=[];for(var T=0,b=t.length;T<b;++T)for(var A=t[T],_=0,C=A.length;_<C;++_)e[A[_]].push(T);return e}F.dual=v;function u(t){for(var i=[],e=0,T=t.length;e<T;++e)for(var b=t[e],A=b.length|0,_=1,C=1<<A;_<C;++_){for(var S=[],y=0;y<A;++y)_>>>y&1&&S.push(b[y]);i.push(S)}return p(i)}F.explode=u;function f(t,i){if(i<0)return[];for(var e=[],T=(1<<i+1)-1,b=0;b<t.length;++b)for(var A=t[b],_=T;_<1<<A.length;_=c.nextCombination(_)){for(var C=new Array(i+1),S=0,y=0;y<A.length;++y)_&1<<y&&(C[S++]=A[y]);e.push(C)}return p(e)}F.skeleton=f;function h(t){for(var i=[],e=0,T=t.length;e<T;++e)for(var b=t[e],A=0,_=b.length;A<_;++A){for(var C=new Array(b.length-1),S=0,y=0;S<_;++S)S!==A&&(C[y++]=b[S]);i.push(C)}return p(i)}F.boundary=h;function r(t,i){for(var e=new m(i),T=0;T<t.length;++T)for(var b=t[T],A=0;A<b.length;++A)for(var _=A+1;_<b.length;++_)e.link(b[A],b[_]);for(var C=[],S=e.ranks,T=0;T<S.length;++T)S[T]=-1;for(var T=0;T<t.length;++T){var y=e.find(t[T][0]);S[y]<0?(S[y]=C.length,C.push([t[T].slice(0)])):C[S[y]].push(t[T].slice(0))}return C}function s(t){for(var i=x(p(f(t,0))),e=new m(i.length),T=0;T<t.length;++T)for(var b=t[T],A=0;A<b.length;++A)for(var _=w(i,[b[A]]),C=A+1;C<b.length;++C)e.link(_,w(i,[b[C]]));for(var S=[],y=e.ranks,T=0;T<y.length;++T)y[T]=-1;for(var T=0;T<t.length;++T){var R=e.find(w(i,[t[T][0]]));y[R]<0?(y[R]=S.length,S.push([t[T].slice(0)])):S[y[R]].push(t[T].slice(0))}return S}function n(t,i){return i?r(t,i):s(t)}F.connectedComponents=n},4623:function(L){"use restrict";L.exports=F;function F(a){this.roots=new Array(a),this.ranks=new Array(a);for(var c=0;c<a;++c)this.roots[c]=c,this.ranks[c]=0}F.prototype.length=function(){return this.roots.length},F.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},F.prototype.find=function(a){for(var c=this.roots;c[a]!==a;){var m=c[a];c[a]=c[m],a=m}return a},F.prototype.link=function(a,c){var m=this.find(a),l=this.find(c);if(m!==l){var g=this.ranks,d=this.roots,E=g[m],M=g[l];E<M?d[m]=l:M<E?d[l]=m:(d[l]=m,++g[m])}}},5878:function(L,F,a){L.exports=g;var c=a(3250),m=a(2014);function l(d,E,M){var p=Math.abs(c(d,E,M)),x=Math.sqrt(Math.pow(E[0]-M[0],2)+Math.pow(E[1]-M[1],2));return p/x}function g(d,E,M){for(var p=E.length,x=d.length,w=new Array(p),o=new Array(p),v=new Array(p),u=new Array(p),f=0;f<p;++f)w[f]=o[f]=-1,v[f]=1/0,u[f]=!1;for(var f=0;f<x;++f){var h=d[f];if(h.length!==2)throw new Error("Input must be a graph");var r=h[1],s=h[0];o[s]!==-1?o[s]=-2:o[s]=r,w[r]!==-1?w[r]=-2:w[r]=s}function n(B){if(u[B])return 1/0;var I=w[B],N=o[B];return I<0||N<0?1/0:l(E[B],E[I],E[N])}function t(B,I){var N=S[B],$=S[I];S[B]=$,S[I]=N,y[N]=I,y[$]=B}function i(B){return v[S[B]]}function e(B){return B&1?B-1>>1:(B>>1)-1}function T(B){for(var I=i(B);;){var N=I,$=2*B+1,U=2*(B+1),K=B;if($<O){var W=i($);W<N&&(K=$,N=W)}if(U<O){var Y=i(U);Y<N&&(K=U)}if(K===B)return B;t(B,K),B=K}}function b(B){for(var I=i(B);B>0;){var N=e(B);if(N>=0){var $=i(N);if(I<$){t(B,N),B=N;continue}}return B}}function A(){if(O>0){var B=S[0];return t(0,O-1),O-=1,T(0),B}return-1}function _(B,I){var N=S[B];return v[N]===I?B:(v[N]=-1/0,b(B),A(),v[N]=I,O+=1,b(O-1))}function C(B){if(!u[B]){u[B]=!0;var I=w[B],N=o[B];w[N]>=0&&(w[N]=I),o[I]>=0&&(o[I]=N),y[I]>=0&&_(y[I],n(I)),y[N]>=0&&_(y[N],n(N))}}for(var S=[],y=new Array(p),f=0;f<p;++f){var R=v[f]=n(f);R<1/0?(y[f]=S.length,S.push(f)):y[f]=-1}for(var O=S.length,f=O>>1;f>=0;--f)T(f);for(;;){var P=A();if(P<0||v[P]>M)break;C(P)}for(var D=[],f=0;f<p;++f)u[f]||(y[f]=D.length,D.push(E[f].slice()));D.length;function H(B,I){if(B[I]<0)return I;var N=I,$=I;do{var U=B[$];if(!u[$]||U<0||U===$||($=U,U=B[$],!u[$]||U<0||U===$))break;$=U,N=B[N]}while(N!==$);for(var K=I;K!==$;K=B[K])B[K]=$;return $}var G=[];return d.forEach(function(B){var I=H(w,B[0]),N=H(o,B[1]);if(I>=0&&N>=0&&I!==N){var $=y[I],U=y[N];$!==U&&G.push([$,U])}}),m.unique(m.normalize(G)),{positions:D,edges:G}}},1303:function(L,F,a){L.exports=l;var c=a(3250);function m(g,d){var E,M;if(d[0][0]<d[1][0])E=d[0],M=d[1];else if(d[0][0]>d[1][0])E=d[1],M=d[0];else{var p=Math.min(g[0][1],g[1][1]),x=Math.max(g[0][1],g[1][1]),w=Math.min(d[0][1],d[1][1]),o=Math.max(d[0][1],d[1][1]);return x<w?x-w:p>o?p-o:x-o}var v,u;g[0][1]<g[1][1]?(v=g[0],u=g[1]):(v=g[1],u=g[0]);var f=c(M,E,v);return f||(f=c(M,E,u),f)?f:u-M}function l(g,d){var E,M;if(d[0][0]<d[1][0])E=d[0],M=d[1];else if(d[0][0]>d[1][0])E=d[1],M=d[0];else return m(d,g);var p,x;if(g[0][0]<g[1][0])p=g[0],x=g[1];else if(g[0][0]>g[1][0])p=g[1],x=g[0];else return-m(g,d);var w=c(E,M,x),o=c(E,M,p);if(w<0){if(o<=0)return w}else if(w>0){if(o>=0)return w}else if(o)return o;if(w=c(x,p,M),o=c(x,p,E),w<0){if(o<=0)return w}else if(w>0){if(o>=0)return w}else if(o)return o;return M[0]-x[0]}},4209:function(L,F,a){L.exports=o;var c=a(2478),m=a(3840),l=a(3250),g=a(1303);function d(v,u,f){this.slabs=v,this.coordinates=u,this.horizontal=f}var E=d.prototype;function M(v,u){return v.y-u}function p(v,u){for(var f=null;v;){var h=v.key,r,s;h[0][0]<h[1][0]?(r=h[0],s=h[1]):(r=h[1],s=h[0]);var n=l(r,s,u);if(n<0)v=v.left;else if(n>0)if(u[0]!==h[1][0])f=v,v=v.right;else{var t=p(v.right,u);if(t)return t;v=v.left}else{if(u[0]!==h[1][0])return v;var t=p(v.right,u);if(t)return t;v=v.left}}return f}E.castUp=function(v){var u=c.le(this.coordinates,v[0]);if(u<0)return-1;this.slabs[u];var f=p(this.slabs[u],v),h=-1;if(f&&(h=f.value),this.coordinates[u]===v[0]){var r=null;if(f&&(r=f.key),u>0){var s=p(this.slabs[u-1],v);s&&(r?g(s.key,r)>0&&(r=s.key,h=s.value):(h=s.value,r=s.key))}var n=this.horizontal[u];if(n.length>0){var t=c.ge(n,v[1],M);if(t<n.length){var i=n[t];if(v[1]===i.y){if(i.closed)return i.index;for(;t<n.length-1&&n[t+1].y===v[1];)if(t=t+1,i=n[t],i.closed)return i.index;if(i.y===v[1]&&!i.start){if(t=t+1,t>=n.length)return h;i=n[t]}}if(i.start)if(r){var e=l(r[0],r[1],[v[0],i.y]);r[0][0]>r[1][0]&&(e=-e),e>0&&(h=i.index)}else h=i.index;else i.y!==v[1]&&(h=i.index)}}}return h};function x(v,u,f,h){this.y=v,this.index=u,this.start=f,this.closed=h}function w(v,u,f,h){this.x=v,this.segment=u,this.create=f,this.index=h}function o(v){for(var u=v.length,f=2*u,h=new Array(f),r=0;r<u;++r){var s=v[r],n=s[0][0]<s[1][0];h[2*r]=new w(s[0][0],s,n,r),h[2*r+1]=new w(s[1][0],s,!n,r)}h.sort(function(C,S){var y=C.x-S.x;return y||(y=C.create-S.create,y)?y:Math.min(C.segment[0][1],C.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});for(var t=m(g),i=[],e=[],T=[],r=0;r<f;){for(var b=h[r].x,A=[];r<f;){var _=h[r];if(_.x!==b)break;r+=1,_.segment[0][0]===_.x&&_.segment[1][0]===_.x?_.create&&(_.segment[0][1]<_.segment[1][1]?(A.push(new x(_.segment[0][1],_.index,!0,!0)),A.push(new x(_.segment[1][1],_.index,!1,!1))):(A.push(new x(_.segment[1][1],_.index,!0,!1)),A.push(new x(_.segment[0][1],_.index,!1,!0)))):_.create?t=t.insert(_.segment,_.index):t=t.remove(_.segment)}i.push(t.root),e.push(b),T.push(A)}return new d(i,e,T)}},5202:function(L,F,a){var c=a(1944),m=a(8210);L.exports=d,L.exports.positive=E,L.exports.negative=M;function l(p,x){var w=m(c(p,x),[x[x.length-1]]);return w[w.length-1]}function g(p,x,w,o){var v=o-x,u=-x/v;u<0?u=0:u>1&&(u=1);for(var f=1-u,h=p.length,r=new Array(h),s=0;s<h;++s)r[s]=u*p[s]+f*w[s];return r}function d(p,x){for(var w=[],o=[],v=l(p[p.length-1],x),u=p[p.length-1],f=p[0],h=0;h<p.length;++h,u=f){f=p[h];var r=l(f,x);if(v<0&&r>0||v>0&&r<0){var s=g(u,r,f,v);w.push(s),o.push(s.slice())}r<0?o.push(f.slice()):r>0?w.push(f.slice()):(w.push(f.slice()),o.push(f.slice())),v=r}return{positive:w,negative:o}}function E(p,x){for(var w=[],o=l(p[p.length-1],x),v=p[p.length-1],u=p[0],f=0;f<p.length;++f,v=u){u=p[f];var h=l(u,x);(o<0&&h>0||o>0&&h<0)&&w.push(g(v,h,u,o)),h>=0&&w.push(u.slice()),o=h}return w}function M(p,x){for(var w=[],o=l(p[p.length-1],x),v=p[p.length-1],u=p[0],f=0;f<p.length;++f,v=u){u=p[f];var h=l(u,x);(o<0&&h>0||o>0&&h<0)&&w.push(g(v,h,u,o)),h<=0&&w.push(u.slice()),o=h}return w}},3387:function(L,F,a){var c;(function(){var m={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function l(p){return d(M(p),arguments)}function g(p,x){return l.apply(null,[p].concat(x||[]))}function d(p,x){var w=1,o=p.length,v,u="",f,h,r,s,n,t,i,e;for(f=0;f<o;f++)if(typeof p[f]=="string")u+=p[f];else if(typeof p[f]=="object"){if(r=p[f],r.keys)for(v=x[w],h=0;h<r.keys.length;h++){if(v==null)throw new Error(l('[sprintf] Cannot access property "%s" of undefined value "%s"',r.keys[h],r.keys[h-1]));v=v[r.keys[h]]}else r.param_no?v=x[r.param_no]:v=x[w++];if(m.not_type.test(r.type)&&m.not_primitive.test(r.type)&&v instanceof Function&&(v=v()),m.numeric_arg.test(r.type)&&typeof v!="number"&&isNaN(v))throw new TypeError(l("[sprintf] expecting number but found %T",v));switch(m.number.test(r.type)&&(i=v>=0),r.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,r.width?parseInt(r.width):0);break;case"e":v=r.precision?parseFloat(v).toExponential(r.precision):parseFloat(v).toExponential();break;case"f":v=r.precision?parseFloat(v).toFixed(r.precision):parseFloat(v);break;case"g":v=r.precision?String(Number(v.toPrecision(r.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=r.precision?v.substring(0,r.precision):v;break;case"t":v=String(!!v),v=r.precision?v.substring(0,r.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=r.precision?v.substring(0,r.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=r.precision?v.substring(0,r.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase();break}m.json.test(r.type)?u+=v:(m.number.test(r.type)&&(!i||r.sign)?(e=i?"+":"-",v=v.toString().replace(m.sign,"")):e="",n=r.pad_char?r.pad_char==="0"?"0":r.pad_char.charAt(1):" ",t=r.width-(e+v).length,s=r.width&&t>0?n.repeat(t):"",u+=r.align?e+v+s:n==="0"?e+s+v:s+e+v)}return u}var E=Object.create(null);function M(p){if(E[p])return E[p];for(var x=p,w,o=[],v=0;x;){if((w=m.text.exec(x))!==null)o.push(w[0]);else if((w=m.modulo.exec(x))!==null)o.push("%");else if((w=m.placeholder.exec(x))!==null){if(w[2]){v|=1;var u=[],f=w[2],h=[];if((h=m.key.exec(f))!==null)for(u.push(h[1]);(f=f.substring(h[0].length))!=="";)if((h=m.key_access.exec(f))!==null)u.push(h[1]);else if((h=m.index_access.exec(f))!==null)u.push(h[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");w[2]=u}else v|=2;if(v===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:w[0],param_no:w[1],keys:w[2],sign:w[3],pad_char:w[4],align:w[5],width:w[6],precision:w[7],type:w[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");x=x.substring(w[0].length)}return E[p]=o}F.sprintf=l,F.vsprintf=g,typeof window<"u"&&(window.sprintf=l,window.vsprintf=g,c=(function(){return{sprintf:l,vsprintf:g}}).call(F,a,F,L),c!==void 0&&(L.exports=c))})()},3711:function(L,F,a){L.exports=M;var c=a(2640),m=a(781),l={"2d":function(p,x,w){var o=p({order:x,scalarArguments:3,getters:w==="generic"?[0]:void 0,phase:function(u,f,h,r){return u>r|0},vertex:function(u,f,h,r,s,n,t,i,e,T,b,A,_){var C=(t<<0)+(i<<1)+(e<<2)+(T<<3)|0;if(!(C===0||C===15))switch(C){case 0:b.push([u-.5,f-.5]);break;case 1:b.push([u-.25-.25*(r+h-2*_)/(h-r),f-.25-.25*(s+h-2*_)/(h-s)]);break;case 2:b.push([u-.75-.25*(-r-h+2*_)/(r-h),f-.25-.25*(n+r-2*_)/(r-n)]);break;case 3:b.push([u-.5,f-.5-.5*(s+h+n+r-4*_)/(h-s+r-n)]);break;case 4:b.push([u-.25-.25*(n+s-2*_)/(s-n),f-.75-.25*(-s-h+2*_)/(s-h)]);break;case 5:b.push([u-.5-.5*(r+h+n+s-4*_)/(h-r+s-n),f-.5]);break;case 6:b.push([u-.5-.25*(-r-h+n+s)/(r-h+s-n),f-.5-.25*(-s-h+n+r)/(s-h+r-n)]);break;case 7:b.push([u-.75-.25*(n+s-2*_)/(s-n),f-.75-.25*(n+r-2*_)/(r-n)]);break;case 8:b.push([u-.75-.25*(-n-s+2*_)/(n-s),f-.75-.25*(-n-r+2*_)/(n-r)]);break;case 9:b.push([u-.5-.25*(r+h+-n-s)/(h-r+n-s),f-.5-.25*(s+h+-n-r)/(h-s+n-r)]);break;case 10:b.push([u-.5-.5*(-r-h+-n-s+4*_)/(r-h+n-s),f-.5]);break;case 11:b.push([u-.25-.25*(-n-s+2*_)/(n-s),f-.75-.25*(s+h-2*_)/(h-s)]);break;case 12:b.push([u-.5,f-.5-.5*(-s-h+-n-r+4*_)/(s-h+n-r)]);break;case 13:b.push([u-.75-.25*(r+h-2*_)/(h-r),f-.25-.25*(-n-r+2*_)/(n-r)]);break;case 14:b.push([u-.25-.25*(-r-h+2*_)/(r-h),f-.25-.25*(-s-h+2*_)/(s-h)]);break;case 15:b.push([u-.5,f-.5]);break}},cell:function(u,f,h,r,s,n,t,i,e){s?i.push([u,f]):i.push([f,u])}});return function(v,u){var f=[],h=[];return o(v,f,h,u),{positions:f,cells:h}}}};function g(p,x){var w=p.length+"d",o=l[w];if(o)return o(c,p,x)}function d(p,x){for(var w=m(p,x),o=w.length,v=new Array(o),u=new Array(o),f=0;f<o;++f)v[f]=[w[f]],u[f]=[f];return{positions:v,cells:u}}var E={};function M(p,v){if(p.dimension<=0)return{positions:[],cells:[]};if(p.dimension===1)return d(p,v);var w=p.order.join()+"-"+p.dtype,o=E[w],v=+v||0;return o||(o=E[w]=g(p.order,p.dtype)),o(p,v)}},529:function(L,F,a){L.exports=d;var c=a(4359),m=window||process.global||{},l=m.__TEXT_CACHE||{};m.__TEXT_CACHE={};function g(E){for(var M=E.cells,p=E.positions,x=new Float32Array(M.length*6),w=0,o=0,v=0;v<M.length;++v)for(var u=M[v],f=0;f<3;++f){var h=p[u[f]];x[w++]=h[0],x[w++]=h[1]+1.4,o=Math.max(h[0],o)}return{data:x,shape:o}}function d(E,M,x){var x=x||{},w=x.fontStyle||"normal",o=x.fontWeight||"normal",v=x.fontVariant||"normal",u=[w,o,v,E].join("_"),f=l[u];f||(f=l[u]={" ":{data:new Float32Array(0),shape:.2}});var h=f[M];if(!h)if(M.length<=1||!/\d/.test(M))h=f[M]=g(c(M,{triangles:!0,font:E,fontStyle:w,fontWeight:o,fontVariant:v,textAlign:x.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var r=M.split(/(\d|\s)/),s=new Array(r.length),n=0,t=0,i=0;i<r.length;++i)s[i]=d(E,r[i]),n+=s[i].data.length,t+=s[i].shape,i>0&&(t+=.02);for(var e=new Float32Array(n),T=0,b=-.5*t,i=0;i<s.length;++i){for(var A=s[i].data,_=0;_<A.length;_+=2)e[T++]=A[_]+b,e[T++]=A[_+1];b+=s[i].shape+.02}h=f[M]={data:e,shape:t}}return h}},665:function(L,F,a){var c=a(3202);L.exports=d;var m=96;function l(E,M){var p=c(getComputedStyle(E).getPropertyValue(M));return p[0]*d(p[1],E)}function g(E,M){var p=document.createElement("div");p.style["font-size"]="128"+E,M.appendChild(p);var x=l(p,"font-size")/128;return M.removeChild(p),x}function d(E,M){switch(M=M||document.body,E=(E||"px").trim().toLowerCase(),(M===window||M===document)&&(M=document.body),E){case"%":return M.clientHeight/100;case"ch":case"ex":return g(E,M);case"em":return l(M,"font-size");case"rem":return l(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return m;case"cm":return m/2.54;case"mm":return m/25.4;case"pt":return m/72;case"pc":return m/6}return 1}},7261:function(L,F,a){L.exports=u;var c=a(9215),m=a(7608),l=a(6079),g=a(5911),d=a(3536),E=a(244);function M(f,h,r){return Math.sqrt(Math.pow(f,2)+Math.pow(h,2)+Math.pow(r,2))}function p(f){return Math.min(1,Math.max(-1,f))}function x(f){var h=Math.abs(f[0]),r=Math.abs(f[1]),s=Math.abs(f[2]),n=[0,0,0];h>Math.max(r,s)?n[2]=1:r>Math.max(h,s)?n[0]=1:n[1]=1;for(var t=0,i=0,e=0;e<3;++e)t+=f[e]*f[e],i+=n[e]*f[e];for(var e=0;e<3;++e)n[e]-=i/t*f[e];return d(n,n),n}function w(f,h,r,s,n,t,i,e){this.center=c(r),this.up=c(s),this.right=c(n),this.radius=c([t]),this.angle=c([i,e]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(f,h),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var T=0;T<16;++T)this.computedMatrix[T]=.5;this.recalcMatrix(0)}var o=w.prototype;o.setDistanceLimits=function(f,h){f>0?f=Math.log(f):f=-1/0,h>0?h=Math.log(h):h=1/0,h=Math.max(h,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=h},o.getDistanceLimits=function(f){var h=this.radius.bounds[0];return f?(f[0]=Math.exp(h[0][0]),f[1]=Math.exp(h[1][0]),f):[Math.exp(h[0][0]),Math.exp(h[1][0])]},o.recalcMatrix=function(f){this.center.curve(f),this.up.curve(f),this.right.curve(f),this.radius.curve(f),this.angle.curve(f);for(var h=this.computedUp,r=this.computedRight,s=0,n=0,t=0;t<3;++t)n+=h[t]*r[t],s+=h[t]*h[t];for(var i=Math.sqrt(s),e=0,t=0;t<3;++t)r[t]-=h[t]*n/s,e+=r[t]*r[t],h[t]/=i;for(var T=Math.sqrt(e),t=0;t<3;++t)r[t]/=T;var b=this.computedToward;g(b,h,r),d(b,b);for(var A=Math.exp(this.computedRadius[0]),_=this.computedAngle[0],C=this.computedAngle[1],S=Math.cos(_),y=Math.sin(_),R=Math.cos(C),O=Math.sin(C),P=this.computedCenter,D=S*R,H=y*R,G=O,B=-S*O,I=-y*O,N=R,$=this.computedEye,U=this.computedMatrix,t=0;t<3;++t){var K=D*r[t]+H*b[t]+G*h[t];U[4*t+1]=B*r[t]+I*b[t]+N*h[t],U[4*t+2]=K,U[4*t+3]=0}var W=U[1],Y=U[5],j=U[9],X=U[2],Q=U[6],q=U[10],it=Y*q-j*Q,ft=j*X-W*q,at=W*Q-Y*X,rt=M(it,ft,at);it/=rt,ft/=rt,at/=rt,U[0]=it,U[4]=ft,U[8]=at;for(var t=0;t<3;++t)$[t]=P[t]+U[2+4*t]*A;for(var t=0;t<3;++t){for(var e=0,ht=0;ht<3;++ht)e+=U[t+4*ht]*$[ht];U[12+t]=-e}U[15]=1},o.getMatrix=function(f,h){this.recalcMatrix(f);var r=this.computedMatrix;if(h){for(var s=0;s<16;++s)h[s]=r[s];return h}return r};var v=[0,0,0];o.rotate=function(f,h,r,s){if(this.angle.move(f,h,r),s){this.recalcMatrix(f);var n=this.computedMatrix;v[0]=n[2],v[1]=n[6],v[2]=n[10];for(var t=this.computedUp,i=this.computedRight,e=this.computedToward,T=0;T<3;++T)n[4*T]=t[T],n[4*T+1]=i[T],n[4*T+2]=e[T];l(n,n,s,v);for(var T=0;T<3;++T)t[T]=n[4*T],i[T]=n[4*T+1];this.up.set(f,t[0],t[1],t[2]),this.right.set(f,i[0],i[1],i[2])}},o.pan=function(f,h,r,s){h=h||0,r=r||0,s=s||0,this.recalcMatrix(f);var n=this.computedMatrix;Math.exp(this.computedRadius[0]);var t=n[1],i=n[5],e=n[9],T=M(t,i,e);t/=T,i/=T,e/=T;var b=n[0],A=n[4],_=n[8],C=b*t+A*i+_*e;b-=t*C,A-=i*C,_-=e*C;var S=M(b,A,_);b/=S,A/=S,_/=S;var y=b*h+t*r,R=A*h+i*r,O=_*h+e*r;this.center.move(f,y,R,O);var P=Math.exp(this.computedRadius[0]);P=Math.max(1e-4,P+s),this.radius.set(f,Math.log(P))},o.translate=function(f,h,r,s){this.center.move(f,h||0,r||0,s||0)},o.setMatrix=function(f,h,r,s){var n=1;typeof r=="number"&&(n=r|0),(n<0||n>3)&&(n=1);var t=(n+2)%3;h||(this.recalcMatrix(f),h=this.computedMatrix);var i=h[n],e=h[n+4],T=h[n+8];if(s){var A=Math.abs(i),_=Math.abs(e),C=Math.abs(T),S=Math.max(A,_,C);A===S?(i=i<0?-1:1,e=T=0):C===S?(T=T<0?-1:1,i=e=0):(e=e<0?-1:1,i=T=0)}else{var b=M(i,e,T);i/=b,e/=b,T/=b}var y=h[t],R=h[t+4],O=h[t+8],P=y*i+R*e+O*T;y-=i*P,R-=e*P,O-=T*P;var D=M(y,R,O);y/=D,R/=D,O/=D;var H=e*O-T*R,G=T*y-i*O,B=i*R-e*y,I=M(H,G,B);H/=I,G/=I,B/=I,this.center.jump(f,ut,mt,Et),this.radius.idle(f),this.up.jump(f,i,e,T),this.right.jump(f,y,R,O);var N,$;if(n===2){var U=h[1],K=h[5],W=h[9],Y=U*y+K*R+W*O,j=U*H+K*G+W*B;it<0?N=-Math.PI/2:N=Math.PI/2,$=Math.atan2(j,Y)}else{var X=h[2],Q=h[6],q=h[10],it=X*i+Q*e+q*T,ft=X*y+Q*R+q*O,at=X*H+Q*G+q*B;N=Math.asin(p(it)),$=Math.atan2(at,ft)}this.angle.jump(f,$,N),this.recalcMatrix(f);var rt=h[2],ht=h[6],ot=h[10],vt=this.computedMatrix;m(vt,h);var lt=vt[15],ut=vt[12]/lt,mt=vt[13]/lt,Et=vt[14]/lt,ct=Math.exp(this.computedRadius[0]);this.center.jump(f,ut-rt*ct,mt-ht*ct,Et-ot*ct)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(f){this.center.idle(f),this.up.idle(f),this.right.idle(f),this.radius.idle(f),this.angle.idle(f)},o.flush=function(f){this.center.flush(f),this.up.flush(f),this.right.flush(f),this.radius.flush(f),this.angle.flush(f)},o.setDistance=function(f,h){h>0&&this.radius.set(f,Math.log(h))},o.lookAt=function(f,h,r,s){this.recalcMatrix(f),h=h||this.computedEye,r=r||this.computedCenter,s=s||this.computedUp;var n=s[0],t=s[1],i=s[2],e=M(n,t,i);if(!(e<1e-6)){n/=e,t/=e,i/=e;var T=h[0]-r[0],b=h[1]-r[1],A=h[2]-r[2],_=M(T,b,A);if(!(_<1e-6)){T/=_,b/=_,A/=_;var C=this.computedRight,S=C[0],y=C[1],R=C[2],O=n*S+t*y+i*R;S-=O*n,y-=O*t,R-=O*i;var P=M(S,y,R);if(!(P<.01&&(S=t*A-i*b,y=i*T-n*A,R=n*b-t*T,P=M(S,y,R),P<1e-6))){S/=P,y/=P,R/=P,this.up.set(f,n,t,i),this.right.set(f,S,y,R),this.center.set(f,r[0],r[1],r[2]),this.radius.set(f,Math.log(_));var D=t*R-i*y,H=i*S-n*R,G=n*y-t*S,B=M(D,H,G);D/=B,H/=B,G/=B;var I=n*T+t*b+i*A,N=S*T+y*b+R*A,$=D*T+H*b+G*A,U=Math.asin(p(I)),K=Math.atan2($,N),W=this.angle._state,Y=W[W.length-1],j=W[W.length-2];Y=Y%(2*Math.PI);var X=Math.abs(Y+2*Math.PI-K),Q=Math.abs(Y-K),q=Math.abs(Y-2*Math.PI-K);X<Q&&(Y+=2*Math.PI),q<Q&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,j),this.angle.set(f,K,U)}}}};function u(f){f=f||{};var h=f.center||[0,0,0],r=f.up||[0,1,0],s=f.right||x(r),n=f.radius||1,t=f.theta||0,i=f.phi||0;if(h=[].slice.call(h,0,3),r=[].slice.call(r,0,3),d(r,r),s=[].slice.call(s,0,3),d(s,s),"eye"in f){var e=f.eye,T=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];g(s,T,r),M(s[0],s[1],s[2])<1e-6?s=x(r):d(s,s),n=M(T[0],T[1],T[2]);var b=E(r,T)/n,A=E(s,T)/n;i=Math.acos(b),t=Math.acos(A)}return n=Math.log(n),new w(f.zoomMin,f.zoomMax,h,r,s,n,t,i)}},5250:function(L){L.exports=a;var F=+(Math.pow(2,27)+1);function a(c,m,l){var g=c*m,d=F*c,E=d-c,M=d-E,p=c-M,x=F*m,w=x-m,o=x-w,v=m-o,u=g-M*o,f=u-p*o,h=f-M*v,r=p*v-h;return l?(l[0]=r,l[1]=g,l):[r,g]}},9362:function(L){L.exports=F;function F(a,c,m){var l=a+c,g=l-a,d=l-g,E=c-g,M=a-d;return m?(m[0]=M+E,m[1]=l,m):[M+E,l]}},1888:function(L,F,a){var c=a(8828),m=a(1338),l=a(4793).hp;a.g.__TYPEDARRAY_POOL||(a.g.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),BIGUINT64:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),BIGINT64:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var g=typeof Uint8ClampedArray<"u",d=typeof BigUint64Array<"u",E=typeof BigInt64Array<"u",M=a.g.__TYPEDARRAY_POOL;M.UINT8C||(M.UINT8C=m([32,0])),M.BIGUINT64||(M.BIGUINT64=m([32,0])),M.BIGINT64||(M.BIGINT64=m([32,0])),M.BUFFER||(M.BUFFER=m([32,0]));var p=M.DATA,x=M.BUFFER;F.free=function(S){if(l.isBuffer(S))x[c.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var y=S.length||S.byteLength,R=c.log2(y)|0;p[R].push(S)}};function w(C){if(C){var S=C.length||C.byteLength,y=c.log2(S);p[y].push(C)}}function o(C){w(C.buffer)}F.freeUint8=F.freeUint16=F.freeUint32=F.freeBigUint64=F.freeInt8=F.freeInt16=F.freeInt32=F.freeBigInt64=F.freeFloat32=F.freeFloat=F.freeFloat64=F.freeDouble=F.freeUint8Clamped=F.freeDataView=o,F.freeArrayBuffer=w,F.freeBuffer=function(S){x[c.log2(S.length)].push(S)},F.malloc=function(S,y){if(y===void 0||y==="arraybuffer")return v(S);switch(y){case"uint8":return u(S);case"uint16":return f(S);case"uint32":return h(S);case"int8":return r(S);case"int16":return s(S);case"int32":return n(S);case"float":case"float32":return t(S);case"double":case"float64":return i(S);case"uint8_clamped":return e(S);case"bigint64":return b(S);case"biguint64":return T(S);case"buffer":return _(S);case"data":case"dataview":return A(S);default:return null}return null};function v(S){var S=c.nextPow2(S),y=c.log2(S),R=p[y];return R.length>0?R.pop():new ArrayBuffer(S)}F.mallocArrayBuffer=v;function u(C){return new Uint8Array(v(C),0,C)}F.mallocUint8=u;function f(C){return new Uint16Array(v(2*C),0,C)}F.mallocUint16=f;function h(C){return new Uint32Array(v(4*C),0,C)}F.mallocUint32=h;function r(C){return new Int8Array(v(C),0,C)}F.mallocInt8=r;function s(C){return new Int16Array(v(2*C),0,C)}F.mallocInt16=s;function n(C){return new Int32Array(v(4*C),0,C)}F.mallocInt32=n;function t(C){return new Float32Array(v(4*C),0,C)}F.mallocFloat32=F.mallocFloat=t;function i(C){return new Float64Array(v(8*C),0,C)}F.mallocFloat64=F.mallocDouble=i;function e(C){return g?new Uint8ClampedArray(v(C),0,C):u(C)}F.mallocUint8Clamped=e;function T(C){return d?new BigUint64Array(v(8*C),0,C):null}F.mallocBigUint64=T;function b(C){return E?new BigInt64Array(v(8*C),0,C):null}F.mallocBigInt64=b;function A(C){return new DataView(v(C),0,C)}F.mallocDataView=A;function _(C){C=c.nextPow2(C);var S=c.log2(C),y=x[S];return y.length>0?y.pop():new l(C)}F.mallocBuffer=_,F.clearCache=function(){for(var S=0;S<32;++S)M.UINT8[S].length=0,M.UINT16[S].length=0,M.UINT32[S].length=0,M.INT8[S].length=0,M.INT16[S].length=0,M.INT32[S].length=0,M.FLOAT[S].length=0,M.DOUBLE[S].length=0,M.BIGUINT64[S].length=0,M.BIGINT64[S].length=0,M.UINT8C[S].length=0,p[S].length=0,x[S].length=0}},1755:function(L){"use restrict";L.exports=F;function F(c){this.roots=new Array(c),this.ranks=new Array(c);for(var m=0;m<c;++m)this.roots[m]=m,this.ranks[m]=0}var a=F.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var c=this.roots.length;return this.roots.push(c),this.ranks.push(0),c},a.find=function(c){for(var m=c,l=this.roots;l[c]!==c;)c=l[c];for(;l[m]!==c;){var g=l[m];l[m]=c,m=g}return c},a.link=function(c,m){var l=this.find(c),g=this.find(m);if(l!==g){var d=this.ranks,E=this.roots,M=d[l],p=d[g];M<p?E[l]=g:p<M?E[g]=l:(E[g]=l,++d[l])}}},1682:function(L){function F(m,l){for(var g=1,d=m.length,E=m[0],M=m[0],p=1;p<d;++p)if(M=E,E=m[p],l(E,M)){if(p===g){g++;continue}m[g++]=E}return m.length=g,m}function a(m){for(var l=1,g=m.length,d=m[0],E=m[0],M=1;M<g;++M,E=d)if(E=d,d=m[M],d!==E){if(M===l){l++;continue}m[l++]=d}return m.length=l,m}function c(m,l,g){return m.length===0?m:l?(g||m.sort(l),F(m,l)):(g||m.sort(),a(m))}L.exports=c},4359:function(L,F,a){L.exports=g;var c=a(7718),m=null,l=null;typeof document<"u"&&(m=document.createElement("canvas"),m.width=8192,m.height=1024,l=m.getContext("2d"));function g(d,E){return(typeof E!="object"||E===null)&&(E={}),c(d,E.canvas||m,E.context||l,E)}},7718:function(L,F,a){L.exports=b,L.exports.processPixels=T;var c=a(3711),m=a(9618),l=a(5878),g=a(332),d=a(2538),E=a(2095),M="b",p="b|",x="i",w="i|",o="sup",v="+",u="+1",f="sub",h="-",r="-1";function s(A,_,C,S){for(var y="<"+A+">",R="</"+A+">",O=y.length,P=R.length,D=_[0]===v||_[0]===h,H=0,G=-P;H>-1&&(H=C.indexOf(y,H),!(H===-1||(G=C.indexOf(R,H+O),G===-1)||G<=H));){for(var B=H;B<G+P;++B)if(B<H+O||B>=G)S[B]=null,C=C.substr(0,B)+" "+C.substr(B+1);else if(S[B]!==null){var I=S[B].indexOf(_[0]);I===-1?S[B]+=_:D&&(S[B]=S[B].substr(0,I+1)+(1+parseInt(S[B][I+1]))+S[B].substr(I+2))}var N=H+O,$=C.substr(N,G-N),U=$.indexOf(y);U!==-1?H=U:H=G+P}return S}function n(A,_,C){for(var S=_.textAlign||"start",y=_.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],P=A.length,D=0;D<P;++D)for(var H=A[D],G=0;G<2;++G)R[G]=Math.min(R[G],H[G])|0,O[G]=Math.max(O[G],H[G])|0;var B=0;switch(S){case"center":B=-.5*(R[0]+O[0]);break;case"right":case"end":B=-O[0];break;case"left":case"start":B=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+S+"'")}var I=0;switch(y){case"hanging":case"top":I=-R[1];break;case"middle":I=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":I=-3*C;break;case"bottom":I=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+y+"'")}var N=1/C;return"lineHeight"in _?N*=+_.lineHeight:"width"in _?N=_.width/(O[0]-R[0]):"height"in _&&(N=_.height/(O[1]-R[1])),A.map(function($){return[N*($[0]+B),N*($[1]+I)]})}function t(A,_,C,S,y,R){C=C.replace(/\n/g,""),R.breaklines===!0?C=C.replace(/\<br\>/g,`
`):C=C.replace(/\<br\>/g," ");var O="",P=[];for(Y=0;Y<C.length;++Y)P[Y]=O;R.bolds===!0&&(P=s(M,p,C,P)),R.italics===!0&&(P=s(x,w,C,P)),R.superscripts===!0&&(P=s(o,u,C,P)),R.subscripts===!0&&(P=s(f,r,C,P));var D=[],H="";for(Y=0;Y<C.length;++Y)P[Y]!==null&&(H+=C[Y],D.push(P[Y]));var G=H.split(`
`),B=G.length,I=Math.round(y*S),N=S,$=S*2,U=0,K=B*I+$;A.height<K&&(A.height=K),_.fillStyle="#000",_.fillRect(0,0,A.width,A.height),_.fillStyle="#fff";var W,Y,j,X,Q,q=0,it="";function ft(){if(it!==""){var Et=_.measureText(it).width;_.fillText(it,N+j,$+X),j+=Et}}function at(){return""+Math.round(Q)+"px "}function rt(Et,ct){var xt=""+_.font;if(R.subscripts===!0){var pt=Et.indexOf(h),Mt=ct.indexOf(h),At=pt>-1?parseInt(Et[1+pt]):0,wt=Mt>-1?parseInt(ct[1+Mt]):0;At!==wt&&(xt=xt.replace(at(),"?px "),Q*=Math.pow(.75,wt-At),xt=xt.replace("?px ",at())),X+=.25*I*(wt-At)}if(R.superscripts===!0){var dt=Et.indexOf(v),gt=ct.indexOf(v),Tt=dt>-1?parseInt(Et[1+dt]):0,_t=gt>-1?parseInt(ct[1+gt]):0;Tt!==_t&&(xt=xt.replace(at(),"?px "),Q*=Math.pow(.75,_t-Tt),xt=xt.replace("?px ",at())),X-=.25*I*(_t-Tt)}if(R.bolds===!0){var Bt=Et.indexOf(p)>-1,Lt=ct.indexOf(p)>-1;!Bt&&Lt&&(St?xt=xt.replace("italic ","italic bold "):xt="bold "+xt),Bt&&!Lt&&(xt=xt.replace("bold ",""))}if(R.italics===!0){var St=Et.indexOf(w)>-1,Ft=ct.indexOf(w)>-1;!St&&Ft&&(xt="italic "+xt),St&&!Ft&&(xt=xt.replace("italic ",""))}_.font=xt}for(W=0;W<B;++W){var ht=G[W]+`
`;for(j=0,X=W*I,Q=S,it="",Y=0;Y<ht.length;++Y){var ot=Y+q<D.length?D[Y+q]:D[D.length-1];O===ot?it+=ht[Y]:(ft(),it=ht[Y],ot!==void 0&&(rt(O,ot),O=ot))}ft(),q+=ht.length;var vt=Math.round(j+2*N)|0;U<vt&&(U=vt)}var lt=U,ut=$+I*B,mt=m(_.getImageData(0,0,lt,ut).data,[ut,lt,4]);return mt.pick(-1,-1,0).transpose(1,0)}function i(A,_){var C=c(A,128);return _?l(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions}}function e(A,_,C,S){var y=i(A,S),R=n(y.positions,_,C),O=y.edges,P=_.orientation==="ccw";if(g(R,O),_.polygons||_.polygon||_.polyline){for(var D=E(O,R),H=new Array(D.length),G=0;G<D.length;++G){for(var B=D[G],I=new Array(B.length),N=0;N<B.length;++N){for(var $=B[N],U=new Array($.length),K=0;K<$.length;++K)U[K]=R[$[K]].slice();P&&U.reverse(),I[N]=U}H[G]=I}return H}else return _.triangles||_.triangulate||_.triangle?{cells:d(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function T(A,_,C){try{return e(A,_,C,!0)}catch{}try{return e(A,_,C,!1)}catch{}return _.polygons||_.polyline||_.polygon?[]:_.triangles||_.triangulate||_.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function b(A,_,C,S){var y=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};S&&(S.size&&S.size>0&&(y=S.size),S.lineSpacing&&S.lineSpacing>0&&(R=S.lineSpacing),S.styletags&&S.styletags.breaklines&&(O.breaklines=!!S.styletags.breaklines),S.styletags&&S.styletags.bolds&&(O.bolds=!!S.styletags.bolds),S.styletags&&S.styletags.italics&&(O.italics=!!S.styletags.italics),S.styletags&&S.styletags.subscripts&&(O.subscripts=!!S.styletags.subscripts),S.styletags&&S.styletags.superscripts&&(O.superscripts=!!S.styletags.superscripts)),C.font=[S.fontStyle,S.fontVariant,S.fontWeight,y+"px",S.font].filter(function(D){return D}).join(" "),C.textAlign="start",C.textBaseline="alphabetic",C.direction="ltr";var P=t(_,C,A,y,R,O);return T(P,S,y)}},1538:function(L){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(i){i.permitHostObjects___&&i.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var c=!1;if(typeof WeakMap=="function"){var m=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var l=new m,g=Object.freeze({});if(l.set(g,1),l.get(g)!==1)c=!0;else{L.exports=WeakMap;return}}}var d=Object.getOwnPropertyNames,E=Object.defineProperty,M=Object.isExtensible,p="weakmap:",x=p+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var w=new ArrayBuffer(25),o=new Uint8Array(w);crypto.getRandomValues(o),x=p+"rand:"+Array.prototype.map.call(o,function(i){return(i%36).toString(36)}).join("")+"___"}function v(i){return!(i.substr(0,p.length)==p&&i.substr(i.length-3)==="___")}if(E(Object,"getOwnPropertyNames",{value:function(e){return d(e).filter(v)}}),"getPropertyNames"in Object){var u=Object.getPropertyNames;E(Object,"getPropertyNames",{value:function(e){return u(e).filter(v)}})}function f(i){if(i!==Object(i))throw new TypeError("Not an object: "+i);var e=i[x];if(e&&e.key===i)return e;if(M(i)){e={key:i};try{return E(i,x,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch{return}}}(function(){var i=Object.freeze;E(Object,"freeze",{value:function(A){return f(A),i(A)}});var e=Object.seal;E(Object,"seal",{value:function(A){return f(A),e(A)}});var T=Object.preventExtensions;E(Object,"preventExtensions",{value:function(A){return f(A),T(A)}})})();function h(i){return i.prototype=null,Object.freeze(i)}var r=!1;function s(){!r&&typeof console<"u"&&(r=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var n=0,t=function(){this instanceof t||s();var i=[],e=[],T=n++;function b(S,y){var R,O=f(S);return O?T in O?O[T]:y:(R=i.indexOf(S),R>=0?e[R]:y)}function A(S){var y=f(S);return y?T in y:i.indexOf(S)>=0}function _(S,y){var R,O=f(S);return O?O[T]=y:(R=i.indexOf(S),R>=0?e[R]=y:(R=i.length,e[R]=y,i[R]=S)),this}function C(S){var y=f(S),R,O;return y?T in y&&delete y[T]:(R=i.indexOf(S),R<0?!1:(O=i.length-1,i[R]=void 0,e[R]=e[O],i[R]=i[O],i.length=O,e.length=O,!0))}return Object.create(t.prototype,{get___:{value:h(b)},has___:{value:h(A)},set___:{value:h(_)},delete___:{value:h(C)}})};t.prototype=Object.create(Object.prototype,{get:{value:function(e,T){return this.get___(e,T)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,T){return this.set___(e,T)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),typeof m=="function"?function(){c&&typeof Proxy<"u"&&(Proxy=void 0);function i(){this instanceof t||s();var e=new m,T=void 0,b=!1;function A(y,R){return T?e.has(y)?e.get(y):T.get___(y,R):e.get(y,R)}function _(y){return e.has(y)||(T?T.has___(y):!1)}var C;c?C=function(y,R){return e.set(y,R),e.has(y)||(T||(T=new t),T.set(y,R)),this}:C=function(y,R){if(b)try{e.set(y,R)}catch{T||(T=new t),T.set___(y,R)}else e.set(y,R);return this};function S(y){var R=!!e.delete(y);return T&&T.delete___(y)||R}return Object.create(t.prototype,{get___:{value:h(A)},has___:{value:h(_)},set___:{value:h(C)},delete___:{value:h(S)},permitHostObjects___:{value:h(function(y){if(y===a)b=!0;else throw new Error("bogus call to permitHostObjects___")})}})}i.prototype=t.prototype,L.exports=i,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),L.exports=t)})()},236:function(L,F,a){var c=a(8284);L.exports=m;function m(){var l={};return function(g){if((typeof g!="object"||g===null)&&typeof g!="function")throw new Error("Weakmap-shim: Key must be object");var d=g.valueOf(l);return d&&d.identity===l?d:c(g,l)}}},8284:function(L){L.exports=F;function F(a,c){var m={identity:c},l=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(g){return g!==c?l.apply(this,arguments):m},writable:!0}),m}},606:function(L,F,a){var c=a(236);L.exports=m;function m(){var l=c();return{get:function(g,d){var E=l(g);return E.hasOwnProperty("value")?E.value:d},set:function(g,d){return l(g).value=d,this},has:function(g){return"value"in l(g)},delete:function(g){return delete l(g).value}}}},3349:function(L){function F(){return function(d,E,M,p,x,w){var o=d[0],v=M[0],u=[0],f=v;p|=0;var h=0,r=v;for(h=0;h<o;++h){{var s=E[p]-w,n=E[p+f]-w;s>=0!=n>=0&&x.push(u[0]+.5+.5*(s+n)/(s-n))}p+=r,++u[0]}}}function a(){return F()}var c=a;function m(d){var E={};return function(p,x,w){var o=p.dtype,v=p.order,u=[o,v.join()].join(),f=E[u];return f||(E[u]=f=d([o,v])),f(p.shape.slice(0),p.data,p.stride,p.offset|0,x,w)}}function l(d){return m(c.bind(void 0,d))}function g(d){return l({funcName:d.funcName})}L.exports=g({funcName:"zeroCrossings"})},781:function(L,F,a){L.exports=m;var c=a(3349);function m(l,g){var d=[];return g=+g||0,c(l.hi(l.shape[0]-1),d,g),d}},7790:function(){}},Z={};function tt(L){var F=Z[L];if(F!==void 0)return F.exports;var a=Z[L]={id:L,loaded:!1,exports:{}};return V[L].call(a.exports,a,a.exports,tt),a.loaded=!0,a.exports}(function(){tt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){tt.nmd=function(L){return L.paths=[],L.children||(L.children=[]),L}}();var nt=tt(1964);dn.exports=nt})();var $t=dn.exports,ii=Fn;function ai(V){return V?ii(V):[0,0,0,1]}var be=ai,pn={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},Cr={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""},oi=xe;function Ke(V,Z,tt,nt){if(!Z||!Z.visible)return null;for(var L=oi.getComponentMethod("errorbars","makeComputeError")(Z),F=new Array(V.length),a=0;a<V.length;a++){var c=L(+V[a],a);if(nt.type==="log"){var m=nt.c2l(V[a]),l=V[a]-c[0],g=V[a]+c[1];if(F[a]=[(nt.c2l(l,!0)-m)*tt,(nt.c2l(g,!0)-m)*tt],l>0){var d=nt.c2l(l);nt._lowerLogErrorBound||(nt._lowerLogErrorBound=d),nt._lowerErrorBound=Math.min(nt._lowerLogErrorBound,d)}}else F[a]=[-c[0]*tt,c[1]*tt]}return F}function si(V){for(var Z=0;Z<V.length;Z++)if(V[Z])return V[Z].length;return 0}function fi(V,Z,tt){var nt=[Ke(V.x,V.error_x,Z[0],tt.xaxis),Ke(V.y,V.error_y,Z[1],tt.yaxis),Ke(V.z,V.error_z,Z[2],tt.zaxis)],L=si(nt);if(L===0)return null;for(var F=new Array(L),a=0;a<L;a++){for(var c=[[0,0,0],[0,0,0]],m=0;m<3;m++)if(nt[m])for(var l=0;l<2;l++)c[l][m]=nt[m][a][l];F[a]=c}return F}var hi=fi,li=$t.gl_line3d,Br=$t.gl_scatter3d,ui=$t.gl_error3d,vi=$t.gl_mesh3d,ci=$t.delaunay_triangulate,ie=jt,gn=be,Le=Er.formatColor,di=Bn,Qe=pn,pi=Cr,gi=Mr,yi=On.appendArrayPointValue,xi=hi;function yn(V,Z){this.scene=V,this.uid=Z,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var Ir=yn.prototype;Ir.handlePick=function(V){if(V.object&&(V.object===this.linePlot||V.object===this.delaunayMesh||V.object===this.textMarkers||V.object===this.scatterPlot)){var Z=V.index=V.data.index;return V.object.highlight&&V.object.highlight(null),this.scatterPlot&&(V.object=this.scatterPlot,this.scatterPlot.highlight(V.data)),V.textLabel="",this.textLabels&&(ie.isArrayOrTypedArray(this.textLabels)?(this.textLabels[Z]||this.textLabels[Z]===0)&&(V.textLabel=this.textLabels[Z]):V.textLabel=this.textLabels),V.traceCoordinate=[this.data.x[Z],this.data.y[Z],this.data.z[Z]],!0}};function bi(V,Z,tt){var nt=(tt+1)%3,L=(tt+2)%3,F=[],a=[],c;for(c=0;c<V.length;++c){var m=V[c];isNaN(m[nt])||!isFinite(m[nt])||isNaN(m[L])||!isFinite(m[L])||(F.push([m[nt],m[L]]),a.push(c))}var l=ci(F);for(c=0;c<l.length;++c)for(var g=l[c],d=0;d<g.length;++d)g[d]=a[g[d]];return{positions:V,cells:l,meshColor:Z}}function wi(V){for(var Z=[0,0,0],tt=[[0,0,0],[0,0,0],[0,0,0]],nt=[1,1,1],L=0;L<3;L++){var F=V[L];F&&F.copy_zstyle!==!1&&V[2].visible!==!1&&(F=V[2]),!(!F||!F.visible)&&(Z[L]=F.width/2,tt[L]=gn(F.color),nt[L]=F.thickness)}return{capSize:Z,color:tt,lineWidth:nt}}function Pr(V){return V==null?0:V.indexOf("left")>-1?-1:V.indexOf("right")>-1?1:0}function kr(V){return V==null?0:V.indexOf("top")>-1?-1:V.indexOf("bottom")>-1?1:0}function mi(V){var Z=0,tt=0,nt=[Z,tt];if(Array.isArray(V))for(var L=0;L<V.length;L++)nt[L]=[Z,tt],V[L]&&(nt[L][0]=Pr(V[L]),nt[L][1]=kr(V[L]));else nt[0]=Pr(V),nt[1]=kr(V);return nt}function Ei(V,Z){return Z(V*4)}function Mi(V){return pi[V]}function Je(V,Z,tt,nt,L){var F=null;if(ie.isArrayOrTypedArray(V)){F=[];for(var a=0;a<Z;a++)V[a]===void 0?F[a]=nt:F[a]=tt(V[a],L)}else F=tt(V,ie.identity);return F}function Ti(V,Z){var tt=[],nt=V.fullSceneLayout,L=V.dataScale,F=nt.xaxis,a=nt.yaxis,c=nt.zaxis,m=Z.marker,l=Z.line,g=Z.x||[],d=Z.y||[],E=Z.z||[],M=g.length,p=Z.xcalendar,x=Z.ycalendar,w=Z.zcalendar,o,v,u,f,h,r;for(h=0;h<M;h++)o=F.d2l(g[h],0,p)*L[0],v=a.d2l(d[h],0,x)*L[1],u=c.d2l(E[h],0,w)*L[2],tt[h]=[o,v,u];if(Array.isArray(Z.text))r=Z.text;else if(ie.isTypedArray(Z.text))r=Array.from(Z.text);else if(Z.text!==void 0)for(r=new Array(M),h=0;h<M;h++)r[h]=Z.text;function s(D,H){var G=nt[D];return gi.tickText(G,G.d2l(H),!0).text}var n=Z.texttemplate;if(n){var t=V.fullLayout,i=t._d3locale,e=Array.isArray(n),T=e?Math.min(n.length,M):M,b=e?function(D){return n[D]}:function(){return n};for(r=new Array(T),h=0;h<T;h++){var A={x:g[h],y:d[h],z:E[h]},_={xLabel:s("xaxis",g[h]),yLabel:s("yaxis",d[h]),zLabel:s("zaxis",E[h])},C={};yi(C,Z,h);var S=Z._meta||{};r[h]=ie.texttemplateString(b(h),_,i,C,A,S)}}if(f={position:tt,mode:Z.mode,text:r},"line"in Z&&(f.lineColor=Le(l,1,M),f.lineWidth=l.width,f.lineDashes=l.dash),"marker"in Z){var y=di(Z);f.scatterColor=Le(m,1,M),f.scatterSize=Je(m.size,M,Ei,20,y),f.scatterMarker=Je(m.symbol,M,Mi,""),f.scatterLineWidth=m.line.width,f.scatterLineColor=Le(m.line,1,M),f.scatterAngle=0}"textposition"in Z&&(f.textOffset=mi(Z.textposition),f.textColor=Le(Z.textfont,1,M),f.textSize=Je(Z.textfont.size,M,ie.identity,12),f.textFontFamily=Z.textfont.family,f.textFontWeight=Z.textfont.weight,f.textFontStyle=Z.textfont.style,f.textFontVariant=Z.textfont.variant,f.textAngle=0);var R=["x","y","z"];for(f.project=[!1,!1,!1],f.projectScale=[1,1,1],f.projectOpacity=[1,1,1],h=0;h<3;++h){var O=Z.projection[R[h]];(f.project[h]=O.show)&&(f.projectOpacity[h]=O.opacity,f.projectScale[h]=O.scale)}f.errorBounds=xi(Z,L,nt);var P=wi([Z.error_x,Z.error_y,Z.error_z]);return f.errorColor=P.color,f.errorLineWidth=P.lineWidth,f.errorCapSize=P.capSize,f.delaunayAxis=Z.surfaceaxis,f.delaunayColor=gn(Z.surfacecolor),f}function Nr(V){if(ie.isArrayOrTypedArray(V)){var Z=V[0];return ie.isArrayOrTypedArray(Z)&&(V=Z),"rgb("+V.slice(0,3).map(function(tt){return Math.round(tt*255)})+")"}return null}function zr(V){return ie.isArrayOrTypedArray(V)?V.length===4&&typeof V[0]=="number"?Nr(V):V.map(Nr):null}Ir.update=function(V){var Z=this.scene.glplot.gl,tt,nt,L,F,a=Qe.solid;this.data=V;var c=Ti(this.scene,V);"mode"in c&&(this.mode=c.mode),"lineDashes"in c&&c.lineDashes in Qe&&(a=Qe[c.lineDashes]),this.color=zr(c.scatterColor)||zr(c.lineColor),this.dataPoints=c.position,tt={gl:this.scene.glplot.gl,position:c.position,color:c.lineColor,lineWidth:c.lineWidth||1,dashes:a[0],dashScale:a[1],opacity:V.opacity,connectGaps:V.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(tt):(this.linePlot=li(tt),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var m=V.opacity;if(V.marker&&V.marker.opacity!==void 0&&(m*=V.marker.opacity),nt={gl:this.scene.glplot.gl,position:c.position,color:c.scatterColor,size:c.scatterSize,glyph:c.scatterMarker,opacity:m,orthographic:!0,lineWidth:c.scatterLineWidth,lineColor:c.scatterLineColor,project:c.project,projectScale:c.projectScale,projectOpacity:c.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(nt):(this.scatterPlot=Br(nt),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),F={gl:this.scene.glplot.gl,position:c.position,glyph:c.text,color:c.textColor,size:c.textSize,angle:c.textAngle,alignment:c.textOffset,font:c.textFontFamily,fontWeight:c.textFontWeight,fontStyle:c.textFontStyle,fontVariant:c.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:V.opacity},this.textLabels=V.hovertext||V.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(F):(this.textMarkers=Br(F),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),L={gl:this.scene.glplot.gl,position:c.position,color:c.errorColor,error:c.errorBounds,lineWidth:c.errorLineWidth,capSize:c.errorCapSize,opacity:V.opacity},this.errorBars?c.errorBounds?this.errorBars.update(L):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):c.errorBounds&&(this.errorBars=ui(L),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),c.delaunayAxis>=0){var l=bi(c.position,c.delaunayColor,c.delaunayAxis);l.opacity=V.opacity,this.delaunayMesh?this.delaunayMesh.update(l):(l.gl=Z,this.delaunayMesh=vi(l),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};Ir.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function Ai(V,Z){var tt=new yn(V,Z.uid);return tt.update(Z),tt}var Si=Ai,xn={exports:{}},ne=Pn,_i=Nn,br=Sr,je=Tr.axisHoverFormat,Ri=Ue.hovertemplateAttrs,Ci=Ue.texttemplateAttrs,Dr=Ar,Ii=pn,Li=Cr,te=Ce.extendFlat,Fi=De.overrideAll,bn=kn,Oi=ne.line,he=ne.marker,Bi=he.line,Pi=te({width:Oi.width,dash:{valType:"enumerated",values:bn(Ii),dflt:"solid",description:"Sets the dash style of the lines."}},br("line"));function $e(V){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",V,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var qe=xn.exports=Fi({x:ne.x,y:ne.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:te({},ne.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:Ci({},{}),hovertext:te({},ne.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:Ri(),xhoverformat:je("x"),yhoverformat:je("y"),zhoverformat:je("z"),mode:te({},ne.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:$e("x"),y:$e("y"),z:$e("z")},connectgaps:ne.connectgaps,line:Pi,marker:te({symbol:{valType:"enumerated",values:bn(Li),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:te({},he.size,{dflt:8}),sizeref:he.sizeref,sizemin:he.sizemin,sizemode:he.sizemode,opacity:te({},he.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:he.colorbar,line:te({width:te({},Bi.width,{arrayOk:!1})},br("marker.line"))},br("marker")),textposition:te({},ne.textposition,{dflt:"top center"}),textfont:_i({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"],description:"Sets the text font."}),opacity:Dr.opacity,hoverinfo:te({},Dr.hoverinfo)},"calc","nested");qe.x.editType=qe.y.editType=qe.z.editType="calc+clearAxisTypes";var wn=xn.exports,mn=xe,ki=jt,tr=zn,Ni=Dn,zi=Un,Di=Vn,Ui=wn,Vi=function(Z,tt,nt,L){function F(M,p){return ki.coerce(Z,tt,Ui,M,p)}var a=Hi(Z,tt,F,L);if(!a){tt.visible=!1;return}F("text"),F("hovertext"),F("hovertemplate"),F("xhoverformat"),F("yhoverformat"),F("zhoverformat"),F("mode"),tr.hasMarkers(tt)&&Ni(Z,tt,nt,L,F,{noSelect:!0,noAngle:!0}),tr.hasLines(tt)&&(F("connectgaps"),zi(Z,tt,nt,L,F)),tr.hasText(tt)&&(F("texttemplate"),Di(Z,tt,L,F,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var c=(tt.line||{}).color,m=(tt.marker||{}).color;F("surfaceaxis")>=0&&F("surfacecolor",c||m);for(var l=["x","y","z"],g=0;g<3;++g){var d="projection."+l[g];F(d+".show")&&(F(d+".opacity"),F(d+".scale"))}var E=mn.getComponentMethod("errorbars","supplyDefaults");E(Z,tt,c||m||nt,{axis:"z"}),E(Z,tt,c||m||nt,{axis:"y",inherit:"z"}),E(Z,tt,c||m||nt,{axis:"x",inherit:"z"})};function Hi(V,Z,tt,nt){var L=0,F=tt("x"),a=tt("y"),c=tt("z"),m=mn.getComponentMethod("calendars","handleTraceDefaults");return m(V,Z,["x","y","z"],nt),F&&a&&c&&(L=Math.min(F.length,a.length,c.length),Z._length=Z._xlength=Z._ylength=Z._zlength=L),L}var Gi=Hn,Wi=Gn,Xi=function(Z,tt){var nt=[{x:!1,y:!1,trace:tt,t:{}}];return Gi(nt,tt),Wi(Z,tt),nt},Zt={},Yi=Zi;function Zi(V,Z){if(typeof V!="string")throw new TypeError("must specify type string");if(Z=Z||{},typeof document>"u"&&!Z.canvas)return null;var tt=Z.canvas||document.createElement("canvas");typeof Z.width=="number"&&(tt.width=Z.width),typeof Z.height=="number"&&(tt.height=Z.height);var nt=Z,L;try{var F=[V];V.indexOf("webgl")===0&&F.push("experimental-"+V);for(var a=0;a<F.length;a++)if(L=tt.getContext(F[a],nt),L)return L}catch{L=null}return L||null}var Ki=Yi,Qi=function(Z){return Ki("webgl",Z)},er,Ur;function Ji(){if(Ur)return er;Ur=1;var V=be,Z=jt,tt=["xaxis","yaxis","zaxis"];function nt(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var L=nt.prototype;L.merge=function(a,c){for(var m=this,l=0;l<3;++l){var g=c[tt[l]];if(!g.visible){m.tickEnable[l]=!1,m.labelEnable[l]=!1,m.lineEnable[l]=!1,m.lineTickEnable[l]=!1,m.gridEnable[l]=!1,m.zeroEnable[l]=!1,m.backgroundEnable[l]=!1;continue}m.labels[l]=a._meta?Z.templateString(g.title.text,a._meta):g.title.text,"font"in g.title&&(g.title.font.color&&(m.labelColor[l]=V(g.title.font.color)),g.title.font.family&&(m.labelFont[l]=g.title.font.family),g.title.font.size&&(m.labelSize[l]=g.title.font.size),g.title.font.weight&&(m.labelFontWeight[l]=g.title.font.weight),g.title.font.style&&(m.labelFontStyle[l]=g.title.font.style),g.title.font.variant&&(m.labelFontVariant[l]=g.title.font.variant)),"showline"in g&&(m.lineEnable[l]=g.showline),"linecolor"in g&&(m.lineColor[l]=V(g.linecolor)),"linewidth"in g&&(m.lineWidth[l]=g.linewidth),"showgrid"in g&&(m.gridEnable[l]=g.showgrid),"gridcolor"in g&&(m.gridColor[l]=V(g.gridcolor)),"gridwidth"in g&&(m.gridWidth[l]=g.gridwidth),g.type==="log"?m.zeroEnable[l]=!1:"zeroline"in g&&(m.zeroEnable[l]=g.zeroline),"zerolinecolor"in g&&(m.zeroLineColor[l]=V(g.zerolinecolor)),"zerolinewidth"in g&&(m.zeroLineWidth[l]=g.zerolinewidth),"ticks"in g&&g.ticks?m.lineTickEnable[l]=!0:m.lineTickEnable[l]=!1,"ticklen"in g&&(m.lineTickLength[l]=m._defaultLineTickLength[l]=g.ticklen),"tickcolor"in g&&(m.lineTickColor[l]=V(g.tickcolor)),"tickwidth"in g&&(m.lineTickWidth[l]=g.tickwidth),"tickangle"in g&&(m.tickAngle[l]=g.tickangle==="auto"?-3600:Math.PI*-g.tickangle/180),"showticklabels"in g&&(m.tickEnable[l]=g.showticklabels),"tickfont"in g&&(g.tickfont.color&&(m.tickColor[l]=V(g.tickfont.color)),g.tickfont.family&&(m.tickFont[l]=g.tickfont.family),g.tickfont.size&&(m.tickSize[l]=g.tickfont.size),g.tickfont.weight&&(m.tickFontWeight[l]=g.tickfont.weight),g.tickfont.style&&(m.tickFontStyle[l]=g.tickfont.style),g.tickfont.variant&&(m.tickFontVariant[l]=g.tickfont.variant)),"mirror"in g?["ticks","all","allticks"].indexOf(g.mirror)!==-1?(m.lineTickMirror[l]=!0,m.lineMirror[l]=!0):g.mirror===!0?(m.lineTickMirror[l]=!1,m.lineMirror[l]=!0):(m.lineTickMirror[l]=!1,m.lineMirror[l]=!1):m.lineMirror[l]=!1,"showbackground"in g&&g.showbackground!==!1?(m.backgroundEnable[l]=!0,m.backgroundColor[l]=V(g.backgroundcolor)):m.backgroundEnable[l]=!1}};function F(a,c){var m=new nt;return m.merge(a,c),m}return er=F,er}var rr,Vr;function ji(){if(Vr)return rr;Vr=1;var V=be,Z=["xaxis","yaxis","zaxis"];function tt(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var nt=tt.prototype;nt.merge=function(F){for(var a=0;a<3;++a){var c=F[Z[a]];if(!c.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=c.showspikes,this.colors[a]=V(c.spikecolor),this.drawSides[a]=c.spikesides,this.lineWidth[a]=c.spikethickness}};function L(F){var a=new tt;return a.merge(F),a}return rr=L,rr}var nr,Hr;function $i(){if(Hr)return nr;Hr=1,nr=L;var V=Mr,Z=jt,tt=["xaxis","yaxis","zaxis"];function nt(F){for(var a=new Array(3),c=0;c<3;++c){for(var m=F[c],l=new Array(m.length),g=0;g<m.length;++g)l[g]=m[g].x;a[c]=l}return a}function L(F){for(var a=F.axesOptions,c=F.glplot.axesPixels,m=F.fullSceneLayout,l=[[],[],[]],g=0;g<3;++g){var d=m[tt[g]];if(d._length=(c[g].hi-c[g].lo)*c[g].pixelsPerDataUnit/F.dataScale[g],Math.abs(d._length)===1/0||isNaN(d._length))l[g]=[];else{d._input_range=d.range.slice(),d.range[0]=c[g].lo/F.dataScale[g],d.range[1]=c[g].hi/F.dataScale[g],d._m=1/(F.dataScale[g]*c[g].pixelsPerDataUnit),d.range[0]===d.range[1]&&(d.range[0]-=1,d.range[1]+=1);var E=d.tickmode;if(d.tickmode==="auto"){d.tickmode="linear";var M=d.nticks||Z.constrain(d._length/40,4,9);V.autoTicks(d,Math.abs(d.range[1]-d.range[0])/M)}for(var p=V.calcTicks(d,{msUTC:!0}),x=0;x<p.length;++x)p[x].x=p[x].x*F.dataScale[g],d.type==="date"&&(p[x].text=p[x].text.replace(/\<br\>/g," "));l[g]=p,d.tickmode=E}}a.ticks=l;for(var g=0;g<3;++g){.5*(F.glplot.bounds[0][g]+F.glplot.bounds[1][g]);for(var x=0;x<2;++x)a.bounds[x][g]=F.glplot.bounds[x][g]}F.contourLevels=nt(l)}return nr}var En=$t.gl_plot3d,qi=En.createCamera,Gr=En.createScene,ta=Qi,ea=Zn,ke=xe,Qt=jt,Be=Qt.preserveDrawingBuffer(),Ne=Mr,qt=Xn,ra=be,na=Yn,ia=Kn,aa=Ji(),oa=ji(),sa=$i(),fa=Wn.applyAutorangeOptions,Se,Fe,Mn=!1;function Tn(V,Z){var tt=document.createElement("div"),nt=V.container;this.graphDiv=V.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none",tt.appendChild(L),this.svgContainer=L,tt.id=V.id,tt.style.position="absolute",tt.style.top=tt.style.left="0px",tt.style.width=tt.style.height="100%",nt.appendChild(tt),this.fullLayout=Z,this.id=V.id||"scene",this.fullSceneLayout=Z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=aa(Z,Z[this.id]),this.spikeOptions=oa(Z[this.id]),this.container=tt,this.staticMode=!!V.staticPlot,this.pixelRatio=this.pixelRatio||V.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=ke.getComponentMethod("annotations3d","convert"),this.drawAnnotations=ke.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var Kt=Tn.prototype;Kt.prepareOptions=function(){var V=this,Z={canvas:V.canvas,gl:V.gl,glOptions:{preserveDrawingBuffer:Be,premultipliedAlpha:!0,antialias:!0},container:V.container,axes:V.axesOptions,spikes:V.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:V.camera,pixelRatio:V.pixelRatio};if(V.staticMode){if(!Fe&&(Se=document.createElement("canvas"),Fe=ta({canvas:Se,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!Fe))throw new Error("error creating static canvas/context for image server");Z.gl=Fe,Z.canvas=Se}return Z};var Wr=!0;Kt.tryCreatePlot=function(){var V=this,Z=V.prepareOptions(),tt=!0;try{V.glplot=Gr(Z)}catch{if(V.staticMode||!Wr||Be)tt=!1;else{Qt.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{Be=Z.glOptions.preserveDrawingBuffer=!0,V.glplot=Gr(Z)}catch{Be=Z.glOptions.preserveDrawingBuffer=!1,tt=!1}}}return Wr=!1,tt};Kt.initializeGLCamera=function(){var V=this,Z=V.fullSceneLayout.camera,tt=Z.projection.type==="orthographic";V.camera=qi(V.container,{center:[Z.center.x,Z.center.y,Z.center.z],eye:[Z.eye.x,Z.eye.y,Z.eye.z],up:[Z.up.x,Z.up.y,Z.up.z],_ortho:tt,zoomMin:.01,zoomMax:100,mode:"orbit"})};Kt.initializeGLPlot=function(){var V=this;V.initializeGLCamera();var Z=V.tryCreatePlot();if(!Z)return na(V);V.traces={},V.make4thDimension();var tt=V.graphDiv,nt=tt.layout,L=function(){var a={};return V.isCameraChanged(nt)&&(a[V.id+".camera"]=V.getCamera()),V.isAspectChanged(nt)&&(a[V.id+".aspectratio"]=V.glplot.getAspectratio(),nt[V.id].aspectmode!=="manual"&&(V.fullSceneLayout.aspectmode=nt[V.id].aspectmode=a[V.id+".aspectmode"]="manual")),a},F=function(a){if(a.fullSceneLayout.dragmode!==!1){var c=L();a.saveLayout(nt),a.graphDiv.emit("plotly_relayout",c)}};return V.glplot.canvas&&(V.glplot.canvas.addEventListener("mouseup",function(){F(V)}),V.glplot.canvas.addEventListener("touchstart",function(){Mn=!0}),V.glplot.canvas.addEventListener("wheel",function(a){if(tt._context._scrollZoom.gl3d){if(V.camera._ortho){var c=a.deltaX>a.deltaY?1.1:.9090909090909091,m=V.glplot.getAspectratio();V.glplot.setAspectratio({x:c*m.x,y:c*m.y,z:c*m.z})}F(V)}},ea?{passive:!1}:!1),V.glplot.canvas.addEventListener("mousemove",function(){if(V.fullSceneLayout.dragmode!==!1&&V.camera.mouseListener.buttons!==0){var a=L();V.graphDiv.emit("plotly_relayouting",a)}}),V.staticMode||V.glplot.canvas.addEventListener("webglcontextlost",function(a){tt&&tt.emit&&tt.emit("plotly_webglcontextlost",{event:a,layer:V.id})},!1)),V.glplot.oncontextloss=function(){V.recoverContext()},V.glplot.onrender=function(){V.render()},!0};Kt.render=function(){var V=this,Z=V.graphDiv,tt,nt=V.svgContainer,L=V.container.getBoundingClientRect();Z._fullLayout._calcInverseTransform(Z);var F=Z._fullLayout._invScaleX,a=Z._fullLayout._invScaleY,c=L.width*F,m=L.height*a;nt.setAttributeNS(null,"viewBox","0 0 "+c+" "+m),nt.setAttributeNS(null,"width",c),nt.setAttributeNS(null,"height",m),sa(V),V.glplot.axes.update(V.axesOptions);for(var l=Object.keys(V.traces),g=null,d=V.glplot.selection,E=0;E<l.length;++E)tt=V.traces[l[E]],tt.data.hoverinfo!=="skip"&&tt.handlePick(d)&&(g=tt),tt.setContourLevels&&tt.setContourLevels();function M(i,e,T){var b=V.fullSceneLayout[i+"axis"];return b.type!=="log"&&(e=b.d2l(e)),Ne.hoverLabelText(b,e,T)}if(g!==null){var p=ia(V.glplot.cameraParams,d.dataCoordinate);tt=g.data;var x=Z._fullData[tt.index],w=d.index,o={xLabel:M("x",d.traceCoordinate[0],tt.xhoverformat),yLabel:M("y",d.traceCoordinate[1],tt.yhoverformat),zLabel:M("z",d.traceCoordinate[2],tt.zhoverformat)},v=qt.castHoverinfo(x,V.fullLayout,w),u=(v||"").split("+"),f=v&&v==="all";!x.hovertemplate&&!f&&(u.indexOf("x")===-1&&(o.xLabel=void 0),u.indexOf("y")===-1&&(o.yLabel=void 0),u.indexOf("z")===-1&&(o.zLabel=void 0),u.indexOf("text")===-1&&(d.textLabel=void 0),u.indexOf("name")===-1&&(g.name=void 0));var h,r=[];tt.type==="cone"||tt.type==="streamtube"?(o.uLabel=M("x",d.traceCoordinate[3],tt.uhoverformat),(f||u.indexOf("u")!==-1)&&r.push("u: "+o.uLabel),o.vLabel=M("y",d.traceCoordinate[4],tt.vhoverformat),(f||u.indexOf("v")!==-1)&&r.push("v: "+o.vLabel),o.wLabel=M("z",d.traceCoordinate[5],tt.whoverformat),(f||u.indexOf("w")!==-1)&&r.push("w: "+o.wLabel),o.normLabel=d.traceCoordinate[6].toPrecision(3),(f||u.indexOf("norm")!==-1)&&r.push("norm: "+o.normLabel),tt.type==="streamtube"&&(o.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(f||u.indexOf("divergence")!==-1)&&r.push("divergence: "+o.divergenceLabel)),d.textLabel&&r.push(d.textLabel),h=r.join("<br>")):tt.type==="isosurface"||tt.type==="volume"?(o.valueLabel=Ne.hoverLabelText(V._mockAxis,V._mockAxis.d2l(d.traceCoordinate[3]),tt.valuehoverformat),r.push("value: "+o.valueLabel),d.textLabel&&r.push(d.textLabel),h=r.join("<br>")):h=d.textLabel;var s={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:x._input,fullData:x,curveNumber:x.index,pointNumber:w};qt.appendArrayPointValue(s,x,w),tt._module.eventData&&(s=x._module.eventData(s,d,x,{},w));var n={points:[s]};if(V.fullSceneLayout.hovermode){var t=[];qt.loneHover({trace:x,x:(.5+.5*p[0]/p[3])*c,y:(.5-.5*p[1]/p[3])*m,xLabel:o.xLabel,yLabel:o.yLabel,zLabel:o.zLabel,text:h,name:g.name,color:qt.castHoverOption(x,w,"bgcolor")||g.color,borderColor:qt.castHoverOption(x,w,"bordercolor"),fontFamily:qt.castHoverOption(x,w,"font.family"),fontSize:qt.castHoverOption(x,w,"font.size"),fontColor:qt.castHoverOption(x,w,"font.color"),nameLength:qt.castHoverOption(x,w,"namelength"),textAlign:qt.castHoverOption(x,w,"align"),hovertemplate:Qt.castOption(x,w,"hovertemplate"),hovertemplateLabels:Qt.extendFlat({},s,o),eventData:[s]},{container:nt,gd:Z,inOut_bbox:t}),s.bbox=t[0]}d.distance<5&&(d.buttons||Mn)?Z.emit("plotly_click",n):Z.emit("plotly_hover",n),this.oldEventData=n}else qt.loneUnhover(nt),this.oldEventData&&Z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;V.drawAnnotations(V)};Kt.recoverContext=function(){var V=this;V.glplot.dispose();var Z=function(){if(V.glplot.gl.isContextLost()){requestAnimationFrame(Z);return}if(!V.initializeGLPlot()){Qt.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}V.plot.apply(V,V.plotArgs)};requestAnimationFrame(Z)};var _e=["xaxis","yaxis","zaxis"];function ha(V,Z,tt){for(var nt=V.fullSceneLayout,L=0;L<3;L++){var F=_e[L],a=F.charAt(0),c=nt[F],m=Z[a],l=Z[a+"calendar"],g=Z["_"+a+"length"];if(!Qt.isArrayOrTypedArray(m))tt[0][L]=Math.min(tt[0][L],0),tt[1][L]=Math.max(tt[1][L],g-1);else for(var d,E=0;E<(g||m.length);E++)if(Qt.isArrayOrTypedArray(m[E]))for(var M=0;M<m[E].length;++M)d=c.d2l(m[E][M],0,l),!isNaN(d)&&isFinite(d)&&(tt[0][L]=Math.min(tt[0][L],d),tt[1][L]=Math.max(tt[1][L],d));else d=c.d2l(m[E],0,l),!isNaN(d)&&isFinite(d)&&(tt[0][L]=Math.min(tt[0][L],d),tt[1][L]=Math.max(tt[1][L],d))}}function la(V,Z){for(var tt=V.fullSceneLayout,nt=tt.annotations||[],L=0;L<3;L++)for(var F=_e[L],a=F.charAt(0),c=tt[F],m=0;m<nt.length;m++){var l=nt[m];if(l.visible){var g=c.r2l(l[a]);!isNaN(g)&&isFinite(g)&&(Z[0][L]=Math.min(Z[0][L],g),Z[1][L]=Math.max(Z[1][L],g))}}}Kt.plot=function(V,Z,tt){var nt=this;if(nt.plotArgs=[V,Z,tt],!nt.glplot.contextLost){var L,F,a,c,m,l,g=Z[nt.id],d=tt[nt.id];nt.fullLayout=Z,nt.fullSceneLayout=g,nt.axesOptions.merge(Z,g),nt.spikeOptions.merge(g),nt.setViewport(g),nt.updateFx(g.dragmode,g.hovermode),nt.camera.enableWheel=nt.graphDiv._context._scrollZoom.gl3d,nt.glplot.setClearColor(ra(g.bgcolor)),nt.setConvert(m),V?Array.isArray(V)||(V=[V]):V=[];var E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(a=0;a<V.length;++a)L=V[a],!(L.visible!==!0||L._length===0)&&ha(this,L,E);la(this,E);var M=[1,1,1];for(c=0;c<3;++c)E[1][c]===E[0][c]?M[c]=1:M[c]=1/(E[1][c]-E[0][c]);for(nt.dataScale=M,nt.convertAnnotations(this),a=0;a<V.length;++a)L=V[a],!(L.visible!==!0||L._length===0)&&(F=nt.traces[L.uid],F?F.data.type===L.type?F.update(L):(F.dispose(),F=L._module.plot(this,L),nt.traces[L.uid]=F):(F=L._module.plot(this,L),nt.traces[L.uid]=F),F.name=L.name);var p=Object.keys(nt.traces);t:for(a=0;a<p.length;++a){for(c=0;c<V.length;++c)if(V[c].uid===p[a]&&V[c].visible===!0&&V[c]._length!==0)continue t;F=nt.traces[p[a]],F.dispose(),delete nt.traces[p[a]]}nt.glplot.objects.sort(function(O,P){return O._trace.data.index-P._trace.data.index});var x=[[0,0,0],[0,0,0]],w={};for(a=0;a<3;++a){m=g[_e[a]],l=m.type,l in w?(w[l].acc*=M[a],w[l].count+=1):w[l]={acc:M[a],count:1};var o;if(m.autorange){x[0][a]=1/0,x[1][a]=-1/0;var v=nt.glplot.objects,u=nt.fullSceneLayout.annotations||[],f=m._name.charAt(0);for(c=0;c<v.length;c++){var h=v[c],r=h.bounds,s=h._trace.data._pad||0;h.constructor.name==="ErrorBars"&&m._lowerLogErrorBound?x[0][a]=Math.min(x[0][a],m._lowerLogErrorBound):x[0][a]=Math.min(x[0][a],r[0][a]/M[a]-s),x[1][a]=Math.max(x[1][a],r[1][a]/M[a]+s)}for(c=0;c<u.length;c++){var n=u[c];if(n.visible){var t=m.r2l(n[f]);x[0][a]=Math.min(x[0][a],t),x[1][a]=Math.max(x[1][a],t)}}if("rangemode"in m&&m.rangemode==="tozero"&&(x[0][a]=Math.min(x[0][a],0),x[1][a]=Math.max(x[1][a],0)),x[0][a]>x[1][a])x[0][a]=-1,x[1][a]=1;else{var i=x[1][a]-x[0][a];x[0][a]-=i/32,x[1][a]+=i/32}if(o=[x[0][a],x[1][a]],o=fa(o,m),x[0][a]=o[0],x[1][a]=o[1],m.isReversed()){var e=x[0][a];x[0][a]=x[1][a],x[1][a]=e}}else o=m.range,x[0][a]=m.r2l(o[0]),x[1][a]=m.r2l(o[1]);x[0][a]===x[1][a]&&(x[0][a]-=1,x[1][a]+=1),m.range=[x[0][a],x[1][a]],m.limitRange(),nt.glplot.setBounds(a,{min:m.range[0]*M[a],max:m.range[1]*M[a]})}var T,b=g.aspectmode;if(b==="cube")T=[1,1,1];else if(b==="manual"){var A=g.aspectratio;T=[A.x,A.y,A.z]}else if(b==="auto"||b==="data"){var _=[1,1,1];for(a=0;a<3;++a){m=g[_e[a]],l=m.type;var C=w[l];_[a]=Math.pow(C.acc,1/C.count)/M[a]}b==="data"||Math.max.apply(null,_)/Math.min.apply(null,_)<=4?T=_:T=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");g.aspectratio.x=d.aspectratio.x=T[0],g.aspectratio.y=d.aspectratio.y=T[1],g.aspectratio.z=d.aspectratio.z=T[2],nt.glplot.setAspectratio(g.aspectratio),nt.viewInitial.aspectratio||(nt.viewInitial.aspectratio={x:g.aspectratio.x,y:g.aspectratio.y,z:g.aspectratio.z}),nt.viewInitial.aspectmode||(nt.viewInitial.aspectmode=g.aspectmode);var S=g.domain||null,y=Z._size||null;if(S&&y){var R=nt.container.style;R.position="absolute",R.left=y.l+S.x[0]*y.w+"px",R.top=y.t+(1-S.y[1])*y.h+"px",R.width=y.w*(S.x[1]-S.x[0])+"px",R.height=y.h*(S.y[1]-S.y[0])+"px"}nt.glplot.redraw()}};Kt.destroy=function(){var V=this;V.glplot&&(V.camera.mouseListener.enabled=!1,V.container.removeEventListener("wheel",V.camera.wheelListener),V.camera=null,V.glplot.dispose(),V.container.parentNode.removeChild(V.container),V.glplot=null)};function ua(V){return[[V.eye.x,V.eye.y,V.eye.z],[V.center.x,V.center.y,V.center.z],[V.up.x,V.up.y,V.up.z]]}function va(V){return{up:{x:V.up[0],y:V.up[1],z:V.up[2]},center:{x:V.center[0],y:V.center[1],z:V.center[2]},eye:{x:V.eye[0],y:V.eye[1],z:V.eye[2]},projection:{type:V._ortho===!0?"orthographic":"perspective"}}}Kt.getCamera=function(){var V=this;return V.camera.view.recalcMatrix(V.camera.view.lastT()),va(V.camera)};Kt.setViewport=function(V){var Z=this,tt=V.camera;Z.camera.lookAt.apply(this,ua(tt)),Z.glplot.setAspectratio(V.aspectratio);var nt=tt.projection.type==="orthographic",L=Z.camera._ortho;nt!==L&&(Z.glplot.redraw(),Z.glplot.clearRGBA(),Z.glplot.dispose(),Z.initializeGLPlot())};Kt.isCameraChanged=function(V){var Z=this,tt=Z.getCamera(),nt=Qt.nestedProperty(V,Z.id+".camera"),L=nt.get();function F(l,g,d,E){var M=["up","center","eye"],p=["x","y","z"];return g[M[d]]&&l[M[d]][p[E]]===g[M[d]][p[E]]}var a=!1;if(L===void 0)a=!0;else{for(var c=0;c<3;c++)for(var m=0;m<3;m++)if(!F(tt,L,c,m)){a=!0;break}(!L.projection||tt.projection&&tt.projection.type!==L.projection.type)&&(a=!0)}return a};Kt.isAspectChanged=function(V){var Z=this,tt=Z.glplot.getAspectratio(),nt=Qt.nestedProperty(V,Z.id+".aspectratio"),L=nt.get();return L===void 0||L.x!==tt.x||L.y!==tt.y||L.z!==tt.z};Kt.saveLayout=function(V){var Z=this,tt=Z.fullLayout,nt,L,F,a,c,m,l=Z.isCameraChanged(V),g=Z.isAspectChanged(V),d=l||g;if(d){var E={};if(l&&(nt=Z.getCamera(),L=Qt.nestedProperty(V,Z.id+".camera"),F=L.get(),E[Z.id+".camera"]=F),g&&(a=Z.glplot.getAspectratio(),c=Qt.nestedProperty(V,Z.id+".aspectratio"),m=c.get(),E[Z.id+".aspectratio"]=m),ke.call("_storeDirectGUIEdit",V,tt._preGUI,E),l){L.set(nt);var M=Qt.nestedProperty(tt,Z.id+".camera");M.set(nt)}if(g){c.set(a);var p=Qt.nestedProperty(tt,Z.id+".aspectratio");p.set(a),Z.glplot.redraw()}}return d};Kt.updateFx=function(V,Z){var tt=this,nt=tt.camera;if(nt)if(V==="orbit")nt.mode="orbit",nt.keyBindingMode="rotate";else if(V==="turntable"){nt.up=[0,0,1],nt.mode="turntable",nt.keyBindingMode="rotate";var L=tt.graphDiv,F=L._fullLayout,a=tt.fullSceneLayout.camera,c=a.up.x,m=a.up.y,l=a.up.z;if(l/Math.sqrt(c*c+m*m+l*l)<.999){var g=tt.id+".camera.up",d={x:0,y:0,z:1},E={};E[g]=d;var M=L.layout;ke.call("_storeDirectGUIEdit",M,F._preGUI,E),a.up=d,Qt.nestedProperty(M,g).set(d)}}else nt.keyBindingMode=V;tt.fullSceneLayout.hovermode=Z};function ca(V,Z,tt){for(var nt=0,L=tt-1;nt<L;++nt,--L)for(var F=0;F<Z;++F)for(var a=0;a<4;++a){var c=4*(Z*nt+F)+a,m=4*(Z*L+F)+a,l=V[c];V[c]=V[m],V[m]=l}}function da(V,Z,tt){for(var nt=0;nt<tt;++nt)for(var L=0;L<Z;++L){var F=4*(Z*nt+L),a=V[F+3];if(a>0)for(var c=255/a,m=0;m<3;++m)V[F+m]=Math.min(c*V[F+m],255)}}Kt.toImage=function(V){var Z=this;V||(V="png"),Z.staticMode&&Z.container.appendChild(Se),Z.glplot.redraw();var tt=Z.glplot.gl,nt=tt.drawingBufferWidth,L=tt.drawingBufferHeight;tt.bindFramebuffer(tt.FRAMEBUFFER,null);var F=new Uint8Array(nt*L*4);tt.readPixels(0,0,nt,L,tt.RGBA,tt.UNSIGNED_BYTE,F),ca(F,nt,L),da(F,nt,L);var a=document.createElement("canvas");a.width=nt,a.height=L;var c=a.getContext("2d",{willReadFrequently:!0}),m=c.createImageData(nt,L);m.data.set(F),c.putImageData(m,0,0);var l;switch(V){case"jpeg":l=a.toDataURL("image/jpeg");break;case"webp":l=a.toDataURL("image/webp");break;default:l=a.toDataURL("image/png")}return Z.staticMode&&Z.container.removeChild(Se),l};Kt.setConvert=function(){for(var V=this,Z=0;Z<3;Z++){var tt=V.fullSceneLayout[_e[Z]];Ne.setConvert(tt,V.fullLayout),tt.setScale=Qt.noop}};Kt.make4thDimension=function(){var V=this,Z=V.graphDiv,tt=Z._fullLayout;V._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},Ne.setConvert(V._mockAxis,tt)};var pa=Tn,ir,Xr;function ga(){return Xr||(Xr=1,ir={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}),ir}var ar,Yr;function An(){if(Yr)return ar;Yr=1;var V=_r,Z=Qn,tt=Ce.extendFlat,nt=De.overrideAll;return ar=nt({visible:Z.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:V.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:Z.color,categoryorder:Z.categoryorder,categoryarray:Z.categoryarray,title:{text:Z.title.text,font:Z.title.font},type:tt({},Z.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Z.autotypenumbers,autorange:Z.autorange,autorangeoptions:{minallowed:Z.autorangeoptions.minallowed,maxallowed:Z.autorangeoptions.maxallowed,clipmin:Z.autorangeoptions.clipmin,clipmax:Z.autorangeoptions.clipmax,include:Z.autorangeoptions.include,editType:"plot"},rangemode:Z.rangemode,minallowed:Z.minallowed,maxallowed:Z.maxallowed,range:tt({},Z.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:Z.minor.tickmode,nticks:Z.nticks,tick0:Z.tick0,dtick:Z.dtick,tickvals:Z.tickvals,ticktext:Z.ticktext,ticks:Z.ticks,mirror:Z.mirror,ticklen:Z.ticklen,tickwidth:Z.tickwidth,tickcolor:Z.tickcolor,showticklabels:Z.showticklabels,labelalias:Z.labelalias,tickfont:Z.tickfont,tickangle:Z.tickangle,tickprefix:Z.tickprefix,showtickprefix:Z.showtickprefix,ticksuffix:Z.ticksuffix,showticksuffix:Z.showticksuffix,showexponent:Z.showexponent,exponentformat:Z.exponentformat,minexponent:Z.minexponent,separatethousands:Z.separatethousands,tickformat:Z.tickformat,tickformatstops:Z.tickformatstops,hoverformat:Z.hoverformat,showline:Z.showline,linecolor:Z.linecolor,linewidth:Z.linewidth,showgrid:Z.showgrid,gridcolor:tt({},Z.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:Z.gridwidth,zeroline:Z.zeroline,zerolinecolor:Z.zerolinecolor,zerolinewidth:Z.zerolinewidth,_deprecated:{title:Z._deprecated.title,titlefont:Z._deprecated.titlefont}},"plot","from-root"),ar}var or,Zr;function Sn(){if(Zr)return or;Zr=1;var V=An(),Z=fn.attributes,tt=Ce.extendFlat,nt=jt.counterRegex;function L(F,a,c){return{x:{valType:"number",dflt:F,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:c,editType:"camera"},editType:"camera"}}return or={_arrayAttrRegexps:[nt("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:tt(L(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:tt(L(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:tt(L(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:Z({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:V,yaxis:V,zaxis:V,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}},or}var sr,Kr;function ya(){if(Kr)return sr;Kr=1;var V=jt,Z=hn,tt=fn.defaults;return sr=function(L,F,a,c){var m=c.type,l=c.attributes,g=c.handleDefaults,d=c.partition||"x",E=F._subplots[m],M=E.length,p=M&&E[0].replace(/\d+$/,""),x,w;function o(h,r){return V.coerce(x,w,l,h,r)}for(var v=0;v<M;v++){var u=E[v];L[u]?x=L[u]:x=L[u]={},w=Z.newContainer(F,u,p),c.noUirevision||o("uirevision",F.uirevision);var f={};f[d]=[v/M,(v+1)/M],tt(w,F,o,f),c.id=u,g(x,w,o,c)}},sr}var fr,Qr;function xa(){if(Qr)return fr;Qr=1;var V=Jn.mix,Z=jt,tt=hn,nt=An(),L=jn(),F=$n,a=["xaxis","yaxis","zaxis"],c=100*136/187;return fr=function(l,g,d){var E,M;function p(o,v){return Z.coerce(E,M,nt,o,v)}for(var x=0;x<a.length;x++){var w=a[x];E=l[w]||{},M=tt.newContainer(g,w),M._id=w[0]+d.scene,M._name=w,L(E,M,p,d),F(E,M,p,{font:d.font,letter:w[0],data:d.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout),p("gridcolor",V(M.color,d.bgColor,c).toRgbString()),p("title.text",w[0]),M.setScale=Z.noop,p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor",M.color)),p("showaxeslabels"),p("showbackground")&&p("backgroundcolor")}},fr}var hr,Jr;function ba(){if(Jr)return hr;Jr=1;var V=jt,Z=_r,tt=xe,nt=ya(),L=xa(),F=Sn(),a=ln.getSubplotData,c="gl3d";hr=function(g,d,E){var M=d._basePlotModules.length>1;function p(x){if(!M){var w=V.validate(g[x],F[x]);if(w)return g[x]}}nt(g,d,E,{type:c,attributes:F,handleDefaults:m,fullLayout:d,font:d.font,fullData:E,getDfltFromLayout:p,autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})};function m(l,g,d,E){for(var M=d("bgcolor"),p=Z.combine(M,E.paper_bgcolor),x=["up","center","eye"],w=0;w<x.length;w++)d("camera."+x[w]+".x"),d("camera."+x[w]+".y"),d("camera."+x[w]+".z");d("camera.projection.type");var o=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z"),v=o?"manual":"auto",u=d("aspectmode",v);o||(l.aspectratio=g.aspectratio={x:1,y:1,z:1},u==="manual"&&(g.aspectmode="auto"),l.aspectmode=g.aspectmode);var f=a(E.fullData,c,E.id);L(l,g,{font:E.font,scene:E.id,data:f,bgColor:p,calendar:E.calendar,autotypenumbersDflt:E.autotypenumbersDflt,fullLayout:E.fullLayout}),tt.getComponentMethod("annotations3d","handleDefaults")(l,g,E);var h=E.getDfltFromLayout("dragmode");if(h!==!1&&!h)if(h="orbit",l.camera&&l.camera.up){var r=l.camera.up.x,s=l.camera.up.y,n=l.camera.up.z;n!==0&&(!r||!s||!n||n/Math.sqrt(r*r+s*s+n*n)>.999)&&(h="turntable")}else h="turntable";d("dragmode",h),d("hovermode",E.getDfltFromLayout("hovermode"))}return hr}var wa=De.overrideAll,ma=qn,Ea=pa,Ma=ln.getSubplotData,Ta=jt,Aa=ti,ge="gl3d",Lr="scene";Zt.name=ge;Zt.attr=Lr;Zt.idRoot=Lr;Zt.idRegex=Zt.attrRegex=Ta.counterRegex("scene");Zt.attributes=ga();Zt.layoutAttributes=Sn();Zt.baseLayoutAttrOverrides=wa({hoverlabel:ma.hoverlabel},"plot","nested");Zt.supplyLayoutDefaults=ba();Zt.plot=function(Z){for(var tt=Z._fullLayout,nt=Z._fullData,L=tt._subplots[ge],F=0;F<L.length;F++){var a=L[F],c=Ma(nt,ge,a),m=tt[a],l=m.camera,g=m._scene;g||(g=new Ea({id:a,graphDiv:Z,container:Z.querySelector(".gl-container"),staticPlot:Z._context.staticPlot,plotGlPixelRatio:Z._context.plotGlPixelRatio},tt),m._scene=g),g.viewInitial||(g.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),g.plot(c,tt,Z.layout)}};Zt.clean=function(V,Z,tt,nt){for(var L=nt._subplots[ge]||[],F=0;F<L.length;F++){var a=L[F];!Z[a]&&nt[a]._scene&&(nt[a]._scene.destroy(),nt._infolayer&&nt._infolayer.selectAll(".annotation-"+a).remove())}};Zt.toSVG=function(V){for(var Z=V._fullLayout,tt=Z._subplots[ge],nt=Z._size,L=0;L<tt.length;L++){var F=Z[tt[L]],a=F.domain,c=F._scene,m=c.toImage("png"),l=Z._glimages.append("svg:image");l.attr({xmlns:Aa.svg,"xlink:href":m,x:nt.l+nt.w*a.x[0],y:nt.t+nt.h*(1-a.y[1]),width:nt.w*(a.x[1]-a.x[0]),height:nt.h*(a.y[1]-a.y[0]),preserveAspectRatio:"none"}),c.destroy()}};Zt.cleanId=function(Z){if(Z.match(/^scene[0-9]*$/)){var tt=Z.substr(5);return tt==="1"&&(tt=""),Lr+tt}};Zt.updateFx=function(V){for(var Z=V._fullLayout,tt=Z._subplots[ge],nt=0;nt<tt.length;nt++){var L=Z[tt[nt]]._scene;L.updateFx(Z.dragmode,Z.hovermode)}};var Sa={plot:Si,attributes:wn,markerSymbols:Cr,supplyDefaults:Vi,colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:Xi,moduleType:"trace",name:"scatter3d",basePlotModule:Zt,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}},_a=Sa;const Ra=Rr(_a);var _n={exports:{}},jr=_r,Oe=Sr,lr=Tr.axisHoverFormat,Ca=Ue.hovertemplateAttrs,$r=Ar,de=Ce.extendFlat,Ia=De.overrideAll;function ur(V){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",V,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function vr(V){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",V,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:ur("x"),y:ur("y"),z:ur("z")},color:{valType:"color",dflt:jr.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",V,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:jr.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var Pe=_n.exports=Ia(de({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:Ca(),xhoverformat:lr("x"),yhoverformat:lr("y"),zhoverformat:lr("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},Oe("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:vr("x"),y:vr("y"),z:vr("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale.","The opacityscale must be an array containing","arrays mapping a normalized value to an opacity value.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have","higher opacity values and those in the middle would be more transparent","Alternatively, `opacityscale` may be a palette name string","of the following list: 'min', 'max', 'extremes' and 'uniform'.","The default is 'uniform'."].join(" ")},_deprecated:{zauto:de({},Oe.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:de({},Oe.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:de({},Oe.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:de({},$r.hoverinfo),showlegend:de({},$r.showlegend,{dflt:!1})}),"calc","nested");Pe.x.editType=Pe.y.editType=Pe.z.editType="calc+clearAxisTypes";Pe.transforms=void 0;var Fr=_n.exports,La=xe,qr=jt,Fa=un,Oa=Fr,cr=.1;function Ba(V,Z){for(var tt=[],nt=32,L=0;L<nt;L++){var F=L/(nt-1),a=Z+(1-Z)*(1-Math.pow(Math.sin(V*F*Math.PI),2));tt.push([F,Math.max(0,Math.min(1,a))])}return tt}function Pa(V){var Z=0;if(!Array.isArray(V)||V.length<2||!V[0]||!V[V.length-1]||+V[0][0]!=0||+V[V.length-1][0]!=1)return!1;for(var tt=0;tt<V.length;tt++){var nt=V[tt];if(nt.length!==2||+nt[0]<Z)return!1;Z=+nt[0]}return!0}function ka(V,Z,tt,nt){var L,F;function a(w,o){return qr.coerce(V,Z,Oa,w,o)}var c=a("x"),m=a("y"),l=a("z");if(!l||!l.length||c&&c.length<1||m&&m.length<1){Z.visible=!1;return}Z._xlength=Array.isArray(c)&&qr.isArrayOrTypedArray(c[0])?l.length:l[0].length,Z._ylength=l.length;var g=La.getComponentMethod("calendars","handleTraceDefaults");g(V,Z,["x","y","z"],nt),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(w){a(w)});var d=a("surfacecolor"),E=["x","y","z"];for(L=0;L<3;++L){var M="contours."+E[L],p=a(M+".show"),x=a(M+".highlight");if(p||x)for(F=0;F<3;++F)a(M+".project."+E[F]);p&&(a(M+".color"),a(M+".width"),a(M+".usecolormap")),x&&(a(M+".highlightcolor"),a(M+".highlightwidth")),a(M+".start"),a(M+".end"),a(M+".size")}d||(dr(V,"zmin","cmin"),dr(V,"zmax","cmax"),dr(V,"zauto","cauto")),Fa(V,Z,nt,a,{prefix:"",cLetter:"c"}),Na(V,Z,nt,a),Z._length=null}function Na(V,Z,tt,nt){var L=nt("opacityscale");L==="max"?Z.opacityscale=[[0,cr],[1,1]]:L==="min"?Z.opacityscale=[[0,1],[1,cr]]:L==="extremes"?Z.opacityscale=Ba(1,cr):Pa(L)||(Z.opacityscale=void 0)}function dr(V,Z,tt){Z in V&&!(tt in V)&&(V[tt]=V[Z])}var za={supplyDefaults:ka},tn=vn,Da=function(Z,tt){tt.surfacecolor?tn(Z,tt,{vals:tt.surfacecolor,containerStr:""}):tn(Z,tt,{vals:tt.z,containerStr:""})},Ua=$t.gl_surface3d,pe=$t.ndarray,Va=$t.ndarray_linear_interpolate.d2,Ha=ri,Ga=ei,Re=jt.isArrayOrTypedArray,Wa=Er.parseColorScale,en=be,Xa=cn.extractOpts;function Rn(V,Z,tt){this.scene=V,this.uid=tt,this.surface=Z,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var ee=Rn.prototype;ee.getXat=function(V,Z,tt,nt){var L=Re(this.data.x)?Re(this.data.x[0])?this.data.x[Z][V]:this.data.x[V]:V;return tt===void 0?L:nt.d2l(L,0,tt)};ee.getYat=function(V,Z,tt,nt){var L=Re(this.data.y)?Re(this.data.y[0])?this.data.y[Z][V]:this.data.y[Z]:Z;return tt===void 0?L:nt.d2l(L,0,tt)};ee.getZat=function(V,Z,tt,nt){var L=this.data.z[Z][V];return L===null&&this.data.connectgaps&&this.data._interpolatedZ&&(L=this.data._interpolatedZ[Z][V]),tt===void 0?L:nt.d2l(L,0,tt)};ee.handlePick=function(V){if(V.object===this.surface){var Z=(V.data.index[0]-1)/this.dataScaleX-1,tt=(V.data.index[1]-1)/this.dataScaleY-1,nt=Math.max(Math.min(Math.round(Z),this.data.z[0].length-1),0),L=Math.max(Math.min(Math.round(tt),this.data._ylength-1),0);V.index=[nt,L],V.traceCoordinate=[this.getXat(nt,L),this.getYat(nt,L),this.getZat(nt,L)],V.dataCoordinate=[this.getXat(nt,L,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(nt,L,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(nt,L,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var F=0;F<3;F++){var a=V.dataCoordinate[F];a!=null&&(V.dataCoordinate[F]*=this.scene.dataScale[F])}var c=this.data.hovertext||this.data.text;return Re(c)&&c[L]&&c[L][nt]!==void 0?V.textLabel=c[L][nt]:c?V.textLabel=c:V.textLabel="",V.data.dataCoordinate=V.dataCoordinate.slice(),this.surface.highlight(V.data),this.scene.glplot.spikes.position=V.dataCoordinate,!0}};function Ya(V){var Z=V[0].rgb,tt=V[V.length-1].rgb;return Z[0]===tt[0]&&Z[1]===tt[1]&&Z[2]===tt[2]&&Z[3]===tt[3]}var ye=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function Za(V,Z){if(V<Z)return 0;for(var tt=0;Math.floor(V%Z)===0;)V/=Z,tt++;return tt}function wr(V){for(var Z=[],tt=0;tt<ye.length;tt++){var nt=ye[tt];Z.push(Za(V,nt))}return Z}function Ka(V){for(var Z=wr(V),tt=V,nt=0;nt<ye.length;nt++)if(Z[nt]>0){tt=ye[nt];break}return tt}function Qa(V,Z){if(!(V<1||Z<1)){for(var tt=wr(V),nt=wr(Z),L=1,F=0;F<ye.length;F++)L*=Math.pow(ye[F],Math.max(tt[F],nt[F]));return L}}function Ja(V){if(V.length!==0){for(var Z=1,tt=0;tt<V.length;tt++)Z=Qa(Z,V[tt]);return Z}}ee.calcXnums=function(V){var Z,tt=[];for(Z=1;Z<V;Z++){var nt=this.getXat(Z-1,0),L=this.getXat(Z,0);L!==nt&&nt!==void 0&&nt!==null&&L!==void 0&&L!==null?tt[Z-1]=Math.abs(L-nt):tt[Z-1]=0}var F=0;for(Z=1;Z<V;Z++)F+=tt[Z-1];for(Z=1;Z<V;Z++)tt[Z-1]===0?tt[Z-1]=1:tt[Z-1]=Math.round(F/tt[Z-1]);return tt};ee.calcYnums=function(V){var Z,tt=[];for(Z=1;Z<V;Z++){var nt=this.getYat(0,Z-1),L=this.getYat(0,Z);L!==nt&&nt!==void 0&&nt!==null&&L!==void 0&&L!==null?tt[Z-1]=Math.abs(L-nt):tt[Z-1]=0}var F=0;for(Z=1;Z<V;Z++)F+=tt[Z-1];for(Z=1;Z<V;Z++)tt[Z-1]===0?tt[Z-1]=1:tt[Z-1]=Math.round(F/tt[Z-1]);return tt};var Cn=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],rn=Cn[9],ze=Cn[13];ee.estimateScale=function(V,Z){for(var tt=Z===0?this.calcXnums(V):this.calcYnums(V),nt=1+Ja(tt);nt<rn;)nt*=2;for(;nt>ze;)nt--,nt/=Ka(nt),nt++,nt<rn&&(nt=ze);var L=Math.round(nt/V);return L>1?L:1};function ja(V,Z,tt){var nt=tt[8]+tt[2]*Z[0]+tt[5]*Z[1];return V[0]=(tt[6]+tt[0]*Z[0]+tt[3]*Z[1])/nt,V[1]=(tt[7]+tt[1]*Z[0]+tt[4]*Z[1])/nt,V}function $a(V,Z,tt){return qa(V,Z,ja,tt),V}function qa(V,Z,tt,nt){for(var L=[0,0],F=V.shape[0],a=V.shape[1],c=0;c<F;c++)for(var m=0;m<a;m++)tt(L,[c,m],nt),V.set(c,m,Va(Z,L[0],L[1]));return V}ee.refineCoords=function(V){for(var Z=this.dataScaleX,tt=this.dataScaleY,nt=V[0].shape[0],L=V[0].shape[1],F=Math.floor(V[0].shape[0]*Z+1)|0,a=Math.floor(V[0].shape[1]*tt+1)|0,c=1+nt+1,m=1+L+1,l=pe(new Float32Array(c*m),[c,m]),g=[1/Z,0,0,0,1/tt,0,0,0,1],d=0;d<V.length;++d){this.surface.padField(l,V[d]);var E=pe(new Float32Array(F*a),[F,a]);$a(E,l,g),V[d]=E}};function to(V,Z){for(var tt=!1,nt=0;nt<V.length;nt++)if(Z===V[nt]){tt=!0;break}tt===!1&&V.push(Z)}ee.setContourLevels=function(){var V=[[],[],[]],Z=[!1,!1,!1],tt=!1,nt,L,F;for(nt=0;nt<3;++nt)if(this.showContour[nt]&&(tt=!0,this.contourSize[nt]>0&&this.contourStart[nt]!==null&&this.contourEnd[nt]!==null&&this.contourEnd[nt]>this.contourStart[nt]))for(Z[nt]=!0,L=this.contourStart[nt];L<this.contourEnd[nt];L+=this.contourSize[nt])F=L*this.scene.dataScale[nt],to(V[nt],F);if(tt){var a=[[],[],[]];for(nt=0;nt<3;++nt)this.showContour[nt]&&(a[nt]=Z[nt]?V[nt]:this.scene.contourLevels[nt]);this.surface.update({levels:a})}};ee.update=function(V){var Z=this.scene,tt=Z.fullSceneLayout,nt=this.surface,L=Wa(V),F=Z.dataScale,a=V.z[0].length,c=V._ylength,m=Z.contourLevels;this.data=V;var l,g,d,E,M=[];for(l=0;l<3;l++)for(M[l]=[],g=0;g<a;g++)M[l][g]=[];for(g=0;g<a;g++)for(d=0;d<c;d++)M[0][g][d]=this.getXat(g,d,V.xcalendar,tt.xaxis),M[1][g][d]=this.getYat(g,d,V.ycalendar,tt.yaxis),M[2][g][d]=this.getZat(g,d,V.zcalendar,tt.zaxis);if(V.connectgaps)for(V._emptypoints=Ga(M[2]),Ha(M[2],V._emptypoints),V._interpolatedZ=[],g=0;g<a;g++)for(V._interpolatedZ[g]=[],d=0;d<c;d++)V._interpolatedZ[g][d]=M[2][g][d];for(l=0;l<3;l++)for(g=0;g<a;g++)for(d=0;d<c;d++)E=M[l][g][d],E==null?M[l][g][d]=NaN:E=M[l][g][d]*=F[l];for(l=0;l<3;l++)for(g=0;g<a;g++)for(d=0;d<c;d++)E=M[l][g][d],E!=null&&(this.minValues[l]>E&&(this.minValues[l]=E),this.maxValues[l]<E&&(this.maxValues[l]=E));for(l=0;l<3;l++)this.objectOffset[l]=.5*(this.minValues[l]+this.maxValues[l]);for(l=0;l<3;l++)for(g=0;g<a;g++)for(d=0;d<c;d++)E=M[l][g][d],E!=null&&(M[l][g][d]-=this.objectOffset[l]);var p=[pe(new Float32Array(a*c),[a,c]),pe(new Float32Array(a*c),[a,c]),pe(new Float32Array(a*c),[a,c])];for(l=0;l<3;l++)for(g=0;g<a;g++)for(d=0;d<c;d++)p[l].set(g,d,M[l][g][d]);M=[];var x={colormap:L,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!V.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:V.opacityscale,opacity:V.opacity},w=Xa(V);if(x.intensityBounds=[w.min,w.max],V.surfacecolor){var o=pe(new Float32Array(a*c),[a,c]);for(g=0;g<a;g++)for(d=0;d<c;d++)o.set(g,d,V.surfacecolor[d][g]);p.push(o)}else x.intensityBounds[0]*=F[2],x.intensityBounds[1]*=F[2];(ze<p[0].shape[0]||ze<p[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(p[0].shape[0],0),this.dataScaleY=this.estimateScale(p[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(p)),V.surfacecolor&&(x.intensity=p.pop());var v=[!0,!0,!0],u=["x","y","z"];for(l=0;l<3;++l){var f=V.contours[u[l]];v[l]=f.highlight,x.showContour[l]=f.show||f.highlight,x.showContour[l]&&(x.contourProject[l]=[f.project.x,f.project.y,f.project.z],f.show?(this.showContour[l]=!0,x.levels[l]=m[l],nt.highlightColor[l]=x.contourColor[l]=en(f.color),f.usecolormap?nt.highlightTint[l]=x.contourTint[l]=0:nt.highlightTint[l]=x.contourTint[l]=1,x.contourWidth[l]=f.width,this.contourStart[l]=f.start,this.contourEnd[l]=f.end,this.contourSize[l]=f.size):(this.showContour[l]=!1,this.contourStart[l]=null,this.contourEnd[l]=null,this.contourSize[l]=0),f.highlight&&(x.dynamicColor[l]=en(f.highlightcolor),x.dynamicWidth[l]=f.highlightwidth))}Ya(L)&&(x.vertexColor=!0),x.objectOffset=this.objectOffset,x.coords=p,nt.update(x),nt.visible=V.visible,nt.enableDynamic=v,nt.enableHighlight=v,nt.snapToData=!0,"lighting"in V&&(nt.ambientLight=V.lighting.ambient,nt.diffuseLight=V.lighting.diffuse,nt.specularLight=V.lighting.specular,nt.roughness=V.lighting.roughness,nt.fresnel=V.lighting.fresnel),"lightposition"in V&&(nt.lightPosition=[V.lightposition.x,V.lightposition.y,V.lightposition.z])};ee.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function eo(V,Z){var tt=V.glplot.gl,nt=Ua({gl:tt}),L=new Rn(V,nt,Z.uid);return nt._trace=L,L.update(Z),V.glplot.add(nt),L}var ro=eo,no={attributes:Fr,supplyDefaults:za.supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:Da,plot:ro,moduleType:"trace",name:"surface",basePlotModule:Zt,categories:["gl3d","2dMap","showLegend"],meta:{description:["The data the describes the coordinates of the surface is set in `z`.","Data in `z` should be a {2D array}.","Coordinates in `x` and `y` can either be 1D {arrays}","or {2D arrays} (e.g. to graph parametric surfaces).","If not provided in `x` and `y`, the x and y coordinates are assumed","to be linear starting at 0 with a unit step.","The color scale corresponds to the `z` values by default.","For custom color scales, use `surfacecolor` which should be a {2D array},","where its bounds can be controlled using `cmin` and `cmax`."].join(" ")}},io=no;const ao=Rr(io);var oo=Sr,pr=Tr.axisHoverFormat,so=Ue.hovertemplateAttrs,ae=Fr,nn=Ar,oe=Ce.extendFlat,In=oe({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:so({editType:"calc"}),xhoverformat:pr("x"),yhoverformat:pr("y"),zhoverformat:pr("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},oo("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:ae.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:oe({},ae.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:ae.contours.x.color,width:ae.contours.x.width,editType:"calc"},lightposition:{x:oe({},ae.lightposition.x,{dflt:1e5}),y:oe({},ae.lightposition.y,{dflt:1e5}),z:oe({},ae.lightposition.z,{dflt:0}),editType:"calc"},lighting:oe({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},ae.lighting),hoverinfo:oe({},nn.hoverinfo,{editType:"calc"}),showlegend:oe({},nn.showlegend,{dflt:!1})}),fo=xe,an=jt,ho=un,lo=In,uo=function(Z,tt,nt,L){function F(g,d){return an.coerce(Z,tt,lo,g,d)}function a(g){var d=g.map(function(E){var M=F(E);return M&&an.isArrayOrTypedArray(M)?M:null});return d.every(function(E){return E&&E.length===d[0].length})&&d}var c=a(["x","y","z"]);if(!c){tt.visible=!1;return}if(a(["i","j","k"]),tt.i&&(!tt.j||!tt.k)||tt.j&&(!tt.k||!tt.i)||tt.k&&(!tt.i||!tt.j)){tt.visible=!1;return}var m=fo.getComponentMethod("calendars","handleTraceDefaults");m(Z,tt,["x","y","z"],L),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(g){F(g)});var l=F("contour.show");l&&(F("contour.color"),F("contour.width")),"intensity"in Z?(F("intensity"),F("intensitymode"),ho(Z,tt,L,F,{prefix:"",cLetter:"c"})):(tt.showscale=!1,"facecolor"in Z?F("facecolor"):"vertexcolor"in Z?F("vertexcolor"):F("color",nt)),F("text"),F("hovertext"),F("hovertemplate"),F("xhoverformat"),F("yhoverformat"),F("zhoverformat"),tt._length=null},vo=vn,co=function(Z,tt){tt.intensity&&vo(Z,tt,{vals:tt.intensity,containerStr:""})},po=function(Z,tt,nt,L){L=L||Z.length;for(var F=new Array(L),a=0;a<L;a++)F[a]=[Z[a],tt[a],nt[a]];return F},go=$t.gl_mesh3d,yo=$t.delaunay_triangulate,xo=$t.alpha_shape,bo=$t.convex_hull,wo=Er.parseColorScale,mo=jt.isArrayOrTypedArray,mr=be,Eo=cn.extractOpts,on=po;function Ln(V,Z,tt){this.scene=V,this.uid=tt,this.mesh=Z,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var Or=Ln.prototype;Or.handlePick=function(V){if(V.object===this.mesh){var Z=V.index=V.data.index;V.data._cellCenter?V.traceCoordinate=V.data.dataCoordinate:V.traceCoordinate=[this.data.x[Z],this.data.y[Z],this.data.z[Z]];var tt=this.data.hovertext||this.data.text;return mo(tt)&&tt[Z]!==void 0?V.textLabel=tt[Z]:tt&&(V.textLabel=tt),!0}};function sn(V){for(var Z=[],tt=V.length,nt=0;nt<tt;nt++)Z[nt]=mr(V[nt]);return Z}function gr(V,Z,tt,nt){for(var L=[],F=Z.length,a=0;a<F;a++)L[a]=V.d2l(Z[a],0,nt)*tt;return L}function yr(V){for(var Z=[],tt=V.length,nt=0;nt<tt;nt++)Z[nt]=Math.round(V[nt]);return Z}function Mo(V,Z){for(var tt=["x","y","z"].indexOf(V),nt=[],L=Z.length,F=0;F<L;F++)nt[F]=[Z[F][(tt+1)%3],Z[F][(tt+2)%3]];return yo(nt)}function xr(V,Z){for(var tt=V.length,nt=0;nt<tt;nt++)if(V[nt]<=-.5||V[nt]>=Z-.5)return!1;return!0}Or.update=function(V){var Z=this.scene,tt=Z.fullSceneLayout;this.data=V;var nt=V.x.length,L=on(gr(tt.xaxis,V.x,Z.dataScale[0],V.xcalendar),gr(tt.yaxis,V.y,Z.dataScale[1],V.ycalendar),gr(tt.zaxis,V.z,Z.dataScale[2],V.zcalendar)),F;if(V.i&&V.j&&V.k){if(V.i.length!==V.j.length||V.j.length!==V.k.length||!xr(V.i,nt)||!xr(V.j,nt)||!xr(V.k,nt))return;F=on(yr(V.i),yr(V.j),yr(V.k))}else V.alphahull===0?F=bo(L):V.alphahull>0?F=xo(V.alphahull,L):F=Mo(V.delaunayaxis,L);var a={positions:L,cells:F,lightPosition:[V.lightposition.x,V.lightposition.y,V.lightposition.z],ambient:V.lighting.ambient,diffuse:V.lighting.diffuse,specular:V.lighting.specular,roughness:V.lighting.roughness,fresnel:V.lighting.fresnel,vertexNormalsEpsilon:V.lighting.vertexnormalsepsilon,faceNormalsEpsilon:V.lighting.facenormalsepsilon,opacity:V.opacity,contourEnable:V.contour.show,contourColor:mr(V.contour.color).slice(0,3),contourWidth:V.contour.width,useFacetNormals:V.flatshading};if(V.intensity){var c=Eo(V);this.color="#fff";var m=V.intensitymode;a[m+"Intensity"]=V.intensity,a[m+"IntensityBounds"]=[c.min,c.max],a.colormap=wo(V)}else V.vertexcolor?(this.color=V.vertexcolor[0],a.vertexColors=sn(V.vertexcolor)):V.facecolor?(this.color=V.facecolor[0],a.cellColors=sn(V.facecolor)):(this.color=V.color,a.meshColor=mr(V.color));this.mesh.update(a)};Or.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function To(V,Z){var tt=V.glplot.gl,nt=go({gl:tt}),L=new Ln(V,nt,Z.uid);return nt._trace=L,L.update(Z),V.glplot.add(nt),L}var Ao=To,So={attributes:In,supplyDefaults:uo,calc:co,colorbar:{min:"cmin",max:"cmax"},plot:Ao,moduleType:"trace",name:"mesh3d",basePlotModule:Zt,categories:["gl3d","showLegend"],meta:{description:["Draws sets of triangles with coordinates given by","three 1-dimensional arrays in `x`, `y`, `z` and","(1) a sets of `i`, `j`, `k` indices","(2) Delaunay triangulation or","(3) the Alpha-shape algorithm or","(4) the Convex-hull algorithm"].join(" ")}},_o=So;const Ro=Rr(_o);ni.register([Ra,ao,Ro]);export{ni as default};
